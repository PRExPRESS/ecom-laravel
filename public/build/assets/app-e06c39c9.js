var K_=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var AD=K_((Od,Un)=>{function Uw(s,e){return function(){return s.apply(e,arguments)}}const{toString:J_}=Object.prototype,{getPrototypeOf:ff}=Object,Ed=(s=>e=>{const t=J_.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ss=s=>(s=s.toLowerCase(),e=>Ed(e)===s),xd=s=>e=>typeof e===s,{isArray:No}=Array,Ql=xd("undefined");function Z_(s){return s!==null&&!Ql(s)&&s.constructor!==null&&!Ql(s.constructor)&&En(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Qw=ss("ArrayBuffer");function eS(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&Qw(s.buffer),e}const tS=xd("string"),En=xd("function"),zw=xd("number"),_d=s=>s!==null&&typeof s=="object",iS=s=>s===!0||s===!1,Rh=s=>{if(Ed(s)!=="object")return!1;const e=ff(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},nS=ss("Date"),sS=ss("File"),rS=ss("Blob"),aS=ss("FileList"),oS=s=>_d(s)&&En(s.pipe),lS=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||En(s.append)&&((e=Ed(s))==="formdata"||e==="object"&&En(s.toString)&&s.toString()==="[object FormData]"))},cS=ss("URLSearchParams"),[hS,dS,uS,pS]=["ReadableStream","Request","Response","Headers"].map(ss),mS=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yl(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let i,n;if(typeof s!="object"&&(s=[s]),No(s))for(i=0,n=s.length;i<n;i++)e.call(null,s[i],i,s);else{const r=t?Object.getOwnPropertyNames(s):Object.keys(s),a=r.length;let o;for(i=0;i<a;i++)o=r[i],e.call(null,s[o],o,s)}}function Hw(s,e){e=e.toLowerCase();const t=Object.keys(s);let i=t.length,n;for(;i-- >0;)if(n=t[i],e===n.toLowerCase())return n;return null}const Zr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Gw=s=>!Ql(s)&&s!==Zr;function Sm(){const{caseless:s}=Gw(this)&&this||{},e={},t=(i,n)=>{const r=s&&Hw(e,n)||n;Rh(e[r])&&Rh(i)?e[r]=Sm(e[r],i):Rh(i)?e[r]=Sm({},i):No(i)?e[r]=i.slice():e[r]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&Yl(arguments[i],t);return e}const fS=(s,e,t,{allOwnKeys:i}={})=>(Yl(e,(n,r)=>{t&&En(n)?s[r]=Uw(n,t):s[r]=n},{allOwnKeys:i}),s),gS=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),AS=(s,e,t,i)=>{s.prototype=Object.create(e.prototype,i),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},vS=(s,e,t,i)=>{let n,r,a;const o={};if(e=e||{},s==null)return e;do{for(n=Object.getOwnPropertyNames(s),r=n.length;r-- >0;)a=n[r],(!i||i(a,s,e))&&!o[a]&&(e[a]=s[a],o[a]=!0);s=t!==!1&&ff(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},yS=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const i=s.indexOf(e,t);return i!==-1&&i===t},wS=s=>{if(!s)return null;if(No(s))return s;let e=s.length;if(!zw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},bS=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&ff(Uint8Array)),ES=(s,e)=>{const i=(s&&s[Symbol.iterator]).call(s);let n;for(;(n=i.next())&&!n.done;){const r=n.value;e.call(s,r[0],r[1])}},xS=(s,e)=>{let t;const i=[];for(;(t=s.exec(e))!==null;)i.push(t);return i},_S=ss("HTMLFormElement"),SS=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,n){return i.toUpperCase()+n}),sA=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),CS=ss("RegExp"),Vw=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),i={};Yl(t,(n,r)=>{let a;(a=e(n,r,s))!==!1&&(i[r]=a||n)}),Object.defineProperties(s,i)},IS=s=>{Vw(s,(e,t)=>{if(En(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=s[t];if(En(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},MS=(s,e)=>{const t={},i=n=>{n.forEach(r=>{t[r]=!0})};return No(s)?i(s):i(String(s).split(e)),t},TS=()=>{},BS=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e,lu="abcdefghijklmnopqrstuvwxyz",rA="0123456789",$w={DIGIT:rA,ALPHA:lu,ALPHA_DIGIT:lu+lu.toUpperCase()+rA},RS=(s=16,e=$w.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;s--;)t+=e[Math.random()*i|0];return t};function LS(s){return!!(s&&En(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const DS=s=>{const e=new Array(10),t=(i,n)=>{if(_d(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[n]=i;const r=No(i)?[]:{};return Yl(i,(a,o)=>{const c=t(a,n+1);!Ql(c)&&(r[o]=c)}),e[n]=void 0,r}}return i};return t(s,0)},PS=ss("AsyncFunction"),NS=s=>s&&(_d(s)||En(s))&&En(s.then)&&En(s.catch),Ww=((s,e)=>s?setImmediate:e?((t,i)=>(Zr.addEventListener("message",({source:n,data:r})=>{n===Zr&&r===t&&i.length&&i.shift()()},!1),n=>{i.push(n),Zr.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",En(Zr.postMessage)),FS=typeof queueMicrotask<"u"?queueMicrotask.bind(Zr):typeof process<"u"&&process.nextTick||Ww,He={isArray:No,isArrayBuffer:Qw,isBuffer:Z_,isFormData:lS,isArrayBufferView:eS,isString:tS,isNumber:zw,isBoolean:iS,isObject:_d,isPlainObject:Rh,isReadableStream:hS,isRequest:dS,isResponse:uS,isHeaders:pS,isUndefined:Ql,isDate:nS,isFile:sS,isBlob:rS,isRegExp:CS,isFunction:En,isStream:oS,isURLSearchParams:cS,isTypedArray:bS,isFileList:aS,forEach:Yl,merge:Sm,extend:fS,trim:mS,stripBOM:gS,inherits:AS,toFlatObject:vS,kindOf:Ed,kindOfTest:ss,endsWith:yS,toArray:wS,forEachEntry:ES,matchAll:xS,isHTMLForm:_S,hasOwnProperty:sA,hasOwnProp:sA,reduceDescriptors:Vw,freezeMethods:IS,toObjectSet:MS,toCamelCase:SS,noop:TS,toFiniteNumber:BS,findKey:Hw,global:Zr,isContextDefined:Gw,ALPHABET:$w,generateString:RS,isSpecCompliantForm:LS,toJSONObject:DS,isAsyncFn:PS,isThenable:NS,setImmediate:Ww,asap:FS};function Ct(s,e,t,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),n&&(this.response=n,this.status=n.status?n.status:null)}He.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:He.toJSONObject(this.config),code:this.code,status:this.status}}});const qw=Ct.prototype,jw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{jw[s]={value:s}});Object.defineProperties(Ct,jw);Object.defineProperty(qw,"isAxiosError",{value:!0});Ct.from=(s,e,t,i,n,r)=>{const a=Object.create(qw);return He.toFlatObject(s,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ct.call(a,s.message,e,t,i,n),a.cause=s,a.name=s.name,r&&Object.assign(a,r),a};const kS=null;function Cm(s){return He.isPlainObject(s)||He.isArray(s)}function Xw(s){return He.endsWith(s,"[]")?s.slice(0,-2):s}function aA(s,e,t){return s?s.concat(e).map(function(n,r){return n=Xw(n),!t&&r?"["+n+"]":n}).join(t?".":""):e}function OS(s){return He.isArray(s)&&!s.some(Cm)}const US=He.toFlatObject(He,{},null,function(e){return/^is[A-Z]/.test(e)});function Sd(s,e,t){if(!He.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=He.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,b){return!He.isUndefined(b[E])});const i=t.metaTokens,n=t.visitor||d,r=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&He.isSpecCompliantForm(e);if(!He.isFunction(n))throw new TypeError("visitor must be a function");function h(y){if(y===null)return"";if(He.isDate(y))return y.toISOString();if(!c&&He.isBlob(y))throw new Ct("Blob is not supported. Use a Buffer instead.");return He.isArrayBuffer(y)||He.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,E,b){let C=y;if(y&&!b&&typeof y=="object"){if(He.endsWith(E,"{}"))E=i?E:E.slice(0,-2),y=JSON.stringify(y);else if(He.isArray(y)&&OS(y)||(He.isFileList(y)||He.endsWith(E,"[]"))&&(C=He.toArray(y)))return E=Xw(E),C.forEach(function(I,k){!(He.isUndefined(I)||I===null)&&e.append(a===!0?aA([E],k,r):a===null?E:E+"[]",h(I))}),!1}return Cm(y)?!0:(e.append(aA(b,E,r),h(y)),!1)}const u=[],m=Object.assign(US,{defaultVisitor:d,convertValue:h,isVisitable:Cm});function g(y,E){if(!He.isUndefined(y)){if(u.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));u.push(y),He.forEach(y,function(C,B){(!(He.isUndefined(C)||C===null)&&n.call(e,C,He.isString(B)?B.trim():B,E,m))===!0&&g(C,E?E.concat(B):[B])}),u.pop()}}if(!He.isObject(s))throw new TypeError("data must be an object");return g(s),e}function oA(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function gf(s,e){this._pairs=[],s&&Sd(s,this,e)}const Yw=gf.prototype;Yw.append=function(e,t){this._pairs.push([e,t])};Yw.toString=function(e){const t=e?function(i){return e.call(this,i,oA)}:oA;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function QS(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kw(s,e,t){if(!e)return s;const i=t&&t.encode||QS;He.isFunction(t)&&(t={serialize:t});const n=t&&t.serialize;let r;if(n?r=n(e,t):r=He.isURLSearchParams(e)?e.toString():new gf(e,t).toString(i),r){const a=s.indexOf("#");a!==-1&&(s=s.slice(0,a)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class zS{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){He.forEach(this.handlers,function(i){i!==null&&e(i)})}}const lA=zS,Jw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HS=typeof URLSearchParams<"u"?URLSearchParams:gf,GS=typeof FormData<"u"?FormData:null,VS=typeof Blob<"u"?Blob:null,$S={isBrowser:!0,classes:{URLSearchParams:HS,FormData:GS,Blob:VS},protocols:["http","https","file","blob","url","data"]},Af=typeof window<"u"&&typeof document<"u",Im=typeof navigator=="object"&&navigator||void 0,WS=Af&&(!Im||["ReactNative","NativeScript","NS"].indexOf(Im.product)<0),qS=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),jS=Af&&window.location.href||"http://localhost",XS=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Af,hasStandardBrowserEnv:WS,hasStandardBrowserWebWorkerEnv:qS,navigator:Im,origin:jS},Symbol.toStringTag,{value:"Module"})),Ji={...XS,...$S};function YS(s,e){return Sd(s,new Ji.classes.URLSearchParams,Object.assign({visitor:function(t,i,n,r){return Ji.isNode&&He.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function KS(s){return He.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function JS(s){const e={},t=Object.keys(s);let i;const n=t.length;let r;for(i=0;i<n;i++)r=t[i],e[r]=s[r];return e}function Zw(s){function e(t,i,n,r){let a=t[r++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=r>=t.length;return a=!a&&He.isArray(n)?n.length:a,c?(He.hasOwnProp(n,a)?n[a]=[n[a],i]:n[a]=i,!o):((!n[a]||!He.isObject(n[a]))&&(n[a]=[]),e(t,i,n[a],r)&&He.isArray(n[a])&&(n[a]=JS(n[a])),!o)}if(He.isFormData(s)&&He.isFunction(s.entries)){const t={};return He.forEachEntry(s,(i,n)=>{e(KS(i),n,t,0)}),t}return null}function ZS(s,e,t){if(He.isString(s))try{return(e||JSON.parse)(s),He.trim(s)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(s)}const vf={transitional:Jw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,r=He.isObject(e);if(r&&He.isHTMLForm(e)&&(e=new FormData(e)),He.isFormData(e))return n?JSON.stringify(Zw(e)):e;if(He.isArrayBuffer(e)||He.isBuffer(e)||He.isStream(e)||He.isFile(e)||He.isBlob(e)||He.isReadableStream(e))return e;if(He.isArrayBufferView(e))return e.buffer;if(He.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return YS(e,this.formSerializer).toString();if((o=He.isFileList(e))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Sd(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),ZS(e)):e}],transformResponse:[function(e){const t=this.transitional||vf.transitional,i=t&&t.forcedJSONParsing,n=this.responseType==="json";if(He.isResponse(e)||He.isReadableStream(e))return e;if(e&&He.isString(e)&&(i&&!this.responseType||n)){const a=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Ct.from(o,Ct.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ji.classes.FormData,Blob:Ji.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};He.forEach(["delete","get","head","post","put","patch"],s=>{vf.headers[s]={}});const yf=vf,eC=He.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tC=s=>{const e={};let t,i,n;return s&&s.split(`
`).forEach(function(a){n=a.indexOf(":"),t=a.substring(0,n).trim().toLowerCase(),i=a.substring(n+1).trim(),!(!t||e[t]&&eC[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},cA=Symbol("internals");function Wo(s){return s&&String(s).trim().toLowerCase()}function Lh(s){return s===!1||s==null?s:He.isArray(s)?s.map(Lh):String(s)}function iC(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(s);)e[i[1]]=i[2];return e}const nC=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function cu(s,e,t,i,n){if(He.isFunction(i))return i.call(this,e,t);if(n&&(e=t),!!He.isString(e)){if(He.isString(i))return e.indexOf(i)!==-1;if(He.isRegExp(i))return i.test(e)}}function sC(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function rC(s,e){const t=He.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(s,i+t,{value:function(n,r,a){return this[i].call(this,e,n,r,a)},configurable:!0})})}class Cd{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function r(o,c,h){const d=Wo(c);if(!d)throw new Error("header name must be a non-empty string");const u=He.findKey(n,d);(!u||n[u]===void 0||h===!0||h===void 0&&n[u]!==!1)&&(n[u||c]=Lh(o))}const a=(o,c)=>He.forEach(o,(h,d)=>r(h,d,c));if(He.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(He.isString(e)&&(e=e.trim())&&!nC(e))a(tC(e),t);else if(He.isHeaders(e))for(const[o,c]of e.entries())r(c,o,i);else e!=null&&r(t,e,i);return this}get(e,t){if(e=Wo(e),e){const i=He.findKey(this,e);if(i){const n=this[i];if(!t)return n;if(t===!0)return iC(n);if(He.isFunction(t))return t.call(this,n,i);if(He.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Wo(e),e){const i=He.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||cu(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let n=!1;function r(a){if(a=Wo(a),a){const o=He.findKey(i,a);o&&(!t||cu(i,i[o],o,t))&&(delete i[o],n=!0)}}return He.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const r=t[i];(!e||cu(this,this[r],r,e,!0))&&(delete this[r],n=!0)}return n}normalize(e){const t=this,i={};return He.forEach(this,(n,r)=>{const a=He.findKey(i,r);if(a){t[a]=Lh(n),delete t[r];return}const o=e?sC(r):String(r).trim();o!==r&&delete t[r],t[o]=Lh(n),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return He.forEach(this,(i,n)=>{i!=null&&i!==!1&&(t[n]=e&&He.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(n=>i.set(n)),i}static accessor(e){const i=(this[cA]=this[cA]={accessors:{}}).accessors,n=this.prototype;function r(a){const o=Wo(a);i[o]||(rC(n,a),i[o]=!0)}return He.isArray(e)?e.forEach(r):r(e),this}}Cd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);He.reduceDescriptors(Cd.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(i){this[t]=i}}});He.freezeMethods(Cd);const es=Cd;function hu(s,e){const t=this||yf,i=e||t,n=es.from(i.headers);let r=i.data;return He.forEach(s,function(o){r=o.call(t,r,n.normalize(),e?e.status:void 0)}),n.normalize(),r}function eb(s){return!!(s&&s.__CANCEL__)}function Fo(s,e,t){Ct.call(this,s??"canceled",Ct.ERR_CANCELED,e,t),this.name="CanceledError"}He.inherits(Fo,Ct,{__CANCEL__:!0});function tb(s,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?s(t):e(new Ct("Request failed with status code "+t.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function aC(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function oC(s,e){s=s||10;const t=new Array(s),i=new Array(s);let n=0,r=0,a;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),d=i[r];a||(a=h),t[n]=c,i[n]=h;let u=r,m=0;for(;u!==n;)m+=t[u++],u=u%s;if(n=(n+1)%s,n===r&&(r=(r+1)%s),h-a<e)return;const g=d&&h-d;return g?Math.round(m*1e3/g):void 0}}function lC(s,e){let t=0,i=1e3/e,n,r;const a=(h,d=Date.now())=>{t=d,n=null,r&&(clearTimeout(r),r=null),s.apply(null,h)};return[(...h)=>{const d=Date.now(),u=d-t;u>=i?a(h,d):(n=h,r||(r=setTimeout(()=>{r=null,a(n)},i-u)))},()=>n&&a(n)]}const td=(s,e,t=3)=>{let i=0;const n=oC(50,250);return lC(r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,c=a-i,h=n(c),d=a<=o;i=a;const u={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:h||void 0,estimated:h&&o&&d?(o-a)/h:void 0,event:r,lengthComputable:o!=null,[e?"download":"upload"]:!0};s(u)},t)},hA=(s,e)=>{const t=s!=null;return[i=>e[0]({lengthComputable:t,total:s,loaded:i}),e[1]]},dA=s=>(...e)=>He.asap(()=>s(...e)),cC=Ji.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,Ji.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(Ji.origin),Ji.navigator&&/(msie|trident)/i.test(Ji.navigator.userAgent)):()=>!0,hC=Ji.hasStandardBrowserEnv?{write(s,e,t,i,n,r){const a=[s+"="+encodeURIComponent(e)];He.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),He.isString(i)&&a.push("path="+i),He.isString(n)&&a.push("domain="+n),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(s){const e=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dC(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function uC(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function ib(s,e){return s&&!dC(e)?uC(s,e):e}const uA=s=>s instanceof es?{...s}:s;function aa(s,e){e=e||{};const t={};function i(h,d,u,m){return He.isPlainObject(h)&&He.isPlainObject(d)?He.merge.call({caseless:m},h,d):He.isPlainObject(d)?He.merge({},d):He.isArray(d)?d.slice():d}function n(h,d,u,m){if(He.isUndefined(d)){if(!He.isUndefined(h))return i(void 0,h,u,m)}else return i(h,d,u,m)}function r(h,d){if(!He.isUndefined(d))return i(void 0,d)}function a(h,d){if(He.isUndefined(d)){if(!He.isUndefined(h))return i(void 0,h)}else return i(void 0,d)}function o(h,d,u){if(u in e)return i(h,d);if(u in s)return i(void 0,h)}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(h,d,u)=>n(uA(h),uA(d),u,!0)};return He.forEach(Object.keys(Object.assign({},s,e)),function(d){const u=c[d]||n,m=u(s[d],e[d],d);He.isUndefined(m)&&u!==o||(t[d]=m)}),t}const nb=s=>{const e=aa({},s);let{data:t,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:r,headers:a,auth:o}=e;e.headers=a=es.from(a),e.url=Kw(ib(e.baseURL,e.url),s.params,s.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(He.isFormData(t)){if(Ji.hasStandardBrowserEnv||Ji.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[h,...d]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...d].join("; "))}}if(Ji.hasStandardBrowserEnv&&(i&&He.isFunction(i)&&(i=i(e)),i||i!==!1&&cC(e.url))){const h=n&&r&&hC.read(r);h&&a.set(n,h)}return e},pC=typeof XMLHttpRequest<"u",mC=pC&&function(s){return new Promise(function(t,i){const n=nb(s);let r=n.data;const a=es.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:h}=n,d,u,m,g,y;function E(){g&&g(),y&&y(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(n.method.toUpperCase(),n.url,!0),b.timeout=n.timeout;function C(){if(!b)return;const I=es.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),Q={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:I,config:s,request:b};tb(function(U){t(U),E()},function(U){i(U),E()},Q),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(i(new Ct("Request aborted",Ct.ECONNABORTED,s,b)),b=null)},b.onerror=function(){i(new Ct("Network Error",Ct.ERR_NETWORK,s,b)),b=null},b.ontimeout=function(){let k=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const Q=n.transitional||Jw;n.timeoutErrorMessage&&(k=n.timeoutErrorMessage),i(new Ct(k,Q.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,s,b)),b=null},r===void 0&&a.setContentType(null),"setRequestHeader"in b&&He.forEach(a.toJSON(),function(k,Q){b.setRequestHeader(Q,k)}),He.isUndefined(n.withCredentials)||(b.withCredentials=!!n.withCredentials),o&&o!=="json"&&(b.responseType=n.responseType),h&&([m,y]=td(h,!0),b.addEventListener("progress",m)),c&&b.upload&&([u,g]=td(c),b.upload.addEventListener("progress",u),b.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(d=I=>{b&&(i(!I||I.type?new Fo(null,s,b):I),b.abort(),b=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const B=aC(n.url);if(B&&Ji.protocols.indexOf(B)===-1){i(new Ct("Unsupported protocol "+B+":",Ct.ERR_BAD_REQUEST,s));return}b.send(r||null)})},fC=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let i=new AbortController,n;const r=function(h){if(!n){n=!0,o();const d=h instanceof Error?h:this.reason;i.abort(d instanceof Ct?d:new Fo(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,r(new Ct(`timeout ${e} of ms exceeded`,Ct.ETIMEDOUT))},e);const o=()=>{s&&(a&&clearTimeout(a),a=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(r):h.removeEventListener("abort",r)}),s=null)};s.forEach(h=>h.addEventListener("abort",r));const{signal:c}=i;return c.unsubscribe=()=>He.asap(o),c}},gC=fC,AC=function*(s,e){let t=s.byteLength;if(!e||t<e){yield s;return}let i=0,n;for(;i<t;)n=i+e,yield s.slice(i,n),i=n},vC=async function*(s,e){for await(const t of yC(s))yield*AC(t,e)},yC=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},pA=(s,e,t,i)=>{const n=vC(s,e);let r=0,a,o=c=>{a||(a=!0,i&&i(c))};return new ReadableStream({async pull(c){try{const{done:h,value:d}=await n.next();if(h){o(),c.close();return}let u=d.byteLength;if(t){let m=r+=u;t(m)}c.enqueue(new Uint8Array(d))}catch(h){throw o(h),h}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},Id=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sb=Id&&typeof ReadableStream=="function",wC=Id&&(typeof TextEncoder=="function"?(s=>e=>s.encode(e))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),rb=(s,...e)=>{try{return!!s(...e)}catch{return!1}},bC=sb&&rb(()=>{let s=!1;const e=new Request(Ji.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!e}),mA=64*1024,Mm=sb&&rb(()=>He.isReadableStream(new Response("").body)),id={stream:Mm&&(s=>s.body)};Id&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!id[e]&&(id[e]=He.isFunction(s[e])?t=>t[e]():(t,i)=>{throw new Ct(`Response type '${e}' is not supported`,Ct.ERR_NOT_SUPPORT,i)})})})(new Response);const EC=async s=>{if(s==null)return 0;if(He.isBlob(s))return s.size;if(He.isSpecCompliantForm(s))return(await new Request(Ji.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(He.isArrayBufferView(s)||He.isArrayBuffer(s))return s.byteLength;if(He.isURLSearchParams(s)&&(s=s+""),He.isString(s))return(await wC(s)).byteLength},xC=async(s,e)=>{const t=He.toFiniteNumber(s.getContentLength());return t??EC(e)},_C=Id&&(async s=>{let{url:e,method:t,data:i,signal:n,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:c,responseType:h,headers:d,withCredentials:u="same-origin",fetchOptions:m}=nb(s);h=h?(h+"").toLowerCase():"text";let g=gC([n,r&&r.toAbortSignal()],a),y;const E=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let b;try{if(c&&bC&&t!=="get"&&t!=="head"&&(b=await xC(d,i))!==0){let Q=new Request(e,{method:"POST",body:i,duplex:"half"}),G;if(He.isFormData(i)&&(G=Q.headers.get("content-type"))&&d.setContentType(G),Q.body){const[U,te]=hA(b,td(dA(c)));i=pA(Q.body,mA,U,te)}}He.isString(u)||(u=u?"include":"omit");const C="credentials"in Request.prototype;y=new Request(e,{...m,signal:g,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:C?u:void 0});let B=await fetch(y);const I=Mm&&(h==="stream"||h==="response");if(Mm&&(o||I&&E)){const Q={};["status","statusText","headers"].forEach(ue=>{Q[ue]=B[ue]});const G=He.toFiniteNumber(B.headers.get("content-length")),[U,te]=o&&hA(G,td(dA(o),!0))||[];B=new Response(pA(B.body,mA,U,()=>{te&&te(),E&&E()}),Q)}h=h||"text";let k=await id[He.findKey(id,h)||"text"](B,s);return!I&&E&&E(),await new Promise((Q,G)=>{tb(Q,G,{data:k,headers:es.from(B.headers),status:B.status,statusText:B.statusText,config:s,request:y})})}catch(C){throw E&&E(),C&&C.name==="TypeError"&&/fetch/i.test(C.message)?Object.assign(new Ct("Network Error",Ct.ERR_NETWORK,s,y),{cause:C.cause||C}):Ct.from(C,C&&C.code,s,y)}}),Tm={http:kS,xhr:mC,fetch:_C};He.forEach(Tm,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const fA=s=>`- ${s}`,SC=s=>He.isFunction(s)||s===null||s===!1,ab={getAdapter:s=>{s=He.isArray(s)?s:[s];const{length:e}=s;let t,i;const n={};for(let r=0;r<e;r++){t=s[r];let a;if(i=t,!SC(t)&&(i=Tm[(a=String(t)).toLowerCase()],i===void 0))throw new Ct(`Unknown adapter '${a}'`);if(i)break;n[a||"#"+r]=i}if(!i){const r=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(fA).join(`
`):" "+fA(r[0]):"as no adapter specified";throw new Ct("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Tm};function du(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Fo(null,s)}function gA(s){return du(s),s.headers=es.from(s.headers),s.data=hu.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),ab.getAdapter(s.adapter||yf.adapter)(s).then(function(i){return du(s),i.data=hu.call(s,s.transformResponse,i),i.headers=es.from(i.headers),i},function(i){return eb(i)||(du(s),i&&i.response&&(i.response.data=hu.call(s,s.transformResponse,i.response),i.response.headers=es.from(i.response.headers))),Promise.reject(i)})}const ob="1.7.8",Md={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{Md[s]=function(i){return typeof i===s||"a"+(e<1?"n ":" ")+s}});const AA={};Md.transitional=function(e,t,i){function n(r,a){return"[Axios v"+ob+"] Transitional option '"+r+"'"+a+(i?". "+i:"")}return(r,a,o)=>{if(e===!1)throw new Ct(n(a," has been removed"+(t?" in "+t:"")),Ct.ERR_DEPRECATED);return t&&!AA[a]&&(AA[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,o):!0}};Md.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function CC(s,e,t){if(typeof s!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);const i=Object.keys(s);let n=i.length;for(;n-- >0;){const r=i[n],a=e[r];if(a){const o=s[r],c=o===void 0||a(o,r,s);if(c!==!0)throw new Ct("option "+r+" must be "+c,Ct.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ct("Unknown option "+r,Ct.ERR_BAD_OPTION)}}const Dh={assertOptions:CC,validators:Md},cs=Dh.validators;class nd{constructor(e){this.defaults=e,this.interceptors={request:new lA,response:new lA}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const r=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=aa(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:r}=t;i!==void 0&&Dh.assertOptions(i,{silentJSONParsing:cs.transitional(cs.boolean),forcedJSONParsing:cs.transitional(cs.boolean),clarifyTimeoutError:cs.transitional(cs.boolean)},!1),n!=null&&(He.isFunction(n)?t.paramsSerializer={serialize:n}:Dh.assertOptions(n,{encode:cs.function,serialize:cs.function},!0)),Dh.assertOptions(t,{baseUrl:cs.spelling("baseURL"),withXsrfToken:cs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&He.merge(r.common,r[t.method]);r&&He.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),t.headers=es.concat(a,r);const o=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(c=c&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});const h=[];this.interceptors.response.forEach(function(E){h.push(E.fulfilled,E.rejected)});let d,u=0,m;if(!c){const y=[gA.bind(this),void 0];for(y.unshift.apply(y,o),y.push.apply(y,h),m=y.length,d=Promise.resolve(t);u<m;)d=d.then(y[u++],y[u++]);return d}m=o.length;let g=t;for(u=0;u<m;){const y=o[u++],E=o[u++];try{g=y(g)}catch(b){E.call(this,b);break}}try{d=gA.call(this,g)}catch(y){return Promise.reject(y)}for(u=0,m=h.length;u<m;)d=d.then(h[u++],h[u++]);return d}getUri(e){e=aa(this.defaults,e);const t=ib(e.baseURL,e.url);return Kw(t,e.params,e.paramsSerializer)}}He.forEach(["delete","get","head","options"],function(e){nd.prototype[e]=function(t,i){return this.request(aa(i||{},{method:e,url:t,data:(i||{}).data}))}});He.forEach(["post","put","patch"],function(e){function t(i){return function(r,a,o){return this.request(aa(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}nd.prototype[e]=t(),nd.prototype[e+"Form"]=t(!0)});const Ph=nd;class wf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(n=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](n);i._listeners=null}),this.promise.then=n=>{let r;const a=new Promise(o=>{i.subscribe(o),r=o}).then(n);return a.cancel=function(){i.unsubscribe(r)},a},e(function(r,a,o){i.reason||(i.reason=new Fo(r,a,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new wf(function(n){e=n}),cancel:e}}}const IC=wf;function MC(s){return function(t){return s.apply(null,t)}}function TC(s){return He.isObject(s)&&s.isAxiosError===!0}const Bm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bm).forEach(([s,e])=>{Bm[e]=s});const BC=Bm;function lb(s){const e=new Ph(s),t=Uw(Ph.prototype.request,e);return He.extend(t,Ph.prototype,e,{allOwnKeys:!0}),He.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return lb(aa(s,n))},t}const Ci=lb(yf);Ci.Axios=Ph;Ci.CanceledError=Fo;Ci.CancelToken=IC;Ci.isCancel=eb;Ci.VERSION=ob;Ci.toFormData=Sd;Ci.AxiosError=Ct;Ci.Cancel=Ci.CanceledError;Ci.all=function(e){return Promise.all(e)};Ci.spread=MC;Ci.isAxiosError=TC;Ci.mergeConfig=aa;Ci.AxiosHeaders=es;Ci.formToJSON=s=>Zw(He.isHTMLForm(s)?new FormData(s):s);Ci.getAdapter=ab.getAdapter;Ci.HttpStatusCode=BC;Ci.default=Ci;const RC=Ci;window.axios=RC;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";(function(s,e){s===void 0&&window!==void 0&&(s=window),typeof define=="function"&&define.amd?define(["jquery"],function(t){return e(t)}):typeof Un=="object"&&Un.exports?Un.exports=e(require("jquery")):e(s.jQuery)})(globalThis,function(s){(function(e){var t=["sanitize","whiteList","sanitizeFn"],i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n={"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,o=["title","placeholder"];function c(p,l){var f=p.nodeName.toLowerCase();if(e.inArray(f,l)!==-1)return e.inArray(f,i)===-1||!!(p.nodeValue.match(r)||p.nodeValue.match(a));for(var v=e(l).filter(function(T,P){return P instanceof RegExp}),x=0,w=v.length;x<w;x++)if(f.match(v[x]))return!0;return!1}function h(p,l,f){if(f&&typeof f=="function")return f(p);for(var v=Object.keys(l),x=0,w=p.length;x<w;x++)for(var T=p[x].querySelectorAll("*"),P=0,_=T.length;P<_;P++){var R=T[P],F=R.nodeName.toLowerCase();if(v.indexOf(F)!==-1)for(var S=[].slice.call(R.attributes),D=[].concat(l["*"]||[],l[F]||[]),H=0,X=S.length;H<X;H++){var q=S[H];c(q,D)||R.removeAttribute(q.nodeName)}else R.parentNode.removeChild(R)}}function d(p){var l,f={};return o.forEach(function(v){(l=p.attr(v))&&(f[v]=l)}),!f.placeholder&&f.title&&(f.placeholder=f.title),f}"classList"in document.createElement("_")||function(p){if("Element"in p){var l="classList",f="prototype",v=p.Element[f],x=Object,w=function(){var P=e(this);return{add:function(_){return _=Array.prototype.slice.call(arguments).join(" "),P.addClass(_)},remove:function(_){return _=Array.prototype.slice.call(arguments).join(" "),P.removeClass(_)},toggle:function(_,R){return P.toggleClass(_,R)},contains:function(_){return P.hasClass(_)}}};if(x.defineProperty){var T={get:w,enumerable:!0,configurable:!0};try{x.defineProperty(v,l,T)}catch(P){P.number!==void 0&&P.number!==-2146823252||(T.enumerable=!1,x.defineProperty(v,l,T))}}else x[f].__defineGetter__&&v.__defineGetter__(l,w)}}(window);var u,m=document.createElement("_");if(m.classList.add("c1","c2"),!m.classList.contains("c2")){var g=DOMTokenList.prototype.add,y=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,g.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,y.bind(this))}}if(m.classList.toggle("c3",!1),m.classList.contains("c3")){var E=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(p,l){return 1 in arguments&&!this.contains(p)==!l?l:E.call(this,p)}}function b(p){if(this==null)throw new TypeError;var l=String(this);if(p&&u.call(p)=="[object RegExp]")throw new TypeError;var f=l.length,v=String(p),x=v.length,w=1<arguments.length?arguments[1]:void 0,T=w?Number(w):0;T!=T&&(T=0);var P=Math.min(Math.max(T,0),f);if(f<x+P)return!1;for(var _=-1;++_<x;)if(l.charCodeAt(P+_)!=v.charCodeAt(_))return!1;return!0}function C(){var p=this.selectpicker.main.data.filter(function(f){return!!f.selected&&(!this.options.hideDisabled||!f.disabled)},this);if(this.options.source.data&&!this.multiple&&1<p.length){for(var l=0;l<p.length-1;l++)p[l].selected=!1;p=[p[p.length-1]]}return p}function B(p){for(var l,f=[],v=p||C.call(this),x=0,w=v.length;x<w;x++)(l=v[x]).disabled||f.push(l.value===void 0?l.text:l.value);return this.multiple?f:f.length?f[0]:null}m=null,String.prototype.startsWith||(u={}.toString,Object.defineProperty?Object.defineProperty(String.prototype,"startsWith",{value:b,configurable:!0,writable:!0}):String.prototype.startsWith=b);var I={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(p,l){return l&&!I.useDefault&&e(p).data("selected",!0),I._set.apply(this,arguments)};var k=null,Q=function(){try{return new Event("change"),!0}catch{return!1}}();function G(p,l,f,v){for(var x=["display","subtext","tokens"],w=!1,T=0;T<x.length;T++){var P=x[T],_=p[P];if(_&&(_=_.toString(),P==="display"&&(_=_.replace(/<[^>]+>/g,"")),v&&(_=he(_)),_=_.toUpperCase(),w=typeof f=="function"?f(_,l):f==="contains"?0<=_.indexOf(l):_.startsWith(l)))break}return w}function U(p){return parseInt(p,10)||0}e.fn.triggerNative=function(p){var l,f=this[0];f.dispatchEvent&&(Q?l=new Event(p,{bubbles:!0}):(l=document.createEvent("Event")).initEvent(p,!0,!1),f.dispatchEvent(l))};var te={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pe=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function ce(p){return te[p]}function he(p){return(p=p.toString())&&p.replace(ue,ce).replace(pe,"")}var Me,De,Qe,Ee,ke=(Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},De="(?:"+Object.keys(Me).join("|")+")",Qe=RegExp(De),Ee=RegExp(De,"g"),function(p){return p=p==null?"":""+p,Qe.test(p)?p.replace(Ee,ee):p});function ee(p){return Me[p]}var re={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},ye=27,me=13,V=32,z=9,J=38,ae=40,Z=window.Dropdown||bootstrap.Dropdown;function Se(){var p;try{p=e.fn.dropdown.Constructor.VERSION}catch{p=Z.VERSION}return p}var Ie={success:!1,major:"3"};try{Ie.full=(Se()||"").split(" ")[0].split("."),Ie.major=Ie.full[0],Ie.success=!0}catch{}var Oe=0,K=".bs.select",L={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},oe={MENU:"."+L.MENU,DATA_TOGGLE:'data-toggle="dropdown"'},ne={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment(),option:document.createElement("option")};ne.selectedOption=ne.option.cloneNode(!1),ne.selectedOption.setAttribute("selected",!0),ne.noResults=ne.li.cloneNode(!1),ne.noResults.className="no-results",ne.a.setAttribute("role","option"),ne.a.className="dropdown-item",ne.subtext.className="text-muted",ne.text=ne.span.cloneNode(!1),ne.text.className="text",ne.checkMark=ne.span.cloneNode(!1);var Le=new RegExp(J+"|"+ae),fe=new RegExp("^"+z+"$|"+ye),Re={li:function(p,l,f){var v=ne.li.cloneNode(!1);return p&&(p.nodeType===1||p.nodeType===11?v.appendChild(p):v.innerHTML=p),l!==void 0&&l!==""&&(v.className=l),f!=null&&v.classList.add("optgroup-"+f),v},a:function(p,l,f){var v=ne.a.cloneNode(!0);return p&&(p.nodeType===11?v.appendChild(p):v.insertAdjacentHTML("beforeend",p)),l!==void 0&&l!==""&&v.classList.add.apply(v.classList,l.split(/\s+/)),f&&v.setAttribute("style",f),v},text:function(p,l){var f,v,x=ne.text.cloneNode(!1);if(p.content)x.innerHTML=p.content;else{if(x.textContent=p.text,p.icon){var w=ne.whitespace.cloneNode(!1);(v=(l===!0?ne.i:ne.span).cloneNode(!1)).className=this.options.iconBase+" "+p.icon,ne.fragment.appendChild(v),ne.fragment.appendChild(w)}p.subtext&&((f=ne.subtext.cloneNode(!1)).textContent=p.subtext,x.appendChild(f))}if(l===!0)for(;0<x.childNodes.length;)ne.fragment.appendChild(x.childNodes[0]);else ne.fragment.appendChild(x);return ne.fragment},label:function(p){var l,f,v=ne.text.cloneNode(!1);if(v.innerHTML=p.display,p.icon){var x=ne.whitespace.cloneNode(!1);(f=ne.span.cloneNode(!1)).className=this.options.iconBase+" "+p.icon,ne.fragment.appendChild(f),ne.fragment.appendChild(x)}return p.subtext&&((l=ne.subtext.cloneNode(!1)).textContent=p.subtext,v.appendChild(l)),ne.fragment.appendChild(v),ne.fragment}},Je={fromOption:function(p,l){var f;switch(l){case"divider":f=p.getAttribute("data-divider")==="true";break;case"text":f=p.textContent;break;case"label":f=p.label;break;case"style":f=p.style.cssText;break;case"content":case"tokens":case"subtext":case"icon":f=p.getAttribute("data-"+l)}return f},fromDataSource:function(p,l){var f;switch(l){case"text":case"label":f=p.text||p.value||"";break;case"divider":case"style":case"content":case"tokens":case"subtext":case"icon":f=p[l]}return f}};function Xe(p,l){p.length||(ne.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+ke(l)+'"'),this.$menuInner[0].firstChild.appendChild(ne.noResults))}function st(p){return!(p.hidden||this.options.hideDisabled&&p.disabled)}var Ve=function(p,l){var f=this;I.useDefault||(e.valHooks.select.set=I._set,I.useDefault=!0),this.$element=e(p),this.$newElement=null,this.$button=null,this.$menu=null,this.options=l,this.selectpicker={main:{optionQueue:ne.fragment.cloneNode(!1)},search:{},current:{},view:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){f.selectpicker.keydown.keyHistory=""},800)}}}},this.sizeInfo={};var v=this.options.windowPadding;typeof v=="number"&&(this.options.windowPadding=[v,v,v,v]),this.val=Ve.prototype.val,this.render=Ve.prototype.render,this.refresh=Ve.prototype.refresh,this.setStyle=Ve.prototype.setStyle,this.selectAll=Ve.prototype.selectAll,this.deselectAll=Ve.prototype.deselectAll,this.destroy=Ve.prototype.destroy,this.remove=Ve.prototype.remove,this.show=Ve.prototype.show,this.hide=Ve.prototype.hide,this.init()};function rt(p){var l,f=arguments,v=p;if([].shift.apply(f),!Ie.success){try{Ie.full=(Se()||"").split(" ")[0].split(".")}catch(P){Ve.BootstrapVersion?Ie.full=Ve.BootstrapVersion.split(" ")[0].split("."):(Ie.full=[Ie.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",P))}Ie.major=Ie.full[0],Ie.success=!0}if("4"<=Ie.major){var x=[];Ve.DEFAULTS.style===L.BUTTONCLASS&&x.push({name:"style",className:"BUTTONCLASS"}),Ve.DEFAULTS.iconBase===L.ICONBASE&&x.push({name:"iconBase",className:"ICONBASE"}),Ve.DEFAULTS.tickIcon===L.TICKICON&&x.push({name:"tickIcon",className:"TICKICON"}),L.DIVIDER="dropdown-divider",L.SHOW="show",L.BUTTONCLASS="btn-light",L.POPOVERHEADER="popover-header",L.ICONBASE="",L.TICKICON="bs-ok-default";for(var w=0;w<x.length;w++)p=x[w],Ve.DEFAULTS[p.name]=L[p.className]}"4"<Ie.major&&(oe.DATA_TOGGLE='data-bs-toggle="dropdown"');var T=this.each(function(){var P=e(this);if(P.is("select")){var _=P.data("selectpicker"),R=typeof v=="object"&&v;if(R.title&&(R.placeholder=R.title),_){if(R)for(var F in R)Object.prototype.hasOwnProperty.call(R,F)&&(_.options[F]=R[F])}else{var S=P.data();for(var D in S)Object.prototype.hasOwnProperty.call(S,D)&&e.inArray(D,t)!==-1&&delete S[D];var H=e.extend({},Ve.DEFAULTS,e.fn.selectpicker.defaults||{},d(P),S,R);H.template=e.extend({},Ve.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},S.template,R.template),P.data("selectpicker",_=new Ve(this,H))}typeof v=="string"&&(l=_[v]instanceof Function?_[v].apply(_,f):_.options[v])}});return l!==void 0?l:T}Ve.VERSION="1.14.0-beta2",Ve.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(p,l){return p==1?"{0} item selected":"{0} items selected"},maxOptionsText:function(p,l){return[p==1?"Limit reached ({n} item max)":"Limit reached ({n} items max)",l==1?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",source:{},chunkSize:40,doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:L.BUTTONCLASS,size:"auto",title:null,placeholder:null,allowClear:!1,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:L.ICONBASE,tickIcon:L.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:n},Ve.prototype={constructor:Ve,init:function(){var p=this,l=this.$element.attr("id"),f=this.$element[0],v=f.form;Oe++,this.selectId="bs-select-"+Oe,f.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),f.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),v&&f.form===null&&(v.id||(v.id="form-"+this.selectId),f.setAttribute("form",v.id)),this.$button=this.$newElement.children("button"),this.options.allowClear&&(this.$clearButton=this.$button.children(".bs-select-clear-selected")),this.$menu=this.$newElement.children(oe.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),f.classList.remove("bs-select-hidden"),this.fetchData(function(){p.render(!0),p.buildList(),requestAnimationFrame(function(){p.$element.trigger("loaded"+K)})}),this.fetchData(function(){p.render(!0),p.buildList(),requestAnimationFrame(function(){p.$element.trigger("loaded"+K)})}),this.options.dropdownAlignRight===!0&&this.$menu[0].classList.add(L.MENURIGHT),l!==void 0&&this.$button.attr("data-id",l),this.checkDisabled(),this.clickListener(),4<Ie.major&&(this.dropdown=new Z(this.$button[0])),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+K,function(){if(p.isVirtual()){var x=p.$menuInner[0],w=x.firstChild.cloneNode(!1);x.replaceChild(w,x.firstChild),x.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(x){p.$element.trigger("hide"+K,x)},"hidden.bs.dropdown":function(x){p.$element.trigger("hidden"+K,x)},"show.bs.dropdown":function(x){p.$element.trigger("show"+K,x)},"shown.bs.dropdown":function(x){p.$element.trigger("shown"+K,x)}}),f.hasAttribute("required")&&this.$element.on("invalid"+K,function(){p.$button[0].classList.add("bs-invalid"),p.$element.on("shown"+K+".invalid",function(){p.$element.val(p.$element.val()).off("shown"+K+".invalid")}).on("rendered"+K,function(){this.validity.valid&&p.$button[0].classList.remove("bs-invalid"),p.$element.off("rendered"+K)}),p.$button.on("blur"+K,function(){p.$element.trigger("focus").trigger("blur"),p.$button.off("blur"+K)})}),v&&e(v).on("reset"+K,function(){requestAnimationFrame(function(){p.render()})})},createDropdown:function(){var p=this.multiple||this.options.showTick?" show-tick":"",l=this.multiple?' aria-multiselectable="true"':"",f="",v=this.autofocus?" autofocus":"";Ie.major<4&&this.$element.parent().hasClass("input-group")&&(f=" input-group-btn");var x,w="",T="",P="",_="",R="";return this.options.header&&(w='<div class="'+L.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(T='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(this.options.liveSearchPlaceholder===null?"":' placeholder="'+ke(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(P='<div class="bs-actionsbox"><div class="btn-group btn-group-sm"><button type="button" class="actions-btn bs-select-all btn '+L.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+L.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(_='<div class="bs-donebutton"><div class="btn-group"><button type="button" class="btn btn-sm '+L.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),this.options.allowClear&&(R='<span class="close bs-select-clear-selected" title="'+this.options.deselectAllText+'"><span>&times;</span>'),x='<div class="dropdown bootstrap-select'+p+f+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+(this.options.display==="static"?'data-display="static"':"")+oe.DATA_TOGGLE+v+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">&nbsp;</div></div> </div>'+R+"</span>"+("4"<=Ie.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+L.MENU+" "+("4"<=Ie.major?"":L.SHOW)+'">'+w+T+P+'<div class="inner '+L.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+l+'><ul class="'+L.MENU+" inner "+("4"<=Ie.major?L.SHOW:"")+'" role="presentation"></ul></div>'+_+"</div></div>",e(x)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var p=0;p<this.selectpicker.current.data.length;p++){var l=this.selectpicker.current.data[p],f=!0;l.type==="divider"?(f=!1,l.height=this.sizeInfo.dividerHeight):l.type==="optgroup-label"?(f=!1,l.height=this.sizeInfo.dropdownHeaderHeight):l.height=this.sizeInfo.liHeight,l.disabled&&(f=!1),this.selectpicker.view.canHighlight.push(f),f&&(this.selectpicker.view.size++,l.posinset=this.selectpicker.view.size,this.selectpicker.view.firstHighlightIndex===!1&&(this.selectpicker.view.firstHighlightIndex=p)),l.position=(p===0?0:this.selectpicker.current.data[p-1].position)+l.height}},isVirtual:function(){return this.options.virtualScroll!==!1&&this.selectpicker.main.data.length>=this.options.virtualScroll||this.options.virtualScroll===!0},createView:function(p,l,f){var v,x,w=this,T=0,P=[];if(this.selectpicker.isSearching=p,this.selectpicker.current=p?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),l){if(f)T=this.$menuInner[0].scrollTop;else if(!w.multiple){var _=w.$element[0],R=(_.options[_.selectedIndex]||{}).liIndex;if(typeof R=="number"&&w.options.size!==!1){var F=w.selectpicker.main.data[R],S=F&&F.position;S&&(T=S-(w.sizeInfo.menuInnerHeight+w.sizeInfo.liHeight)/2)}}}function D(H,X){var q,W,de,ge,ve,Te,Fe,Be,Ue=w.selectpicker.current.data.length,Ne=[],qe=!0,Ae=w.isVirtual();w.selectpicker.view.scrollTop=H,q=w.options.chunkSize,W=Math.ceil(Ue/q)||1;for(var Pe=0;Pe<W;Pe++){var Ge=(Pe+1)*q;if(Pe===W-1&&(Ge=Ue),Ne[Pe]=[Pe*q+(Pe?1:0),Ge],!Ue)break;ve===void 0&&H-1<=w.selectpicker.current.data[Ge-1].position-w.sizeInfo.menuInnerHeight&&(ve=Pe)}if(ve===void 0&&(ve=0),Te=[w.selectpicker.view.position0,w.selectpicker.view.position1],de=Math.max(0,ve-1),ge=Math.min(W-1,ve+1),w.selectpicker.view.position0=Ae===!1?0:Math.max(0,Ne[de][0])||0,w.selectpicker.view.position1=Ae===!1?Ue:Math.min(Ue,Ne[ge][1])||0,Fe=Te[0]!==w.selectpicker.view.position0||Te[1]!==w.selectpicker.view.position1,w.activeIndex!==void 0&&(x=(w.selectpicker.main.data[w.prevActiveIndex]||{}).element,P=(w.selectpicker.main.data[w.activeIndex]||{}).element,v=(w.selectpicker.main.data[w.selectedIndex]||{}).element,X&&(w.activeIndex!==w.selectedIndex&&w.defocusItem(P),w.activeIndex=void 0),w.activeIndex&&w.activeIndex!==w.selectedIndex&&w.defocusItem(v)),w.prevActiveIndex!==void 0&&w.prevActiveIndex!==w.activeIndex&&w.prevActiveIndex!==w.selectedIndex&&w.defocusItem(x),X||Fe){if(Be=w.selectpicker.view.visibleElements?w.selectpicker.view.visibleElements.slice():[],w.selectpicker.view.visibleElements=Ae===!1?w.selectpicker.current.elements:w.selectpicker.current.elements.slice(w.selectpicker.view.position0,w.selectpicker.view.position1),w.setOptionStatus(),(p||Ae===!1&&X)&&(qe=!function(si,pi){return si.length===pi.length&&si.every(function(ei,Rt){return ei===pi[Rt]})}(Be,w.selectpicker.view.visibleElements)),(X||Ae===!0)&&qe){var se,we,N=w.$menuInner[0],Y=document.createDocumentFragment(),ie=N.firstChild.cloneNode(!1),xe=w.selectpicker.view.visibleElements,be=[];N.replaceChild(ie,N.firstChild),Pe=0;for(var $e=xe.length;Pe<$e;Pe++){var Ye,je,et=xe[Pe];w.options.sanitize&&(Ye=et.lastChild)&&(je=w.selectpicker.current.data[Pe+w.selectpicker.view.position0])&&je.content&&!je.sanitized&&(be.push(Ye),je.sanitized=!0),Y.appendChild(et)}if(w.options.sanitize&&be.length&&h(be,w.options.whiteList,w.options.sanitizeFn),Ae===!0?(se=w.selectpicker.view.position0===0?0:w.selectpicker.current.data[w.selectpicker.view.position0-1].position,we=w.selectpicker.view.position1>Ue-1?0:w.selectpicker.current.data[Ue-1].position-w.selectpicker.current.data[w.selectpicker.view.position1-1].position,N.firstChild.style.marginTop=se+"px",N.firstChild.style.marginBottom=we+"px"):(N.firstChild.style.marginTop=0,N.firstChild.style.marginBottom=0),N.firstChild.appendChild(Y),Ae===!0&&w.sizeInfo.hasScrollBar){var ht=N.firstChild.offsetWidth;if(X&&ht<w.sizeInfo.menuInnerInnerWidth&&w.sizeInfo.totalMenuWidth>w.sizeInfo.selectWidth)N.firstChild.style.minWidth=w.sizeInfo.menuInnerInnerWidth+"px";else if(ht>w.sizeInfo.menuInnerInnerWidth){w.$menu[0].style.minWidth=0;var lt=N.firstChild.offsetWidth;lt>w.sizeInfo.menuInnerInnerWidth&&(w.sizeInfo.menuInnerInnerWidth=lt,N.firstChild.style.minWidth=w.sizeInfo.menuInnerInnerWidth+"px"),w.$menu[0].style.minWidth=""}}}(!p&&w.options.source.load||p&&w.options.source.search)&&ve===W-1&&w.fetchData(function(){w.render(),w.buildList(Ue,p),w.setPositionData(),D(H)},p?"search":"load",ve+1,p?w.selectpicker.search.previousValue:void 0)}if(w.prevActiveIndex=w.activeIndex,w.options.liveSearch){if(p&&X){var dt,ut=0;w.selectpicker.view.canHighlight[ut]||(ut=1+w.selectpicker.view.canHighlight.slice(1).indexOf(!0)),dt=w.selectpicker.view.visibleElements[ut],w.defocusItem(w.selectpicker.view.currentActive),w.activeIndex=(w.selectpicker.current.data[ut]||{}).index,w.focusItem(dt)}}else w.$menuInner.trigger("focus")}D(T,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(H,X){w.noScroll||D(this.scrollTop,X),w.noScroll=!1}),e(window).off("resize"+K+"."+this.selectId+".createView").on("resize"+K+"."+this.selectId+".createView",function(){w.$newElement.hasClass(L.SHOW)&&D(w.$menuInner[0].scrollTop)})},focusItem:function(p,l,f){if(p){l=l||this.selectpicker.main.data[this.activeIndex];var v=p.firstChild;v&&(v.setAttribute("aria-setsize",this.selectpicker.view.size),v.setAttribute("aria-posinset",l.posinset),f!==!0&&(this.focusedParent.setAttribute("aria-activedescendant",v.id),p.classList.add("active"),v.classList.add("active")))}},defocusItem:function(p){p&&(p.classList.remove("active"),p.firstChild&&p.firstChild.classList.remove("active"))},setPlaceholder:function(){var p=this,l=!1;if((this.options.placeholder||this.options.allowClear)&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),l=!0;var f=this.$element[0],v=!1,x=!this.selectpicker.view.titleOption.parentNode,w=f.selectedIndex,T=f.options[w],P=f.querySelector("select > *:not(:disabled)"),_=P?P.index:0,R=window.performance&&window.performance.getEntriesByType("navigation"),F=R&&R.length?R[0].type!=="back_forward":window.performance.navigation.type!==2;x&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",v=!T||w===_&&T.defaultSelected===!1&&this.$element.data("selected")===void 0),!x&&this.selectpicker.view.titleOption.index===0||f.insertBefore(this.selectpicker.view.titleOption,f.firstChild),v&&F?f.selectedIndex=0:document.readyState!=="complete"&&window.addEventListener("pageshow",function(){p.selectpicker.view.displayedValue!==f.value&&p.render()})}return l},fetchData:function(p,l,f,v){l=l||"data";var x,w=this,T=this.options.source[l];T?(this.options.virtualScroll=!0,typeof T=="function"?T.call(this,function(P){x=w.buildData(P,l),p.call(w,x)},f,v):Array.isArray(T)&&(x=w.buildData(T,l),p.call(w,x))):(x=this.buildData(!1,l),p.call(w,x))},buildData:function(p,l){var f=p===!1?Je.fromOption:Je.fromDataSource,v=':not([hidden]):not([data-hidden="true"])',x=[],w=0,T=0,P=this.setPlaceholder()&&!p?1:0;l==="load"?w=this.selectpicker.main.data.length:l==="search"&&(w=this.selectpicker.search.data.length),this.options.hideDisabled&&(v+=":not(:disabled)");var _=p?p.filter(st,this):this.$element[0].querySelectorAll("select > *"+v);function R(W){var de=x[x.length-1];de&&de.type==="divider"&&(de.optID||W.optID)||((W=W||{}).type="divider",x.push(W))}function F(W,de){if((de=de||{}).divider=f(W,"divider"),de.divider===!0)R({optID:de.optID});else{var ge=x.length+w,ve=f(W,"style"),Te=ve?ke(ve):"",Fe=(W.className||"")+(de.optgroupClass||"");de.optID&&(Fe="opt "+Fe),de.optionClass=Fe.trim(),de.inlineStyle=Te,de.text=f(W,"text"),de.content=f(W,"content"),de.tokens=f(W,"tokens"),de.subtext=f(W,"subtext"),de.icon=f(W,"icon"),de.display=de.content||de.text,de.value=W.value===void 0?W.text:W.value,de.type="option",de.index=ge,de.option=W.option?W.option:W,de.option.liIndex=ge,de.selected=!!W.selected,de.disabled=de.disabled||!!W.disabled,x.push(de)}}function S(W,de){var ge=de[W],ve=!(W-1<P)&&de[W-1],Te=de[W+1],Fe=p?ge.children.filter(st,this):ge.querySelectorAll("option"+v);if(Fe.length){var Be,Ue,Ne={display:ke(f(X,"label")),subtext:f(ge,"subtext"),icon:f(ge,"icon"),type:"optgroup-label",optgroupClass:" "+(ge.className||"")};T++,ve&&R({optID:T}),Ne.optID=T,x.push(Ne);for(var qe=0,Ae=Fe.length;qe<Ae;qe++){var Pe=Fe[qe];qe===0&&(Ue=(Be=x.length-1)+Ae),F(Pe,{headerIndex:Be,lastIndex:Ue,optID:Ne.optID,optgroupClass:Ne.optgroupClass,disabled:ge.disabled})}Te&&R({optID:T})}}for(var D=_.length,H=P;H<D;H++){var X=_[H],q=X.children;q&&q.length?S.call(this,P,_):F.call(this,X,{})}switch(l){case"data":this.selectpicker.main.data=this.selectpicker.current.data=x;break;case"load":Array.prototype.push.apply(this.selectpicker.main.data,x),this.selectpicker.current.data=this.selectpicker.main.data;break;case"search":Array.prototype.push.apply(this.selectpicker.search.data,x)}return x},buildList:function(p,l){var f=this,v=l?this.selectpicker.search.data:this.selectpicker.main.data,x=[],w=0;function T(F,S){var D,H=0;switch(S.type){case"divider":D=Re.li(!1,L.DIVIDER,S.optID?S.optID+"div":void 0);break;case"option":(D=Re.li(Re.a(Re.text.call(f,S),S.optionClass,S.inlineStyle),"",S.optID)).firstChild&&(D.firstChild.id=f.selectId+"-"+S.index);break;case"optgroup-label":D=Re.li(Re.label.call(f,S),"dropdown-header"+S.optgroupClass,S.optID)}S.element=D,F.push(D),S.display&&(H+=S.display.length),S.subtext&&(H+=S.subtext.length),S.icon&&(H+=1),w<H&&(w=H,f.selectpicker.view.widestOption=F[F.length-1])}!f.options.showTick&&!f.multiple||ne.checkMark.parentNode||(ne.checkMark.className=this.options.iconBase+" "+f.options.tickIcon+" check-mark",ne.a.appendChild(ne.checkMark));for(var P=p||0,_=v.length,R=P;R<_;R++)T(x,v[R]);p?l?Array.prototype.push.apply(this.selectpicker.search.elements,x):(Array.prototype.push.apply(this.selectpicker.main.elements,x),this.selectpicker.current.elements=this.selectpicker.main.elements):l?this.selectpicker.search.elements=x:this.selectpicker.main.elements=this.selectpicker.current.elements=x},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(p){var l,f=this,v=this.$element[0],x=this.setPlaceholder()&&v.selectedIndex===0,w=C.call(this),T=w.length,P=B.call(this,w),_=this.$button[0],R=_.querySelector(".filter-option-inner-inner"),F=document.createTextNode(this.options.multipleSeparator),S=ne.fragment.cloneNode(!1),D=!1;if(this.options.source.data&&p&&(w.map(function Fe(Be){Be.selected?f.createOption(Be,!0):Be.children&&Be.children.length&&Be.children.map(Fe)}),v.appendChild(this.selectpicker.main.optionQueue),x=x&&v.selectedIndex===0),_.classList.toggle("bs-placeholder",f.multiple?!T:!P&&P!==0),f.multiple||w.length!==1||(f.selectpicker.view.displayedValue=P),this.options.selectedTextFormat==="static")S=Re.text.call(this,{text:this.options.placeholder},!0);else if((this.multiple&&this.options.selectedTextFormat.indexOf("count")!==-1&&1<T&&(1<(l=this.options.selectedTextFormat.split(">")).length&&T>l[1]||l.length===1&&2<=T))===!1){if(!x){for(var H=0;H<T&&H<50;H++){var X=w[H],q={};X&&(this.multiple&&0<H&&S.appendChild(F.cloneNode(!1)),X.title?q.text=X.title:X.content&&f.options.showContent?(q.content=X.content.toString(),D=!0):(f.options.showIcon&&(q.icon=X.icon),f.options.showSubtext&&!f.multiple&&X.subtext&&(q.subtext=" "+X.subtext),q.text=X.text.trim()),S.appendChild(Re.text.call(this,q,!0)))}49<T&&S.appendChild(document.createTextNode("..."))}}else{var W=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(W+=":not(:disabled)");var de=this.$element[0].querySelectorAll("select > option"+W+", optgroup"+W+" option"+W).length,ge=typeof this.options.countSelectedText=="function"?this.options.countSelectedText(T,de):this.options.countSelectedText;S=Re.text.call(this,{text:ge.replace("{0}",T.toString()).replace("{1}",de.toString())},!0)}if(S.childNodes.length||(S=Re.text.call(this,{text:this.options.placeholder?this.options.placeholder:this.options.noneSelectedText},!0)),_.title=S.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&D&&h([S],f.options.whiteList,f.options.sanitizeFn),R.innerHTML="",R.appendChild(S),Ie.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")){var ve=_.querySelector(".filter-expand"),Te=R.cloneNode(!0);Te.className="filter-expand",ve?_.replaceChild(Te,ve):_.appendChild(Te)}this.$element.trigger("rendered"+K)},setStyle:function(p,l){var f,v=this.$button[0],x=this.$newElement[0],w=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),Ie.major<4&&(x.classList.add("bs3"),x.parentNode.classList&&x.parentNode.classList.contains("input-group")&&(x.previousElementSibling||x.nextElementSibling)&&(x.previousElementSibling||x.nextElementSibling).classList.contains("input-group-addon")&&x.classList.add("bs3-has-addon")),f=p?p.trim():w,l=="add"?f&&v.classList.add.apply(v.classList,f.split(" ")):l=="remove"?f&&v.classList.remove.apply(v.classList,f.split(" ")):(w&&v.classList.remove.apply(v.classList,w.split(" ")),f&&v.classList.add.apply(v.classList,f.split(" ")))},liHeight:function(p){if(p||this.options.size!==!1&&!Object.keys(this.sizeInfo).length){var l,f=ne.div.cloneNode(!1),v=ne.div.cloneNode(!1),x=ne.div.cloneNode(!1),w=document.createElement("ul"),T=ne.li.cloneNode(!1),P=ne.li.cloneNode(!1),_=ne.a.cloneNode(!1),R=ne.span.cloneNode(!1),F=this.options.header&&0<this.$menu.find("."+L.POPOVERHEADER).length?this.$menu.find("."+L.POPOVERHEADER)[0].cloneNode(!0):null,S=this.options.liveSearch?ne.div.cloneNode(!1):null,D=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,H=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,X=this.$element[0].options[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,R.className="text",_.className="dropdown-item "+(X?X.className:""),f.className=this.$menu[0].parentNode.className+" "+L.SHOW,f.style.width=0,this.options.width==="auto"&&(v.style.minWidth=0),v.className=L.MENU+" "+L.SHOW,x.className="inner "+L.SHOW,w.className=L.MENU+" inner "+("4"<=Ie.major?L.SHOW:""),T.className=L.DIVIDER,P.className="dropdown-header",R.appendChild(document.createTextNode("​")),this.selectpicker.current.data.length)for(var q=0;q<this.selectpicker.current.data.length;q++){var W=this.selectpicker.current.data[q];if(W.type==="option"){l=W.element;break}}else l=ne.li.cloneNode(!1),_.appendChild(R),l.appendChild(_);if(P.appendChild(R.cloneNode(!0)),this.selectpicker.view.widestOption&&w.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),w.appendChild(l),w.appendChild(T),w.appendChild(P),F&&v.appendChild(F),S){var de=document.createElement("input");S.className="bs-searchbox",de.className="form-control",S.appendChild(de),v.appendChild(S)}D&&v.appendChild(D),x.appendChild(w),v.appendChild(x),H&&v.appendChild(H),f.appendChild(v),document.body.appendChild(f);var ge,ve=l.offsetHeight,Te=P?P.offsetHeight:0,Fe=F?F.offsetHeight:0,Be=S?S.offsetHeight:0,Ue=D?D.offsetHeight:0,Ne=H?H.offsetHeight:0,qe=e(T).outerHeight(!0),Ae=window.getComputedStyle(v),Pe=v.offsetWidth,Ge={vert:U(Ae.paddingTop)+U(Ae.paddingBottom)+U(Ae.borderTopWidth)+U(Ae.borderBottomWidth),horiz:U(Ae.paddingLeft)+U(Ae.paddingRight)+U(Ae.borderLeftWidth)+U(Ae.borderRightWidth)},se={vert:Ge.vert+U(Ae.marginTop)+U(Ae.marginBottom)+2,horiz:Ge.horiz+U(Ae.marginLeft)+U(Ae.marginRight)+2};x.style.overflowY="scroll",ge=v.offsetWidth-Pe,document.body.removeChild(f),this.sizeInfo.liHeight=ve,this.sizeInfo.dropdownHeaderHeight=Te,this.sizeInfo.headerHeight=Fe,this.sizeInfo.searchHeight=Be,this.sizeInfo.actionsHeight=Ue,this.sizeInfo.doneButtonHeight=Ne,this.sizeInfo.dividerHeight=qe,this.sizeInfo.menuPadding=Ge,this.sizeInfo.menuExtras=se,this.sizeInfo.menuWidth=Pe,this.sizeInfo.menuInnerInnerWidth=Pe-Ge.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=ge,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var p,l=e(window),f=this.$newElement.offset(),v=e(this.options.container);this.options.container&&v.length&&!v.is("body")?((p=v.offset()).top+=parseInt(v.css("borderTopWidth")),p.left+=parseInt(v.css("borderLeftWidth"))):p={top:0,left:0};var x=this.options.windowPadding;this.sizeInfo.selectOffsetTop=f.top-p.top-l.scrollTop(),this.sizeInfo.selectOffsetBot=l.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-p.top-x[2],this.sizeInfo.selectOffsetLeft=f.left-p.left-l.scrollLeft(),this.sizeInfo.selectOffsetRight=l.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-p.left-x[1],this.sizeInfo.selectOffsetTop-=x[0],this.sizeInfo.selectOffsetLeft-=x[3]},setMenuSize:function(p){this.getSelectPosition();var l,f,v,x,w,T,P,_,R=this.sizeInfo.selectWidth,F=this.sizeInfo.liHeight,S=this.sizeInfo.headerHeight,D=this.sizeInfo.searchHeight,H=this.sizeInfo.actionsHeight,X=this.sizeInfo.doneButtonHeight,q=this.sizeInfo.dividerHeight,W=this.sizeInfo.menuPadding,de=0;if(this.options.dropupAuto&&(P=F*this.selectpicker.current.data.length+W.vert,_=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&P+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,this.selectpicker.isSearching===!0&&(_=this.selectpicker.dropup),this.$newElement.toggleClass(L.DROPUP,_),this.selectpicker.dropup=_),this.options.size==="auto")x=3<this.selectpicker.current.data.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,f=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,v=x+S+D+H+X,T=Math.max(x-W.vert,0),this.$newElement.hasClass(L.DROPUP)&&(f=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),l=(w=f)-S-D-H-X-W.vert;else if(this.options.size&&this.options.size!="auto"&&this.selectpicker.current.elements.length>this.options.size){for(var ge=0;ge<this.options.size;ge++)this.selectpicker.current.data[ge].type==="divider"&&de++;l=(f=F*this.options.size+de*q+W.vert)-W.vert,w=f+S+D+H+X,v=T=""}this.$menu.css({"max-height":w+"px",overflow:"hidden","min-height":v+"px"}),this.$menuInner.css({"max-height":l+"px","overflow-y":"auto","min-height":T+"px"}),this.sizeInfo.menuInnerHeight=Math.max(l,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),this.options.dropdownAlignRight==="auto"&&this.$menu.toggleClass(L.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-R),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(p){if(this.liHeight(p),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var l=this,f=e(window);this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return l.setMenuSize()}),this.options.size==="auto"?f.off("resize"+K+"."+this.selectId+".setMenuSize scroll"+K+"."+this.selectId+".setMenuSize").on("resize"+K+"."+this.selectId+".setMenuSize scroll"+K+"."+this.selectId+".setMenuSize",function(){return l.setMenuSize()}):this.options.size&&this.options.size!="auto"&&this.selectpicker.current.elements.length>this.options.size&&f.off("resize"+K+"."+this.selectId+".setMenuSize scroll"+K+"."+this.selectId+".setMenuSize")}this.createView(!1,!0,p)},setWidth:function(){var p=this;this.options.width==="auto"?requestAnimationFrame(function(){p.$menu.css("min-width","0"),p.$element.on("loaded"+K,function(){p.liHeight(),p.setMenuSize();var l=p.$newElement.clone().appendTo("body"),f=l.css("width","auto").children("button").outerWidth();l.remove(),p.sizeInfo.selectWidth=Math.max(p.sizeInfo.totalMenuWidth,f),p.$newElement.css("width",p.sizeInfo.selectWidth+"px")})}):this.options.width==="fit"?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');function p(T){var P={},_=x.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;x.$bsContainer.addClass(T.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(L.DROPUP,T.hasClass(L.DROPUP)),l=T.offset(),w.is("body")?f={top:0,left:0}:((f=w.offset()).top+=parseInt(w.css("borderTopWidth"))-w.scrollTop(),f.left+=parseInt(w.css("borderLeftWidth"))-w.scrollLeft()),v=T.hasClass(L.DROPUP)?0:T[0].offsetHeight,(Ie.major<4||_==="static")&&(P.top=l.top-f.top+v,P.left=l.left-f.left),P.width=T[0].offsetWidth,x.$bsContainer.css(P)}var l,f,v,x=this,w=e(this.options.container);this.$button.on("click.bs.dropdown.data-api",function(){x.isDisabled()||(p(x.$newElement),x.$bsContainer.appendTo(x.options.container).toggleClass(L.SHOW,!x.$button.hasClass(L.SHOW)).append(x.$menu))}),e(window).off("resize"+K+"."+this.selectId+" scroll"+K+"."+this.selectId).on("resize"+K+"."+this.selectId+" scroll"+K+"."+this.selectId,function(){x.$newElement.hasClass(L.SHOW)&&p(x.$newElement)}),this.$element.on("hide"+K,function(){x.$menu.data("height",x.$menu.height()),x.$bsContainer.detach()})},createOption:function(p,l){var f=p.option?p.option:p;if(f&&f.nodeType!==1){var v=(l?ne.selectedOption:ne.option).cloneNode(!0);f.value!==void 0&&(v.value=f.value),v.textContent=f.text,v.selected=!0,f.liIndex!==void 0?v.liIndex=f.liIndex:l||(v.liIndex=p.index),p.option=v,this.selectpicker.main.optionQueue.appendChild(v)}},setOptionStatus:function(p){var l=this;if(l.noScroll=!1,l.selectpicker.view.visibleElements&&l.selectpicker.view.visibleElements.length){for(var f=0;f<l.selectpicker.view.visibleElements.length;f++){var v=l.selectpicker.current.data[f+l.selectpicker.view.position0];v.option&&(p!==!0&&l.setDisabled(v),l.setSelected(v))}this.options.source.data&&this.$element[0].appendChild(this.selectpicker.main.optionQueue)}},setSelected:function(p,l){l=l===void 0?p.selected:l;var f,v,x=p.index,w=p.element,T=this.activeIndex!==void 0,P=this.activeIndex===x||l&&!this.multiple&&!T;w&&(l!==void 0&&(p.selected=l,p.option&&(p.option.selected=l)),l&&this.options.source.data&&this.createOption(p,!1),v=w.firstChild,l&&(this.selectedIndex=x),w.classList.toggle("selected",l),P?(this.focusItem(w,p),this.selectpicker.view.currentActive=w,this.activeIndex=x):this.defocusItem(w),v&&(v.classList.toggle("selected",l),l?v.setAttribute("aria-selected",!0):this.multiple?v.setAttribute("aria-selected",!1):v.removeAttribute("aria-selected")),P||T||!l||this.prevActiveIndex===void 0||(f=this.selectpicker.main.elements[this.prevActiveIndex],this.defocusItem(f)))},setDisabled:function(p){var l,f=p.disabled,v=p.element;v&&(l=v.firstChild,v.classList.toggle(L.DISABLED,f),l&&("4"<=Ie.major&&l.classList.toggle(L.DISABLED,f),f?(l.setAttribute("aria-disabled",f),l.setAttribute("tabindex",-1)):(l.removeAttribute("aria-disabled"),l.setAttribute("tabindex",0))))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(L.DISABLED),this.$button.addClass(L.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains(L.DISABLED)&&(this.$newElement[0].classList.remove(L.DISABLED),this.$button.removeClass(L.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var p=this,l=e(document);function f(){p.options.liveSearch?p.$searchbox.trigger("focus"):p.$menuInner.trigger("focus")}function v(){p.dropdown&&p.dropdown._popper&&p.dropdown._popper.state?f():requestAnimationFrame(v)}l.data("spaceSelect",!1),this.$button.on("keyup",function(x){/(32)/.test(x.keyCode.toString(10))&&l.data("spaceSelect")&&(x.preventDefault(),l.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){p.dropdown||Ie.major!=="4"||(p.dropdown=p.$button.data("bs.dropdown"),p.dropdown._menu=p.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(x){if(p.options.allowClear){var w=x.target,T=p.$clearButton[0];/MSIE|Trident/.test(window.navigator.userAgent)&&(w=document.elementFromPoint(x.clientX,x.clientY)),w!==T&&w.parentElement!==T||(x.stopImmediatePropagation(),function(){if(p.multiple)p.deselectAll();else{var P=p.$element[0],_=P.value,R=P.selectedIndex,F=P.options[R],S=!!F&&p.selectpicker.main.data[F.liIndex];S&&p.setSelected(S,!1),P.selectedIndex=0,k=[R,!1,_],p.$element.triggerNative("change")}p.$newElement.hasClass(L.SHOW)&&(p.options.liveSearch&&p.$searchbox.trigger("focus"),p.createView(!1))}())}p.$newElement.hasClass(L.SHOW)||p.setSize()}),this.$element.on("shown"+K,function(){p.$menuInner[0].scrollTop!==p.selectpicker.view.scrollTop&&(p.$menuInner[0].scrollTop=p.selectpicker.view.scrollTop),3<Ie.major?requestAnimationFrame(v):f()}),this.$menuInner.on("mouseenter","li a",function(x){var w=this.parentElement,T=p.isVirtual()?p.selectpicker.view.position0:0,P=Array.prototype.indexOf.call(w.parentElement.children,w),_=p.selectpicker.current.data[P+T];p.focusItem(w,_,!0)}),this.$menuInner.on("click","li a",function(x,w){var T=e(this),P=p.$element[0],_=p.isVirtual()?p.selectpicker.view.position0:0,R=p.selectpicker.current.data[T.parent().index()+_],F=R.index,S=B.call(p),D=P.selectedIndex,H=P.options[D],X=!!H&&p.selectpicker.main.data[H.liIndex],q=!0;if(p.multiple&&p.options.maxOptions!==1&&x.stopPropagation(),x.preventDefault(),!p.isDisabled()&&!T.parent().hasClass(L.DISABLED)){var W=R.option,de=e(W),ge=W.selected,ve=de.parent("optgroup"),Te=ve.find("option"),Fe=p.options.maxOptions,Be=ve.data("maxOptions")||!1;if(F===p.activeIndex&&(w=!0),w||(p.prevActiveIndex=p.activeIndex,p.activeIndex=void 0),p.multiple){if(p.setSelected(R,!ge),p.focusedParent.focus(),Fe!==!1||Be!==!1){var Ue=Fe<C.call(p).length,Ne=Be<ve.find("option:selected").length;if(Fe&&Ue||Be&&Ne)if(Fe&&Fe==1)P.selectedIndex=-1,W.selected=!0,p.setOptionStatus(!0);else if(Be&&Be==1){for(var qe=0;qe<Te.length;qe++){var Ae=Te[qe];Ae.selected=!1,p.setSelected(Ae.liIndex,!1)}W.selected=!0,p.setSelected(F,!0)}else{var Pe=typeof p.options.maxOptionsText=="string"?[p.options.maxOptionsText,p.options.maxOptionsText]:p.options.maxOptionsText,Ge=typeof Pe=="function"?Pe(Fe,Be):Pe,se=Ge[0].replace("{n}",Fe),we=Ge[1].replace("{n}",Be),N=e('<div class="notify"></div>');Ge[2]&&(se=se.replace("{var}",Ge[2][1<Fe?0:1]),we=we.replace("{var}",Ge[2][1<Be?0:1])),W.selected=!1,p.$menu.append(N),Fe&&Ue&&(N.append(e("<div>"+se+"</div>")),q=!1,p.$element.trigger("maxReached"+K)),Be&&Ne&&(N.append(e("<div>"+we+"</div>")),q=!1,p.$element.trigger("maxReachedGrp"+K)),setTimeout(function(){p.setSelected(F,!1)},10),N[0].classList.add("fadeOut"),setTimeout(function(){N.remove()},1050)}}}else X&&p.setSelected(X,!1),p.setSelected(R,!0);p.options.source.data&&p.$element[0].appendChild(p.selectpicker.main.optionQueue),!p.multiple||p.multiple&&p.options.maxOptions===1?p.$button.trigger("focus"):p.options.liveSearch&&p.$searchbox.trigger("focus"),q&&(!p.multiple&&D===P.selectedIndex||(k=[W.index,de.prop("selected"),S],p.$element.triggerNative("change")))}}),this.$menu.on("click","li."+L.DISABLED+" a, ."+L.POPOVERHEADER+", ."+L.POPOVERHEADER+" :not(.close)",function(x){x.currentTarget==this&&(x.preventDefault(),x.stopPropagation(),p.options.liveSearch&&!e(x.target).hasClass("close")?p.$searchbox.trigger("focus"):p.$button.trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(x){x.preventDefault(),x.stopPropagation(),p.options.liveSearch?p.$searchbox.trigger("focus"):p.$button.trigger("focus")}),this.$menu.on("click","."+L.POPOVERHEADER+" .close",function(){p.$button.trigger("click")}),this.$searchbox.on("click",function(x){x.stopPropagation()}),this.$menu.on("click",".actions-btn",function(x){p.options.liveSearch?p.$searchbox.trigger("focus"):p.$button.trigger("focus"),x.preventDefault(),x.stopPropagation(),e(this).hasClass("bs-select-all")?p.selectAll():p.deselectAll()}),this.$button.on("focus"+K,function(x){var w=p.$element[0].getAttribute("tabindex");w!==void 0&&x.originalEvent&&x.originalEvent.isTrusted&&(this.setAttribute("tabindex",w),p.$element[0].setAttribute("tabindex",-1),p.selectpicker.view.tabindex=w)}).on("blur"+K,function(x){p.selectpicker.view.tabindex!==void 0&&x.originalEvent&&x.originalEvent.isTrusted&&(p.$element[0].setAttribute("tabindex",p.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),p.selectpicker.view.tabindex=void 0)}),this.$element.on("change"+K,function(){p.render(),p.$element.trigger("changed"+K,k),k=null}).on("focus"+K,function(){p.options.mobile||p.$button[0].focus()})},liveSearchListener:function(){var p=this;this.$button.on("click.bs.dropdown.data-api",function(){p.$searchbox.val()&&(p.$searchbox.val(""),p.selectpicker.search.previousValue=void 0)}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(l){l.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var l=p.$searchbox[0].value;if(p.selectpicker.search.elements=[],p.selectpicker.search.data=[],l)if(p.options.source.search)p.fetchData(function(X){p.render(),p.buildList(void 0,!0),p.createView(!0),Xe.call(p,X,l)},"search",0,l);else{var f=[],v=l.toUpperCase(),x={},w=[],T=p._searchStyle(),P=p.options.liveSearchNormalize;P&&(v=he(v));for(var _=0;_<p.selectpicker.main.data.length;_++){var R=p.selectpicker.main.data[_];x[_]||(x[_]=G(R,v,T,P)),x[_]&&R.headerIndex!==void 0&&w.indexOf(R.headerIndex)===-1&&(0<R.headerIndex&&(x[R.headerIndex-1]=!0,w.push(R.headerIndex-1)),x[R.headerIndex]=!0,w.push(R.headerIndex),x[R.lastIndex+1]=!0),x[_]&&R.type!=="optgroup-label"&&w.push(_)}_=0;for(var F=w.length;_<F;_++){var S=w[_],D=w[_-1],H=(R=p.selectpicker.main.data[S],p.selectpicker.main.data[D]);(R.type!=="divider"||R.type==="divider"&&H&&H.type!=="divider"&&F-1!==_)&&(p.selectpicker.search.data.push(R),f.push(p.selectpicker.main.elements[S]))}p.activeIndex=void 0,p.noScroll=!0,p.$menuInner.scrollTop(0),p.selectpicker.search.elements=f,p.createView(!0),Xe.call(p,f,l)}else p.selectpicker.search.previousValue&&(p.$menuInner.scrollTop(0),p.createView(!1));p.selectpicker.search.previousValue=l})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(p){var l=this.$element[0];if(p===void 0)return this.$element.val();var f=C.call(this),v=B.call(this,f);k=[null,null,v],Array.isArray(p)||(p=[p]),p.map(String);for(var x=0;x<f.length;x++){var w=f[x];w&&p.indexOf(String(w.value))===-1&&this.setSelected(w,!1)}if(this.selectpicker.main.data.filter(function(P){return p.indexOf(String(P.value))!==-1&&(this.setSelected(P,!0),!0)},this),this.options.source.data&&l.appendChild(this.selectpicker.main.optionQueue),this.$element.trigger("changed"+K,k),this.$newElement.hasClass(L.SHOW))if(this.multiple)this.setOptionStatus(!0);else{var T=(l.options[l.selectedIndex]||{}).liIndex;typeof T=="number"&&(this.setSelected(this.selectedIndex,!1),this.setSelected(T,!0))}return this.render(),k=null,this.$element},changeAll:function(p){if(this.multiple){p===void 0&&(p=!0);var l=this.$element[0],f=0,v=0,x=B.call(this);l.classList.add("bs-select-hidden");for(var w=0,T=this.selectpicker.current.data,P=T.length;w<P;w++){var _=T[w],R=_.option;R&&!_.disabled&&_.type!=="divider"&&(_.selected&&f++,R.selected=p,(_.selected=p)===!0&&v++)}l.classList.remove("bs-select-hidden"),f!==v&&(this.setOptionStatus(),k=[null,null,x],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(p,l){var f,v=l===void 0;(p=p||window.event)&&p.stopPropagation(),v===!1&&(f=this.$newElement[0].classList.contains(L.SHOW),v=l===!0&&f===!1||l===!1&&f===!0),v&&this.$button.trigger("click.bs.dropdown.data-api")},open:function(p){this.toggle(p,!0)},close:function(p){this.toggle(p,!1)},keydown:function(p){var l,f,v,x,w,T=e(this),P=T.hasClass("dropdown-toggle"),_=(P?T.closest(".dropdown"):T.closest(oe.MENU)).data("this"),R=_.findLis(),F=!1,S=p.which===z&&!P&&!_.options.selectOnTab,D=Le.test(p.which)||S,H=_.$menuInner[0].scrollTop,X=_.isVirtual()===!0?_.selectpicker.view.position0:0;if(!(112<=p.which&&p.which<=123))if(!(f=_.$menu.hasClass(L.SHOW))&&(D||48<=p.which&&p.which<=57||96<=p.which&&p.which<=105||65<=p.which&&p.which<=90)&&(_.$button.trigger("click.bs.dropdown.data-api"),_.options.liveSearch))_.$searchbox.trigger("focus");else{if(p.which===ye&&f&&(p.preventDefault(),_.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),D){if(!R.length)return;(l=(v=_.selectpicker.main.elements[_.activeIndex])?Array.prototype.indexOf.call(v.parentElement.children,v):-1)!==-1&&_.defocusItem(v),p.which===J?(l!==-1&&l--,l+X<0&&(l+=R.length),_.selectpicker.view.canHighlight[l+X]||(l=_.selectpicker.view.canHighlight.slice(0,l+X).lastIndexOf(!0)-X)===-1&&(l=R.length-1)):p.which!==ae&&!S||(++l+X>=_.selectpicker.view.canHighlight.length&&(l=_.selectpicker.view.firstHighlightIndex),_.selectpicker.view.canHighlight[l+X]||(l=l+1+_.selectpicker.view.canHighlight.slice(l+X+1).indexOf(!0))),p.preventDefault();var q=X+l;p.which===J?X===0&&l===R.length-1?(_.$menuInner[0].scrollTop=_.$menuInner[0].scrollHeight,q=_.selectpicker.current.elements.length-1):F=(w=(x=_.selectpicker.current.data[q]).position-x.height)<H:p.which!==ae&&!S||(l===_.selectpicker.view.firstHighlightIndex?(_.$menuInner[0].scrollTop=0,q=_.selectpicker.view.firstHighlightIndex):F=H<(w=(x=_.selectpicker.current.data[q]).position-_.sizeInfo.menuInnerHeight)),v=_.selectpicker.current.elements[q],_.activeIndex=_.selectpicker.current.data[q].index,_.focusItem(v),_.selectpicker.view.currentActive=v,F&&(_.$menuInner[0].scrollTop=w),_.options.liveSearch?_.$searchbox.trigger("focus"):T.trigger("focus")}else if(!T.is("input")&&!fe.test(p.which)||p.which===V&&_.selectpicker.keydown.keyHistory){var W,de,ge=[];p.preventDefault(),_.selectpicker.keydown.keyHistory+=re[p.which],_.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(_.selectpicker.keydown.resetKeyHistory.cancel),_.selectpicker.keydown.resetKeyHistory.cancel=_.selectpicker.keydown.resetKeyHistory.start(),de=_.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(de)&&(de=de.charAt(0));for(var ve=0;ve<_.selectpicker.current.data.length;ve++){var Te=_.selectpicker.current.data[ve];G(Te,de,"startsWith",!0)&&_.selectpicker.view.canHighlight[ve]&&ge.push(Te.index)}if(ge.length){var Fe=0;R.removeClass("active").find("a").removeClass("active"),de.length===1&&((Fe=ge.indexOf(_.activeIndex))===-1||Fe===ge.length-1?Fe=0:Fe++),W=ge[Fe],F=0<H-(x=_.selectpicker.main.data[W]).position?(w=x.position-x.height,!0):(w=x.position-_.sizeInfo.menuInnerHeight,x.position>H+_.sizeInfo.menuInnerHeight),v=_.selectpicker.main.elements[W],_.activeIndex=ge[Fe],_.focusItem(v),v&&v.firstChild.focus(),F&&(_.$menuInner[0].scrollTop=w),T.trigger("focus")}}f&&(p.which===V&&!_.selectpicker.keydown.keyHistory||p.which===me||p.which===z&&_.options.selectOnTab)&&(p.which!==V&&p.preventDefault(),_.options.liveSearch&&p.which===V||(_.$menuInner.find(".active a").trigger("click",!0),T.trigger("focus"),_.options.liveSearch||(p.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var p=this,l=e.extend({},this.options,d(this.$element),this.$element.data());this.options=l,this.options.source.data?(this.render(),this.buildList()):this.fetchData(function(){p.render(),p.buildList()}),this.checkDisabled(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+K)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(K).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(K+"."+this.selectId)}};var Ze=e.fn.selectpicker;function Et(){return Ie.major<5?e.fn.dropdown?(e.fn.dropdown.Constructor._dataApiKeydownHandler||e.fn.dropdown.Constructor.prototype.keydown).apply(this,arguments):void 0:Z.dataApiKeydownHandler}e.fn.selectpicker=rt,e.fn.selectpicker.Constructor=Ve,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=Ze,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > ["+oe.DATA_TOGGLE+"]",Et).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",Et).on("keydown"+K,".bootstrap-select ["+oe.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',Ve.prototype.keydown).on("focusin.modal",".bootstrap-select ["+oe.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(p){p.stopPropagation()}),document.addEventListener("DOMContentLoaded",function(){e(".selectpicker").each(function(){var p=e(this);rt.call(p,p.data())})})})(s)});/*!
 * Bootstrap v5.3.2 (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 */(function(s,e){typeof Od=="object"&&typeof Un<"u"?Un.exports=e():typeof define=="function"&&define.amd?define(e):(s=typeof globalThis<"u"?globalThis:s||self).bootstrap=e()})(globalThis,function(){const s=new Map,e={set(O,A,M){s.has(O)||s.set(O,new Map);const j=s.get(O);j.has(A)||j.size===0?j.set(A,M):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(j.keys())[0]}.`)},get:(O,A)=>s.has(O)&&s.get(O).get(A)||null,remove(O,A){if(!s.has(O))return;const M=s.get(O);M.delete(A),M.size===0&&s.delete(O)}},t="transitionend",i=O=>(O&&window.CSS&&window.CSS.escape&&(O=O.replace(/#([^\s"#']+)/g,(A,M)=>`#${CSS.escape(M)}`)),O),n=O=>{O.dispatchEvent(new Event(t))},r=O=>!(!O||typeof O!="object")&&(O.jquery!==void 0&&(O=O[0]),O.nodeType!==void 0),a=O=>r(O)?O.jquery?O[0]:O:typeof O=="string"&&O.length>0?document.querySelector(i(O)):null,o=O=>{if(!r(O)||O.getClientRects().length===0)return!1;const A=getComputedStyle(O).getPropertyValue("visibility")==="visible",M=O.closest("details:not([open])");if(!M)return A;if(M!==O){const j=O.closest("summary");if(j&&j.parentNode!==M||j===null)return!1}return A},c=O=>!O||O.nodeType!==Node.ELEMENT_NODE||!!O.classList.contains("disabled")||(O.disabled!==void 0?O.disabled:O.hasAttribute("disabled")&&O.getAttribute("disabled")!=="false"),h=O=>{if(!document.documentElement.attachShadow)return null;if(typeof O.getRootNode=="function"){const A=O.getRootNode();return A instanceof ShadowRoot?A:null}return O instanceof ShadowRoot?O:O.parentNode?h(O.parentNode):null},d=()=>{},u=O=>{O.offsetHeight},m=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,g=[],y=()=>document.documentElement.dir==="rtl",E=O=>{var A;A=()=>{const M=m();if(M){const j=O.NAME,_e=M.fn[j];M.fn[j]=O.jQueryInterface,M.fn[j].Constructor=O,M.fn[j].noConflict=()=>(M.fn[j]=_e,O.jQueryInterface)}},document.readyState==="loading"?(g.length||document.addEventListener("DOMContentLoaded",()=>{for(const M of g)M()}),g.push(A)):A()},b=(O,A=[],M=O)=>typeof O=="function"?O(...A):M,C=(O,A,M=!0)=>{if(!M)return void b(O);const j=(ze=>{if(!ze)return 0;let{transitionDuration:We,transitionDelay:Ke}=window.getComputedStyle(ze);const at=Number.parseFloat(We),ot=Number.parseFloat(Ke);return at||ot?(We=We.split(",")[0],Ke=Ke.split(",")[0],1e3*(Number.parseFloat(We)+Number.parseFloat(Ke))):0})(A)+5;let _e=!1;const Ce=({target:ze})=>{ze===A&&(_e=!0,A.removeEventListener(t,Ce),b(O))};A.addEventListener(t,Ce),setTimeout(()=>{_e||n(A)},j)},B=(O,A,M,j)=>{const _e=O.length;let Ce=O.indexOf(A);return Ce===-1?!M&&j?O[_e-1]:O[0]:(Ce+=M?1:-1,j&&(Ce=(Ce+_e)%_e),O[Math.max(0,Math.min(Ce,_e-1))])},I=/[^.]*(?=\..*)\.|.*/,k=/\..*/,Q=/::\d+$/,G={};let U=1;const te={mouseenter:"mouseover",mouseleave:"mouseout"},ue=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function pe(O,A){return A&&`${A}::${U++}`||O.uidEvent||U++}function ce(O){const A=pe(O);return O.uidEvent=A,G[A]=G[A]||{},G[A]}function he(O,A,M=null){return Object.values(O).find(j=>j.callable===A&&j.delegationSelector===M)}function Me(O,A,M){const j=typeof A=="string",_e=j?M:A||M;let Ce=ke(O);return ue.has(Ce)||(Ce=O),[j,_e,Ce]}function De(O,A,M,j,_e){if(typeof A!="string"||!O)return;let[Ce,ze,We]=Me(A,M,j);A in te&&(ze=(xt=>function(wt){if(!wt.relatedTarget||wt.relatedTarget!==wt.delegateTarget&&!wt.delegateTarget.contains(wt.relatedTarget))return xt.call(this,wt)})(ze));const Ke=ce(O),at=Ke[We]||(Ke[We]={}),ot=he(at,ze,Ce?M:null);if(ot)return void(ot.oneOff=ot.oneOff&&_e);const nt=pe(ze,A.replace(I,"")),It=Ce?function(pt,xt,wt){return function _t(jt){const ti=pt.querySelectorAll(xt);for(let{target:Dt}=jt;Dt&&Dt!==this;Dt=Dt.parentNode)for(const Ot of ti)if(Ot===Dt)return re(jt,{delegateTarget:Dt}),_t.oneOff&&ee.off(pt,jt.type,xt,wt),wt.apply(Dt,[jt])}}(O,M,ze):function(pt,xt){return function wt(_t){return re(_t,{delegateTarget:pt}),wt.oneOff&&ee.off(pt,_t.type,xt),xt.apply(pt,[_t])}}(O,ze);It.delegationSelector=Ce?M:null,It.callable=ze,It.oneOff=_e,It.uidEvent=nt,at[nt]=It,O.addEventListener(We,It,Ce)}function Qe(O,A,M,j,_e){const Ce=he(A[M],j,_e);Ce&&(O.removeEventListener(M,Ce,!!_e),delete A[M][Ce.uidEvent])}function Ee(O,A,M,j){const _e=A[M]||{};for(const[Ce,ze]of Object.entries(_e))Ce.includes(j)&&Qe(O,A,M,ze.callable,ze.delegationSelector)}function ke(O){return O=O.replace(k,""),te[O]||O}const ee={on(O,A,M,j){De(O,A,M,j,!1)},one(O,A,M,j){De(O,A,M,j,!0)},off(O,A,M,j){if(typeof A!="string"||!O)return;const[_e,Ce,ze]=Me(A,M,j),We=ze!==A,Ke=ce(O),at=Ke[ze]||{},ot=A.startsWith(".");if(Ce===void 0){if(ot)for(const nt of Object.keys(Ke))Ee(O,Ke,nt,A.slice(1));for(const[nt,It]of Object.entries(at)){const pt=nt.replace(Q,"");We&&!A.includes(pt)||Qe(O,Ke,ze,It.callable,It.delegationSelector)}}else{if(!Object.keys(at).length)return;Qe(O,Ke,ze,Ce,_e?M:null)}},trigger(O,A,M){if(typeof A!="string"||!O)return null;const j=m();let _e=null,Ce=!0,ze=!0,We=!1;A!==ke(A)&&j&&(_e=j.Event(A,M),j(O).trigger(_e),Ce=!_e.isPropagationStopped(),ze=!_e.isImmediatePropagationStopped(),We=_e.isDefaultPrevented());const Ke=re(new Event(A,{bubbles:Ce,cancelable:!0}),M);return We&&Ke.preventDefault(),ze&&O.dispatchEvent(Ke),Ke.defaultPrevented&&_e&&_e.preventDefault(),Ke}};function re(O,A={}){for(const[M,j]of Object.entries(A))try{O[M]=j}catch{Object.defineProperty(O,M,{configurable:!0,get:()=>j})}return O}function ye(O){if(O==="true")return!0;if(O==="false")return!1;if(O===Number(O).toString())return Number(O);if(O===""||O==="null")return null;if(typeof O!="string")return O;try{return JSON.parse(decodeURIComponent(O))}catch{return O}}function me(O){return O.replace(/[A-Z]/g,A=>`-${A.toLowerCase()}`)}const V={setDataAttribute(O,A,M){O.setAttribute(`data-bs-${me(A)}`,M)},removeDataAttribute(O,A){O.removeAttribute(`data-bs-${me(A)}`)},getDataAttributes(O){if(!O)return{};const A={},M=Object.keys(O.dataset).filter(j=>j.startsWith("bs")&&!j.startsWith("bsConfig"));for(const j of M){let _e=j.replace(/^bs/,"");_e=_e.charAt(0).toLowerCase()+_e.slice(1,_e.length),A[_e]=ye(O.dataset[j])}return A},getDataAttribute:(O,A)=>ye(O.getAttribute(`data-bs-${me(A)}`))};class z{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(A){return A=this._mergeConfigObj(A),A=this._configAfterMerge(A),this._typeCheckConfig(A),A}_configAfterMerge(A){return A}_mergeConfigObj(A,M){const j=r(M)?V.getDataAttribute(M,"config"):{};return{...this.constructor.Default,...typeof j=="object"?j:{},...r(M)?V.getDataAttributes(M):{},...typeof A=="object"?A:{}}}_typeCheckConfig(A,M=this.constructor.DefaultType){for(const[_e,Ce]of Object.entries(M)){const ze=A[_e],We=r(ze)?"element":(j=ze)==null?`${j}`:Object.prototype.toString.call(j).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(Ce).test(We))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${_e}" provided type "${We}" but expected type "${Ce}".`)}var j}}class J extends z{constructor(A,M){super(),(A=a(A))&&(this._element=A,this._config=this._getConfig(M),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),ee.off(this._element,this.constructor.EVENT_KEY);for(const A of Object.getOwnPropertyNames(this))this[A]=null}_queueCallback(A,M,j=!0){C(A,M,j)}_getConfig(A){return A=this._mergeConfigObj(A,this._element),A=this._configAfterMerge(A),this._typeCheckConfig(A),A}static getInstance(A){return e.get(a(A),this.DATA_KEY)}static getOrCreateInstance(A,M={}){return this.getInstance(A)||new this(A,typeof M=="object"?M:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(A){return`${A}${this.EVENT_KEY}`}}const ae=O=>{let A=O.getAttribute("data-bs-target");if(!A||A==="#"){let M=O.getAttribute("href");if(!M||!M.includes("#")&&!M.startsWith("."))return null;M.includes("#")&&!M.startsWith("#")&&(M=`#${M.split("#")[1]}`),A=M&&M!=="#"?i(M.trim()):null}return A},Z={find:(O,A=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(A,O)),findOne:(O,A=document.documentElement)=>Element.prototype.querySelector.call(A,O),children:(O,A)=>[].concat(...O.children).filter(M=>M.matches(A)),parents(O,A){const M=[];let j=O.parentNode.closest(A);for(;j;)M.push(j),j=j.parentNode.closest(A);return M},prev(O,A){let M=O.previousElementSibling;for(;M;){if(M.matches(A))return[M];M=M.previousElementSibling}return[]},next(O,A){let M=O.nextElementSibling;for(;M;){if(M.matches(A))return[M];M=M.nextElementSibling}return[]},focusableChildren(O){const A=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(M=>`${M}:not([tabindex^="-"])`).join(",");return this.find(A,O).filter(M=>!c(M)&&o(M))},getSelectorFromElement(O){const A=ae(O);return A&&Z.findOne(A)?A:null},getElementFromSelector(O){const A=ae(O);return A?Z.findOne(A):null},getMultipleElementsFromSelector(O){const A=ae(O);return A?Z.find(A):[]}},Se=(O,A="hide")=>{const M=`click.dismiss${O.EVENT_KEY}`,j=O.NAME;ee.on(document,M,`[data-bs-dismiss="${j}"]`,function(_e){if(["A","AREA"].includes(this.tagName)&&_e.preventDefault(),c(this))return;const Ce=Z.getElementFromSelector(this)||this.closest(`.${j}`);O.getOrCreateInstance(Ce)[A]()})},Ie=".bs.alert",Oe=`close${Ie}`,K=`closed${Ie}`;class L extends J{static get NAME(){return"alert"}close(){if(ee.trigger(this._element,Oe).defaultPrevented)return;this._element.classList.remove("show");const A=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,A)}_destroyElement(){this._element.remove(),ee.trigger(this._element,K),this.dispose()}static jQueryInterface(A){return this.each(function(){const M=L.getOrCreateInstance(this);if(typeof A=="string"){if(M[A]===void 0||A.startsWith("_")||A==="constructor")throw new TypeError(`No method named "${A}"`);M[A](this)}})}}Se(L,"close"),E(L);const oe='[data-bs-toggle="button"]';class ne extends J{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(A){return this.each(function(){const M=ne.getOrCreateInstance(this);A==="toggle"&&M[A]()})}}ee.on(document,"click.bs.button.data-api",oe,O=>{O.preventDefault();const A=O.target.closest(oe);ne.getOrCreateInstance(A).toggle()}),E(ne);const Le=".bs.swipe",fe=`touchstart${Le}`,Re=`touchmove${Le}`,Je=`touchend${Le}`,Xe=`pointerdown${Le}`,st=`pointerup${Le}`,Ve={endCallback:null,leftCallback:null,rightCallback:null},rt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ze extends z{constructor(A,M){super(),this._element=A,A&&Ze.isSupported()&&(this._config=this._getConfig(M),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ve}static get DefaultType(){return rt}static get NAME(){return"swipe"}dispose(){ee.off(this._element,Le)}_start(A){this._supportPointerEvents?this._eventIsPointerPenTouch(A)&&(this._deltaX=A.clientX):this._deltaX=A.touches[0].clientX}_end(A){this._eventIsPointerPenTouch(A)&&(this._deltaX=A.clientX-this._deltaX),this._handleSwipe(),b(this._config.endCallback)}_move(A){this._deltaX=A.touches&&A.touches.length>1?0:A.touches[0].clientX-this._deltaX}_handleSwipe(){const A=Math.abs(this._deltaX);if(A<=40)return;const M=A/this._deltaX;this._deltaX=0,M&&b(M>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ee.on(this._element,Xe,A=>this._start(A)),ee.on(this._element,st,A=>this._end(A)),this._element.classList.add("pointer-event")):(ee.on(this._element,fe,A=>this._start(A)),ee.on(this._element,Re,A=>this._move(A)),ee.on(this._element,Je,A=>this._end(A)))}_eventIsPointerPenTouch(A){return this._supportPointerEvents&&(A.pointerType==="pen"||A.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Et=".bs.carousel",p=".data-api",l="next",f="prev",v="left",x="right",w=`slide${Et}`,T=`slid${Et}`,P=`keydown${Et}`,_=`mouseenter${Et}`,R=`mouseleave${Et}`,F=`dragstart${Et}`,S=`load${Et}${p}`,D=`click${Et}${p}`,H="carousel",X="active",q=".active",W=".carousel-item",de=q+W,ge={ArrowLeft:x,ArrowRight:v},ve={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Te={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Fe extends J{constructor(A,M){super(A,M),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===H&&this.cycle()}static get Default(){return ve}static get DefaultType(){return Te}static get NAME(){return"carousel"}next(){this._slide(l)}nextWhenVisible(){!document.hidden&&o(this._element)&&this.next()}prev(){this._slide(f)}pause(){this._isSliding&&n(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ee.one(this._element,T,()=>this.cycle()):this.cycle())}to(A){const M=this._getItems();if(A>M.length-1||A<0)return;if(this._isSliding)return void ee.one(this._element,T,()=>this.to(A));const j=this._getItemIndex(this._getActive());if(j===A)return;const _e=A>j?l:f;this._slide(_e,M[A])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(A){return A.defaultInterval=A.interval,A}_addEventListeners(){this._config.keyboard&&ee.on(this._element,P,A=>this._keydown(A)),this._config.pause==="hover"&&(ee.on(this._element,_,()=>this.pause()),ee.on(this._element,R,()=>this._maybeEnableCycle())),this._config.touch&&Ze.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const M of Z.find(".carousel-item img",this._element))ee.on(M,F,j=>j.preventDefault());const A={leftCallback:()=>this._slide(this._directionToOrder(v)),rightCallback:()=>this._slide(this._directionToOrder(x)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Ze(this._element,A)}_keydown(A){if(/input|textarea/i.test(A.target.tagName))return;const M=ge[A.key];M&&(A.preventDefault(),this._slide(this._directionToOrder(M)))}_getItemIndex(A){return this._getItems().indexOf(A)}_setActiveIndicatorElement(A){if(!this._indicatorsElement)return;const M=Z.findOne(q,this._indicatorsElement);M.classList.remove(X),M.removeAttribute("aria-current");const j=Z.findOne(`[data-bs-slide-to="${A}"]`,this._indicatorsElement);j&&(j.classList.add(X),j.setAttribute("aria-current","true"))}_updateInterval(){const A=this._activeElement||this._getActive();if(!A)return;const M=Number.parseInt(A.getAttribute("data-bs-interval"),10);this._config.interval=M||this._config.defaultInterval}_slide(A,M=null){if(this._isSliding)return;const j=this._getActive(),_e=A===l,Ce=M||B(this._getItems(),j,_e,this._config.wrap);if(Ce===j)return;const ze=this._getItemIndex(Ce),We=nt=>ee.trigger(this._element,nt,{relatedTarget:Ce,direction:this._orderToDirection(A),from:this._getItemIndex(j),to:ze});if(We(w).defaultPrevented||!j||!Ce)return;const Ke=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ze),this._activeElement=Ce;const at=_e?"carousel-item-start":"carousel-item-end",ot=_e?"carousel-item-next":"carousel-item-prev";Ce.classList.add(ot),u(Ce),j.classList.add(at),Ce.classList.add(at),this._queueCallback(()=>{Ce.classList.remove(at,ot),Ce.classList.add(X),j.classList.remove(X,ot,at),this._isSliding=!1,We(T)},j,this._isAnimated()),Ke&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Z.findOne(de,this._element)}_getItems(){return Z.find(W,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(A){return y()?A===v?f:l:A===v?l:f}_orderToDirection(A){return y()?A===f?v:x:A===f?x:v}static jQueryInterface(A){return this.each(function(){const M=Fe.getOrCreateInstance(this,A);if(typeof A!="number"){if(typeof A=="string"){if(M[A]===void 0||A.startsWith("_")||A==="constructor")throw new TypeError(`No method named "${A}"`);M[A]()}}else M.to(A)})}}ee.on(document,D,"[data-bs-slide], [data-bs-slide-to]",function(O){const A=Z.getElementFromSelector(this);if(!A||!A.classList.contains(H))return;O.preventDefault();const M=Fe.getOrCreateInstance(A),j=this.getAttribute("data-bs-slide-to");return j?(M.to(j),void M._maybeEnableCycle()):V.getDataAttribute(this,"slide")==="next"?(M.next(),void M._maybeEnableCycle()):(M.prev(),void M._maybeEnableCycle())}),ee.on(window,S,()=>{const O=Z.find('[data-bs-ride="carousel"]');for(const A of O)Fe.getOrCreateInstance(A)}),E(Fe);const Be=".bs.collapse",Ue=`show${Be}`,Ne=`shown${Be}`,qe=`hide${Be}`,Ae=`hidden${Be}`,Pe=`click${Be}.data-api`,Ge="show",se="collapse",we="collapsing",N=`:scope .${se} .${se}`,Y='[data-bs-toggle="collapse"]',ie={parent:null,toggle:!0},xe={parent:"(null|element)",toggle:"boolean"};class be extends J{constructor(A,M){super(A,M),this._isTransitioning=!1,this._triggerArray=[];const j=Z.find(Y);for(const _e of j){const Ce=Z.getSelectorFromElement(_e),ze=Z.find(Ce).filter(We=>We===this._element);Ce!==null&&ze.length&&this._triggerArray.push(_e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ie}static get DefaultType(){return xe}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let A=[];if(this._config.parent&&(A=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(_e=>_e!==this._element).map(_e=>be.getOrCreateInstance(_e,{toggle:!1}))),A.length&&A[0]._isTransitioning||ee.trigger(this._element,Ue).defaultPrevented)return;for(const _e of A)_e.hide();const M=this._getDimension();this._element.classList.remove(se),this._element.classList.add(we),this._element.style[M]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const j=`scroll${M[0].toUpperCase()+M.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(we),this._element.classList.add(se,Ge),this._element.style[M]="",ee.trigger(this._element,Ne)},this._element,!0),this._element.style[M]=`${this._element[j]}px`}hide(){if(this._isTransitioning||!this._isShown()||ee.trigger(this._element,qe).defaultPrevented)return;const A=this._getDimension();this._element.style[A]=`${this._element.getBoundingClientRect()[A]}px`,u(this._element),this._element.classList.add(we),this._element.classList.remove(se,Ge);for(const M of this._triggerArray){const j=Z.getElementFromSelector(M);j&&!this._isShown(j)&&this._addAriaAndCollapsedClass([M],!1)}this._isTransitioning=!0,this._element.style[A]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(we),this._element.classList.add(se),ee.trigger(this._element,Ae)},this._element,!0)}_isShown(A=this._element){return A.classList.contains(Ge)}_configAfterMerge(A){return A.toggle=!!A.toggle,A.parent=a(A.parent),A}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const A=this._getFirstLevelChildren(Y);for(const M of A){const j=Z.getElementFromSelector(M);j&&this._addAriaAndCollapsedClass([M],this._isShown(j))}}_getFirstLevelChildren(A){const M=Z.find(N,this._config.parent);return Z.find(A,this._config.parent).filter(j=>!M.includes(j))}_addAriaAndCollapsedClass(A,M){if(A.length)for(const j of A)j.classList.toggle("collapsed",!M),j.setAttribute("aria-expanded",M)}static jQueryInterface(A){const M={};return typeof A=="string"&&/show|hide/.test(A)&&(M.toggle=!1),this.each(function(){const j=be.getOrCreateInstance(this,M);if(typeof A=="string"){if(j[A]===void 0)throw new TypeError(`No method named "${A}"`);j[A]()}})}}ee.on(document,Pe,Y,function(O){(O.target.tagName==="A"||O.delegateTarget&&O.delegateTarget.tagName==="A")&&O.preventDefault();for(const A of Z.getMultipleElementsFromSelector(this))be.getOrCreateInstance(A,{toggle:!1}).toggle()}),E(be);var $e="top",Ye="bottom",je="right",et="left",ht="auto",lt=[$e,Ye,je,et],dt="start",ut="end",si="clippingParents",pi="viewport",ei="popper",Rt="reference",kt=lt.reduce(function(O,A){return O.concat([A+"-"+dt,A+"-"+ut])},[]),ri=[].concat(lt,[ht]).reduce(function(O,A){return O.concat([A,A+"-"+dt,A+"-"+ut])},[]),ai="beforeRead",gt="read",bt="afterRead",Gn="beforeMain",ga="main",cc="afterMain",yr="beforeWrite",hc="write",dc="afterWrite",uc=[ai,gt,bt,Gn,ga,cc,yr,hc,dc];function Cn(O){return O?(O.nodeName||"").toLowerCase():null}function tn(O){if(O==null)return window;if(O.toString()!=="[object Window]"){var A=O.ownerDocument;return A&&A.defaultView||window}return O}function as(O){return O instanceof tn(O).Element||O instanceof Element}function nn(O){return O instanceof tn(O).HTMLElement||O instanceof HTMLElement}function Qo(O){return typeof ShadowRoot<"u"&&(O instanceof tn(O).ShadowRoot||O instanceof ShadowRoot)}const Lt={name:"applyStyles",enabled:!0,phase:"write",fn:function(O){var A=O.state;Object.keys(A.elements).forEach(function(M){var j=A.styles[M]||{},_e=A.attributes[M]||{},Ce=A.elements[M];nn(Ce)&&Cn(Ce)&&(Object.assign(Ce.style,j),Object.keys(_e).forEach(function(ze){var We=_e[ze];We===!1?Ce.removeAttribute(ze):Ce.setAttribute(ze,We===!0?"":We)}))})},effect:function(O){var A=O.state,M={popper:{position:A.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(A.elements.popper.style,M.popper),A.styles=M,A.elements.arrow&&Object.assign(A.elements.arrow.style,M.arrow),function(){Object.keys(A.elements).forEach(function(j){var _e=A.elements[j],Ce=A.attributes[j]||{},ze=Object.keys(A.styles.hasOwnProperty(j)?A.styles[j]:M[j]).reduce(function(We,Ke){return We[Ke]="",We},{});nn(_e)&&Cn(_e)&&(Object.assign(_e.style,ze),Object.keys(Ce).forEach(function(We){_e.removeAttribute(We)}))})}},requires:["computeStyles"]};function In(O){return O.split("-")[0]}var Ii=Math.max,Mn=Math.min,Es=Math.round;function xs(){var O=navigator.userAgentData;return O!=null&&O.brands&&Array.isArray(O.brands)?O.brands.map(function(A){return A.brand+"/"+A.version}).join(" "):navigator.userAgent}function Aa(){return!/^((?!chrome|android).)*safari/i.test(xs())}function mi(O,A,M){A===void 0&&(A=!1),M===void 0&&(M=!1);var j=O.getBoundingClientRect(),_e=1,Ce=1;A&&nn(O)&&(_e=O.offsetWidth>0&&Es(j.width)/O.offsetWidth||1,Ce=O.offsetHeight>0&&Es(j.height)/O.offsetHeight||1);var ze=(as(O)?tn(O):window).visualViewport,We=!Aa()&&M,Ke=(j.left+(We&&ze?ze.offsetLeft:0))/_e,at=(j.top+(We&&ze?ze.offsetTop:0))/Ce,ot=j.width/_e,nt=j.height/Ce;return{width:ot,height:nt,top:at,right:Ke+ot,bottom:at+nt,left:Ke,x:Ke,y:at}}function Tn(O){var A=mi(O),M=O.offsetWidth,j=O.offsetHeight;return Math.abs(A.width-M)<=1&&(M=A.width),Math.abs(A.height-j)<=1&&(j=A.height),{x:O.offsetLeft,y:O.offsetTop,width:M,height:j}}function va(O,A){var M=A.getRootNode&&A.getRootNode();if(O.contains(A))return!0;if(M&&Qo(M)){var j=A;do{if(j&&O.isSameNode(j))return!0;j=j.parentNode||j.host}while(j)}return!1}function Ei(O){return tn(O).getComputedStyle(O)}function pn(O){return["table","td","th"].indexOf(Cn(O))>=0}function yi(O){return((as(O)?O.ownerDocument:O.document)||window.document).documentElement}function js(O){return Cn(O)==="html"?O:O.assignedSlot||O.parentNode||(Qo(O)?O.host:null)||yi(O)}function pc(O){return nn(O)&&Ei(O).position!=="fixed"?O.offsetParent:null}function Xs(O){for(var A=tn(O),M=pc(O);M&&pn(M)&&Ei(M).position==="static";)M=pc(M);return M&&(Cn(M)==="html"||Cn(M)==="body"&&Ei(M).position==="static")?A:M||function(j){var _e=/firefox/i.test(xs());if(/Trident/i.test(xs())&&nn(j)&&Ei(j).position==="fixed")return null;var Ce=js(j);for(Qo(Ce)&&(Ce=Ce.host);nn(Ce)&&["html","body"].indexOf(Cn(Ce))<0;){var ze=Ei(Ce);if(ze.transform!=="none"||ze.perspective!=="none"||ze.contain==="paint"||["transform","perspective"].indexOf(ze.willChange)!==-1||_e&&ze.willChange==="filter"||_e&&ze.filter&&ze.filter!=="none")return Ce;Ce=Ce.parentNode}return null}(O)||A}function Ud(O){return["top","bottom"].indexOf(O)>=0?"x":"y"}function zo(O,A,M){return Ii(O,Mn(A,M))}function qf(O){return Object.assign({},{top:0,right:0,bottom:0,left:0},O)}function jf(O,A){return A.reduce(function(M,j){return M[j]=O,M},{})}const Xf={name:"arrow",enabled:!0,phase:"main",fn:function(O){var A,M=O.state,j=O.name,_e=O.options,Ce=M.elements.arrow,ze=M.modifiersData.popperOffsets,We=In(M.placement),Ke=Ud(We),at=[et,je].indexOf(We)>=0?"height":"width";if(Ce&&ze){var ot=function(Xt,Vt){return qf(typeof(Xt=typeof Xt=="function"?Xt(Object.assign({},Vt.rects,{placement:Vt.placement})):Xt)!="number"?Xt:jf(Xt,lt))}(_e.padding,M),nt=Tn(Ce),It=Ke==="y"?$e:et,pt=Ke==="y"?Ye:je,xt=M.rects.reference[at]+M.rects.reference[Ke]-ze[Ke]-M.rects.popper[at],wt=ze[Ke]-M.rects.reference[Ke],_t=Xs(Ce),jt=_t?Ke==="y"?_t.clientHeight||0:_t.clientWidth||0:0,ti=xt/2-wt/2,Dt=ot[It],Ot=jt-nt[at]-ot[pt],Tt=jt/2-nt[at]/2+ti,Nt=zo(Dt,Tt,Ot),Gt=Ke;M.modifiersData[j]=((A={})[Gt]=Nt,A.centerOffset=Nt-Tt,A)}},effect:function(O){var A=O.state,M=O.options.element,j=M===void 0?"[data-popper-arrow]":M;j!=null&&(typeof j!="string"||(j=A.elements.popper.querySelector(j)))&&va(A.elements.popper,j)&&(A.elements.arrow=j)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ya(O){return O.split("-")[1]}var dx={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yf(O){var A,M=O.popper,j=O.popperRect,_e=O.placement,Ce=O.variation,ze=O.offsets,We=O.position,Ke=O.gpuAcceleration,at=O.adaptive,ot=O.roundOffsets,nt=O.isFixed,It=ze.x,pt=It===void 0?0:It,xt=ze.y,wt=xt===void 0?0:xt,_t=typeof ot=="function"?ot({x:pt,y:wt}):{x:pt,y:wt};pt=_t.x,wt=_t.y;var jt=ze.hasOwnProperty("x"),ti=ze.hasOwnProperty("y"),Dt=et,Ot=$e,Tt=window;if(at){var Nt=Xs(M),Gt="clientHeight",Xt="clientWidth";Nt===tn(M)&&Ei(Nt=yi(M)).position!=="static"&&We==="absolute"&&(Gt="scrollHeight",Xt="scrollWidth"),(_e===$e||(_e===et||_e===je)&&Ce===ut)&&(Ot=Ye,wt-=(nt&&Nt===Tt&&Tt.visualViewport?Tt.visualViewport.height:Nt[Gt])-j.height,wt*=Ke?1:-1),_e!==et&&(_e!==$e&&_e!==Ye||Ce!==ut)||(Dt=je,pt-=(nt&&Nt===Tt&&Tt.visualViewport?Tt.visualViewport.width:Nt[Xt])-j.width,pt*=Ke?1:-1)}var Vt,wi=Object.assign({position:We},at&&dx),mn=ot===!0?function($n,sn){var Rn=$n.x,Ln=$n.y,vi=sn.devicePixelRatio||1;return{x:Es(Rn*vi)/vi||0,y:Es(Ln*vi)/vi||0}}({x:pt,y:wt},tn(M)):{x:pt,y:wt};return pt=mn.x,wt=mn.y,Ke?Object.assign({},wi,((Vt={})[Ot]=ti?"0":"",Vt[Dt]=jt?"0":"",Vt.transform=(Tt.devicePixelRatio||1)<=1?"translate("+pt+"px, "+wt+"px)":"translate3d("+pt+"px, "+wt+"px, 0)",Vt)):Object.assign({},wi,((A={})[Ot]=ti?wt+"px":"",A[Dt]=jt?pt+"px":"",A.transform="",A))}const Qd={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(O){var A=O.state,M=O.options,j=M.gpuAcceleration,_e=j===void 0||j,Ce=M.adaptive,ze=Ce===void 0||Ce,We=M.roundOffsets,Ke=We===void 0||We,at={placement:In(A.placement),variation:ya(A.placement),popper:A.elements.popper,popperRect:A.rects.popper,gpuAcceleration:_e,isFixed:A.options.strategy==="fixed"};A.modifiersData.popperOffsets!=null&&(A.styles.popper=Object.assign({},A.styles.popper,Yf(Object.assign({},at,{offsets:A.modifiersData.popperOffsets,position:A.options.strategy,adaptive:ze,roundOffsets:Ke})))),A.modifiersData.arrow!=null&&(A.styles.arrow=Object.assign({},A.styles.arrow,Yf(Object.assign({},at,{offsets:A.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ke})))),A.attributes.popper=Object.assign({},A.attributes.popper,{"data-popper-placement":A.placement})},data:{}};var mc={passive:!0};const zd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(O){var A=O.state,M=O.instance,j=O.options,_e=j.scroll,Ce=_e===void 0||_e,ze=j.resize,We=ze===void 0||ze,Ke=tn(A.elements.popper),at=[].concat(A.scrollParents.reference,A.scrollParents.popper);return Ce&&at.forEach(function(ot){ot.addEventListener("scroll",M.update,mc)}),We&&Ke.addEventListener("resize",M.update,mc),function(){Ce&&at.forEach(function(ot){ot.removeEventListener("scroll",M.update,mc)}),We&&Ke.removeEventListener("resize",M.update,mc)}},data:{}};var ux={left:"right",right:"left",bottom:"top",top:"bottom"};function fc(O){return O.replace(/left|right|bottom|top/g,function(A){return ux[A]})}var px={start:"end",end:"start"};function Kf(O){return O.replace(/start|end/g,function(A){return px[A]})}function Hd(O){var A=tn(O);return{scrollLeft:A.pageXOffset,scrollTop:A.pageYOffset}}function Gd(O){return mi(yi(O)).left+Hd(O).scrollLeft}function Vd(O){var A=Ei(O),M=A.overflow,j=A.overflowX,_e=A.overflowY;return/auto|scroll|overlay|hidden/.test(M+_e+j)}function Jf(O){return["html","body","#document"].indexOf(Cn(O))>=0?O.ownerDocument.body:nn(O)&&Vd(O)?O:Jf(js(O))}function Ho(O,A){var M;A===void 0&&(A=[]);var j=Jf(O),_e=j===((M=O.ownerDocument)==null?void 0:M.body),Ce=tn(j),ze=_e?[Ce].concat(Ce.visualViewport||[],Vd(j)?j:[]):j,We=A.concat(ze);return _e?We:We.concat(Ho(js(ze)))}function $d(O){return Object.assign({},O,{left:O.x,top:O.y,right:O.x+O.width,bottom:O.y+O.height})}function Zf(O,A,M){return A===pi?$d(function(j,_e){var Ce=tn(j),ze=yi(j),We=Ce.visualViewport,Ke=ze.clientWidth,at=ze.clientHeight,ot=0,nt=0;if(We){Ke=We.width,at=We.height;var It=Aa();(It||!It&&_e==="fixed")&&(ot=We.offsetLeft,nt=We.offsetTop)}return{width:Ke,height:at,x:ot+Gd(j),y:nt}}(O,M)):as(A)?function(j,_e){var Ce=mi(j,!1,_e==="fixed");return Ce.top=Ce.top+j.clientTop,Ce.left=Ce.left+j.clientLeft,Ce.bottom=Ce.top+j.clientHeight,Ce.right=Ce.left+j.clientWidth,Ce.width=j.clientWidth,Ce.height=j.clientHeight,Ce.x=Ce.left,Ce.y=Ce.top,Ce}(A,M):$d(function(j){var _e,Ce=yi(j),ze=Hd(j),We=(_e=j.ownerDocument)==null?void 0:_e.body,Ke=Ii(Ce.scrollWidth,Ce.clientWidth,We?We.scrollWidth:0,We?We.clientWidth:0),at=Ii(Ce.scrollHeight,Ce.clientHeight,We?We.scrollHeight:0,We?We.clientHeight:0),ot=-ze.scrollLeft+Gd(j),nt=-ze.scrollTop;return Ei(We||Ce).direction==="rtl"&&(ot+=Ii(Ce.clientWidth,We?We.clientWidth:0)-Ke),{width:Ke,height:at,x:ot,y:nt}}(yi(O)))}function eg(O){var A,M=O.reference,j=O.element,_e=O.placement,Ce=_e?In(_e):null,ze=_e?ya(_e):null,We=M.x+M.width/2-j.width/2,Ke=M.y+M.height/2-j.height/2;switch(Ce){case $e:A={x:We,y:M.y-j.height};break;case Ye:A={x:We,y:M.y+M.height};break;case je:A={x:M.x+M.width,y:Ke};break;case et:A={x:M.x-j.width,y:Ke};break;default:A={x:M.x,y:M.y}}var at=Ce?Ud(Ce):null;if(at!=null){var ot=at==="y"?"height":"width";switch(ze){case dt:A[at]=A[at]-(M[ot]/2-j[ot]/2);break;case ut:A[at]=A[at]+(M[ot]/2-j[ot]/2)}}return A}function wa(O,A){A===void 0&&(A={});var M=A,j=M.placement,_e=j===void 0?O.placement:j,Ce=M.strategy,ze=Ce===void 0?O.strategy:Ce,We=M.boundary,Ke=We===void 0?si:We,at=M.rootBoundary,ot=at===void 0?pi:at,nt=M.elementContext,It=nt===void 0?ei:nt,pt=M.altBoundary,xt=pt!==void 0&&pt,wt=M.padding,_t=wt===void 0?0:wt,jt=qf(typeof _t!="number"?_t:jf(_t,lt)),ti=It===ei?Rt:ei,Dt=O.rects.popper,Ot=O.elements[xt?ti:It],Tt=function(sn,Rn,Ln,vi){var os=Rn==="clippingParents"?function(Kt){var rn=Ho(js(Kt)),Dn=["absolute","fixed"].indexOf(Ei(Kt).position)>=0&&nn(Kt)?Xs(Kt):Kt;return as(Dn)?rn.filter(function(Ks){return as(Ks)&&va(Ks,Dn)&&Cn(Ks)!=="body"}):[]}(sn):[].concat(Rn),ls=[].concat(os,[Ln]),xa=ls[0],Ni=ls.reduce(function(Kt,rn){var Dn=Zf(sn,rn,vi);return Kt.top=Ii(Dn.top,Kt.top),Kt.right=Mn(Dn.right,Kt.right),Kt.bottom=Mn(Dn.bottom,Kt.bottom),Kt.left=Ii(Dn.left,Kt.left),Kt},Zf(sn,xa,vi));return Ni.width=Ni.right-Ni.left,Ni.height=Ni.bottom-Ni.top,Ni.x=Ni.left,Ni.y=Ni.top,Ni}(as(Ot)?Ot:Ot.contextElement||yi(O.elements.popper),Ke,ot,ze),Nt=mi(O.elements.reference),Gt=eg({reference:Nt,element:Dt,strategy:"absolute",placement:_e}),Xt=$d(Object.assign({},Dt,Gt)),Vt=It===ei?Xt:Nt,wi={top:Tt.top-Vt.top+jt.top,bottom:Vt.bottom-Tt.bottom+jt.bottom,left:Tt.left-Vt.left+jt.left,right:Vt.right-Tt.right+jt.right},mn=O.modifiersData.offset;if(It===ei&&mn){var $n=mn[_e];Object.keys(wi).forEach(function(sn){var Rn=[je,Ye].indexOf(sn)>=0?1:-1,Ln=[$e,Ye].indexOf(sn)>=0?"y":"x";wi[sn]+=$n[Ln]*Rn})}return wi}function mx(O,A){A===void 0&&(A={});var M=A,j=M.placement,_e=M.boundary,Ce=M.rootBoundary,ze=M.padding,We=M.flipVariations,Ke=M.allowedAutoPlacements,at=Ke===void 0?ri:Ke,ot=ya(j),nt=ot?We?kt:kt.filter(function(xt){return ya(xt)===ot}):lt,It=nt.filter(function(xt){return at.indexOf(xt)>=0});It.length===0&&(It=nt);var pt=It.reduce(function(xt,wt){return xt[wt]=wa(O,{placement:wt,boundary:_e,rootBoundary:Ce,padding:ze})[In(wt)],xt},{});return Object.keys(pt).sort(function(xt,wt){return pt[xt]-pt[wt]})}const tg={name:"flip",enabled:!0,phase:"main",fn:function(O){var A=O.state,M=O.options,j=O.name;if(!A.modifiersData[j]._skip){for(var _e=M.mainAxis,Ce=_e===void 0||_e,ze=M.altAxis,We=ze===void 0||ze,Ke=M.fallbackPlacements,at=M.padding,ot=M.boundary,nt=M.rootBoundary,It=M.altBoundary,pt=M.flipVariations,xt=pt===void 0||pt,wt=M.allowedAutoPlacements,_t=A.options.placement,jt=In(_t),ti=Ke||(jt!==_t&&xt?function(Kt){if(In(Kt)===ht)return[];var rn=fc(Kt);return[Kf(Kt),rn,Kf(rn)]}(_t):[fc(_t)]),Dt=[_t].concat(ti).reduce(function(Kt,rn){return Kt.concat(In(rn)===ht?mx(A,{placement:rn,boundary:ot,rootBoundary:nt,padding:at,flipVariations:xt,allowedAutoPlacements:wt}):rn)},[]),Ot=A.rects.reference,Tt=A.rects.popper,Nt=new Map,Gt=!0,Xt=Dt[0],Vt=0;Vt<Dt.length;Vt++){var wi=Dt[Vt],mn=In(wi),$n=ya(wi)===dt,sn=[$e,Ye].indexOf(mn)>=0,Rn=sn?"width":"height",Ln=wa(A,{placement:wi,boundary:ot,rootBoundary:nt,altBoundary:It,padding:at}),vi=sn?$n?je:et:$n?Ye:$e;Ot[Rn]>Tt[Rn]&&(vi=fc(vi));var os=fc(vi),ls=[];if(Ce&&ls.push(Ln[mn]<=0),We&&ls.push(Ln[vi]<=0,Ln[os]<=0),ls.every(function(Kt){return Kt})){Xt=wi,Gt=!1;break}Nt.set(wi,ls)}if(Gt)for(var xa=function(Kt){var rn=Dt.find(function(Dn){var Ks=Nt.get(Dn);if(Ks)return Ks.slice(0,Kt).every(function(_c){return _c})});if(rn)return Xt=rn,"break"},Ni=xt?3:1;Ni>0&&xa(Ni)!=="break";Ni--);A.placement!==Xt&&(A.modifiersData[j]._skip=!0,A.placement=Xt,A.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ig(O,A,M){return M===void 0&&(M={x:0,y:0}),{top:O.top-A.height-M.y,right:O.right-A.width+M.x,bottom:O.bottom-A.height+M.y,left:O.left-A.width-M.x}}function ng(O){return[$e,je,Ye,et].some(function(A){return O[A]>=0})}const sg={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(O){var A=O.state,M=O.name,j=A.rects.reference,_e=A.rects.popper,Ce=A.modifiersData.preventOverflow,ze=wa(A,{elementContext:"reference"}),We=wa(A,{altBoundary:!0}),Ke=ig(ze,j),at=ig(We,_e,Ce),ot=ng(Ke),nt=ng(at);A.modifiersData[M]={referenceClippingOffsets:Ke,popperEscapeOffsets:at,isReferenceHidden:ot,hasPopperEscaped:nt},A.attributes.popper=Object.assign({},A.attributes.popper,{"data-popper-reference-hidden":ot,"data-popper-escaped":nt})}},rg={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(O){var A=O.state,M=O.options,j=O.name,_e=M.offset,Ce=_e===void 0?[0,0]:_e,ze=ri.reduce(function(ot,nt){return ot[nt]=function(It,pt,xt){var wt=In(It),_t=[et,$e].indexOf(wt)>=0?-1:1,jt=typeof xt=="function"?xt(Object.assign({},pt,{placement:It})):xt,ti=jt[0],Dt=jt[1];return ti=ti||0,Dt=(Dt||0)*_t,[et,je].indexOf(wt)>=0?{x:Dt,y:ti}:{x:ti,y:Dt}}(nt,A.rects,Ce),ot},{}),We=ze[A.placement],Ke=We.x,at=We.y;A.modifiersData.popperOffsets!=null&&(A.modifiersData.popperOffsets.x+=Ke,A.modifiersData.popperOffsets.y+=at),A.modifiersData[j]=ze}},Wd={name:"popperOffsets",enabled:!0,phase:"read",fn:function(O){var A=O.state,M=O.name;A.modifiersData[M]=eg({reference:A.rects.reference,element:A.rects.popper,strategy:"absolute",placement:A.placement})},data:{}},ag={name:"preventOverflow",enabled:!0,phase:"main",fn:function(O){var A=O.state,M=O.options,j=O.name,_e=M.mainAxis,Ce=_e===void 0||_e,ze=M.altAxis,We=ze!==void 0&&ze,Ke=M.boundary,at=M.rootBoundary,ot=M.altBoundary,nt=M.padding,It=M.tether,pt=It===void 0||It,xt=M.tetherOffset,wt=xt===void 0?0:xt,_t=wa(A,{boundary:Ke,rootBoundary:at,padding:nt,altBoundary:ot}),jt=In(A.placement),ti=ya(A.placement),Dt=!ti,Ot=Ud(jt),Tt=Ot==="x"?"y":"x",Nt=A.modifiersData.popperOffsets,Gt=A.rects.reference,Xt=A.rects.popper,Vt=typeof wt=="function"?wt(Object.assign({},A.rects,{placement:A.placement})):wt,wi=typeof Vt=="number"?{mainAxis:Vt,altAxis:Vt}:Object.assign({mainAxis:0,altAxis:0},Vt),mn=A.modifiersData.offset?A.modifiersData.offset[A.placement]:null,$n={x:0,y:0};if(Nt){if(Ce){var sn,Rn=Ot==="y"?$e:et,Ln=Ot==="y"?Ye:je,vi=Ot==="y"?"height":"width",os=Nt[Ot],ls=os+_t[Rn],xa=os-_t[Ln],Ni=pt?-Xt[vi]/2:0,Kt=ti===dt?Gt[vi]:Xt[vi],rn=ti===dt?-Xt[vi]:-Gt[vi],Dn=A.elements.arrow,Ks=pt&&Dn?Tn(Dn):{width:0,height:0},_c=A.modifiersData["arrow#persistent"]?A.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Wg=_c[Rn],qg=_c[Ln],Sc=zo(0,Gt[vi],Ks[vi]),G_=Dt?Gt[vi]/2-Ni-Sc-Wg-wi.mainAxis:Kt-Sc-Wg-wi.mainAxis,V_=Dt?-Gt[vi]/2+Ni+Sc+qg+wi.mainAxis:rn+Sc+qg+wi.mainAxis,ru=A.elements.arrow&&Xs(A.elements.arrow),$_=ru?Ot==="y"?ru.clientTop||0:ru.clientLeft||0:0,jg=(sn=mn==null?void 0:mn[Ot])!=null?sn:0,W_=os+V_-jg,Xg=zo(pt?Mn(ls,os+G_-jg-$_):ls,os,pt?Ii(xa,W_):xa);Nt[Ot]=Xg,$n[Ot]=Xg-os}if(We){var Yg,q_=Ot==="x"?$e:et,j_=Ot==="x"?Ye:je,Ir=Nt[Tt],Cc=Tt==="y"?"height":"width",Kg=Ir+_t[q_],Jg=Ir-_t[j_],au=[$e,et].indexOf(jt)!==-1,Zg=(Yg=mn==null?void 0:mn[Tt])!=null?Yg:0,eA=au?Kg:Ir-Gt[Cc]-Xt[Cc]-Zg+wi.altAxis,tA=au?Ir+Gt[Cc]+Xt[Cc]-Zg-wi.altAxis:Jg,iA=pt&&au?function(X_,Y_,ou){var nA=zo(X_,Y_,ou);return nA>ou?ou:nA}(eA,Ir,tA):zo(pt?eA:Kg,Ir,pt?tA:Jg);Nt[Tt]=iA,$n[Tt]=iA-Ir}A.modifiersData[j]=$n}},requiresIfExists:["offset"]};function fx(O,A,M){M===void 0&&(M=!1);var j,_e,Ce=nn(A),ze=nn(A)&&function(nt){var It=nt.getBoundingClientRect(),pt=Es(It.width)/nt.offsetWidth||1,xt=Es(It.height)/nt.offsetHeight||1;return pt!==1||xt!==1}(A),We=yi(A),Ke=mi(O,ze,M),at={scrollLeft:0,scrollTop:0},ot={x:0,y:0};return(Ce||!Ce&&!M)&&((Cn(A)!=="body"||Vd(We))&&(at=(j=A)!==tn(j)&&nn(j)?{scrollLeft:(_e=j).scrollLeft,scrollTop:_e.scrollTop}:Hd(j)),nn(A)?((ot=mi(A,!0)).x+=A.clientLeft,ot.y+=A.clientTop):We&&(ot.x=Gd(We))),{x:Ke.left+at.scrollLeft-ot.x,y:Ke.top+at.scrollTop-ot.y,width:Ke.width,height:Ke.height}}function gx(O){var A=new Map,M=new Set,j=[];function _e(Ce){M.add(Ce.name),[].concat(Ce.requires||[],Ce.requiresIfExists||[]).forEach(function(ze){if(!M.has(ze)){var We=A.get(ze);We&&_e(We)}}),j.push(Ce)}return O.forEach(function(Ce){A.set(Ce.name,Ce)}),O.forEach(function(Ce){M.has(Ce.name)||_e(Ce)}),j}var og={placement:"bottom",modifiers:[],strategy:"absolute"};function lg(){for(var O=arguments.length,A=new Array(O),M=0;M<O;M++)A[M]=arguments[M];return!A.some(function(j){return!(j&&typeof j.getBoundingClientRect=="function")})}function gc(O){O===void 0&&(O={});var A=O,M=A.defaultModifiers,j=M===void 0?[]:M,_e=A.defaultOptions,Ce=_e===void 0?og:_e;return function(ze,We,Ke){Ke===void 0&&(Ke=Ce);var at,ot,nt={placement:"bottom",orderedModifiers:[],options:Object.assign({},og,Ce),modifiersData:{},elements:{reference:ze,popper:We},attributes:{},styles:{}},It=[],pt=!1,xt={state:nt,setOptions:function(_t){var jt=typeof _t=="function"?_t(nt.options):_t;wt(),nt.options=Object.assign({},Ce,nt.options,jt),nt.scrollParents={reference:as(ze)?Ho(ze):ze.contextElement?Ho(ze.contextElement):[],popper:Ho(We)};var ti,Dt,Ot=function(Tt){var Nt=gx(Tt);return uc.reduce(function(Gt,Xt){return Gt.concat(Nt.filter(function(Vt){return Vt.phase===Xt}))},[])}((ti=[].concat(j,nt.options.modifiers),Dt=ti.reduce(function(Tt,Nt){var Gt=Tt[Nt.name];return Tt[Nt.name]=Gt?Object.assign({},Gt,Nt,{options:Object.assign({},Gt.options,Nt.options),data:Object.assign({},Gt.data,Nt.data)}):Nt,Tt},{}),Object.keys(Dt).map(function(Tt){return Dt[Tt]})));return nt.orderedModifiers=Ot.filter(function(Tt){return Tt.enabled}),nt.orderedModifiers.forEach(function(Tt){var Nt=Tt.name,Gt=Tt.options,Xt=Gt===void 0?{}:Gt,Vt=Tt.effect;if(typeof Vt=="function"){var wi=Vt({state:nt,name:Nt,instance:xt,options:Xt});It.push(wi||function(){})}}),xt.update()},forceUpdate:function(){if(!pt){var _t=nt.elements,jt=_t.reference,ti=_t.popper;if(lg(jt,ti)){nt.rects={reference:fx(jt,Xs(ti),nt.options.strategy==="fixed"),popper:Tn(ti)},nt.reset=!1,nt.placement=nt.options.placement,nt.orderedModifiers.forEach(function(Vt){return nt.modifiersData[Vt.name]=Object.assign({},Vt.data)});for(var Dt=0;Dt<nt.orderedModifiers.length;Dt++)if(nt.reset!==!0){var Ot=nt.orderedModifiers[Dt],Tt=Ot.fn,Nt=Ot.options,Gt=Nt===void 0?{}:Nt,Xt=Ot.name;typeof Tt=="function"&&(nt=Tt({state:nt,options:Gt,name:Xt,instance:xt})||nt)}else nt.reset=!1,Dt=-1}}},update:(at=function(){return new Promise(function(_t){xt.forceUpdate(),_t(nt)})},function(){return ot||(ot=new Promise(function(_t){Promise.resolve().then(function(){ot=void 0,_t(at())})})),ot}),destroy:function(){wt(),pt=!0}};if(!lg(ze,We))return xt;function wt(){It.forEach(function(_t){return _t()}),It=[]}return xt.setOptions(Ke).then(function(_t){!pt&&Ke.onFirstUpdate&&Ke.onFirstUpdate(_t)}),xt}}var Ax=gc(),vx=gc({defaultModifiers:[zd,Wd,Qd,Lt]}),qd=gc({defaultModifiers:[zd,Wd,Qd,Lt,rg,tg,ag,Xf,sg]});const cg=Object.freeze(Object.defineProperty({__proto__:null,afterMain:cc,afterRead:bt,afterWrite:dc,applyStyles:Lt,arrow:Xf,auto:ht,basePlacements:lt,beforeMain:Gn,beforeRead:ai,beforeWrite:yr,bottom:Ye,clippingParents:si,computeStyles:Qd,createPopper:qd,createPopperBase:Ax,createPopperLite:vx,detectOverflow:wa,end:ut,eventListeners:zd,flip:tg,hide:sg,left:et,main:ga,modifierPhases:uc,offset:rg,placements:ri,popper:ei,popperGenerator:gc,popperOffsets:Wd,preventOverflow:ag,read:gt,reference:Rt,right:je,start:dt,top:$e,variationPlacements:kt,viewport:pi,write:hc},Symbol.toStringTag,{value:"Module"})),hg="dropdown",wr=".bs.dropdown",jd=".data-api",yx="ArrowUp",dg="ArrowDown",wx=`hide${wr}`,bx=`hidden${wr}`,Ex=`show${wr}`,xx=`shown${wr}`,ug=`click${wr}${jd}`,pg=`keydown${wr}${jd}`,_x=`keyup${wr}${jd}`,ba="show",br='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Sx=`${br}.${ba}`,Ac=".dropdown-menu",Cx=y()?"top-end":"top-start",Ix=y()?"top-start":"top-end",Mx=y()?"bottom-end":"bottom-start",Tx=y()?"bottom-start":"bottom-end",Bx=y()?"left-start":"right-start",Rx=y()?"right-start":"left-start",Lx={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Dx={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Vn extends J{constructor(A,M){super(A,M),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,Ac)[0]||Z.prev(this._element,Ac)[0]||Z.findOne(Ac,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Lx}static get DefaultType(){return Dx}static get NAME(){return hg}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const A={relatedTarget:this._element};if(!ee.trigger(this._element,Ex,A).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const M of[].concat(...document.body.children))ee.on(M,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ba),this._element.classList.add(ba),ee.trigger(this._element,xx,A)}}hide(){if(c(this._element)||!this._isShown())return;const A={relatedTarget:this._element};this._completeHide(A)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(A){if(!ee.trigger(this._element,wx,A).defaultPrevented){if("ontouchstart"in document.documentElement)for(const M of[].concat(...document.body.children))ee.off(M,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(ba),this._element.classList.remove(ba),this._element.setAttribute("aria-expanded","false"),V.removeDataAttribute(this._menu,"popper"),ee.trigger(this._element,bx,A)}}_getConfig(A){if(typeof(A=super._getConfig(A)).reference=="object"&&!r(A.reference)&&typeof A.reference.getBoundingClientRect!="function")throw new TypeError(`${hg.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return A}_createPopper(){if(cg===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let A=this._element;this._config.reference==="parent"?A=this._parent:r(this._config.reference)?A=a(this._config.reference):typeof this._config.reference=="object"&&(A=this._config.reference);const M=this._getPopperConfig();this._popper=qd(A,this._menu,M)}_isShown(){return this._menu.classList.contains(ba)}_getPlacement(){const A=this._parent;if(A.classList.contains("dropend"))return Bx;if(A.classList.contains("dropstart"))return Rx;if(A.classList.contains("dropup-center"))return"top";if(A.classList.contains("dropdown-center"))return"bottom";const M=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return A.classList.contains("dropup")?M?Ix:Cx:M?Tx:Mx}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:A}=this._config;return typeof A=="string"?A.split(",").map(M=>Number.parseInt(M,10)):typeof A=="function"?M=>A(M,this._element):A}_getPopperConfig(){const A={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(V.setDataAttribute(this._menu,"popper","static"),A.modifiers=[{name:"applyStyles",enabled:!1}]),{...A,...b(this._config.popperConfig,[A])}}_selectMenuItem({key:A,target:M}){const j=Z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(_e=>o(_e));j.length&&B(j,M,A===dg,!j.includes(M)).focus()}static jQueryInterface(A){return this.each(function(){const M=Vn.getOrCreateInstance(this,A);if(typeof A=="string"){if(M[A]===void 0)throw new TypeError(`No method named "${A}"`);M[A]()}})}static clearMenus(A){if(A.button===2||A.type==="keyup"&&A.key!=="Tab")return;const M=Z.find(Sx);for(const j of M){const _e=Vn.getInstance(j);if(!_e||_e._config.autoClose===!1)continue;const Ce=A.composedPath(),ze=Ce.includes(_e._menu);if(Ce.includes(_e._element)||_e._config.autoClose==="inside"&&!ze||_e._config.autoClose==="outside"&&ze||_e._menu.contains(A.target)&&(A.type==="keyup"&&A.key==="Tab"||/input|select|option|textarea|form/i.test(A.target.tagName)))continue;const We={relatedTarget:_e._element};A.type==="click"&&(We.clickEvent=A),_e._completeHide(We)}}static dataApiKeydownHandler(A){const M=/input|textarea/i.test(A.target.tagName),j=A.key==="Escape",_e=[yx,dg].includes(A.key);if(!_e&&!j||M&&!j)return;A.preventDefault();const Ce=this.matches(br)?this:Z.prev(this,br)[0]||Z.next(this,br)[0]||Z.findOne(br,A.delegateTarget.parentNode),ze=Vn.getOrCreateInstance(Ce);if(_e)return A.stopPropagation(),ze.show(),void ze._selectMenuItem(A);ze._isShown()&&(A.stopPropagation(),ze.hide(),Ce.focus())}}ee.on(document,pg,br,Vn.dataApiKeydownHandler),ee.on(document,pg,Ac,Vn.dataApiKeydownHandler),ee.on(document,ug,Vn.clearMenus),ee.on(document,_x,Vn.clearMenus),ee.on(document,ug,br,function(O){O.preventDefault(),Vn.getOrCreateInstance(this).toggle()}),E(Vn);const mg="backdrop",fg="show",gg=`mousedown.bs.${mg}`,Px={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Nx={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ag extends z{constructor(A){super(),this._config=this._getConfig(A),this._isAppended=!1,this._element=null}static get Default(){return Px}static get DefaultType(){return Nx}static get NAME(){return mg}show(A){if(!this._config.isVisible)return void b(A);this._append();const M=this._getElement();this._config.isAnimated&&u(M),M.classList.add(fg),this._emulateAnimation(()=>{b(A)})}hide(A){this._config.isVisible?(this._getElement().classList.remove(fg),this._emulateAnimation(()=>{this.dispose(),b(A)})):b(A)}dispose(){this._isAppended&&(ee.off(this._element,gg),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const A=document.createElement("div");A.className=this._config.className,this._config.isAnimated&&A.classList.add("fade"),this._element=A}return this._element}_configAfterMerge(A){return A.rootElement=a(A.rootElement),A}_append(){if(this._isAppended)return;const A=this._getElement();this._config.rootElement.append(A),ee.on(A,gg,()=>{b(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(A){C(A,this._getElement(),this._config.isAnimated)}}const vc=".bs.focustrap",Fx=`focusin${vc}`,kx=`keydown.tab${vc}`,vg="backward",Ox={autofocus:!0,trapElement:null},Ux={autofocus:"boolean",trapElement:"element"};class yg extends z{constructor(A){super(),this._config=this._getConfig(A),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ox}static get DefaultType(){return Ux}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ee.off(document,vc),ee.on(document,Fx,A=>this._handleFocusin(A)),ee.on(document,kx,A=>this._handleKeydown(A)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ee.off(document,vc))}_handleFocusin(A){const{trapElement:M}=this._config;if(A.target===document||A.target===M||M.contains(A.target))return;const j=Z.focusableChildren(M);j.length===0?M.focus():this._lastTabNavDirection===vg?j[j.length-1].focus():j[0].focus()}_handleKeydown(A){A.key==="Tab"&&(this._lastTabNavDirection=A.shiftKey?vg:"forward")}}const wg=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bg=".sticky-top",yc="padding-right",Eg="margin-right";class Xd{constructor(){this._element=document.body}getWidth(){const A=document.documentElement.clientWidth;return Math.abs(window.innerWidth-A)}hide(){const A=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,yc,M=>M+A),this._setElementAttributes(wg,yc,M=>M+A),this._setElementAttributes(bg,Eg,M=>M-A)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,yc),this._resetElementAttributes(wg,yc),this._resetElementAttributes(bg,Eg)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(A,M,j){const _e=this.getWidth();this._applyManipulationCallback(A,Ce=>{if(Ce!==this._element&&window.innerWidth>Ce.clientWidth+_e)return;this._saveInitialAttribute(Ce,M);const ze=window.getComputedStyle(Ce).getPropertyValue(M);Ce.style.setProperty(M,`${j(Number.parseFloat(ze))}px`)})}_saveInitialAttribute(A,M){const j=A.style.getPropertyValue(M);j&&V.setDataAttribute(A,M,j)}_resetElementAttributes(A,M){this._applyManipulationCallback(A,j=>{const _e=V.getDataAttribute(j,M);_e!==null?(V.removeDataAttribute(j,M),j.style.setProperty(M,_e)):j.style.removeProperty(M)})}_applyManipulationCallback(A,M){if(r(A))M(A);else for(const j of Z.find(A,this._element))M(j)}}const Bn=".bs.modal",Qx=`hide${Bn}`,zx=`hidePrevented${Bn}`,xg=`hidden${Bn}`,_g=`show${Bn}`,Hx=`shown${Bn}`,Gx=`resize${Bn}`,Vx=`click.dismiss${Bn}`,$x=`mousedown.dismiss${Bn}`,Wx=`keydown.dismiss${Bn}`,qx=`click${Bn}.data-api`,Sg="modal-open",Cg="show",Yd="modal-static",jx={backdrop:!0,focus:!0,keyboard:!0},Xx={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Er extends J{constructor(A,M){super(A,M),this._dialog=Z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Xd,this._addEventListeners()}static get Default(){return jx}static get DefaultType(){return Xx}static get NAME(){return"modal"}toggle(A){return this._isShown?this.hide():this.show(A)}show(A){this._isShown||this._isTransitioning||ee.trigger(this._element,_g,{relatedTarget:A}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Sg),this._adjustDialog(),this._backdrop.show(()=>this._showElement(A)))}hide(){this._isShown&&!this._isTransitioning&&(ee.trigger(this._element,Qx).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cg),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){ee.off(window,Bn),ee.off(this._dialog,Bn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ag({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yg({trapElement:this._element})}_showElement(A){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const M=Z.findOne(".modal-body",this._dialog);M&&(M.scrollTop=0),u(this._element),this._element.classList.add(Cg),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ee.trigger(this._element,Hx,{relatedTarget:A})},this._dialog,this._isAnimated())}_addEventListeners(){ee.on(this._element,Wx,A=>{A.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),ee.on(window,Gx,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ee.on(this._element,$x,A=>{ee.one(this._element,Vx,M=>{this._element===A.target&&this._element===M.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Sg),this._resetAdjustments(),this._scrollBar.reset(),ee.trigger(this._element,xg)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ee.trigger(this._element,zx).defaultPrevented)return;const A=this._element.scrollHeight>document.documentElement.clientHeight,M=this._element.style.overflowY;M==="hidden"||this._element.classList.contains(Yd)||(A||(this._element.style.overflowY="hidden"),this._element.classList.add(Yd),this._queueCallback(()=>{this._element.classList.remove(Yd),this._queueCallback(()=>{this._element.style.overflowY=M},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const A=this._element.scrollHeight>document.documentElement.clientHeight,M=this._scrollBar.getWidth(),j=M>0;if(j&&!A){const _e=y()?"paddingLeft":"paddingRight";this._element.style[_e]=`${M}px`}if(!j&&A){const _e=y()?"paddingRight":"paddingLeft";this._element.style[_e]=`${M}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(A,M){return this.each(function(){const j=Er.getOrCreateInstance(this,A);if(typeof A=="string"){if(j[A]===void 0)throw new TypeError(`No method named "${A}"`);j[A](M)}})}}ee.on(document,qx,'[data-bs-toggle="modal"]',function(O){const A=Z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&O.preventDefault(),ee.one(A,_g,j=>{j.defaultPrevented||ee.one(A,xg,()=>{o(this)&&this.focus()})});const M=Z.findOne(".modal.show");M&&Er.getInstance(M).hide(),Er.getOrCreateInstance(A).toggle(this)}),Se(Er),E(Er);const _s=".bs.offcanvas",Ig=".data-api",Yx=`load${_s}${Ig}`,Mg="show",Tg="showing",Bg="hiding",Rg=".offcanvas.show",Kx=`show${_s}`,Jx=`shown${_s}`,Zx=`hide${_s}`,Lg=`hidePrevented${_s}`,Dg=`hidden${_s}`,e_=`resize${_s}`,t_=`click${_s}${Ig}`,i_=`keydown.dismiss${_s}`,n_={backdrop:!0,keyboard:!0,scroll:!1},s_={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ss extends J{constructor(A,M){super(A,M),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return n_}static get DefaultType(){return s_}static get NAME(){return"offcanvas"}toggle(A){return this._isShown?this.hide():this.show(A)}show(A){this._isShown||ee.trigger(this._element,Kx,{relatedTarget:A}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Xd().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Tg),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Mg),this._element.classList.remove(Tg),ee.trigger(this._element,Jx,{relatedTarget:A})},this._element,!0))}hide(){this._isShown&&(ee.trigger(this._element,Zx).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Bg),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Mg,Bg),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Xd().reset(),ee.trigger(this._element,Dg)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const A=!!this._config.backdrop;return new Ag({className:"offcanvas-backdrop",isVisible:A,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:A?()=>{this._config.backdrop!=="static"?this.hide():ee.trigger(this._element,Lg)}:null})}_initializeFocusTrap(){return new yg({trapElement:this._element})}_addEventListeners(){ee.on(this._element,i_,A=>{A.key==="Escape"&&(this._config.keyboard?this.hide():ee.trigger(this._element,Lg))})}static jQueryInterface(A){return this.each(function(){const M=Ss.getOrCreateInstance(this,A);if(typeof A=="string"){if(M[A]===void 0||A.startsWith("_")||A==="constructor")throw new TypeError(`No method named "${A}"`);M[A](this)}})}}ee.on(document,t_,'[data-bs-toggle="offcanvas"]',function(O){const A=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&O.preventDefault(),c(this))return;ee.one(A,Dg,()=>{o(this)&&this.focus()});const M=Z.findOne(Rg);M&&M!==A&&Ss.getInstance(M).hide(),Ss.getOrCreateInstance(A).toggle(this)}),ee.on(window,Yx,()=>{for(const O of Z.find(Rg))Ss.getOrCreateInstance(O).show()}),ee.on(window,e_,()=>{for(const O of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(O).position!=="fixed"&&Ss.getOrCreateInstance(O).hide()}),Se(Ss),E(Ss);const Pg={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r_=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),a_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,o_=(O,A)=>{const M=O.nodeName.toLowerCase();return A.includes(M)?!r_.has(M)||!!a_.test(O.nodeValue):A.filter(j=>j instanceof RegExp).some(j=>j.test(M))},l_={allowList:Pg,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},c_={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},h_={entry:"(string|element|function|null)",selector:"(string|element)"};class d_ extends z{constructor(A){super(),this._config=this._getConfig(A)}static get Default(){return l_}static get DefaultType(){return c_}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(A=>this._resolvePossibleFunction(A)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(A){return this._checkContent(A),this._config.content={...this._config.content,...A},this}toHtml(){const A=document.createElement("div");A.innerHTML=this._maybeSanitize(this._config.template);for(const[_e,Ce]of Object.entries(this._config.content))this._setContent(A,Ce,_e);const M=A.children[0],j=this._resolvePossibleFunction(this._config.extraClass);return j&&M.classList.add(...j.split(" ")),M}_typeCheckConfig(A){super._typeCheckConfig(A),this._checkContent(A.content)}_checkContent(A){for(const[M,j]of Object.entries(A))super._typeCheckConfig({selector:M,entry:j},h_)}_setContent(A,M,j){const _e=Z.findOne(j,A);_e&&((M=this._resolvePossibleFunction(M))?r(M)?this._putElementInTemplate(a(M),_e):this._config.html?_e.innerHTML=this._maybeSanitize(M):_e.textContent=M:_e.remove())}_maybeSanitize(A){return this._config.sanitize?function(M,j,_e){if(!M.length)return M;if(_e&&typeof _e=="function")return _e(M);const Ce=new window.DOMParser().parseFromString(M,"text/html"),ze=[].concat(...Ce.body.querySelectorAll("*"));for(const We of ze){const Ke=We.nodeName.toLowerCase();if(!Object.keys(j).includes(Ke)){We.remove();continue}const at=[].concat(...We.attributes),ot=[].concat(j["*"]||[],j[Ke]||[]);for(const nt of at)o_(nt,ot)||We.removeAttribute(nt.nodeName)}return Ce.body.innerHTML}(A,this._config.allowList,this._config.sanitizeFn):A}_resolvePossibleFunction(A){return b(A,[this])}_putElementInTemplate(A,M){if(this._config.html)return M.innerHTML="",void M.append(A);M.textContent=A.textContent}}const u_=new Set(["sanitize","allowList","sanitizeFn"]),Kd="fade",wc="show",Ng=".modal",Fg="hide.bs.modal",Go="hover",Jd="focus",p_={AUTO:"auto",TOP:"top",RIGHT:y()?"left":"right",BOTTOM:"bottom",LEFT:y()?"right":"left"},m_={allowList:Pg,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},f_={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class xr extends J{constructor(A,M){if(cg===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(A,M),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return m_}static get DefaultType(){return f_}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ee.off(this._element.closest(Ng),Fg,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const A=ee.trigger(this._element,this.constructor.eventName("show")),M=(h(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(A.defaultPrevented||!M)return;this._disposePopper();const j=this._getTipElement();this._element.setAttribute("aria-describedby",j.getAttribute("id"));const{container:_e}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(_e.append(j),ee.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(j),j.classList.add(wc),"ontouchstart"in document.documentElement)for(const Ce of[].concat(...document.body.children))ee.on(Ce,"mouseover",d);this._queueCallback(()=>{ee.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ee.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(wc),"ontouchstart"in document.documentElement)for(const A of[].concat(...document.body.children))ee.off(A,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger[Jd]=!1,this._activeTrigger[Go]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ee.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(A){const M=this._getTemplateFactory(A).toHtml();if(!M)return null;M.classList.remove(Kd,wc),M.classList.add(`bs-${this.constructor.NAME}-auto`);const j=(_e=>{do _e+=Math.floor(1e6*Math.random());while(document.getElementById(_e));return _e})(this.constructor.NAME).toString();return M.setAttribute("id",j),this._isAnimated()&&M.classList.add(Kd),M}setContent(A){this._newContent=A,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(A){return this._templateFactory?this._templateFactory.changeContent(A):this._templateFactory=new d_({...this._config,content:A,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(A){return this.constructor.getOrCreateInstance(A.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Kd)}_isShown(){return this.tip&&this.tip.classList.contains(wc)}_createPopper(A){const M=b(this._config.placement,[this,A,this._element]),j=p_[M.toUpperCase()];return qd(this._element,A,this._getPopperConfig(j))}_getOffset(){const{offset:A}=this._config;return typeof A=="string"?A.split(",").map(M=>Number.parseInt(M,10)):typeof A=="function"?M=>A(M,this._element):A}_resolvePossibleFunction(A){return b(A,[this._element])}_getPopperConfig(A){const M={placement:A,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:j=>{this._getTipElement().setAttribute("data-popper-placement",j.state.placement)}}]};return{...M,...b(this._config.popperConfig,[M])}}_setListeners(){const A=this._config.trigger.split(" ");for(const M of A)if(M==="click")ee.on(this._element,this.constructor.eventName("click"),this._config.selector,j=>{this._initializeOnDelegatedTarget(j).toggle()});else if(M!=="manual"){const j=M===Go?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),_e=M===Go?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");ee.on(this._element,j,this._config.selector,Ce=>{const ze=this._initializeOnDelegatedTarget(Ce);ze._activeTrigger[Ce.type==="focusin"?Jd:Go]=!0,ze._enter()}),ee.on(this._element,_e,this._config.selector,Ce=>{const ze=this._initializeOnDelegatedTarget(Ce);ze._activeTrigger[Ce.type==="focusout"?Jd:Go]=ze._element.contains(Ce.relatedTarget),ze._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ee.on(this._element.closest(Ng),Fg,this._hideModalHandler)}_fixTitle(){const A=this._element.getAttribute("title");A&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",A),this._element.setAttribute("data-bs-original-title",A),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(A,M){clearTimeout(this._timeout),this._timeout=setTimeout(A,M)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(A){const M=V.getDataAttributes(this._element);for(const j of Object.keys(M))u_.has(j)&&delete M[j];return A={...M,...typeof A=="object"&&A?A:{}},A=this._mergeConfigObj(A),A=this._configAfterMerge(A),this._typeCheckConfig(A),A}_configAfterMerge(A){return A.container=A.container===!1?document.body:a(A.container),typeof A.delay=="number"&&(A.delay={show:A.delay,hide:A.delay}),typeof A.title=="number"&&(A.title=A.title.toString()),typeof A.content=="number"&&(A.content=A.content.toString()),A}_getDelegateConfig(){const A={};for(const[M,j]of Object.entries(this._config))this.constructor.Default[M]!==j&&(A[M]=j);return A.selector=!1,A.trigger="manual",A}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(A){return this.each(function(){const M=xr.getOrCreateInstance(this,A);if(typeof A=="string"){if(M[A]===void 0)throw new TypeError(`No method named "${A}"`);M[A]()}})}}E(xr);const g_={...xr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},A_={...xr.DefaultType,content:"(null|string|element|function)"};class bc extends xr{static get Default(){return g_}static get DefaultType(){return A_}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(A){return this.each(function(){const M=bc.getOrCreateInstance(this,A);if(typeof A=="string"){if(M[A]===void 0)throw new TypeError(`No method named "${A}"`);M[A]()}})}}E(bc);const Zd=".bs.scrollspy",v_=`activate${Zd}`,kg=`click${Zd}`,y_=`load${Zd}.data-api`,Ea="active",eu="[href]",Og=".nav-link",w_=`${Og}, .nav-item > ${Og}, .list-group-item`,b_={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},E_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Vo extends J{constructor(A,M){super(A,M),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return b_}static get DefaultType(){return E_}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const A of this._observableSections.values())this._observer.observe(A)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(A){return A.target=a(A.target)||document.body,A.rootMargin=A.offset?`${A.offset}px 0px -30%`:A.rootMargin,typeof A.threshold=="string"&&(A.threshold=A.threshold.split(",").map(M=>Number.parseFloat(M))),A}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ee.off(this._config.target,kg),ee.on(this._config.target,kg,eu,A=>{const M=this._observableSections.get(A.target.hash);if(M){A.preventDefault();const j=this._rootElement||window,_e=M.offsetTop-this._element.offsetTop;if(j.scrollTo)return void j.scrollTo({top:_e,behavior:"smooth"});j.scrollTop=_e}}))}_getNewObserver(){const A={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(M=>this._observerCallback(M),A)}_observerCallback(A){const M=ze=>this._targetLinks.get(`#${ze.target.id}`),j=ze=>{this._previousScrollData.visibleEntryTop=ze.target.offsetTop,this._process(M(ze))},_e=(this._rootElement||document.documentElement).scrollTop,Ce=_e>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=_e;for(const ze of A){if(!ze.isIntersecting){this._activeTarget=null,this._clearActiveClass(M(ze));continue}const We=ze.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Ce&&We){if(j(ze),!_e)return}else Ce||We||j(ze)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const A=Z.find(eu,this._config.target);for(const M of A){if(!M.hash||c(M))continue;const j=Z.findOne(decodeURI(M.hash),this._element);o(j)&&(this._targetLinks.set(decodeURI(M.hash),M),this._observableSections.set(M.hash,j))}}_process(A){this._activeTarget!==A&&(this._clearActiveClass(this._config.target),this._activeTarget=A,A.classList.add(Ea),this._activateParents(A),ee.trigger(this._element,v_,{relatedTarget:A}))}_activateParents(A){if(A.classList.contains("dropdown-item"))Z.findOne(".dropdown-toggle",A.closest(".dropdown")).classList.add(Ea);else for(const M of Z.parents(A,".nav, .list-group"))for(const j of Z.prev(M,w_))j.classList.add(Ea)}_clearActiveClass(A){A.classList.remove(Ea);const M=Z.find(`${eu}.${Ea}`,A);for(const j of M)j.classList.remove(Ea)}static jQueryInterface(A){return this.each(function(){const M=Vo.getOrCreateInstance(this,A);if(typeof A=="string"){if(M[A]===void 0||A.startsWith("_")||A==="constructor")throw new TypeError(`No method named "${A}"`);M[A]()}})}}ee.on(window,y_,()=>{for(const O of Z.find('[data-bs-spy="scroll"]'))Vo.getOrCreateInstance(O)}),E(Vo);const _r=".bs.tab",x_=`hide${_r}`,__=`hidden${_r}`,S_=`show${_r}`,C_=`shown${_r}`,I_=`click${_r}`,M_=`keydown${_r}`,T_=`load${_r}`,B_="ArrowLeft",Ug="ArrowRight",R_="ArrowUp",Qg="ArrowDown",tu="Home",zg="End",Sr="active",Hg="fade",iu="show",Gg=".dropdown-toggle",nu=`:not(${Gg})`,Vg='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',su=`.nav-link${nu}, .list-group-item${nu}, [role="tab"]${nu}, ${Vg}`,L_=`.${Sr}[data-bs-toggle="tab"], .${Sr}[data-bs-toggle="pill"], .${Sr}[data-bs-toggle="list"]`;class Cr extends J{constructor(A){super(A),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ee.on(this._element,M_,M=>this._keydown(M)))}static get NAME(){return"tab"}show(){const A=this._element;if(this._elemIsActive(A))return;const M=this._getActiveElem(),j=M?ee.trigger(M,x_,{relatedTarget:A}):null;ee.trigger(A,S_,{relatedTarget:M}).defaultPrevented||j&&j.defaultPrevented||(this._deactivate(M,A),this._activate(A,M))}_activate(A,M){A&&(A.classList.add(Sr),this._activate(Z.getElementFromSelector(A)),this._queueCallback(()=>{A.getAttribute("role")==="tab"?(A.removeAttribute("tabindex"),A.setAttribute("aria-selected",!0),this._toggleDropDown(A,!0),ee.trigger(A,C_,{relatedTarget:M})):A.classList.add(iu)},A,A.classList.contains(Hg)))}_deactivate(A,M){A&&(A.classList.remove(Sr),A.blur(),this._deactivate(Z.getElementFromSelector(A)),this._queueCallback(()=>{A.getAttribute("role")==="tab"?(A.setAttribute("aria-selected",!1),A.setAttribute("tabindex","-1"),this._toggleDropDown(A,!1),ee.trigger(A,__,{relatedTarget:M})):A.classList.remove(iu)},A,A.classList.contains(Hg)))}_keydown(A){if(![B_,Ug,R_,Qg,tu,zg].includes(A.key))return;A.stopPropagation(),A.preventDefault();const M=this._getChildren().filter(_e=>!c(_e));let j;if([tu,zg].includes(A.key))j=M[A.key===tu?0:M.length-1];else{const _e=[Ug,Qg].includes(A.key);j=B(M,A.target,_e,!0)}j&&(j.focus({preventScroll:!0}),Cr.getOrCreateInstance(j).show())}_getChildren(){return Z.find(su,this._parent)}_getActiveElem(){return this._getChildren().find(A=>this._elemIsActive(A))||null}_setInitialAttributes(A,M){this._setAttributeIfNotExists(A,"role","tablist");for(const j of M)this._setInitialAttributesOnChild(j)}_setInitialAttributesOnChild(A){A=this._getInnerElement(A);const M=this._elemIsActive(A),j=this._getOuterElement(A);A.setAttribute("aria-selected",M),j!==A&&this._setAttributeIfNotExists(j,"role","presentation"),M||A.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(A,"role","tab"),this._setInitialAttributesOnTargetPanel(A)}_setInitialAttributesOnTargetPanel(A){const M=Z.getElementFromSelector(A);M&&(this._setAttributeIfNotExists(M,"role","tabpanel"),A.id&&this._setAttributeIfNotExists(M,"aria-labelledby",`${A.id}`))}_toggleDropDown(A,M){const j=this._getOuterElement(A);if(!j.classList.contains("dropdown"))return;const _e=(Ce,ze)=>{const We=Z.findOne(Ce,j);We&&We.classList.toggle(ze,M)};_e(Gg,Sr),_e(".dropdown-menu",iu),j.setAttribute("aria-expanded",M)}_setAttributeIfNotExists(A,M,j){A.hasAttribute(M)||A.setAttribute(M,j)}_elemIsActive(A){return A.classList.contains(Sr)}_getInnerElement(A){return A.matches(su)?A:Z.findOne(su,A)}_getOuterElement(A){return A.closest(".nav-item, .list-group-item")||A}static jQueryInterface(A){return this.each(function(){const M=Cr.getOrCreateInstance(this);if(typeof A=="string"){if(M[A]===void 0||A.startsWith("_")||A==="constructor")throw new TypeError(`No method named "${A}"`);M[A]()}})}}ee.on(document,I_,Vg,function(O){["A","AREA"].includes(this.tagName)&&O.preventDefault(),c(this)||Cr.getOrCreateInstance(this).show()}),ee.on(window,T_,()=>{for(const O of Z.find(L_))Cr.getOrCreateInstance(O)}),E(Cr);const Ys=".bs.toast",D_=`mouseover${Ys}`,P_=`mouseout${Ys}`,N_=`focusin${Ys}`,F_=`focusout${Ys}`,k_=`hide${Ys}`,O_=`hidden${Ys}`,U_=`show${Ys}`,Q_=`shown${Ys}`,$g="hide",Ec="show",xc="showing",z_={animation:"boolean",autohide:"boolean",delay:"number"},H_={animation:!0,autohide:!0,delay:5e3};class $o extends J{constructor(A,M){super(A,M),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return H_}static get DefaultType(){return z_}static get NAME(){return"toast"}show(){ee.trigger(this._element,U_).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove($g),u(this._element),this._element.classList.add(Ec,xc),this._queueCallback(()=>{this._element.classList.remove(xc),ee.trigger(this._element,Q_),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(ee.trigger(this._element,k_).defaultPrevented||(this._element.classList.add(xc),this._queueCallback(()=>{this._element.classList.add($g),this._element.classList.remove(xc,Ec),ee.trigger(this._element,O_)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ec),super.dispose()}isShown(){return this._element.classList.contains(Ec)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(A,M){switch(A.type){case"mouseover":case"mouseout":this._hasMouseInteraction=M;break;case"focusin":case"focusout":this._hasKeyboardInteraction=M}if(M)return void this._clearTimeout();const j=A.relatedTarget;this._element===j||this._element.contains(j)||this._maybeScheduleHide()}_setListeners(){ee.on(this._element,D_,A=>this._onInteraction(A,!0)),ee.on(this._element,P_,A=>this._onInteraction(A,!1)),ee.on(this._element,N_,A=>this._onInteraction(A,!0)),ee.on(this._element,F_,A=>this._onInteraction(A,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(A){return this.each(function(){const M=$o.getOrCreateInstance(this,A);if(typeof A=="string"){if(M[A]===void 0)throw new TypeError(`No method named "${A}"`);M[A](this)}})}}return Se($o),E($o),{Alert:L,Button:ne,Carousel:Fe,Collapse:be,Dropdown:Vn,Modal:Er,Offcanvas:Ss,Popover:bc,ScrollSpy:Vo,Tab:Cr,Toast:$o,Tooltip:xr}});if($(".tf-sw-top_bar").length>0){var Ai=$(".tf-sw-top_bar").data("preview"),gr=$(".tf-sw-top_bar").data("space"),ua=$(".tf-sw-top_bar").data("loop"),bf=$(".tf-sw-top_bar").data("speed"),Ef=$(".tf-sw-top_bar").data("delay");new Swiper(".tf-sw-top_bar",{autoplay:{delay:Ef,disableOnInteraction:!1,pauseOnMouseEnter:!0},slidesPerView:Ai,loop:ua,spaceBetween:gr,speed:bf,navigation:{clickable:!0,nextEl:".nav-prev-topbar",prevEl:".nav-next-topbar"}}),$(".tf-sw-top_bar").hover(function(){this.swiper.autoplay.stop()},function(){this.swiper.autoplay.start()})}if($(".tf-sw-slideshow").length>0){var Ai=$(".tf-sw-slideshow").data("preview"),Li=$(".tf-sw-slideshow").data("tablet"),Di=$(".tf-sw-slideshow").data("mobile"),gr=$(".tf-sw-slideshow").data("space"),ua=$(".tf-sw-slideshow").data("loop"),Kl=$(".tf-sw-slideshow").data("auto-play"),Ef=$(".tf-sw-slideshow").data("delay"),bf=$(".tf-sw-slideshow").data("speed"),LC=$(".tf-sw-slideshow").data("centered");new Swiper(".tf-sw-slideshow",{autoplay:{delay:Ef,disableOnInteraction:!1,pauseOnMouseEnter:!0},autoplay:Kl,slidesPerView:Di,loop:ua,spaceBetween:0,speed:bf,pagination:{el:".sw-pagination-slider",clickable:!0},navigation:{clickable:!0,nextEl:".navigation-prev-slider",prevEl:".navigation-next-slider"},centeredSlides:!1,breakpoints:{768:{slidesPerView:Li,spaceBetween:gr,centeredSlides:!1},1150:{slidesPerView:Ai,spaceBetween:gr,centeredSlides:LC}}})}$(".tf-sw-effect").length>0&&new Swiper(".tf-sw-effect",{spaceBetween:0,speed:2e3,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".sw-pagination-slider",clickable:!0},navigation:{clickable:!0,nextEl:".nav-prev-slider",prevEl:".nav-next-slider"}});if($(".thumbs-default").length>0){var pa=$(".tf-product-media-thumbs-default").data("direction"),ma=new Swiper(".tf-product-media-thumbs-default",{spaceBetween:10,slidesPerView:"auto",direction:"vertical",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:pa}},450:{direction:"vertical"}});new Swiper(".tf-product-media-main-default",{spaceBetween:0,navigation:{nextEl:".thumbs-next",prevEl:".thumbs-prev"},thumbs:{swiper:ma}})}if($(".thumbs-slider-black").length>0){var pa=$(".tf-product-media-thumbs-black").data("direction"),ma=new Swiper(".tf-product-media-thumbs-black",{spaceBetween:10,slidesPerView:"auto",direction:"vertical",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:pa}},450:{direction:"vertical"}});new Swiper(".tf-product-media-main-black",{spaceBetween:0,navigation:{nextEl:".thumbs-next-black",prevEl:".thumbs-prev-black"},thumbs:{swiper:ma}})}if($(".thumbs-slider-blue").length>0){var pa=$(".tf-product-media-thumbs-blue").data("direction"),ma=new Swiper(".tf-product-media-thumbs-blue",{spaceBetween:10,slidesPerView:"auto",direction:"vertical",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:pa}},450:{direction:"vertical"}});new Swiper(".tf-product-media-main-blue",{spaceBetween:0,navigation:{nextEl:".thumbs-next-blue",prevEl:".thumbs-prev-blue"},thumbs:{swiper:ma}})}if($(".thumbs-slider-white").length>0){var pa=$(".tf-product-media-thumbs-white").data("direction"),ma=new Swiper(".tf-product-media-thumbs-white",{spaceBetween:10,slidesPerView:"auto",direction:"vertical",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:pa}},450:{direction:"vertical"}});new Swiper(".tf-product-media-main-white",{spaceBetween:0,navigation:{nextEl:".thumbs-next-white",prevEl:".thumbs-prev-white"},thumbs:{swiper:ma}})}if($(".tf-sw-collection").length>0){var Ai=$(".tf-sw-collection").data("preview"),Li=$(".tf-sw-collection").data("tablet"),Di=$(".tf-sw-collection").data("mobile"),ni=$(".tf-sw-collection").data("space-lg"),Pi=$(".tf-sw-collection").data("space-md"),gr=$(".tf-sw-collection").data("space"),ua=$(".tf-sw-collection").data("loop"),Kl=$(".tf-sw-collection").data("auto-play");new Swiper(".tf-sw-collection",{autoplay:{delay:2e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},autoplay:Kl,slidesPerView:Di,loop:ua,spaceBetween:gr,speed:1e3,pagination:{el:".sw-pagination-collection",clickable:!0},slidesPerGroup:1,navigation:{clickable:!0,nextEl:".nav-prev-collection",prevEl:".nav-next-collection"},breakpoints:{768:{slidesPerView:Li,spaceBetween:Pi,slidesPerGroup:2},1150:{slidesPerView:Ai,spaceBetween:ni,slidesPerGroup:2}}})}if($(".tf-sw-lookbook").length>0){var Ai=$(".tf-sw-lookbook").data("preview"),Li=$(".tf-sw-lookbook").data("tablet"),Di=$(".tf-sw-lookbook").data("mobile"),ni=$(".tf-sw-lookbook").data("space-lg"),Pi=$(".tf-sw-lookbook").data("space-md");new Swiper(".tf-sw-lookbook",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,observer:!0,observeParents:!0,pagination:{el:".sw-pagination-lookbook",clickable:!0},navigation:{clickable:!0,nextEl:".nav-prev-lookbook",prevEl:".nav-next-lookbook"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni},1150:{slidesPerView:Ai,spaceBetween:ni}}})}if($(".tf-lookbook").length>0){var Ai=$(".tf-lookbook").data("preview"),Li=$(".tf-lookbook").data("tablet"),Di=$(".tf-lookbook").data("mobile"),ni=$(".tf-lookbook").data("space-lg"),Pi=$(".tf-lookbook").data("space-md"),DC=new Swiper(".tf-lookbook",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,direction:"horizontal",pagination:{el:".sw-pagination-lookbook",clickable:!0},navigation:{clickable:!0,nextEl:".prev-lookbook",prevEl:".next-lookbook"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni},1150:{slidesPerView:Ai,spaceBetween:ni,direction:"vertical"}}});$(".swiper-button").click(function(){var r=$(this).data("slide");DC.slideTo(r,500,!1)})}if($(".tf-sw-testimonial").length>0){var Ai=$(".tf-sw-testimonial").data("preview"),Li=$(".tf-sw-testimonial").data("tablet"),Di=$(".tf-sw-testimonial").data("mobile"),ni=$(".tf-sw-testimonial").data("space-lg"),Pi=$(".tf-sw-testimonial").data("space-md");new Swiper(".tf-sw-testimonial",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,pagination:{el:".sw-pagination-testimonial",clickable:!0},navigation:{clickable:!0,nextEl:".nav-prev-testimonial",prevEl:".nav-next-testimonial"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni},1150:{slidesPerView:Ai,spaceBetween:ni}}})}if($(".tf-sw-brand").length>0){var Ai=$(".tf-sw-brand").data("preview"),Li=$(".tf-sw-brand").data("tablet"),Di=$(".tf-sw-brand").data("mobile"),ni=$(".tf-sw-brand").data("space-lg"),Pi=$(".tf-sw-brand").data("space-md"),Kl=$(".tf-sw-brand").data("play"),ua=$(".tf-sw-brand").data("loop");new Swiper(".tf-sw-brand",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,pagination:{el:".sw-pagination-brand",clickable:!0},autoplay:{delay:1,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:ua,autoplay:Kl,observer:!0,observeParents:!0,slidesPerGroup:2,navigation:{clickable:!0,nextEl:".nav-prev-brand",prevEl:".nav-next-brand"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni,slidesPerGroup:3},1150:{slidesPerView:Ai,spaceBetween:ni,slidesPerGroup:3}}})}if($(".tf-sw-shop-gallery").length>0){var Ai=$(".tf-sw-shop-gallery").data("preview"),Li=$(".tf-sw-shop-gallery").data("tablet"),Di=$(".tf-sw-shop-gallery").data("mobile"),ni=$(".tf-sw-shop-gallery").data("space-lg"),Pi=$(".tf-sw-shop-gallery").data("space-md");new Swiper(".tf-sw-shop-gallery",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,pagination:{el:".sw-pagination-gallery",clickable:!0},slidesPerGroup:2,navigation:{clickable:!0,nextEl:".nav-prev-gallery",prevEl:".nav-next-gallery"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni,slidesPerGroup:3},1150:{slidesPerView:Ai,spaceBetween:ni,slidesPerGroup:3}}})}if($(".tf-sw-mobile").length>0){let s=function(){if(matchMedia("only screen and (max-width: 767px)").matches){if(!qo){var e=$(".tf-sw-mobile").data("preview"),t=$(".tf-sw-mobile").data("space");qo=new Swiper(".tf-sw-mobile",{slidesPerView:e,spaceBetween:t,speed:1e3,pagination:{el:".sw-pagination-mb",clickable:!0},navigation:{clickable:!0,nextEl:".nav-prev-mb",prevEl:".nav-next-mb"}})}}else qo&&(qo.destroy(!0,!0),qo=null,$(".tf-sw-mobile .swiper-wrapper").removeAttr("style"),$(".tf-sw-mobile .swiper-slide").removeAttr("style"))};var _D=s,qo;s(),window.addEventListener("resize",function(){s()})}if($(".tf-sw-mobile-1").length>0){let s=function(){if(matchMedia("only screen and (max-width: 767px)").matches){if(!jo){var e=$(".tf-sw-mobile-1").data("preview"),t=$(".tf-sw-mobile-1").data("space");jo=new Swiper(".tf-sw-mobile-1",{slidesPerView:e,spaceBetween:t,speed:1e3,pagination:{el:".sw-pagination-mb-1",clickable:!0},navigation:{clickable:!0,nextEl:".nav-prev-mb-1",prevEl:".nav-next-mb-1"}})}}else jo&&(jo.destroy(!0,!0),jo=null,$(".tf-sw-mobile-1 .swiper-wrapper").removeAttr("style"),$(".tf-sw-mobile-1 .swiper-slide").removeAttr("style"))};var SD=s,jo;s(),window.addEventListener("resize",function(){s()})}if($(".tf-sw-product-sell-1").length>0){var Ai=$(".tf-sw-product-sell-1").data("preview"),Li=$(".tf-sw-product-sell-1").data("tablet"),Di=$(".tf-sw-product-sell-1").data("mobile"),ni=$(".tf-sw-product-sell-1").data("space-lg"),Pi=$(".tf-sw-product-sell-1").data("space-md"),Jl=$(".tf-sw-product-sell-1").data("pagination"),Zl=$(".tf-sw-product-sell-1").data("pagination-md"),ec=$(".tf-sw-product-sell-1").data("pagination-lg");new Swiper(".tf-sw-product-sell-1",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,pagination:{el:".sw-pagination-sell-1",clickable:!0},slidesPerGroup:Jl,navigation:{clickable:!0,nextEl:".nav-prev-sell-1",prevEl:".nav-next-sell-1"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni,slidesPerGroup:Zl},1150:{slidesPerView:Ai,spaceBetween:ni,slidesPerGroup:ec}}})}if($(".tf-sw-product-sell").length>0){var Ai=$(".tf-sw-product-sell").data("preview"),Li=$(".tf-sw-product-sell").data("tablet"),Di=$(".tf-sw-product-sell").data("mobile"),ni=$(".tf-sw-product-sell").data("space-lg"),Pi=$(".tf-sw-product-sell").data("space-md"),Jl=$(".tf-sw-product-sell").data("pagination"),Zl=$(".tf-sw-product-sell").data("pagination-md"),ec=$(".tf-sw-product-sell").data("pagination-lg");new Swiper(".tf-sw-product-sell",{slidesPerView:Di,spaceBetween:Pi,speed:1e3,pagination:{el:".sw-pagination-product",clickable:!0},slidesPerGroup:Jl,navigation:{clickable:!0,nextEl:".nav-prev-product",prevEl:".nav-next-product"},breakpoints:{768:{slidesPerView:Li,spaceBetween:ni,slidesPerGroup:Zl},1150:{slidesPerView:Ai,spaceBetween:ni,slidesPerGroup:ec}}})}if($(".tf-sw-recent").length>0){var Ai=$(".tf-sw-recent").data("preview"),Li=$(".tf-sw-recent").data("tablet"),Di=$(".tf-sw-recent").data("mobile"),ni=$(".tf-sw-recent").data("space-lg"),Pi=$(".tf-sw-recent").data("space-md"),gr=$(".tf-sw-recent").data("space"),Jl=$(".tf-sw-recent").data("pagination"),Zl=$(".tf-sw-recent").data("pagination-md"),ec=$(".tf-sw-recent").data("pagination-lg");new Swiper(".tf-sw-recent",{slidesPerView:Di,spaceBetween:gr,speed:1e3,pagination:{el:".sw-pagination-recent",clickable:!0},slidesPerGroup:Jl,navigation:{clickable:!0,nextEl:".nav-prev-recent",prevEl:".nav-next-recent"},breakpoints:{768:{slidesPerView:Li,spaceBetween:Pi,slidesPerGroup:Zl},1150:{slidesPerView:Ai,spaceBetween:ni,slidesPerGroup:ec}}})}$(".tf-single-slide").length>0&&new Swiper(".tf-single-slide",{slidesPerView:1,spaceBetween:0,navigation:{clickable:!0,nextEl:".single-slide-prev",prevEl:".single-slide-next"}});if($(".flat-thumbs-testimonial").length>0){var PC=$(".tf-thumb-tes").data("preview"),vA=$(".tf-thumb-tes").data("space"),NC=new Swiper(".tf-thumb-tes",{speed:1e3,spaceBetween:vA,slidesPerView:PC,freeMode:!0,watchSlidesProgress:!0,breakpoints:{768:{spaceBetween:vA}}}),Ai=$(".tf-sw-tes-2").data("preview"),Pi=$(".tf-sw-tes-2").data("space-md"),ni=$(".tf-sw-tes-2").data("space-lg");new Swiper(".tf-sw-tes-2",{speed:1e3,slidesPerView:Ai,spaceBetween:Pi,navigation:{nextEl:".nav-prev-tes-2",prevEl:".nav-next-tes-2"},thumbs:{swiper:NC},pagination:{el:".sw-pagination-tes-2",clickable:!0},breakpoints:{768:{spaceBetween:ni}}})}$(".tf-cart-slide").length>0&&new Swiper(".tf-cart-slide",{slidesPerView:1,spaceBetween:0,pagination:{el:".cart-slide-pagination",clickable:!0}});$(".tf-product-header").length>0&&new Swiper(".tf-product-header",{slidesPerView:2,spaceBetween:20,navigation:{clickable:!0,nextEl:".nav-prev-product-header",prevEl:".nav-next-product-header"}});function cb(){}cb.setAttributes=function(s,e){for(var t in e)s.setAttribute(t,e[t])};(function(){var s=function(e){this.element=e,this.labels=this.element.getAttribute("data-labels")?this.element.getAttribute("data-labels").split(","):[],this.intervalId,this.setVisibleLabels(),this.createCountDown(),this.days=this.element.getElementsByClassName("js-countdown__value--0")[0],this.hours=this.element.getElementsByClassName("js-countdown__value--1")[0],this.mins=this.element.getElementsByClassName("js-countdown__value--2")[0],this.secs=this.element.getElementsByClassName("js-countdown__value--3")[0],this.endTime=this.getEndTime(),this.initCountDown()};s.prototype.setVisibleLabels=function(){this.visibleLabels=this.element.getAttribute("data-visible-labels")?this.element.getAttribute("data-visible-labels").split(","):[],this.visibleLabels=this.visibleLabels.map(function(e){return e.trim()})},s.prototype.createCountDown=function(){var e=document.createElement("div");cb.setAttributes(e,{"aria-hidden":"true",class:"countdown__timer"});for(var t=0;t<4;t++){var i=document.createElement("span"),n=document.createElement("span"),r=document.createElement("span");i.setAttribute("class","countdown__item"),n.setAttribute("class","countdown__value countdown__value--"+t+" js-countdown__value--"+t),i.appendChild(n),this.labels&&this.labels.length>0&&(r.textContent=this.labels[t].trim(),r.setAttribute("class","countdown__label"),i.appendChild(r)),e.appendChild(i)}this.element.insertBefore(e,this.element.firstChild)},s.prototype.getEndTime=function(){if(this.element.getAttribute("data-timer"))return Number(this.element.getAttribute("data-timer"))*1e3+new Date().getTime();if(this.element.getAttribute("data-countdown"))return Number(new Date(this.element.getAttribute("data-countdown")).getTime())},s.prototype.initCountDown=function(){var e=this;this.intervalId=setInterval(function(){e.updateCountDown(!1)},1e3),this.updateCountDown(!0)},s.prototype.updateCountDown=function(e){var t=parseInt((this.endTime-new Date().getTime())/1e3),i=0,n=0,r=0,a=0;isNaN(t)||t<0?(clearInterval(this.intervalId),this.emitEndEvent()):(i=parseInt(t/86400),t=t%86400,n=parseInt(t/3600),t=t%3600,r=parseInt(t/60),t=t%60,a=parseInt(t)),e&&i==0&&this.visibleLabels.indexOf("d")<0&&(this.days.parentElement.style.display="none"),e&&i==0&&n==0&&this.visibleLabels.indexOf("h")<0&&(this.hours.parentElement.style.display="none"),e&&i==0&&n==0&&r==0&&this.visibleLabels.indexOf("m")<0&&(this.mins.parentElement.style.display="none"),this.days.textContent=i,this.hours.textContent=this.getTimeFormat(n),this.mins.textContent=this.getTimeFormat(r),this.secs.textContent=this.getTimeFormat(a)},s.prototype.getTimeFormat=function(e){return("0"+e).slice(-2)},s.prototype.emitEndEvent=function(e){var t=new CustomEvent("countDownFinished");this.element.dispatchEvent(t)},window.addEventListener("load",function(){var e=document.getElementsByClassName("js-countdown");if(e.length>0)for(var t=0;t<e.length;t++)(function(i){new s(e[i])})(t)})})();(function(s){s.d=s.d||{},s.d.scope={},s.d.createTemplateTagFirstArg=function(t){return t.raw=t},s.d.createTemplateTagFirstArgWithRaw=function(t,i){return t.raw=i,t},s.d.getGlobal=function(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var i=0;i<t.length;++i){var n=t[i];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},s.d.global=s.d.getGlobal(this);var e;typeof e>"u"&&(e=function(){}),e.p=""}).call(globalThis||window,window.__wpcc=window.__wpcc||{});(function(s){var e=function(d){return h?d instanceof HTMLElement:d&&typeof d=="object"&&d!==null&&d.nodeType===1&&typeof d.nodeName=="string"},t=function(d,u){u.forEach(function(m){d.classList.add(m)})},i=function(d,u){u.forEach(function(m){d.classList.remove(m)})},n=function(){throw Error("Missing parameter")},r=function(d){this.isShowing=!1;var u=d.namespace===void 0?null:d.namespace,m=d.zoomFactor===void 0?n():d.zoomFactor;d=d.containerEl===void 0?n():d.containerEl,this.settings={namespace:u,zoomFactor:m,containerEl:d},this.openClasses=this._buildClasses("open"),this._buildElement()},a=function(d){d=d===void 0?{}:d,this._show=this._show.bind(this),this._hide=this._hide.bind(this),this._handleEntry=this._handleEntry.bind(this),this._handleMovement=this._handleMovement.bind(this);var u=d.el===void 0?n():d.el,m=d.zoomPane===void 0?n():d.zoomPane,g=d.sourceAttribute===void 0?n():d.sourceAttribute,y=d.handleTouch===void 0?n():d.handleTouch,E=d.onShow===void 0?null:d.onShow,b=d.onHide===void 0?null:d.onHide,C=d.hoverDelay===void 0?0:d.hoverDelay,B=d.touchDelay===void 0?0:d.touchDelay,I=d.hoverBoundingBox===void 0?n():d.hoverBoundingBox,k=d.touchBoundingBox===void 0?n():d.touchBoundingBox,Q=d.namespace===void 0?null:d.namespace,G=d.zoomFactor===void 0?n():d.zoomFactor,U=d.boundingBoxContainer===void 0?n():d.boundingBoxContainer;this.settings={el:u,zoomPane:m,sourceAttribute:g,handleTouch:y,onShow:E,onHide:b,hoverDelay:C,touchDelay:B,hoverBoundingBox:I,touchBoundingBox:k,namespace:Q,zoomFactor:G,boundingBoxContainer:U,passive:d.passive===void 0?!1:d.passive},(this.settings.hoverBoundingBox||this.settings.touchBoundingBox)&&(this.boundingBox=new r({namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,containerEl:this.settings.boundingBoxContainer})),this.enabled=!0,this._bindEvents()},o=function(d){if(d=d===void 0?{}:d,this.HAS_ANIMATION=!1,typeof document<"u"){var u=document.createElement("div").style;this.HAS_ANIMATION="animation"in u||"webkitAnimation"in u}this._completeShow=this._completeShow.bind(this),this._completeHide=this._completeHide.bind(this),this._handleLoad=this._handleLoad.bind(this),this.isShowing=!1,u=d.container===void 0?null:d.container;var m=d.zoomFactor===void 0?n():d.zoomFactor,g=d.inline===void 0?n():d.inline,y=d.namespace===void 0?null:d.namespace,E=d.showWhitespaceAtEdges===void 0?n():d.showWhitespaceAtEdges,b=d.containInline===void 0?n():d.containInline;this.settings={container:u,zoomFactor:m,inline:g,namespace:y,showWhitespaceAtEdges:E,containInline:b,inlineOffsetX:d.inlineOffsetX===void 0?0:d.inlineOffsetX,inlineOffsetY:d.inlineOffsetY===void 0?0:d.inlineOffsetY,inlineContainer:d.inlineContainer===void 0?document.body:d.inlineContainer},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement()},c=function(d,u){if(u=u===void 0?{}:u,this.VERSION="1.5.0",this.triggerEl=d,this.destroy=this.destroy.bind(this),!e(this.triggerEl))throw new TypeError("`new Drift` requires a DOM element as its first argument.");d=u.namespace||null;var m=u.showWhitespaceAtEdges||!1,g=u.containInline||!1,y=u.inlineOffsetX||0,E=u.inlineOffsetY||0,b=u.inlineContainer||document.body,C=u.sourceAttribute||"data-zoom",B=u.zoomFactor||3,I=u.paneContainer===void 0?document.body:u.paneContainer,k=u.inlinePane||375,Q="handleTouch"in u?!!u.handleTouch:!0,G=u.onShow||null,U=u.onHide||null,te="injectBaseStyles"in u?!!u.injectBaseStyles:!0,ue=u.hoverDelay||0,pe=u.touchDelay||0,ce=u.hoverBoundingBox||!1,he=u.touchBoundingBox||!1,Me=u.boundingBoxContainer||document.body;if(u=u.passive||!1,k!==!0&&!e(I))throw new TypeError("`paneContainer` must be a DOM element when `inlinePane !== true`");if(!e(b))throw new TypeError("`inlineContainer` must be a DOM element");this.settings={namespace:d,showWhitespaceAtEdges:m,containInline:g,inlineOffsetX:y,inlineOffsetY:E,inlineContainer:b,sourceAttribute:C,zoomFactor:B,paneContainer:I,inlinePane:k,handleTouch:Q,onShow:G,onHide:U,injectBaseStyles:te,hoverDelay:ue,touchDelay:pe,hoverBoundingBox:ce,touchBoundingBox:he,boundingBoxContainer:Me,passive:u},this.settings.injectBaseStyles&&!document.querySelector(".drift-base-styles")&&(u=document.createElement("style"),u.type="text/css",u.classList.add("drift-base-styles"),u.appendChild(document.createTextNode(".drift-bounding-box,.drift-zoom-pane{position:absolute;pointer-events:none}@keyframes noop{0%{zoom:1}}@-webkit-keyframes noop{0%{zoom:1}}.drift-zoom-pane.drift-open{display:block}.drift-zoom-pane.drift-closing,.drift-zoom-pane.drift-opening{animation:noop 1ms;-webkit-animation:noop 1ms}.drift-zoom-pane{overflow:hidden;width:100%;height:100%;top:0;left:0}.drift-zoom-pane-loader{display:none}.drift-zoom-pane img{position:absolute;display:block;max-width:none;max-height:none}")),d=document.head,d.insertBefore(u,d.firstChild)),this._buildZoomPane(),this._buildTrigger()},h=typeof HTMLElement=="object";r.prototype._buildClasses=function(d){var u=["drift-"+d],m=this.settings.namespace;return m&&u.push(m+"-"+d),u},r.prototype._buildElement=function(){this.el=document.createElement("div"),t(this.el,this._buildClasses("bounding-box"))},r.prototype.show=function(d,u){this.isShowing=!0,this.settings.containerEl.appendChild(this.el);var m=this.el.style;m.width=Math.round(d/this.settings.zoomFactor)+"px",m.height=Math.round(u/this.settings.zoomFactor)+"px",t(this.el,this.openClasses)},r.prototype.hide=function(){this.isShowing&&this.settings.containerEl.removeChild(this.el),this.isShowing=!1,i(this.el,this.openClasses)},r.prototype.setPosition=function(d,u,m){var g=window.pageXOffset,y=window.pageYOffset;d=m.left+d*m.width-this.el.clientWidth/2+g,u=m.top+u*m.height-this.el.clientHeight/2+y,d<m.left+g?d=m.left+g:d+this.el.clientWidth>m.left+m.width+g&&(d=m.left+m.width-this.el.clientWidth+g),u<m.top+y?u=m.top+y:u+this.el.clientHeight>m.top+m.height+y&&(u=m.top+m.height-this.el.clientHeight+y),this.el.style.left=d+"px",this.el.style.top=u+"px"},a.prototype._preventDefault=function(d){d.preventDefault()},a.prototype._preventDefaultAllowTouchScroll=function(d){this.settings.touchDelay&&this._isTouchEvent(d)&&!this.isShowing||d.preventDefault()},a.prototype._isTouchEvent=function(d){return!!d.touches},a.prototype._bindEvents=function(){this.settings.el.addEventListener("mouseenter",this._handleEntry),this.settings.el.addEventListener("mouseleave",this._hide),this.settings.el.addEventListener("mousemove",this._handleMovement);var d={passive:this.settings.passive};this.settings.handleTouch?(this.settings.el.addEventListener("touchstart",this._handleEntry,d),this.settings.el.addEventListener("touchend",this._hide),this.settings.el.addEventListener("touchmove",this._handleMovement,d)):(this.settings.el.addEventListener("touchstart",this._preventDefault,d),this.settings.el.addEventListener("touchend",this._preventDefault),this.settings.el.addEventListener("touchmove",this._preventDefault,d))},a.prototype._unbindEvents=function(){this.settings.el.removeEventListener("mouseenter",this._handleEntry),this.settings.el.removeEventListener("mouseleave",this._hide),this.settings.el.removeEventListener("mousemove",this._handleMovement),this.settings.handleTouch?(this.settings.el.removeEventListener("touchstart",this._handleEntry),this.settings.el.removeEventListener("touchend",this._hide),this.settings.el.removeEventListener("touchmove",this._handleMovement)):(this.settings.el.removeEventListener("touchstart",this._preventDefault),this.settings.el.removeEventListener("touchend",this._preventDefault),this.settings.el.removeEventListener("touchmove",this._preventDefault))},a.prototype._handleEntry=function(d){this._preventDefaultAllowTouchScroll(d),this._lastMovement=d,d.type=="mouseenter"&&this.settings.hoverDelay?this.entryTimeout=setTimeout(this._show,this.settings.hoverDelay):this.settings.touchDelay?this.entryTimeout=setTimeout(this._show,this.settings.touchDelay):this._show()},a.prototype._show=function(){if(this.enabled){var d=this.settings.onShow;d&&typeof d=="function"&&d(),this.settings.zoomPane.show(this.settings.el.getAttribute(this.settings.sourceAttribute),this.settings.el.clientWidth,this.settings.el.clientHeight),this._lastMovement&&((d=this._lastMovement.touches)&&this.settings.touchBoundingBox||!d&&this.settings.hoverBoundingBox)&&this.boundingBox.show(this.settings.zoomPane.el.clientWidth,this.settings.zoomPane.el.clientHeight),this._handleMovement()}},a.prototype._hide=function(d){d&&this._preventDefaultAllowTouchScroll(d),this._lastMovement=null,this.entryTimeout&&clearTimeout(this.entryTimeout),this.boundingBox&&this.boundingBox.hide(),(d=this.settings.onHide)&&typeof d=="function"&&d(),this.settings.zoomPane.hide()},a.prototype._handleMovement=function(d){if(d)this._preventDefaultAllowTouchScroll(d),this._lastMovement=d;else if(this._lastMovement)d=this._lastMovement;else return;if(d.touches){d=d.touches[0];var u=d.clientX,m=d.clientY}else u=d.clientX,m=d.clientY;d=this.settings.el.getBoundingClientRect(),u=(u-d.left)/this.settings.el.clientWidth,m=(m-d.top)/this.settings.el.clientHeight,this.boundingBox&&this.boundingBox.setPosition(u,m,d),this.settings.zoomPane.setPosition(u,m,d)},s.d.global.Object.defineProperties(a.prototype,{isShowing:{configurable:!0,enumerable:!0,get:function(){return this.settings.zoomPane.isShowing}}}),o.prototype._buildClasses=function(d){var u=["drift-"+d],m=this.settings.namespace;return m&&u.push(m+"-"+d),u},o.prototype._buildElement=function(){this.el=document.createElement("div"),t(this.el,this._buildClasses("zoom-pane"));var d=document.createElement("div");t(d,this._buildClasses("zoom-pane-loader")),this.el.appendChild(d),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)},o.prototype._setImageURL=function(d){this.imgEl.setAttribute("src",d)},o.prototype._setImageSize=function(d,u){this.imgEl.style.width=d*this.settings.zoomFactor+"px",this.imgEl.style.height=u*this.settings.zoomFactor+"px"},o.prototype.setPosition=function(d,u,m){var g=this.imgEl.offsetWidth,y=this.imgEl.offsetHeight,E=this.el.offsetWidth,b=this.el.offsetHeight,C=E/2-g*d,B=b/2-y*u,I=E-g,k=b-y,Q=0<I,G=0<k;y=Q?I/2:0,g=G?k/2:0,I=Q?I/2:I,k=G?k/2:k,this.el.parentElement===this.settings.inlineContainer&&(G=window.pageXOffset,Q=window.pageYOffset,d=m.left+d*m.width-E/2+this.settings.inlineOffsetX+G,u=m.top+u*m.height-b/2+this.settings.inlineOffsetY+Q,this.settings.containInline&&(d<m.left+G?d=m.left+G:d+E>m.left+m.width+G&&(d=m.left+m.width-E+G),u<m.top+Q?u=m.top+Q:u+b>m.top+m.height+Q&&(u=m.top+m.height-b+Q)),this.el.style.left=d+"px",this.el.style.top=u+"px"),this.settings.showWhitespaceAtEdges||(C>y?C=y:C<I&&(C=I),B>g?B=g:B<k&&(B=k)),this.imgEl.style.transform="translate("+C+"px, "+B+"px)",this.imgEl.style.webkitTransform="translate("+C+"px, "+B+"px)"},o.prototype._removeListenersAndResetClasses=function(){this.el.removeEventListener("animationend",this._completeShow),this.el.removeEventListener("animationend",this._completeHide),this.el.removeEventListener("webkitAnimationEnd",this._completeShow),this.el.removeEventListener("webkitAnimationEnd",this._completeHide),i(this.el,this.openClasses),i(this.el,this.closingClasses)},o.prototype.show=function(d,u,m){this._removeListenersAndResetClasses(),this.isShowing=!0,t(this.el,this.openClasses),this.imgEl.getAttribute("src")!=d&&(t(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad),this._setImageURL(d)),this._setImageSize(u,m),this._isInline?this._showInline():this._showInContainer(),this.HAS_ANIMATION&&(this.el.addEventListener("animationend",this._completeShow),this.el.addEventListener("webkitAnimationEnd",this._completeShow),t(this.el,this.openingClasses))},o.prototype._showInline=function(){this.settings.inlineContainer.appendChild(this.el),t(this.el,this.inlineClasses)},o.prototype._showInContainer=function(){this.settings.container.appendChild(this.el)},o.prototype.hide=function(){this._removeListenersAndResetClasses(),this.isShowing=!1,this.HAS_ANIMATION?(this.el.addEventListener("animationend",this._completeHide),this.el.addEventListener("webkitAnimationEnd",this._completeHide),t(this.el,this.closingClasses)):(i(this.el,this.openClasses),i(this.el,this.inlineClasses))},o.prototype._completeShow=function(){this.el.removeEventListener("animationend",this._completeShow),this.el.removeEventListener("webkitAnimationEnd",this._completeShow),i(this.el,this.openingClasses)},o.prototype._completeHide=function(){this.el.removeEventListener("animationend",this._completeHide),this.el.removeEventListener("webkitAnimationEnd",this._completeHide),i(this.el,this.openClasses),i(this.el,this.closingClasses),i(this.el,this.inlineClasses),this.el.style.left="",this.el.style.top="",this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el)},o.prototype._handleLoad=function(){this.imgEl.removeEventListener("load",this._handleLoad),i(this.el,this.loadingClasses)},s.d.global.Object.defineProperties(o.prototype,{_isInline:{configurable:!0,enumerable:!0,get:function(){var d=this.settings.inline;return d===!0||typeof d=="number"&&window.innerWidth<=d}}}),c.prototype._buildZoomPane=function(){this.zoomPane=new o({container:this.settings.paneContainer,zoomFactor:this.settings.zoomFactor,showWhitespaceAtEdges:this.settings.showWhitespaceAtEdges,containInline:this.settings.containInline,inline:this.settings.inlinePane,namespace:this.settings.namespace,inlineOffsetX:this.settings.inlineOffsetX,inlineOffsetY:this.settings.inlineOffsetY,inlineContainer:this.settings.inlineContainer})},c.prototype._buildTrigger=function(){this.trigger=new a({el:this.triggerEl,zoomPane:this.zoomPane,handleTouch:this.settings.handleTouch,onShow:this.settings.onShow,onHide:this.settings.onHide,sourceAttribute:this.settings.sourceAttribute,hoverDelay:this.settings.hoverDelay,touchDelay:this.settings.touchDelay,hoverBoundingBox:this.settings.hoverBoundingBox,touchBoundingBox:this.settings.touchBoundingBox,namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,boundingBoxContainer:this.settings.boundingBoxContainer,passive:this.settings.passive})},c.prototype.setZoomImageURL=function(d){this.zoomPane._setImageURL(d)},c.prototype.disable=function(){this.trigger.enabled=!1},c.prototype.enable=function(){this.trigger.enabled=!0},c.prototype.destroy=function(){this.trigger._hide(),this.trigger._unbindEvents()},s.d.global.Object.defineProperties(c.prototype,{isShowing:{configurable:!0,enumerable:!0,get:function(){return this.zoomPane.isShowing}},zoomFactor:{configurable:!0,enumerable:!0,get:function(){return this.settings.zoomFactor},set:function(d){this.settings.zoomFactor=d,this.zoomPane.settings.zoomFactor=d,this.trigger.settings.zoomFactor=d,this.boundingBox.settings.zoomFactor=d}}}),Object.defineProperty(c.prototype,"isShowing",{get:function(){return this.isShowing}}),Object.defineProperty(c.prototype,"zoomFactor",{get:function(){return this.zoomFactor},set:function(d){this.zoomFactor=d}}),c.prototype.setZoomImageURL=c.prototype.setZoomImageURL,c.prototype.disable=c.prototype.disable,c.prototype.enable=c.prototype.enable,c.prototype.destroy=c.prototype.destroy,window.Drift=c}).call(globalThis||window,window.__wpcc=window.__wpcc||{});const FC=require("./image-compare-viewer.min.js"),kC=document.getElementById("image-compare"),OC={controlColor:"#FFFFFF",controlShadow:!1,addCircle:!0,addCircleBlur:!0,smoothing:!1,showLabels:!0,labelOptions:{before:"Before",after:"After"}};new FC(kC,OC).mount();/*! jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jörn Zaefferer; Licensed MIT */(function(s){s.extend(s.fn,{validate:function(e){if(!this.length)return e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var t=s.data(this[0],"validator");return t||(this.attr("novalidate","novalidate"),t=new s.validator(e,this[0]),s.data(this[0],"validator",t),t.settings.onsubmit&&(this.validateDelegate(":submit","click",function(i){t.settings.submitHandler&&(t.submitButton=i.target),s(i.target).hasClass("cancel")&&(t.cancelSubmit=!0),s(i.target).attr("formnovalidate")!==void 0&&(t.cancelSubmit=!0)}),this.submit(function(i){function n(){var r;return t.settings.submitHandler?(t.submitButton&&(r=s("<input type='hidden'/>").attr("name",t.submitButton.name).val(s(t.submitButton).val()).appendTo(t.currentForm)),t.settings.submitHandler.call(t,t.currentForm,i),t.submitButton&&r.remove(),!1):!0}return t.settings.debug&&i.preventDefault(),t.cancelSubmit?(t.cancelSubmit=!1,n()):t.form()?t.pendingRequest?(t.formSubmitted=!0,!1):n():(t.focusInvalid(),!1)})),t)},valid:function(){if(s(this[0]).is("form"))return this.validate().form();var e=!0,t=s(this[0].form).validate();return this.each(function(){e=e&&t.element(this)}),e},removeAttrs:function(e){var t={},i=this;return s.each(e.split(/\s/),function(n,r){t[r]=i.attr(r),i.removeAttr(r)}),t},rules:function(e,t){var i=this[0];if(e){var n=s.data(i.form,"validator").settings,r=n.rules,a=s.validator.staticRules(i);switch(e){case"add":s.extend(a,s.validator.normalizeRule(t)),delete a.messages,r[i.name]=a,t.messages&&(n.messages[i.name]=s.extend(n.messages[i.name],t.messages));break;case"remove":if(!t)return delete r[i.name],a;var o={};return s.each(t.split(/\s/),function(d,u){o[u]=a[u],delete a[u]}),o}}var c=s.validator.normalizeRules(s.extend({},s.validator.classRules(i),s.validator.attributeRules(i),s.validator.dataRules(i),s.validator.staticRules(i)),i);if(c.required){var h=c.required;delete c.required,c=s.extend({required:h},c)}return c}}),s.extend(s.expr[":"],{blank:function(e){return!s.trim(""+s(e).val())},filled:function(e){return!!s.trim(""+s(e).val())},unchecked:function(e){return!s(e).prop("checked")}}),s.validator=function(e,t){this.settings=s.extend(!0,{},s.validator.defaults,e),this.currentForm=t,this.init()},s.validator.format=function(e,t){return arguments.length===1?function(){var i=s.makeArray(arguments);return i.unshift(e),s.validator.format.apply(this,i)}:(arguments.length>2&&t.constructor!==Array&&(t=s.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),s.each(t,function(i,n){e=e.replace(RegExp("\\{"+i+"\\}","g"),function(){return n})}),e)},s.extend(s.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:s([]),errorLabelContainer:s([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(t.which!==9||this.elementValue(e)!=="")&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,i){e.type==="radio"?this.findByName(e.name).addClass(t).removeClass(i):s(e).addClass(t).removeClass(i)},unhighlight:function(e,t,i){e.type==="radio"?this.findByName(e.name).removeClass(t).addClass(i):s(e).removeClass(t).addClass(i)}},setDefaults:function(e){s.extend(s.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:s.validator.format("Please enter no more than {0} characters."),minlength:s.validator.format("Please enter at least {0} characters."),rangelength:s.validator.format("Please enter a value between {0} and {1} characters long."),range:s.validator.format("Please enter a value between {0} and {1}."),max:s.validator.format("Please enter a value less than or equal to {0}."),min:s.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(n){var r=s.data(this[0].form,"validator"),a="on"+n.type.replace(/^validate/,"");r.settings[a]&&r.settings[a].call(r,this[0],n)}this.labelContainer=s(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||s(this.currentForm),this.containers=s(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t=this.groups={};s.each(this.settings.groups,function(n,r){typeof r=="string"&&(r=r.split(/\s/)),s.each(r,function(a,o){t[o]=n})});var i=this.settings.rules;s.each(i,function(n,r){i[n]=s.validator.normalizeRule(r)}),s(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&s(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),s.extend(this.submitted,this.errorMap),this.invalid=s.extend({},this.errorMap),this.valid()||s(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=s(e);var t=this.check(e)!==!1;return t?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t},showErrors:function(e){if(e){s.extend(this.errorMap,e),this.errorList=[];for(var t in e)this.errorList.push({message:e[t],element:this.findByName(t)[0]});this.successList=s.grep(this.successList,function(i){return!(i.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){s.fn.resetForm&&s(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{s(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch{}},findLastActive:function(){var e=this.lastActive;return e&&s.grep(this.errorList,function(t){return t.element.name===e.name}).length===1&&e},elements:function(){var e=this,t={};return s(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in t||!e.objectLength(s(this).rules())?!1:(t[this.name]=!0,!0)})},clean:function(e){return s(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return s(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=s([]),this.toHide=s([]),this.currentElements=s([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=s(e).attr("type"),i=s(e).val();return t==="radio"||t==="checkbox"?s("input[name='"+s(e).attr("name")+"']:checked").val():typeof i=="string"?i.replace(/\r/g,""):i},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i=s(e).rules(),n=!1,r=this.elementValue(e);for(var a in i){var o={method:a,parameters:i[a]};try{if(t=s.validator.methods[a].call(this,r,e,o.parameters),t==="dependency-mismatch"){n=!0;continue}if(n=!1,t==="pending")return this.toHide=this.toHide.not(this.errorsFor(e)),void 0;if(!t)return this.formatAndAdd(e,o),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",c),c}}return n?void 0:(this.objectLength(i)&&this.successList.push(e),!0)},customDataMessage:function(e,t){return s(e).data("msg-"+t.toLowerCase())||e.attributes&&s(e).attr("data-msg-"+t.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==void 0)return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,s.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t.method),n=/\$?\{(\d+)\}/g;typeof i=="function"?i=i.call(this,t.parameters,e):n.test(i)&&(i=s.validator.format(i.replace(n,"{$1}"),t.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return s(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var i=this.errorsFor(e);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(t)):(i=s("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,s(e)):i.insertAfter(e))),!t&&this.settings.success&&(i.text(""),typeof this.settings.success=="string"?i.addClass(this.settings.success):this.settings.success(i,e)),this.toShow=this.toShow.add(i)},errorsFor:function(e){var t=this.idOrName(e);return this.errors().filter(function(){return s(this).attr("for")===t})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return s(this.currentForm).find("[name='"+e+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return s("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!s(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!s.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],t&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(s(this.currentForm).submit(),this.formSubmitted=!1):!t&&this.pendingRequest===0&&this.formSubmitted&&(s(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return s.data(e,"previousValue")||s.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:s.extend(this.classRuleSettings,e)},classRules:function(e){var t={},i=s(e).attr("class");return i&&s.each(i.split(" "),function(){this in s.validator.classRuleSettings&&s.extend(t,s.validator.classRuleSettings[this])}),t},attributeRules:function(e){var t={},i=s(e),n=i[0].getAttribute("type");for(var r in s.validator.methods){var a;r==="required"?(a=i.get(0).getAttribute(r),a===""&&(a=!0),a=!!a):a=i.attr(r),/min|max/.test(r)&&(n===null||/number|range|text/.test(n))&&(a=Number(a)),a?t[r]=a:n===r&&n!=="range"&&(t[r]=!0)}return t.maxlength&&/-1|2147483647|524288/.test(t.maxlength)&&delete t.maxlength,t},dataRules:function(e){var t,i,n={},r=s(e);for(t in s.validator.methods)i=r.data("rule-"+t.toLowerCase()),i!==void 0&&(n[t]=i);return n},staticRules:function(e){var t={},i=s.data(e.form,"validator");return i.settings.rules&&(t=s.validator.normalizeRule(i.settings.rules[e.name])||{}),t},normalizeRules:function(e,t){return s.each(e,function(i,n){if(n===!1)return delete e[i],void 0;if(n.param||n.depends){var r=!0;switch(typeof n.depends){case"string":r=!!s(n.depends,t.form).length;break;case"function":r=n.depends.call(t,t)}r?e[i]=n.param!==void 0?n.param:!0:delete e[i]}}),s.each(e,function(i,n){e[i]=s.isFunction(n)?n(t):n}),s.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),s.each(["rangelength","range"],function(){var i;e[this]&&(s.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:typeof e[this]=="string"&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),s.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if(typeof e=="string"){var t={};s.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,i){s.validator.methods[e]=t,s.validator.messages[e]=i!==void 0?i:s.validator.messages[e],3>t.length&&s.validator.addClassRules(e,s.validator.normalizeRule(e))},methods:{required:function(e,t,i){if(!this.depend(i,t))return"dependency-mismatch";if(t.nodeName.toLowerCase()==="select"){var n=s(t).val();return n&&n.length>0}return this.checkable(t)?this.getLength(e,t)>0:s.trim(e).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,r=!1;e=e.replace(/\D/g,"");for(var a=e.length-1;a>=0;a--){var o=e.charAt(a);n=parseInt(o,10),r&&(n*=2)>9&&(n-=9),i+=n,r=!r}return i%10===0},minlength:function(e,t,i){var n=s.isArray(e)?e.length:this.getLength(s.trim(e),t);return this.optional(t)||n>=i},maxlength:function(e,t,i){var n=s.isArray(e)?e.length:this.getLength(s.trim(e),t);return this.optional(t)||i>=n},rangelength:function(e,t,i){var n=s.isArray(e)?e.length:this.getLength(s.trim(e),t);return this.optional(t)||n>=i[0]&&i[1]>=n},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&i[1]>=e},equalTo:function(e,t,i){var n=s(i);return this.settings.onfocusout&&n.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){s(t).valid()}),e===n.val()},remote:function(e,t,i){if(this.optional(t))return"dependency-mismatch";var n=this.previousValue(t);if(this.settings.messages[t.name]||(this.settings.messages[t.name]={}),n.originalMessage=this.settings.messages[t.name].remote,this.settings.messages[t.name].remote=n.message,i=typeof i=="string"&&{url:i}||i,n.old===e)return n.valid;n.old=e;var r=this;this.startRequest(t);var a={};return a[t.name]=e,s.ajax(s.extend(!0,{url:i,mode:"abort",port:"validate"+t.name,dataType:"json",data:a,success:function(o){r.settings.messages[t.name].remote=n.originalMessage;var c=o===!0||o==="true";if(c){var h=r.formSubmitted;r.prepareElement(t),r.formSubmitted=h,r.successList.push(t),delete r.invalid[t.name],r.showErrors()}else{var d={},u=o||r.defaultMessage(t,"remote");d[t.name]=n.message=s.isFunction(u)?u(e):u,r.invalid[t.name]=!0,r.showErrors(d)}n.valid=c,r.stopRequest(t,c)}},i)),"pending"}}}),s.format=s.validator.format})(jQuery),function(s){var e={};if(s.ajaxPrefilter)s.ajaxPrefilter(function(i,n,r){var a=i.port;i.mode==="abort"&&(e[a]&&e[a].abort(),e[a]=r)});else{var t=s.ajax;s.ajax=function(i){var n=("mode"in i?i:s.ajaxSettings).mode,r=("port"in i?i:s.ajaxSettings).port;return n==="abort"?(e[r]&&e[r].abort(),e[r]=t.apply(this,arguments),e[r]):t.apply(this,arguments)}}}(jQuery),function(s){s.extend(s.fn,{validateDelegate:function(e,t,i){return this.bind(t,function(n){var r=s(n.target);return r.is(e)?i.apply(r,arguments):void 0})}})}(jQuery);/*! lazysizes - v5.3.2 */(function(s){var e=function(t,i,n){var r,a;if(function(){var ee,re={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};a=t.lazySizesConfig||t.lazysizesConfig||{};for(ee in re)ee in a||(a[ee]=re[ee])}(),!i||!i.getElementsByClassName)return{init:function(){},cfg:a,noSupport:!0};var o=i.documentElement,c=t.HTMLPictureElement,h="addEventListener",d="getAttribute",u=t[h].bind(t),m=t.setTimeout,g=t.requestAnimationFrame||m,y=t.requestIdleCallback,E=/^picture$/i,b=["load","error","lazyincluded","_lazyloaded"],C={},B=Array.prototype.forEach,I=function(ee,re){return C[re]||(C[re]=new RegExp("(\\s|^)"+re+"(\\s|$)")),C[re].test(ee[d]("class")||"")&&C[re]},k=function(ee,re){I(ee,re)||ee.setAttribute("class",(ee[d]("class")||"").trim()+" "+re)},Q=function(ee,re){var ye;(ye=I(ee,re))&&ee.setAttribute("class",(ee[d]("class")||"").replace(ye," "))},G=function(ee,re,ye){var me=ye?h:"removeEventListener";ye&&G(ee,re),b.forEach(function(V){ee[me](V,re)})},U=function(ee,re,ye,me,V){var z=i.createEvent("Event");return ye||(ye={}),ye.instance=r,z.initEvent(re,!me,!V),z.detail=ye,ee.dispatchEvent(z),z},te=function(ee,re){var ye;!c&&(ye=t.picturefill||a.pf)?(re&&re.src&&!ee[d]("srcset")&&ee.setAttribute("srcset",re.src),ye({reevaluate:!0,elements:[ee]})):re&&re.src&&(ee.src=re.src)},ue=function(ee,re){return(getComputedStyle(ee,null)||{})[re]},pe=function(ee,re,ye){for(ye=ye||ee.offsetWidth;ye<a.minSize&&re&&!ee._lazysizesWidth;)ye=re.offsetWidth,re=re.parentNode;return ye},ce=function(){var ee,re,ye=[],me=[],V=ye,z=function(){var ae=V;for(V=ye.length?me:ye,ee=!0,re=!1;ae.length;)ae.shift()();ee=!1},J=function(ae,Z){ee&&!Z?ae.apply(this,arguments):(V.push(ae),re||(re=!0,(i.hidden?m:g)(z)))};return J._lsFlush=z,J}(),he=function(ee,re){return re?function(){ce(ee)}:function(){var ye=this,me=arguments;ce(function(){ee.apply(ye,me)})}},Me=function(ee){var re,ye=0,me=a.throttleDelay,V=a.ricTimeout,z=function(){re=!1,ye=n.now(),ee()},J=y&&V>49?function(){y(z,{timeout:V}),V!==a.ricTimeout&&(V=a.ricTimeout)}:he(function(){m(z)},!0);return function(ae){var Z;(ae=ae===!0)&&(V=33),!re&&(re=!0,Z=me-(n.now()-ye),Z<0&&(Z=0),ae||Z<9?J():m(J,Z))}},De=function(ee){var re,ye,me=99,V=function(){re=null,ee()},z=function(){var J=n.now()-ye;J<me?m(z,me-J):(y||V)(V)};return function(){ye=n.now(),re||(re=m(z,me))}},Qe=function(){var ee,re,ye,me,V,z,J,ae,Z,Se,Ie,Oe,K=/^img$/i,L=/^iframe$/i,oe="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),ne=0,Le=0,fe=0,Re=-1,Je=function(_){fe--,(!_||fe<0||!_.target)&&(fe=0)},Xe=function(_){return Oe==null&&(Oe=ue(i.body,"visibility")=="hidden"),Oe||!(ue(_.parentNode,"visibility")=="hidden"&&ue(_,"visibility")=="hidden")},st=function(_,R){var F,S=_,D=Xe(_);for(ae-=R,Ie+=R,Z-=R,Se+=R;D&&(S=S.offsetParent)&&S!=i.body&&S!=o;)D=(ue(S,"opacity")||1)>0,D&&ue(S,"overflow")!="visible"&&(F=S.getBoundingClientRect(),D=Se>F.left&&Z<F.right&&Ie>F.top-1&&ae<F.bottom+1);return D},Ve=function(){var _,R,F,S,D,H,X,q,W,de,ge,ve,Te=r.elements;if((me=a.loadMode)&&fe<8&&(_=Te.length)){for(R=0,Re++;R<_;R++)if(!(!Te[R]||Te[R]._lazyRace)){if(!oe||r.prematureUnveil&&r.prematureUnveil(Te[R])){x(Te[R]);continue}if((!(q=Te[R][d]("data-expand"))||!(H=q*1))&&(H=Le),de||(de=!a.expand||a.expand<1?o.clientHeight>500&&o.clientWidth>500?500:370:a.expand,r._defEx=de,ge=de*a.expFactor,ve=a.hFac,Oe=null,Le<ge&&fe<1&&Re>2&&me>2&&!i.hidden?(Le=ge,Re=0):me>1&&Re>1&&fe<6?Le=de:Le=ne),W!==H&&(z=innerWidth+H*ve,J=innerHeight+H,X=H*-1,W=H),F=Te[R].getBoundingClientRect(),(Ie=F.bottom)>=X&&(ae=F.top)<=J&&(Se=F.right)>=X*ve&&(Z=F.left)<=z&&(Ie||Se||Z||ae)&&(a.loadHidden||Xe(Te[R]))&&(re&&fe<3&&!q&&(me<3||Re<4)||st(Te[R],H))){if(x(Te[R]),D=!0,fe>9)break}else!D&&re&&!S&&fe<4&&Re<4&&me>2&&(ee[0]||a.preloadAfterLoad)&&(ee[0]||!q&&(Ie||Se||Z||ae||Te[R][d](a.sizesAttr)!="auto"))&&(S=ee[0]||Te[R])}S&&!D&&x(S)}},rt=Me(Ve),Ze=function(_){var R=_.target;if(R._lazyCache){delete R._lazyCache;return}Je(_),k(R,a.loadedClass),Q(R,a.loadingClass),G(R,p),U(R,"lazyloaded")},Et=he(Ze),p=function(_){Et({target:_.target})},l=function(_,R){var F=_.getAttribute("data-load-mode")||a.iframeLoadMode;F==0?_.contentWindow.location.replace(R):F==1&&(_.src=R)},f=function(_){var R,F=_[d](a.srcsetAttr);(R=a.customMedia[_[d]("data-media")||_[d]("media")])&&_.setAttribute("media",R),F&&_.setAttribute("srcset",F)},v=he(function(_,R,F,S,D){var H,X,q,W,de,ge;(de=U(_,"lazybeforeunveil",R)).defaultPrevented||(S&&(F?k(_,a.autosizesClass):_.setAttribute("sizes",S)),X=_[d](a.srcsetAttr),H=_[d](a.srcAttr),D&&(q=_.parentNode,W=q&&E.test(q.nodeName||"")),ge=R.firesLoad||"src"in _&&(X||H||W),de={target:_},k(_,a.loadingClass),ge&&(clearTimeout(ye),ye=m(Je,2500),G(_,p,!0)),W&&B.call(q.getElementsByTagName("source"),f),X?_.setAttribute("srcset",X):H&&!W&&(L.test(_.nodeName)?l(_,H):_.src=H),D&&(X||W)&&te(_,{src:H})),_._lazyRace&&delete _._lazyRace,Q(_,a.lazyClass),ce(function(){var ve=_.complete&&_.naturalWidth>1;(!ge||ve)&&(ve&&k(_,a.fastLoadedClass),Ze(de),_._lazyCache=!0,m(function(){"_lazyCache"in _&&delete _._lazyCache},9)),_.loading=="lazy"&&fe--},!0)}),x=function(_){if(!_._lazyRace){var R,F=K.test(_.nodeName),S=F&&(_[d](a.sizesAttr)||_[d]("sizes")),D=S=="auto";(D||!re)&&F&&(_[d]("src")||_.srcset)&&!_.complete&&!I(_,a.errorClass)&&I(_,a.lazyClass)||(R=U(_,"lazyunveilread").detail,D&&Ee.updateElem(_,!0,_.offsetWidth),_._lazyRace=!0,fe++,v(_,R,D,S,F))}},w=De(function(){a.loadMode=3,rt()}),T=function(){a.loadMode==3&&(a.loadMode=2),w()},P=function(){if(!re){if(n.now()-V<999){m(P,999);return}re=!0,a.loadMode=3,rt(),u("scroll",T,!0)}};return{_:function(){V=n.now(),r.elements=i.getElementsByClassName(a.lazyClass),ee=i.getElementsByClassName(a.lazyClass+" "+a.preloadClass),u("scroll",rt,!0),u("resize",rt,!0),u("pageshow",function(_){if(_.persisted){var R=i.querySelectorAll("."+a.loadingClass);R.length&&R.forEach&&g(function(){R.forEach(function(F){F.complete&&x(F)})})}}),t.MutationObserver?new MutationObserver(rt).observe(o,{childList:!0,subtree:!0,attributes:!0}):(o[h]("DOMNodeInserted",rt,!0),o[h]("DOMAttrModified",rt,!0),setInterval(rt,999)),u("hashchange",rt,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(_){i[h](_,rt,!0)}),/d$|^c/.test(i.readyState)?P():(u("load",P),i[h]("DOMContentLoaded",rt),m(P,2e4)),r.elements.length?(Ve(),ce._lsFlush()):rt()},checkElems:rt,unveil:x,_aLSL:T}}(),Ee=function(){var ee,re=he(function(z,J,ae,Z){var Se,Ie,Oe;if(z._lazysizesWidth=Z,Z+="px",z.setAttribute("sizes",Z),E.test(J.nodeName||""))for(Se=J.getElementsByTagName("source"),Ie=0,Oe=Se.length;Ie<Oe;Ie++)Se[Ie].setAttribute("sizes",Z);ae.detail.dataAttr||te(z,ae.detail)}),ye=function(z,J,ae){var Z,Se=z.parentNode;Se&&(ae=pe(z,Se,ae),Z=U(z,"lazybeforesizes",{width:ae,dataAttr:!!J}),Z.defaultPrevented||(ae=Z.detail.width,ae&&ae!==z._lazysizesWidth&&re(z,Se,Z,ae)))},me=function(){var z,J=ee.length;if(J)for(z=0;z<J;z++)ye(ee[z])},V=De(me);return{_:function(){ee=i.getElementsByClassName(a.autosizesClass),u("resize",V)},checkElems:V,updateElem:ye}}(),ke=function(){!ke.i&&i.getElementsByClassName&&(ke.i=!0,Ee._(),Qe._())};return m(function(){a.init&&ke()}),r={cfg:a,autoSizer:Ee,loader:Qe,init:ke,uP:te,aC:k,rC:Q,hC:I,fire:U,gW:pe,rAF:ce}}(s,s.document,Date);s.lazySizes=e,typeof Un=="object"&&Un.exports&&(Un.exports=e)})(typeof window<"u"?window:{});(function(s){var e=function(){if(s(".image-select").length>0){const re=s(".image-select");re.find("option").each((ye,me)=>{const V=s(me),z=V.attr("data-thumbnail");z&&V.attr("data-content","<img src='%i'/> %s".replace(/%i/,z).replace(/%s/,V.text()))}),re.selectpicker()}};const t=function(){s("body").hasClass("preload-wrapper")&&setTimeout(function(){s(".preload").fadeOut("slow",function(){s(this).remove()})},100)};var i=function(){s(".scroll-snap").on("scroll",function(){var re=s(this).scrollLeft();s(".value-process").css("width",`max(30%,${re}%)`)})},n=function(){s(".minus-btn").on("click",function(re){re.preventDefault();var ye=s(this),me=ye.closest("div").find("input"),V=parseInt(me.val());V>1&&(V=V-1),me.val(V)}),s(".plus-btn").on("click",function(re){re.preventDefault();var ye=s(this),me=ye.closest("div").find("input"),V=parseInt(me.val());V>-1&&(V=V+1),me.val(V)})},r=function(re){s(".remove").on("click",function(ye){ye.preventDefault();var me=s(this);me.closest(".file-delete").remove()}),s(".tf-compapre-button-clear-all").on("click",function(ye){s(".tf-compare-item").remove()}),s(".tf-compare-item .icon").on("click",function(ye){var me=s(this);me.closest(".tf-compare-item").remove()}),s(".tf-mini-cart-remove").on("click",function(ye){console.log("hhh"),s(this).closest(".tf-mini-cart-item").remove()})},a=function(){if(s("div").hasClass("progress-wrap")){var re=document.querySelector(".progress-wrap path"),ye=re.getTotalLength();re.style.transition=re.style.WebkitTransition="none",re.style.strokeDasharray=ye+" "+ye,re.style.strokeDashoffset=ye,re.getBoundingClientRect(),re.style.transition=re.style.WebkitTransition="stroke-dashoffset 10ms linear";var me=function(){var J=s(window).scrollTop(),ae=s(document).height()-s(window).height(),Z=ye-J*ye/ae;re.style.strokeDashoffset=Z};me(),s(window).scroll(me);var V=200,z=0;jQuery(window).on("scroll",function(){jQuery(this).scrollTop()>V?jQuery(".progress-wrap").addClass("active-progress"):jQuery(".progress-wrap").removeClass("active-progress")}),jQuery(".progress-wrap").on("click",function(J){return J.preventDefault(),jQuery("html, body").animate({scrollTop:0},z),!1})}},o=function(){s(".card-product").length>0&&s(".color-swatch").on("click, mouseover",function(){var re=s(this).find("img").attr("src"),ye=s(this).closest(".card-product").find(".img-product");ye.attr("src",re),s(this).closest(".card-product").find(".color-swatch.active").removeClass("active"),s(this).addClass("active")})},c=function(){s(".tf-dropdown-sort").length>0&&s(".select-item").click(function(re){s(this).closest(".tf-dropdown-sort").find(".text-sort-value").text(s(this).find(".text-value-item").text()),s(this).closest(".dropdown-menu").find(".select-item.active").removeClass("active"),s(this).addClass("active")})},h=function(){var re={duration:250};s(".footer-heading-moblie").on("click",function(){s(this).parent(".footer-col-block").toggleClass("open"),s(this).parent(".footer-col-block").is(".open")?s(this).next().slideDown(re):s(this).next().slideUp(re)})},d=function(){s(".close-announcement-bar").on("click",function(re){re.preventDefault();var ye=s(this),me=s(".announcement-bar").height()+"px";ye.closest(".announcement-bar").css("margin-top",`-${me}`),s(".announcement-bar").fadeOut("slow",function(){ye.closest(".announcement-bar").remove()})})},u=function(){const re=document.querySelectorAll(".range-input input"),ye=document.querySelector(".progress-price"),me=document.querySelector(".min-price"),V=document.querySelector(".max-price");let z=10;re.forEach(J=>{J.addEventListener("input",ae=>{let Z=parseInt(re[0].value,10),Se=parseInt(re[1].value,10);Se-Z<z?ae.target.class==="range-min"?re[0].value=Se-z:re[1].value=Z+z:(ye.style.left=Z/re[0].max*100+"%",ye.style.right=100-Se/re[1].max*100+"%"),me.innerHTML=Z,V.innerHTML=Se,Z>=290&&(me.innerHTML=290),Se<=10&&(V.innerHTML=10)})})},m=function(){if(s(".wrap-sidebar-mobile,.wrap-sidebar-account").length>0){var re=s(".wrap-sidebar-mobile,.wrap-sidebar-account").html();s(".sidebar-mobile-append").append(re)}},g=function(){s(".widget-tabs").each(function(){s(this).find(".widget-menu-tab").children(".item-title").on("click",function(){var re=s(this).index(),ye=s(this).siblings().removeClass("active").parents(".widget-tabs").find(".widget-content-tab").children().eq(re);ye.addClass("active").fadeIn("slow"),ye.siblings().removeClass("active"),s(this).addClass("active").parents(".widget-tabs").find(".widget-content-tab").children().eq(re)})})},y=function(re,ye){var me={duration:200};s(ye+" .toggle-title.active").siblings(".toggle-content").show(),s(re+" .toggle-title").on("click",function(){s(re+" "+ye).removeClass("active"),s(this).closest(ye).toggleClass("active"),s(this).is(".active")?(s(re+" "+ye).removeClass("active"),s(this).toggleClass("active"),s(this).next().slideToggle(me)):(s(this).toggleClass("active"),s(this).next().slideToggle(me))})},E=function(){s(".btn-icon-action").length&&s(".btn-icon-action").on("click",function(re){s(this).toggleClass("active")})},b=function(){s(".tf-btn-loading").length&&s(".tf-btn-loading").on("click",function(re){s(this).addClass("loading");var ye=s(this);setTimeout(function(){ye.removeClass("loading")},600)})},C=function(){s(".variant-picker-item").length&&s(".variant-picker-item label").on("click",function(re){s(this).closest(".variant-picker-item").find(".variant-picker-label-value").text(s(this).data("value"))}),s(".variant-picker-item").length&&s(".select-size").on("click",function(re){s(this).closest(".variant-picker-item").find(".variant-picker-label-value").text(s(this).data("value"))})},B=function(){s(".tf-control-layout").length>0&&(s(".tf-view-layout-switch").on("click",function(){var re=s(this).data("value-grid");s(".grid-layout").attr("data-grid",re),s(this).closest(".tf-control-layout").find(".tf-view-layout-switch.active").removeClass("active"),s(this).addClass("active")}),matchMedia("only screen and (max-width: 1150px)").matches&&(s(".tf-view-layout-switch.active").removeClass("active"),s(".sw-layout-3").addClass("active")),matchMedia("only screen and (max-width: 768px)").matches&&(s(".tf-view-layout-switch.active").removeClass("active"),s(".sw-layout-2").addClass("active")))},I=function(){s(".item-has-checkox").length&&s(".item-has-checkox input:checkbox").on("click",function(re){s(this).closest(".item-has-checkox").toggleClass("check")})},k=function(){s(".fl-item").slice(0,8).show(),s(".fl-item2").slice(0,8).show(),s(".fl-item3").slice(0,8).show(),s(".scroll-loadmore").length>0&&s(window).scroll(function(){s(window).scrollTop()>=s(document).height()-s(window).height()&&setTimeout(()=>{s(".fl-item:hidden").slice(0,4).show(),s(".fl-item:hidden").length==0&&s(".view-more-button").hide()},0)}),s(".loadmore-item").length>0&&s(".btn-loadmore").on("click",function(){setTimeout(()=>{s(".fl-item:hidden").slice(0,4).show(),s(".fl-item:hidden").length==0&&s(".view-more-button").hide()},600)}),s(".loadmore-item2").length>0&&s(".btn-loadmore2").on("click",function(){setTimeout(()=>{s(".fl-item2:hidden").slice(0,4).show(),s(".fl-item2:hidden").length==0&&s(".view-more-button2").hide()},600)}),s(".loadmore-item3").length>0&&s(".btn-loadmore3").on("click",function(){setTimeout(()=>{s(".fl-item3:hidden").slice(0,4).show(),s(".fl-item3:hidden").length==0&&s(".view-more-button3").hide()},600)})},Q=function(){if(s(".stagger-wrap").length)for(var re=s(".stagger-item").length,ye=1,me=.2;ye<=re;ye++)s(".stagger-item:nth-child("+ye+")").css("transition-delay",me*ye+"s").addClass("stagger-finished")},G=function(){var re=s(".tf-btns-filter").click(function(){if(this.id=="all")s("#parent > div").show();else{var ye=s("."+this.id).show();s("#parent > div").not(ye).hide()}re.removeClass("is--active"),s(this).addClass("is--active")})},U=function(){s(".btn-choose-size").click(function(){s("#find_size").modal("show")}),s(".btn-show-quickview").click(function(){s("#quick_view").modal("show")}),s(".btn-add-to-cart").click(function(){s("#shoppingCart").modal("show")}),s(".btn-add-note").click(function(){s(".add-note").addClass("open")}),s(".btn-add-gift").click(function(){s(".add-gift").addClass("open")}),s(".btn-estimate-shipping").click(function(){s(".estimate-shipping").addClass("open")}),s(".tf-mini-cart-tool-close ,.tf-mini-cart-tool-close .overplay").click(function(){s(".tf-mini-cart-tool-openable").removeClass("open")})},te=function(){let re,ye=0,me=5,V=s("header").outerHeight();s(window).scroll(function(z){re=!0}),setInterval(function(){if(re){let z=s(this).scrollTop();if(Math.abs(ye-z)<=me)return;z>ye&&z>V?s("header").css("top",`-${V}px`):z+s(window).height()<s(document).height()&&s("header").css("top","0px"),ye=z,re=!1}},250)},ue=function(){s(window).on("scroll",function(){s(window).scrollTop()>100?s("header").addClass("header-bg"):s("header").removeClass("header-bg")})},pe=function(){var re=parseFloat(s(".price-on-sale").data("base-price"))||parseFloat(s(".price-on-sale").text().replace("$","")),ye=s(".quantity-product");s(".color-btn, .size-btn").on("click",function(){var V=parseFloat(s(this).data("price"))||re;ye.val(1),s(".price-on-sale").text("$"+V.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","));var z=V;s(".total-price").text("$"+z.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","))}),s(".btn-increase").on("click",function(){var V=parseInt(ye.val());ye.val(V+1),me()}),s(".btn-decrease").on("click",function(){var V=parseInt(ye.val());V>1&&(ye.val(V-1),me())});function me(){var V=parseFloat(s(".price-on-sale").text().replace("$","")),z=parseInt(ye.val()),J=V*z;s(".total-price").text("$"+J.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","))}},ce=function(){var re=s("#header").outerHeight(),ye=null;s(".btn-grid-color").on("click",function(){var me=s(this).data("color"),V=s(".item-img-color[data-color='"+me+"']");s("html, body").animate({scrollTop:V.offset().top-re},100),s(".btn-grid-color").removeClass("active"),s(this).addClass("active"),ye=s(this)}),s(window).on("scroll",function(){var me=!1;s(".item-img-color").each(function(){var V=s(this).offset().top-re;if(s(window).scrollTop()>=V&&s(window).scrollTop()<V+s(this).outerHeight()){var z=s(this).data("color");!me&&(ye===null||ye.data("color")!==z)&&(s(".btn-grid-color").removeClass("active"),s(".btn-grid-color[data-color='"+z+"']").addClass("active")),me=!0}}),!me&&ye!==null&&(s(".btn-grid-color").removeClass("active"),ye.addClass("active"))})},he=function(){s("#contactform").each(function(){s(this).validate({submitHandler:function(re){var ye=s(re),me=ye.serialize(),V=s("<div />",{class:"loading"});s.ajax({type:"POST",url:ye.attr("action"),data:me,beforeSend:function(){ye.find(".send-wrap").append(V)},success:function(z){var J,ae;z=="Success"?(J="Email Sent Successfully. Thank you, Your application is accepted - we will contact you shortly",ae="msg-success"):(J="Error sending email.",ae="msg-error"),ye.prepend(s("<div />",{class:"flat-alert "+ae,text:J}).append(s('<a class="close" href="#"><i class="icon icon-close2"></i></a>'))),ye.find(":input").not(".submit").val("")},complete:function(z,J,ae){ye.find(".loading").remove()}})}})})},Me={obj:{subscribeEmail:s("#subscribe-email"),subscribeButton:s("#subscribe-button"),subscribeMsg:s("#subscribe-msg"),subscribeContent:s("#subscribe-content"),dataMailchimp:s("#subscribe-form").attr("data-mailchimp"),success_message:'<div class="notification_ok">Thank you for joining our mailing list!</div>',failure_message:'<div class="notification_error">Error! <strong>There was a problem processing your submission.</strong></div>',noticeError:'<div class="notification_error">{msg}</div>',noticeInfo:'<div class="notification_error">{msg}</div>',basicAction:"mail/subscribe.php",mailChimpAction:"mail/subscribe-mailchimp.php"},eventLoad:function(){var re=Me.obj;s(re.subscribeButton).on("click",function(){window.ajaxCalling||Me.ajaxCall(re.basicAction)})},ajaxCall:function(re){window.ajaxCalling=!0;var ye=Me.obj,me=ye.subscribeMsg.html("").hide();s.ajax({url:re,type:"POST",dataType:"json",data:{subscribeEmail:ye.subscribeEmail.val()},success:function(V,z,J){if(V.status)ye.subscribeContent.fadeOut(500,function(){me.html(ye.success_message).fadeIn(500)});else{switch(V.msg){case"email-required":me.html(ye.noticeError.replace("{msg}","Error! <strong>Email is required.</strong>"));break;case"email-err":me.html(ye.noticeError.replace("{msg}","Error! <strong>Email invalid.</strong>"));break;case"duplicate":me.html(ye.noticeError.replace("{msg}","Error! <strong>Email is duplicate.</strong>"));break;case"filewrite":me.html(ye.noticeInfo.replace("{msg}","Error! <strong>Mail list file is open.</strong>"));break;case"undefined":me.html(ye.noticeInfo.replace("{msg}","Error! <strong>undefined error.</strong>"));break;case"api-error":ye.subscribeContent.fadeOut(500,function(){me.html(ye.failure_message)})}me.fadeIn(500)}},error:function(V,z,J){alert("Connection error")},complete:function(V){window.ajaxCalling=!1}})}},De=function(){if(s("body").hasClass("popup-loader")){if(s(".auto-popup").length>0){let re=sessionStorage.getItem("showPopup");JSON.parse(re)||setTimeout(function(){s(".auto-popup").modal("show")},3e3)}s(".btn-hide-popup").on("click",function(){sessionStorage.setItem("showPopup",!0)})}},Qe=function(){s(".btn-address").click(function(){s(".show-form-address").toggle()}),s(".btn-hide-address").click(function(){s(".show-form-address").hide()}),s(".btn-edit-address").click(function(){s(this).closest(".account-address-item").find(".edit-form-address").toggle()}),s(".btn-hide-edit-address").click(function(){s(this).closest(".account-address-item").find(".edit-form-address").hide()})},Ee=function(){localStorage.getItem("dir")==="rtl"?(s("html").attr("dir","rtl"),s("body").addClass("rtl"),s("#toggle-rtl").text("ltr"),s(".tf-slideshow .tf-btn,.view-all-demo .tf-btn, .pagination-link, .pagination-item").find(".icon").removeClass("icon-arrow-right").addClass("icon-arrow-left")):(s("html").attr("dir","ltr"),s("body").removeClass("rtl"),s("#toggle-rtl").text("rtl")),s("#toggle-rtl").on("click",function(){s("html").attr("dir")==="rtl"?(localStorage.setItem("dir","ltr"),s("#toggle-rtl").text("rtl")):(localStorage.setItem("dir","rtl"),s("#toggle-rtl").text("ltr")),location.reload()})},ke=function(){s(".wrap-lookbook-hover").length&&(s(".bundle-pin-item").on("mouseover",function(){s(".bundle-hover-wrap").addClass("has-hover");var re=s("."+this.id).show();s(".bundle-hover-wrap .bundle-hover-item").not(re).addClass("no-hover")}),s(".bundle-pin-item").on("mouseleave",function(){s(".bundle-hover-wrap").removeClass("has-hover"),s(".bundle-hover-item").removeClass("no-hover")}))},ee=function(){s(".write-cancel-review-wrap").length>0&&s(".btn-comment-review").click(function(){s(this).closest(".write-cancel-review-wrap").toggleClass("write-review")})};s(function(){e(),n(),r(),a(),d(),t(),m(),g(),y(".flat-accordion",".flat-toggle"),y(".flat-accordion1",".flat-toggle1"),o(),c(),h(),E(),b(),C(),B(),I(),k(),Q(),U(),i(),te(),ue(),pe(),ce(),G(),ee(),he(),Me.eventLoad(),De(),u(),Qe(),Ee(),ke(),new WOW().init()})})(jQuery);const UC="modulepreload",QC=function(s){return"/build/"+s},yA={},zC=function(e,t,i){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=QC(r),r in yA)return;yA[r]=!0;const a=r.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!i)for(let d=n.length-1;d>=0;d--){const u=n[d];if(u.href===r&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":UC,a||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),a)return new Promise((d,u)=>{h.addEventListener("load",d),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})},HC=(s,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(t){t.createProperty(e.key,s)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,s)}};function mt(s){return(e,t)=>t!==void 0?((i,n,r)=>{n.constructor.createProperty(r,i)})(s,e,t):HC(s,e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}var uu;(uu=window.HTMLSlotElement)===null||uu===void 0||uu.prototype.assignedElements;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rm="163",hb=1,GC=2,zs=3,ns=0,$i=1,Zi=2,Xr=100,VC=101,$C=102,WC=200,qC=201,jC=202,XC=203,YC=204,KC=205,JC=206,ZC=207,e1=208,t1=209,i1=210,n1=211,s1=212,r1=213,a1=214,db=0,o1=1,l1=2,Vs=0,c1=1,h1=2,d1=3,Td=4,u1=5,ub=6,xf=7,wA="attached",xo=300,oa=301,_o=302,sd=303,Bd=306,vs=1e3,Mi=1001,So=1002,Gi=1003,Rd=1004,ea=1005,Ut=1006,vo=1007,kn=1008,bi=1009,_f=1013,la=1014,Ti=1015,Vi=1016,tc=1020,gi=1023,yo=1026,zl=1027,ta=1028,ho=1030,Nh=33776,pu=33777,mu=33778,Fh=33779,Lm=35840,Dm=35842,Sf=36196,Pm=37492,Nm=37496,Fm=37808,rd=37812,kh=36492,pb=2201,Cf=2202,Co=2300,ca=2301,fu=2302,uo=2400,po=2401,ad=2402,p1=2500,Kn="",di="srgb",Yt="srgb-linear",Ld="display-p3",ic="display-p3-linear",od="linear",li="srgb",ld="rec709",cd="p3",_a=7680,m1=512,f1=513,g1=514,A1=515,v1=516,y1=517,w1=518,b1=519,km=35044,bA="300 es",Io=2e3,hd=2001;class rs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let n=0,r=i.length;n<r;n++)i[n].call(this,e);e.target=null}}}const qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let EA=1234567;const Nl=Math.PI/180,Mo=180/Math.PI;function ts(){const s=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(qi[255&s]+qi[s>>8&255]+qi[s>>16&255]+qi[s>>24&255]+"-"+qi[255&e]+qi[e>>8&255]+"-"+qi[e>>16&15|64]+qi[e>>24&255]+"-"+qi[63&t|128]+qi[t>>8&255]+"-"+qi[t>>16&255]+qi[t>>24&255]+qi[255&i]+qi[i>>8&255]+qi[i>>16&255]+qi[i>>24&255]).toLowerCase()}function Oi(s,e,t){return Math.max(e,Math.min(t,s))}function Om(s,e){return(s%e+e)%e}function Fl(s,e,t){return(1-t)*s+t*e}function Jn(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function Wt(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return Math.round(4294967295*s);case Uint16Array:return Math.round(65535*s);case Uint8Array:return Math.round(255*s);case Int32Array:return Math.round(2147483647*s);case Int16Array:return Math.round(32767*s);case Int8Array:return Math.round(127*s);default:throw new Error("Invalid component type.")}}const Oh={DEG2RAD:Nl,RAD2DEG:Mo,generateUUID:ts,clamp:Oi,euclideanModulo:Om,mapLinear:function(s,e,t,i,n){return i+(s-e)*(n-i)/(t-e)},inverseLerp:function(s,e,t){return s!==e?(t-s)/(e-s):0},lerp:Fl,damp:function(s,e,t,i){return Fl(s,e,1-Math.exp(-t*i))},pingpong:function(s,e=1){return e-Math.abs(Om(s,2*e)-e)},smoothstep:function(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e))*s*(3-2*s)},smootherstep:function(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e))*s*s*(s*(6*s-15)+10)},randInt:function(s,e){return s+Math.floor(Math.random()*(e-s+1))},randFloat:function(s,e){return s+Math.random()*(e-s)},randFloatSpread:function(s){return s*(.5-Math.random())},seededRandom:function(s){s!==void 0&&(EA=s);let e=EA+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(s){return s*Nl},radToDeg:function(s){return s*Mo},isPowerOfTwo:function(s){return!(s&s-1)&&s!==0},ceilPowerOfTwo:function(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},floorPowerOfTwo:function(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},setQuaternionFromProperEuler:function(s,e,t,i,n){const r=Math.cos,a=Math.sin,o=r(t/2),c=a(t/2),h=r((e+i)/2),d=a((e+i)/2),u=r((e-i)/2),m=a((e-i)/2),g=r((i-e)/2),y=a((i-e)/2);switch(n){case"XYX":s.set(o*d,c*u,c*m,o*h);break;case"YZY":s.set(c*m,o*d,c*u,o*h);break;case"ZXZ":s.set(c*u,c*m,o*d,o*h);break;case"XZX":s.set(o*d,c*y,c*g,o*h);break;case"YXY":s.set(c*g,o*d,c*y,o*h);break;case"ZYZ":s.set(c*y,c*g,o*d,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}},normalize:Wt,denormalize:Jn};class vt{constructor(e=0,t=0){vt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*n+e.x,this.y=r*n+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class St{constructor(e,t,i,n,r,a,o,c,h){St.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,n,r,a,o,c,h)}set(e,t,i,n,r,a,o,c,h){const d=this.elements;return d[0]=e,d[1]=n,d[2]=o,d[3]=t,d[4]=r,d[5]=c,d[6]=i,d[7]=a,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,a=i[0],o=i[3],c=i[6],h=i[1],d=i[4],u=i[7],m=i[2],g=i[5],y=i[8],E=n[0],b=n[3],C=n[6],B=n[1],I=n[4],k=n[7],Q=n[2],G=n[5],U=n[8];return r[0]=a*E+o*B+c*Q,r[3]=a*b+o*I+c*G,r[6]=a*C+o*k+c*U,r[1]=h*E+d*B+u*Q,r[4]=h*b+d*I+u*G,r[7]=h*C+d*k+u*U,r[2]=m*E+g*B+y*Q,r[5]=m*b+g*I+y*G,r[8]=m*C+g*k+y*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8];return t*a*d-t*o*h-i*r*d+i*o*c+n*r*h-n*a*c}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8],u=d*a-o*h,m=o*c-d*r,g=h*r-a*c,y=t*u+i*m+n*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/y;return e[0]=u*E,e[1]=(n*h-d*i)*E,e[2]=(o*i-n*a)*E,e[3]=m*E,e[4]=(d*t-n*c)*E,e[5]=(n*r-o*t)*E,e[6]=g*E,e[7]=(i*c-h*t)*E,e[8]=(a*t-i*r)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,a,o){const c=Math.cos(r),h=Math.sin(r);return this.set(i*c,i*h,-i*(c*a+h*o)+a+e,-n*h,n*c,-n*(-h*a+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(gu.makeScale(e,t)),this}rotate(e){return this.premultiply(gu.makeRotation(-e)),this}translate(e,t){return this.premultiply(gu.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const gu=new St;function mb(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}function Hl(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function E1(){const s=Hl("canvas");return s.style.display="block",s}const xA={};function fb(s){s in xA||(xA[s]=!0,console.warn(s))}const _A=new St().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),SA=new St().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ic={[Yt]:{transfer:od,primaries:ld,toReference:s=>s,fromReference:s=>s},[di]:{transfer:li,primaries:ld,toReference:s=>s.convertSRGBToLinear(),fromReference:s=>s.convertLinearToSRGB()},[ic]:{transfer:od,primaries:cd,toReference:s=>s.applyMatrix3(SA),fromReference:s=>s.applyMatrix3(_A)},[Ld]:{transfer:li,primaries:cd,toReference:s=>s.convertSRGBToLinear().applyMatrix3(SA),fromReference:s=>s.applyMatrix3(_A).convertLinearToSRGB()}},x1=new Set([Yt,ic]),Ht={enabled:!0,_workingColorSpace:Yt,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(s){if(!x1.has(s))throw new Error(`Unsupported working color space, "${s}".`);this._workingColorSpace=s},convert:function(s,e,t){if(this.enabled===!1||e===t||!e||!t)return s;const i=Ic[e].toReference;return(0,Ic[t].fromReference)(i(s))},fromWorkingColorSpace:function(s,e){return this.convert(s,this._workingColorSpace,e)},toWorkingColorSpace:function(s,e){return this.convert(s,e,this._workingColorSpace)},getPrimaries:function(s){return Ic[s].primaries},getTransfer:function(s){return s===Kn?od:Ic[s].transfer}};function wo(s){return s<.04045?.0773993808*s:Math.pow(.9478672986*s+.0521327014,2.4)}function Au(s){return s<.0031308?12.92*s:1.055*Math.pow(s,.41666)-.055}let Sa;class _1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Sa===void 0&&(Sa=Hl("canvas")),Sa.width=e.width,Sa.height=e.height;const i=Sa.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Sa}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Hl("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let a=0;a<r.length;a++)r[a]=255*wo(r[a]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(255*wo(t[i]/255)):t[i]=wo(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let S1=0;class If{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:S1++}),this.uuid=ts(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let r;if(Array.isArray(n)){r=[];for(let a=0,o=n.length;a<o;a++)n[a].isDataTexture?r.push(vu(n[a].image)):r.push(vu(n[a]))}else r=vu(n);i.url=r}return t||(e.images[this.uuid]=i),i}}function vu(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?_1.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let C1=0;class qt extends rs{constructor(e=qt.DEFAULT_IMAGE,t=qt.DEFAULT_MAPPING,i=1001,n=1001,r=1006,a=1008,o=1023,c=1009,h=qt.DEFAULT_ANISOTROPY,d=Kn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:C1++}),this.uuid=ts(),this.name="",this.source=new If(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=a,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=c,this.offset=new vt(0,0),this.repeat=new vt(1,1),this.center=new vt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new St,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xo)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vs:e.x=e.x-Math.floor(e.x);break;case Mi:e.x=e.x<0?0:1;break;case So:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case vs:e.y=e.y-Math.floor(e.y);break;case Mi:e.y=e.y<0?0:1;break;case So:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}qt.DEFAULT_IMAGE=null,qt.DEFAULT_MAPPING=xo,qt.DEFAULT_ANISOTROPY=1;class Jt{constructor(e=0,t=0,i=0,n=1){Jt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const c=e.elements,h=c[0],d=c[4],u=c[8],m=c[1],g=c[5],y=c[9],E=c[2],b=c[6],C=c[10];if(Math.abs(d-m)<.01&&Math.abs(u-E)<.01&&Math.abs(y-b)<.01){if(Math.abs(d+m)<.1&&Math.abs(u+E)<.1&&Math.abs(y+b)<.1&&Math.abs(h+g+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(h+1)/2,k=(g+1)/2,Q=(C+1)/2,G=(d+m)/4,U=(u+E)/4,te=(y+b)/4;return I>k&&I>Q?I<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(I),n=G/i,r=U/i):k>Q?k<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(k),i=G/n,r=te/n):Q<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(Q),i=U/r,n=te/r),this.set(i,n,r,t),this}let B=Math.sqrt((b-y)*(b-y)+(u-E)*(u-E)+(m-d)*(m-d));return Math.abs(B)<.001&&(B=1),this.x=(b-y)/B,this.y=(u-E)/B,this.z=(m-d)/B,this.w=Math.acos((h+g+C-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class I1 extends rs{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Jt(0,0,e,t),this.scissorTest=!1,this.viewport=new Jt(0,0,e,t);const n={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ut,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},i);const r=new qt(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.textures.length;n<r;n++)this.textures[n].image.width=e,this.textures[n].image.height=t,this.textures[n].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,n=e.textures.length;i<n;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new If(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Qn extends I1{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class gb extends qt{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Gi,this.minFilter=Gi,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ab extends qt{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Gi,this.minFilter=Gi,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xn{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,a,o){let c=i[n+0],h=i[n+1],d=i[n+2],u=i[n+3];const m=r[a+0],g=r[a+1],y=r[a+2],E=r[a+3];if(o===0)return e[t+0]=c,e[t+1]=h,e[t+2]=d,void(e[t+3]=u);if(o===1)return e[t+0]=m,e[t+1]=g,e[t+2]=y,void(e[t+3]=E);if(u!==E||c!==m||h!==g||d!==y){let b=1-o;const C=c*m+h*g+d*y+u*E,B=C>=0?1:-1,I=1-C*C;if(I>Number.EPSILON){const Q=Math.sqrt(I),G=Math.atan2(Q,C*B);b=Math.sin(b*G)/Q,o=Math.sin(o*G)/Q}const k=o*B;if(c=c*b+m*k,h=h*b+g*k,d=d*b+y*k,u=u*b+E*k,b===1-o){const Q=1/Math.sqrt(c*c+h*h+d*d+u*u);c*=Q,h*=Q,d*=Q,u*=Q}}e[t]=c,e[t+1]=h,e[t+2]=d,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,a){const o=i[n],c=i[n+1],h=i[n+2],d=i[n+3],u=r[a],m=r[a+1],g=r[a+2],y=r[a+3];return e[t]=o*y+d*u+c*g-h*m,e[t+1]=c*y+d*m+h*u-o*g,e[t+2]=h*y+d*g+o*m-c*u,e[t+3]=d*y-o*u-c*m-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,n=e._y,r=e._z,a=e._order,o=Math.cos,c=Math.sin,h=o(i/2),d=o(n/2),u=o(r/2),m=c(i/2),g=c(n/2),y=c(r/2);switch(a){case"XYZ":this._x=m*d*u+h*g*y,this._y=h*g*u-m*d*y,this._z=h*d*y+m*g*u,this._w=h*d*u-m*g*y;break;case"YXZ":this._x=m*d*u+h*g*y,this._y=h*g*u-m*d*y,this._z=h*d*y-m*g*u,this._w=h*d*u+m*g*y;break;case"ZXY":this._x=m*d*u-h*g*y,this._y=h*g*u+m*d*y,this._z=h*d*y+m*g*u,this._w=h*d*u-m*g*y;break;case"ZYX":this._x=m*d*u-h*g*y,this._y=h*g*u+m*d*y,this._z=h*d*y-m*g*u,this._w=h*d*u+m*g*y;break;case"YZX":this._x=m*d*u+h*g*y,this._y=h*g*u+m*d*y,this._z=h*d*y-m*g*u,this._w=h*d*u-m*g*y;break;case"XZY":this._x=m*d*u-h*g*y,this._y=h*g*u-m*d*y,this._z=h*d*y+m*g*u,this._w=h*d*u+m*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],a=t[1],o=t[5],c=t[9],h=t[2],d=t[6],u=t[10],m=i+o+u;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-c)*g,this._y=(r-h)*g,this._z=(a-n)*g}else if(i>o&&i>u){const g=2*Math.sqrt(1+i-o-u);this._w=(d-c)/g,this._x=.25*g,this._y=(n+a)/g,this._z=(r+h)/g}else if(o>u){const g=2*Math.sqrt(1+o-i-u);this._w=(r-h)/g,this._x=(n+a)/g,this._y=.25*g,this._z=(c+d)/g}else{const g=2*Math.sqrt(1+u-i-o);this._w=(a-n)/g,this._x=(r+h)/g,this._y=(c+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,a=e._w,o=t._x,c=t._y,h=t._z,d=t._w;return this._x=i*d+a*o+n*h-r*c,this._y=n*d+a*c+r*o-i*h,this._z=r*d+a*h+i*c-n*o,this._w=a*d-i*o-n*c-r*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,n=this._y,r=this._z,a=this._w;let o=a*e._w+i*e._x+n*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;const c=1-o*o;if(c<=Number.EPSILON){const g=1-t;return this._w=g*a+t*this._w,this._x=g*i+t*this._x,this._y=g*n+t*this._y,this._z=g*r+t*this._z,this.normalize(),this}const h=Math.sqrt(c),d=Math.atan2(h,o),u=Math.sin((1-t)*d)/h,m=Math.sin(t*d)/h;return this._w=a*u+this._w*m,this._x=i*u+this._x*m,this._y=n*u+this._y*m,this._z=r*u+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),n=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(n*Math.sin(e),n*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,i=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(CA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(CA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,o=e.z,c=e.w,h=2*(a*n-o*i),d=2*(o*t-r*n),u=2*(r*i-a*t);return this.x=t+c*h+a*u-o*d,this.y=i+c*d+o*h-r*u,this.z=n+c*u+r*d-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,a=t.x,o=t.y,c=t.z;return this.x=n*c-r*o,this.y=r*a-i*c,this.z=i*o-n*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return yu.copy(this).projectOnVector(e),this.sub(yu)}reflect(e){return this.sub(yu.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yu=new le,CA=new xn;class hn{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Wn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Wn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Wn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Wn):Wn.fromBufferAttribute(r,a),Wn.applyMatrix4(e.matrixWorld),this.expandByPoint(Wn);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Mc.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Mc.copy(i.boundingBox)),Mc.applyMatrix4(e.matrixWorld),this.union(Mc)}const n=e.children;for(let r=0,a=n.length;r<a;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Wn),Wn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Xo),Tc.subVectors(this.max,Xo),Ca.subVectors(e.a,Xo),Ia.subVectors(e.b,Xo),Ma.subVectors(e.c,Xo),Js.subVectors(Ia,Ca),Zs.subVectors(Ma,Ia),Mr.subVectors(Ca,Ma);let t=[0,-Js.z,Js.y,0,-Zs.z,Zs.y,0,-Mr.z,Mr.y,Js.z,0,-Js.x,Zs.z,0,-Zs.x,Mr.z,0,-Mr.x,-Js.y,Js.x,0,-Zs.y,Zs.x,0,-Mr.y,Mr.x,0];return!!wu(t,Ca,Ia,Ma,Tc)&&(t=[1,0,0,0,1,0,0,0,1],!!wu(t,Ca,Ia,Ma,Tc)&&(Bc.crossVectors(Js,Zs),t=[Bc.x,Bc.y,Bc.z],wu(t,Ca,Ia,Ma,Tc)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Wn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Wn).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Cs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Cs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Cs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Cs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Cs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Cs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Cs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Cs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Cs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Cs=[new le,new le,new le,new le,new le,new le,new le,new le],Wn=new le,Mc=new hn,Ca=new le,Ia=new le,Ma=new le,Js=new le,Zs=new le,Mr=new le,Xo=new le,Tc=new le,Bc=new le,Tr=new le;function wu(s,e,t,i,n){for(let r=0,a=s.length-3;r<=a;r+=3){Tr.fromArray(s,r);const o=n.x*Math.abs(Tr.x)+n.y*Math.abs(Tr.y)+n.z*Math.abs(Tr.z),c=e.dot(Tr),h=t.dot(Tr),d=i.dot(Tr);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))>o)return!1}return!0}const M1=new hn,Yo=new le,bu=new le;class Hn{constructor(e=new le,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):M1.setFromPoints(e).getCenter(i);let n=0;for(let r=0,a=e.length;r<a;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yo.subVectors(e,this.center);const t=Yo.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),n=.5*(i-this.radius);this.center.addScaledVector(Yo,n/i),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bu.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yo.copy(e.center).add(bu)),this.expandByPoint(Yo.copy(e.center).sub(bu))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Is=new le,Eu=new le,Rc=new le,er=new le,xu=new le,Lc=new le,_u=new le;class nc{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Is)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Is.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Is.copy(this.origin).addScaledVector(this.direction,t),Is.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){Eu.copy(e).add(t).multiplyScalar(.5),Rc.copy(t).sub(e).normalize(),er.copy(this.origin).sub(Eu);const r=.5*e.distanceTo(t),a=-this.direction.dot(Rc),o=er.dot(this.direction),c=-er.dot(Rc),h=er.lengthSq(),d=Math.abs(1-a*a);let u,m,g,y;if(d>0)if(u=a*c-o,m=a*o-c,y=r*d,u>=0)if(m>=-y)if(m<=y){const E=1/d;u*=E,m*=E,g=u*(u+a*m+2*o)+m*(a*u+m+2*c)+h}else m=r,u=Math.max(0,-(a*m+o)),g=-u*u+m*(m+2*c)+h;else m=-r,u=Math.max(0,-(a*m+o)),g=-u*u+m*(m+2*c)+h;else m<=-y?(u=Math.max(0,-(-a*r+o)),m=u>0?-r:Math.min(Math.max(-r,-c),r),g=-u*u+m*(m+2*c)+h):m<=y?(u=0,m=Math.min(Math.max(-r,-c),r),g=m*(m+2*c)+h):(u=Math.max(0,-(a*r+o)),m=u>0?r:Math.min(Math.max(-r,-c),r),g=-u*u+m*(m+2*c)+h);else m=a>0?-r:r,u=Math.max(0,-(a*m+o)),g=-u*u+m*(m+2*c)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,u),n&&n.copy(Eu).addScaledVector(Rc,m),g}intersectSphere(e,t){Is.subVectors(e.center,this.origin);const i=Is.dot(this.direction),n=Is.dot(Is)-i*i,r=e.radius*e.radius;if(n>r)return null;const a=Math.sqrt(r-n),o=i-a,c=i+a;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0?!0:e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,a,o,c;const h=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,m=this.origin;return h>=0?(i=(e.min.x-m.x)*h,n=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,n=(e.min.x-m.x)*h),d>=0?(r=(e.min.y-m.y)*d,a=(e.max.y-m.y)*d):(r=(e.max.y-m.y)*d,a=(e.min.y-m.y)*d),i>a||r>n?null:((r>i||isNaN(i))&&(i=r),(a<n||isNaN(n))&&(n=a),u>=0?(o=(e.min.z-m.z)*u,c=(e.max.z-m.z)*u):(o=(e.max.z-m.z)*u,c=(e.min.z-m.z)*u),i>c||o>n?null:((o>i||i!=i)&&(i=o),(c<n||n!=n)&&(n=c),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return this.intersectBox(e,Is)!==null}intersectTriangle(e,t,i,n,r){xu.subVectors(t,e),Lc.subVectors(i,e),_u.crossVectors(xu,Lc);let a,o=this.direction.dot(_u);if(o>0){if(n)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}er.subVectors(this.origin,e);const c=a*this.direction.dot(Lc.crossVectors(er,Lc));if(c<0)return null;const h=a*this.direction.dot(xu.cross(er));if(h<0||c+h>o)return null;const d=-a*er.dot(_u);return d<0?null:this.at(d/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(e,t,i,n,r,a,o,c,h,d,u,m,g,y,E,b){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,n,r,a,o,c,h,d,u,m,g,y,E,b)}set(e,t,i,n,r,a,o,c,h,d,u,m,g,y,E,b){const C=this.elements;return C[0]=e,C[4]=t,C[8]=i,C[12]=n,C[1]=r,C[5]=a,C[9]=o,C[13]=c,C[2]=h,C[6]=d,C[10]=u,C[14]=m,C[3]=g,C[7]=y,C[11]=E,C[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/Ta.setFromMatrixColumn(e,0).length(),r=1/Ta.setFromMatrixColumn(e,1).length(),a=1/Ta.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i),o=Math.sin(i),c=Math.cos(n),h=Math.sin(n),d=Math.cos(r),u=Math.sin(r);if(e.order==="XYZ"){const m=a*d,g=a*u,y=o*d,E=o*u;t[0]=c*d,t[4]=-c*u,t[8]=h,t[1]=g+y*h,t[5]=m-E*h,t[9]=-o*c,t[2]=E-m*h,t[6]=y+g*h,t[10]=a*c}else if(e.order==="YXZ"){const m=c*d,g=c*u,y=h*d,E=h*u;t[0]=m+E*o,t[4]=y*o-g,t[8]=a*h,t[1]=a*u,t[5]=a*d,t[9]=-o,t[2]=g*o-y,t[6]=E+m*o,t[10]=a*c}else if(e.order==="ZXY"){const m=c*d,g=c*u,y=h*d,E=h*u;t[0]=m-E*o,t[4]=-a*u,t[8]=y+g*o,t[1]=g+y*o,t[5]=a*d,t[9]=E-m*o,t[2]=-a*h,t[6]=o,t[10]=a*c}else if(e.order==="ZYX"){const m=a*d,g=a*u,y=o*d,E=o*u;t[0]=c*d,t[4]=y*h-g,t[8]=m*h+E,t[1]=c*u,t[5]=E*h+m,t[9]=g*h-y,t[2]=-h,t[6]=o*c,t[10]=a*c}else if(e.order==="YZX"){const m=a*c,g=a*h,y=o*c,E=o*h;t[0]=c*d,t[4]=E-m*u,t[8]=y*u+g,t[1]=u,t[5]=a*d,t[9]=-o*d,t[2]=-h*d,t[6]=g*u+y,t[10]=m-E*u}else if(e.order==="XZY"){const m=a*c,g=a*h,y=o*c,E=o*h;t[0]=c*d,t[4]=-u,t[8]=h*d,t[1]=m*u+E,t[5]=a*d,t[9]=g*u-y,t[2]=y*u-g,t[6]=o*d,t[10]=E*u+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(T1,e,B1)}lookAt(e,t,i){const n=this.elements;return fn.subVectors(e,t),fn.lengthSq()===0&&(fn.z=1),fn.normalize(),tr.crossVectors(i,fn),tr.lengthSq()===0&&(Math.abs(i.z)===1?fn.x+=1e-4:fn.z+=1e-4,fn.normalize(),tr.crossVectors(i,fn)),tr.normalize(),Dc.crossVectors(fn,tr),n[0]=tr.x,n[4]=Dc.x,n[8]=fn.x,n[1]=tr.y,n[5]=Dc.y,n[9]=fn.y,n[2]=tr.z,n[6]=Dc.z,n[10]=fn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,a=i[0],o=i[4],c=i[8],h=i[12],d=i[1],u=i[5],m=i[9],g=i[13],y=i[2],E=i[6],b=i[10],C=i[14],B=i[3],I=i[7],k=i[11],Q=i[15],G=n[0],U=n[4],te=n[8],ue=n[12],pe=n[1],ce=n[5],he=n[9],Me=n[13],De=n[2],Qe=n[6],Ee=n[10],ke=n[14],ee=n[3],re=n[7],ye=n[11],me=n[15];return r[0]=a*G+o*pe+c*De+h*ee,r[4]=a*U+o*ce+c*Qe+h*re,r[8]=a*te+o*he+c*Ee+h*ye,r[12]=a*ue+o*Me+c*ke+h*me,r[1]=d*G+u*pe+m*De+g*ee,r[5]=d*U+u*ce+m*Qe+g*re,r[9]=d*te+u*he+m*Ee+g*ye,r[13]=d*ue+u*Me+m*ke+g*me,r[2]=y*G+E*pe+b*De+C*ee,r[6]=y*U+E*ce+b*Qe+C*re,r[10]=y*te+E*he+b*Ee+C*ye,r[14]=y*ue+E*Me+b*ke+C*me,r[3]=B*G+I*pe+k*De+Q*ee,r[7]=B*U+I*ce+k*Qe+Q*re,r[11]=B*te+I*he+k*Ee+Q*ye,r[15]=B*ue+I*Me+k*ke+Q*me,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],o=e[5],c=e[9],h=e[13],d=e[2],u=e[6],m=e[10],g=e[14];return e[3]*(+r*c*u-n*h*u-r*o*m+i*h*m+n*o*g-i*c*g)+e[7]*(+t*c*g-t*h*m+r*a*m-n*a*g+n*h*d-r*c*d)+e[11]*(+t*h*u-t*o*g-r*a*u+i*a*g+r*o*d-i*h*d)+e[15]*(-n*o*d-t*c*u+t*o*m+n*a*u-i*a*m+i*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8],u=e[9],m=e[10],g=e[11],y=e[12],E=e[13],b=e[14],C=e[15],B=u*b*h-E*m*h+E*c*g-o*b*g-u*c*C+o*m*C,I=y*m*h-d*b*h-y*c*g+a*b*g+d*c*C-a*m*C,k=d*E*h-y*u*h+y*o*g-a*E*g-d*o*C+a*u*C,Q=y*u*c-d*E*c-y*o*m+a*E*m+d*o*b-a*u*b,G=t*B+i*I+n*k+r*Q;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/G;return e[0]=B*U,e[1]=(E*m*r-u*b*r-E*n*g+i*b*g+u*n*C-i*m*C)*U,e[2]=(o*b*r-E*c*r+E*n*h-i*b*h-o*n*C+i*c*C)*U,e[3]=(u*c*r-o*m*r-u*n*h+i*m*h+o*n*g-i*c*g)*U,e[4]=I*U,e[5]=(d*b*r-y*m*r+y*n*g-t*b*g-d*n*C+t*m*C)*U,e[6]=(y*c*r-a*b*r-y*n*h+t*b*h+a*n*C-t*c*C)*U,e[7]=(a*m*r-d*c*r+d*n*h-t*m*h-a*n*g+t*c*g)*U,e[8]=k*U,e[9]=(y*u*r-d*E*r-y*i*g+t*E*g+d*i*C-t*u*C)*U,e[10]=(a*E*r-y*o*r+y*i*h-t*E*h-a*i*C+t*o*C)*U,e[11]=(d*o*r-a*u*r-d*i*h+t*u*h+a*i*g-t*o*g)*U,e[12]=Q*U,e[13]=(d*E*n-y*u*n+y*i*m-t*E*m-d*i*b+t*u*b)*U,e[14]=(y*o*n-a*E*n-y*i*c+t*E*c+a*i*b-t*o*b)*U,e[15]=(a*u*n-d*o*n+d*i*c-t*u*c-a*i*m+t*o*m)*U,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,a=e.x,o=e.y,c=e.z,h=r*a,d=r*o;return this.set(h*a+i,h*o-n*c,h*c+n*o,0,h*o+n*c,d*o+i,d*c-n*a,0,h*c-n*o,d*c+n*a,r*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,a){return this.set(1,i,r,0,e,1,a,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,a=t._y,o=t._z,c=t._w,h=r+r,d=a+a,u=o+o,m=r*h,g=r*d,y=r*u,E=a*d,b=a*u,C=o*u,B=c*h,I=c*d,k=c*u,Q=i.x,G=i.y,U=i.z;return n[0]=(1-(E+C))*Q,n[1]=(g+k)*Q,n[2]=(y-I)*Q,n[3]=0,n[4]=(g-k)*G,n[5]=(1-(m+C))*G,n[6]=(b+B)*G,n[7]=0,n[8]=(y+I)*U,n[9]=(b-B)*U,n[10]=(1-(m+E))*U,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=Ta.set(n[0],n[1],n[2]).length();const a=Ta.set(n[4],n[5],n[6]).length(),o=Ta.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],qn.copy(this);const c=1/r,h=1/a,d=1/o;return qn.elements[0]*=c,qn.elements[1]*=c,qn.elements[2]*=c,qn.elements[4]*=h,qn.elements[5]*=h,qn.elements[6]*=h,qn.elements[8]*=d,qn.elements[9]*=d,qn.elements[10]*=d,t.setFromRotationMatrix(qn),i.x=r,i.y=a,i.z=o,this}makePerspective(e,t,i,n,r,a,o=2e3){const c=this.elements,h=2*r/(t-e),d=2*r/(i-n),u=(t+e)/(t-e),m=(i+n)/(i-n);let g,y;if(o===Io)g=-(a+r)/(a-r),y=-2*a*r/(a-r);else{if(o!==hd)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);g=-a/(a-r),y=-a*r/(a-r)}return c[0]=h,c[4]=0,c[8]=u,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,n,r,a,o=2e3){const c=this.elements,h=1/(t-e),d=1/(i-n),u=1/(a-r),m=(t+e)*h,g=(i+n)*d;let y,E;if(o===Io)y=(a+r)*u,E=-2*u;else{if(o!==hd)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);y=r*u,E=-1*u}return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=E,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ta=new le,qn=new yt,T1=new le(0,0,0),B1=new le(1,1,1),tr=new le,Dc=new le,fn=new le,IA=new yt,MA=new xn;class zn{constructor(e=0,t=0,i=0,n=zn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,r=n[0],a=n[4],o=n[8],c=n[1],h=n[5],d=n[9],u=n[2],m=n[6],g=n[10];switch(t){case"XYZ":this._y=Math.asin(Oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(m,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-u,g),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-Oi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(Oi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-Oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return IA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(IA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return MA.setFromEuler(this),this.setFromQuaternion(MA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}zn.DEFAULT_ORDER="XYZ";class Mf{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let R1=0;const TA=new le,Ba=new xn,Ms=new yt,Pc=new le,Ko=new le,L1=new le,D1=new xn,BA=new le(1,0,0),RA=new le(0,1,0),LA=new le(0,0,1),DA={type:"added"},P1={type:"removed"},Ra={type:"childadded",child:null},Su={type:"childremoved",child:null};class ii extends rs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:R1++}),this.uuid=ts(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ii.DEFAULT_UP.clone();const e=new le,t=new zn,i=new xn,n=new le(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new yt},normalMatrix:{value:new St}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=ii.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ba.setFromAxisAngle(e,t),this.quaternion.multiply(Ba),this}rotateOnWorldAxis(e,t){return Ba.setFromAxisAngle(e,t),this.quaternion.premultiply(Ba),this}rotateX(e){return this.rotateOnAxis(BA,e)}rotateY(e){return this.rotateOnAxis(RA,e)}rotateZ(e){return this.rotateOnAxis(LA,e)}translateOnAxis(e,t){return TA.copy(e).applyQuaternion(this.quaternion),this.position.add(TA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(BA,e)}translateY(e){return this.translateOnAxis(RA,e)}translateZ(e){return this.translateOnAxis(LA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ms.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Pc.copy(e):Pc.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Ko.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ms.lookAt(Ko,Pc,this.up):Ms.lookAt(Pc,Ko,this.up),this.quaternion.setFromRotationMatrix(Ms),n&&(Ms.extractRotation(n.matrixWorld),Ba.setFromRotationMatrix(Ms),this.quaternion.premultiply(Ba.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(DA),Ra.child=e,this.dispatchEvent(Ra),Ra.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(P1),Su.child=e,this.dispatchEvent(Su),Su.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ms.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ms.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ms),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(DA),Ra.child=e,this.dispatchEvent(Ra),Ra.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const r=this.children[i].getObjectByProperty(e,t);if(r!==void 0)return r}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ko,e,L1),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ko,D1,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){const r=t[i];r.matrixWorldAutoUpdate!==!0&&e!==!0||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const n=this.children;for(let r=0,a=n.length;r<a;r++){const o=n[r];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};function r(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(n.type="BatchedMesh",n.perObjectFrustumCulled=this.perObjectFrustumCulled,n.sortObjects=this.sortObjects,n.drawRanges=this._drawRanges,n.reservedRanges=this._reservedRanges,n.visibility=this._visibility,n.active=this._active,n.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),n.maxGeometryCount=this._maxGeometryCount,n.maxVertexCount=this._maxVertexCount,n.maxIndexCount=this._maxIndexCount,n.geometryInitialized=this._geometryInitialized,n.geometryCount=this._geometryCount,n.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(n.boundingSphere={center:n.boundingSphere.center.toArray(),radius:n.boundingSphere.radius}),this.boundingBox!==null&&(n.boundingBox={min:n.boundingBox.min.toArray(),max:n.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let h=0,d=c.length;h<d;h++){const u=c[h];r(e.shapes,u)}else r(e.shapes,c)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,h=this.material.length;c<h;c++)o.push(r(e.materials,this.material[c]));n.material=o}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let o=0;o<this.children.length;o++)n.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];n.animations.push(r(e.animations,c))}}if(t){const o=a(e.geometries),c=a(e.materials),h=a(e.textures),d=a(e.images),u=a(e.shapes),m=a(e.skeletons),g=a(e.animations),y=a(e.nodes);o.length>0&&(i.geometries=o),c.length>0&&(i.materials=c),h.length>0&&(i.textures=h),d.length>0&&(i.images=d),u.length>0&&(i.shapes=u),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),y.length>0&&(i.nodes=y)}return i.object=n,i;function a(o){const c=[];for(const h in o){const d=o[h];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const n=e.children[i];this.add(n.clone())}return this}}ii.DEFAULT_UP=new le(0,1,0),ii.DEFAULT_MATRIX_AUTO_UPDATE=!0,ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const jn=new le,Ts=new le,Cu=new le,Bs=new le,La=new le,Da=new le,PA=new le,Iu=new le,Mu=new le,Tu=new le;class Fn{constructor(e=new le,t=new le,i=new le){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),jn.subVectors(e,t),n.cross(jn);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){jn.subVectors(n,t),Ts.subVectors(i,t),Cu.subVectors(e,t);const a=jn.dot(jn),o=jn.dot(Ts),c=jn.dot(Cu),h=Ts.dot(Ts),d=Ts.dot(Cu),u=a*h-o*o;if(u===0)return r.set(0,0,0),null;const m=1/u,g=(h*c-o*d)*m,y=(a*d-o*c)*m;return r.set(1-g-y,y,g)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,Bs)!==null&&Bs.x>=0&&Bs.y>=0&&Bs.x+Bs.y<=1}static getInterpolation(e,t,i,n,r,a,o,c){return this.getBarycoord(e,t,i,n,Bs)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(r,Bs.x),c.addScaledVector(a,Bs.y),c.addScaledVector(o,Bs.z),c)}static isFrontFacing(e,t,i,n){return jn.subVectors(i,t),Ts.subVectors(e,t),jn.cross(Ts).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jn.subVectors(this.c,this.b),Ts.subVectors(this.a,this.b),.5*jn.cross(Ts).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fn.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,n,r){return Fn.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return Fn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,r=this.c;let a,o;La.subVectors(n,i),Da.subVectors(r,i),Iu.subVectors(e,i);const c=La.dot(Iu),h=Da.dot(Iu);if(c<=0&&h<=0)return t.copy(i);Mu.subVectors(e,n);const d=La.dot(Mu),u=Da.dot(Mu);if(d>=0&&u<=d)return t.copy(n);const m=c*u-d*h;if(m<=0&&c>=0&&d<=0)return a=c/(c-d),t.copy(i).addScaledVector(La,a);Tu.subVectors(e,r);const g=La.dot(Tu),y=Da.dot(Tu);if(y>=0&&g<=y)return t.copy(r);const E=g*h-c*y;if(E<=0&&h>=0&&y<=0)return o=h/(h-y),t.copy(i).addScaledVector(Da,o);const b=d*y-g*u;if(b<=0&&u-d>=0&&g-y>=0)return PA.subVectors(r,n),o=(u-d)/(u-d+(g-y)),t.copy(n).addScaledVector(PA,o);const C=1/(b+E+m);return a=E*C,o=m*C,t.copy(i).addScaledVector(La,a).addScaledVector(Da,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const vb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ir={h:0,s:0,l:0},Nc={h:0,s:0,l:0};function Bu(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+6*(e-s)*t:t<.5?e:t<2/3?s+6*(e-s)*(2/3-t):s}class At{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const n=e;n&&n.isColor?this.copy(n):typeof n=="number"?this.setHex(n):typeof n=="string"&&this.setStyle(n)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=di){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ht.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=Ht.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ht.toWorkingColorSpace(this,n),this}setHSL(e,t,i,n=Ht.workingColorSpace){if(e=Om(e,1),t=Oi(t,0,1),i=Oi(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,a=2*i-r;this.r=Bu(a,r,e+1/3),this.g=Bu(a,r,e),this.b=Bu(a,r,e-1/3)}return Ht.toWorkingColorSpace(this,n),this}setStyle(e,t=di){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=n[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=di){const i=vb[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wo(e.r),this.g=wo(e.g),this.b=wo(e.b),this}copyLinearToSRGB(e){return this.r=Au(e.r),this.g=Au(e.g),this.b=Au(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=di){return Ht.fromWorkingColorSpace(ji.copy(this),e),65536*Math.round(Oi(255*ji.r,0,255))+256*Math.round(Oi(255*ji.g,0,255))+Math.round(Oi(255*ji.b,0,255))}getHexString(e=di){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ht.workingColorSpace){Ht.fromWorkingColorSpace(ji.copy(this),t);const i=ji.r,n=ji.g,r=ji.b,a=Math.max(i,n,r),o=Math.min(i,n,r);let c,h;const d=(o+a)/2;if(o===a)c=0,h=0;else{const u=a-o;switch(h=d<=.5?u/(a+o):u/(2-a-o),a){case i:c=(n-r)/u+(n<r?6:0);break;case n:c=(r-i)/u+2;break;case r:c=(i-n)/u+4}c/=6}return e.h=c,e.s=h,e.l=d,e}getRGB(e,t=Ht.workingColorSpace){return Ht.fromWorkingColorSpace(ji.copy(this),t),e.r=ji.r,e.g=ji.g,e.b=ji.b,e}getStyle(e=di){Ht.fromWorkingColorSpace(ji.copy(this),e);const t=ji.r,i=ji.g,n=ji.b;return e!==di?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(ir),this.setHSL(ir.h+e,ir.s+t,ir.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ir),e.getHSL(Nc);const i=Fl(ir.h,Nc.h,t),n=Fl(ir.s,Nc.s,t),r=Fl(ir.l,Nc.l,t);return this.setHSL(i,n,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*n,this.g=r[1]*t+r[4]*i+r[7]*n,this.b=r[2]*t+r[5]*i+r[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ji=new At;At.NAMES=vb;let N1=0;class is extends rs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:N1++}),this.uuid=ts(),this.name="",this.type="Material",this.blending=1,this.side=ns,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Xr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new At(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_a,this.stencilZFail=_a,this.stencilZPass=_a,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];n!==void 0?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function n(r){const a=[];for(const o in r){const c=r[o];delete c.metadata,a.push(c)}return a}if(i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(i.blending=this.blending),this.side!==ns&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==204&&(i.blendSrc=this.blendSrc),this.blendDst!==205&&(i.blendDst=this.blendDst),this.blendEquation!==Xr&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==3&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==519&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_a&&(i.stencilFail=this.stencilFail),this.stencilZFail!==_a&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==_a&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const r=n(e.textures),a=n(e.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const n=t.length;i=new Array(n);for(let r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class On extends is{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zn,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Rs=F1();function F1(){const s=new ArrayBuffer(4),e=new Float32Array(s),t=new Uint32Array(s),i=new Uint32Array(512),n=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(i[c]=0,i[256|c]=32768,n[c]=24,n[256|c]=24):h<-14?(i[c]=1024>>-h-14,i[256|c]=1024>>-h-14|32768,n[c]=-h-1,n[256|c]=-h-1):h<=15?(i[c]=h+15<<10,i[256|c]=h+15<<10|32768,n[c]=13,n[256|c]=13):h<128?(i[c]=31744,i[256|c]=64512,n[c]=24,n[256|c]=24):(i[c]=31744,i[256|c]=64512,n[c]=13,n[256|c]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,d=0;for(;!(8388608&h);)h<<=1,d-=8388608;h&=-8388609,d+=947912704,r[c]=h|d}for(let c=1024;c<2048;++c)r[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:n,mantissaTable:r,exponentTable:a,offsetTable:o}}const Fc={toHalfFloat:function(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=Oi(s,-65504,65504),Rs.floatView[0]=s;const e=Rs.uint32View[0],t=e>>23&511;return Rs.baseTable[t]+((8388607&e)>>Rs.shiftTable[t])},fromHalfFloat:function(s){const e=s>>10;return Rs.uint32View[0]=Rs.mantissaTable[Rs.offsetTable[e]+(1023&s)]+Rs.exponentTable[e],Rs.floatView[0]}},xi=new le,kc=new vt;class ui{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=km,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ti,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return fb("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)kc.fromBufferAttribute(this,t),kc.applyMatrix3(e),this.setXY(t,kc.x,kc.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix3(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix4(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyNormalMatrix(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.transformDirection(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Jn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Wt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Jn(t,this.array)),t}setX(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Jn(t,this.array)),t}setY(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Jn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Jn(t,this.array)),t}setW(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),i=Wt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),i=Wt(i,this.array),n=Wt(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),i=Wt(i,this.array),n=Wt(n,this.array),r=Wt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==km&&(e.usage=this.usage),e}}class yb extends ui{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class wb extends ui{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class _n extends ui{constructor(e,t,i){super(new Float32Array(e),t,i)}}let k1=0;const Pn=new yt,Ru=new ii,Pa=new le,gn=new hn,Jo=new hn,Fi=new le;class Sn extends rs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:k1++}),this.uuid=ts(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mb(e)?wb:yb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new St().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pn.makeRotationFromQuaternion(e),this.applyMatrix4(Pn),this}rotateX(e){return Pn.makeRotationX(e),this.applyMatrix4(Pn),this}rotateY(e){return Pn.makeRotationY(e),this.applyMatrix4(Pn),this}rotateZ(e){return Pn.makeRotationZ(e),this.applyMatrix4(Pn),this}translate(e,t,i){return Pn.makeTranslation(e,t,i),this.applyMatrix4(Pn),this}scale(e,t,i){return Pn.makeScale(e,t,i),this.applyMatrix4(Pn),this}lookAt(e){return Ru.lookAt(e),Ru.updateMatrix(),this.applyMatrix4(Ru.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pa).negate(),this.translate(Pa.x,Pa.y,Pa.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new _n(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const r=t[i];gn.setFromBufferAttribute(r),this.morphTargetsRelative?(Fi.addVectors(this.boundingBox.min,gn.min),this.boundingBox.expandByPoint(Fi),Fi.addVectors(this.boundingBox.max,gn.max),this.boundingBox.expandByPoint(Fi)):(this.boundingBox.expandByPoint(gn.min),this.boundingBox.expandByPoint(gn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new le,1/0);if(e){const i=this.boundingSphere.center;if(gn.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const o=t[r];Jo.setFromBufferAttribute(o),this.morphTargetsRelative?(Fi.addVectors(gn.min,Jo.min),gn.expandByPoint(Fi),Fi.addVectors(gn.max,Jo.max),gn.expandByPoint(Fi)):(gn.expandByPoint(Jo.min),gn.expandByPoint(Jo.max))}gn.getCenter(i);let n=0;for(let r=0,a=e.count;r<a;r++)Fi.fromBufferAttribute(e,r),n=Math.max(n,i.distanceToSquared(Fi));if(t)for(let r=0,a=t.length;r<a;r++){const o=t[r],c=this.morphTargetsRelative;for(let h=0,d=o.count;h<d;h++)Fi.fromBufferAttribute(o,h),c&&(Pa.fromBufferAttribute(e,h),Fi.add(Pa)),n=Math.max(n,i.distanceToSquared(Fi))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,n=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ui(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],c=[];for(let te=0;te<i.count;te++)o[te]=new le,c[te]=new le;const h=new le,d=new le,u=new le,m=new vt,g=new vt,y=new vt,E=new le,b=new le;function C(te,ue,pe){h.fromBufferAttribute(i,te),d.fromBufferAttribute(i,ue),u.fromBufferAttribute(i,pe),m.fromBufferAttribute(r,te),g.fromBufferAttribute(r,ue),y.fromBufferAttribute(r,pe),d.sub(h),u.sub(h),g.sub(m),y.sub(m);const ce=1/(g.x*y.y-y.x*g.y);isFinite(ce)&&(E.copy(d).multiplyScalar(y.y).addScaledVector(u,-g.y).multiplyScalar(ce),b.copy(u).multiplyScalar(g.x).addScaledVector(d,-y.x).multiplyScalar(ce),o[te].add(E),o[ue].add(E),o[pe].add(E),c[te].add(b),c[ue].add(b),c[pe].add(b))}let B=this.groups;B.length===0&&(B=[{start:0,count:e.count}]);for(let te=0,ue=B.length;te<ue;++te){const pe=B[te],ce=pe.start;for(let he=ce,Me=ce+pe.count;he<Me;he+=3)C(e.getX(he+0),e.getX(he+1),e.getX(he+2))}const I=new le,k=new le,Q=new le,G=new le;function U(te){Q.fromBufferAttribute(n,te),G.copy(Q);const ue=o[te];I.copy(ue),I.sub(Q.multiplyScalar(Q.dot(ue))).normalize(),k.crossVectors(G,ue);const pe=k.dot(c[te])<0?-1:1;a.setXYZW(te,I.x,I.y,I.z,pe)}for(let te=0,ue=B.length;te<ue;++te){const pe=B[te],ce=pe.start;for(let he=ce,Me=ce+pe.count;he<Me;he+=3)U(e.getX(he+0)),U(e.getX(he+1)),U(e.getX(he+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ui(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const n=new le,r=new le,a=new le,o=new le,c=new le,h=new le,d=new le,u=new le;if(e)for(let m=0,g=e.count;m<g;m+=3){const y=e.getX(m+0),E=e.getX(m+1),b=e.getX(m+2);n.fromBufferAttribute(t,y),r.fromBufferAttribute(t,E),a.fromBufferAttribute(t,b),d.subVectors(a,r),u.subVectors(n,r),d.cross(u),o.fromBufferAttribute(i,y),c.fromBufferAttribute(i,E),h.fromBufferAttribute(i,b),o.add(d),c.add(d),h.add(d),i.setXYZ(y,o.x,o.y,o.z),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(b,h.x,h.y,h.z)}else for(let m=0,g=t.count;m<g;m+=3)n.fromBufferAttribute(t,m+0),r.fromBufferAttribute(t,m+1),a.fromBufferAttribute(t,m+2),d.subVectors(a,r),u.subVectors(n,r),d.cross(u),i.setXYZ(m+0,d.x,d.y,d.z),i.setXYZ(m+1,d.x,d.y,d.z),i.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Fi.fromBufferAttribute(e,t),Fi.normalize(),e.setXYZ(t,Fi.x,Fi.y,Fi.z)}toNonIndexed(){function e(o,c){const h=o.array,d=o.itemSize,u=o.normalized,m=new h.constructor(c.length*d);let g=0,y=0;for(let E=0,b=c.length;E<b;E++){g=o.isInterleavedBufferAttribute?c[E]*o.data.stride+o.offset:c[E]*d;for(let C=0;C<d;C++)m[y++]=h[g++]}return new ui(m,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Sn,i=this.index.array,n=this.attributes;for(const o in n){const c=e(n[o],i);t.setAttribute(o,c)}const r=this.morphAttributes;for(const o in r){const c=[],h=r[o];for(let d=0,u=h.length;d<u;d++){const m=e(h[d],i);c.push(m)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const h=a[o];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const h=i[c];e.data.attributes[c]=h.toJSON(e.data)}const n={};let r=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],d=[];for(let u=0,m=h.length;u<m;u++){const g=h[u];d.push(g.toJSON(e.data))}d.length>0&&(n[c]=d,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const n=e.attributes;for(const h in n){const d=n[h];this.setAttribute(h,d.clone(t))}const r=e.morphAttributes;for(const h in r){const d=[],u=r[h];for(let m=0,g=u.length;m<g;m++)d.push(u[m].clone(t));this.morphAttributes[h]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,d=a.length;h<d;h++){const u=a[h];this.addGroup(u.start,u.count,u.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const NA=new yt,Br=new nc,Oc=new Hn,FA=new le,Na=new le,Fa=new le,ka=new le,Lu=new le,Uc=new le,Qc=new vt,zc=new vt,Hc=new vt,kA=new le,OA=new le,UA=new le,Gc=new le,Vc=new le;class Zt extends ii{constructor(e=new Sn,t=new On){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,r=i.length;n<r;n++){const a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const o=this.morphTargetInfluences;if(r&&o){Uc.set(0,0,0);for(let c=0,h=r.length;c<h;c++){const d=o[c],u=r[c];d!==0&&(Lu.fromBufferAttribute(u,e),a?Uc.addScaledVector(Lu,d):Uc.addScaledVector(Lu.sub(t),d))}t.add(Uc)}return t}raycast(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(n!==void 0){if(i.boundingSphere===null&&i.computeBoundingSphere(),Oc.copy(i.boundingSphere),Oc.applyMatrix4(r),Br.copy(e.ray).recast(e.near),Oc.containsPoint(Br.origin)===!1&&(Br.intersectSphere(Oc,FA)===null||Br.origin.distanceToSquared(FA)>(e.far-e.near)**2))return;NA.copy(r).invert(),Br.copy(e.ray).applyMatrix4(NA),i.boundingBox!==null&&Br.intersectsBox(i.boundingBox)===!1||this._computeIntersections(e,t,Br)}}_computeIntersections(e,t,i){let n;const r=this.geometry,a=this.material,o=r.index,c=r.attributes.position,h=r.attributes.uv,d=r.attributes.uv1,u=r.attributes.normal,m=r.groups,g=r.drawRange;if(o!==null)if(Array.isArray(a))for(let y=0,E=m.length;y<E;y++){const b=m[y],C=a[b.materialIndex];for(let B=Math.max(b.start,g.start),I=Math.min(o.count,Math.min(b.start+b.count,g.start+g.count));B<I;B+=3)n=$c(this,C,e,i,h,d,u,o.getX(B),o.getX(B+1),o.getX(B+2)),n&&(n.faceIndex=Math.floor(B/3),n.face.materialIndex=b.materialIndex,t.push(n))}else for(let y=Math.max(0,g.start),E=Math.min(o.count,g.start+g.count);y<E;y+=3)n=$c(this,a,e,i,h,d,u,o.getX(y),o.getX(y+1),o.getX(y+2)),n&&(n.faceIndex=Math.floor(y/3),t.push(n));else if(c!==void 0)if(Array.isArray(a))for(let y=0,E=m.length;y<E;y++){const b=m[y],C=a[b.materialIndex];for(let B=Math.max(b.start,g.start),I=Math.min(c.count,Math.min(b.start+b.count,g.start+g.count));B<I;B+=3)n=$c(this,C,e,i,h,d,u,B,B+1,B+2),n&&(n.faceIndex=Math.floor(B/3),n.face.materialIndex=b.materialIndex,t.push(n))}else for(let y=Math.max(0,g.start),E=Math.min(c.count,g.start+g.count);y<E;y+=3)n=$c(this,a,e,i,h,d,u,y,y+1,y+2),n&&(n.faceIndex=Math.floor(y/3),t.push(n))}}function $c(s,e,t,i,n,r,a,o,c,h){s.getVertexPosition(o,Na),s.getVertexPosition(c,Fa),s.getVertexPosition(h,ka);const d=function(u,m,g,y,E,b,C,B){let I;if(I=m.side===$i?y.intersectTriangle(C,b,E,!0,B):y.intersectTriangle(E,b,C,m.side===ns,B),I===null)return null;Vc.copy(B),Vc.applyMatrix4(u.matrixWorld);const k=g.ray.origin.distanceTo(Vc);return k<g.near||k>g.far?null:{distance:k,point:Vc.clone(),object:u}}(s,e,t,i,Na,Fa,ka,Gc);if(d){n&&(Qc.fromBufferAttribute(n,o),zc.fromBufferAttribute(n,c),Hc.fromBufferAttribute(n,h),d.uv=Fn.getInterpolation(Gc,Na,Fa,ka,Qc,zc,Hc,new vt)),r&&(Qc.fromBufferAttribute(r,o),zc.fromBufferAttribute(r,c),Hc.fromBufferAttribute(r,h),d.uv1=Fn.getInterpolation(Gc,Na,Fa,ka,Qc,zc,Hc,new vt)),a&&(kA.fromBufferAttribute(a,o),OA.fromBufferAttribute(a,c),UA.fromBufferAttribute(a,h),d.normal=Fn.getInterpolation(Gc,Na,Fa,ka,kA,OA,UA,new le),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const u={a:o,b:c,c:h,normal:new le,materialIndex:0};Fn.getNormal(Na,Fa,ka,u.normal),d.face=u}return d}class fa extends Sn{constructor(e=1,t=1,i=1,n=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};const o=this;n=Math.floor(n),r=Math.floor(r),a=Math.floor(a);const c=[],h=[],d=[],u=[];let m=0,g=0;function y(E,b,C,B,I,k,Q,G,U,te,ue){const pe=k/U,ce=Q/te,he=k/2,Me=Q/2,De=G/2,Qe=U+1,Ee=te+1;let ke=0,ee=0;const re=new le;for(let ye=0;ye<Ee;ye++){const me=ye*ce-Me;for(let V=0;V<Qe;V++){const z=V*pe-he;re[E]=z*B,re[b]=me*I,re[C]=De,h.push(re.x,re.y,re.z),re[E]=0,re[b]=0,re[C]=G>0?1:-1,d.push(re.x,re.y,re.z),u.push(V/U),u.push(1-ye/te),ke+=1}}for(let ye=0;ye<te;ye++)for(let me=0;me<U;me++){const V=m+me+Qe*ye,z=m+me+Qe*(ye+1),J=m+(me+1)+Qe*(ye+1),ae=m+(me+1)+Qe*ye;c.push(V,z,ae),c.push(z,J,ae),ee+=6}o.addGroup(g,ee,ue),g+=ee,m+=ke}y("z","y","x",-1,-1,i,t,e,a,r,0),y("z","y","x",1,-1,i,t,-e,a,r,1),y("x","z","y",1,1,e,i,t,n,a,2),y("x","z","y",1,-1,e,i,-t,n,a,3),y("x","y","z",1,-1,e,t,i,n,r,4),y("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(c),this.setAttribute("position",new _n(h,3)),this.setAttribute("normal",new _n(d,3)),this.setAttribute("uv",new _n(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function To(s){const e={};for(const t in s){e[t]={};for(const i in s[t]){const n=s[t][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=n.clone():Array.isArray(n)?e[t][i]=n.slice():e[t][i]=n}}return e}function ln(s){const e={};for(let t=0;t<s.length;t++){const i=To(s[t]);for(const n in i)e[n]=i[n]}return e}function bb(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ht.workingColorSpace}const O1={clone:To,merge:ln};class un extends is{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=To(e.uniforms),this.uniformsGroups=function(t){const i=[];for(let n=0;n<t.length;n++)i.push(t[n].clone());return i}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Eb extends ii{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=Io}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const nr=new le,QA=new vt,zA=new vt;class Ui extends Eb{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Mo*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Nl*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Mo*Math.atan(Math.tan(.5*Nl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){nr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(nr.x,nr.y).multiplyScalar(-e/nr.z),nr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(nr.x,nr.y).multiplyScalar(-e/nr.z)}getViewSize(e,t){return this.getViewBounds(e,QA,zA),t.subVectors(zA,QA)}setViewOffset(e,t,i,n,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Nl*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,h=a.fullHeight;r+=a.offsetX*n/c,t-=a.offsetY*i/h,n*=a.width/c,i*=a.height/h}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Oa=-90;class Um extends ii{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const n=new Ui(Oa,1,e,t);n.layers=this.layers,this.add(n);const r=new Ui(Oa,1,e,t);r.layers=this.layers,this.add(r);const a=new Ui(Oa,1,e,t);a.layers=this.layers,this.add(a);const o=new Ui(Oa,1,e,t);o.layers=this.layers,this.add(o);const c=new Ui(Oa,1,e,t);c.layers=this.layers,this.add(c);const h=new Ui(Oa,1,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,n,r,a,o,c]=t;for(const h of t)this.remove(h);if(e===Io)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(e!==hd)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,c,h,d]=this.children,u=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,r),e.setRenderTarget(i,1,n),e.render(t,a),e.setRenderTarget(i,2,n),e.render(t,o),e.setRenderTarget(i,3,n),e.render(t,c),e.setRenderTarget(i,4,n),e.render(t,h),i.texture.generateMipmaps=E,e.setRenderTarget(i,5,n),e.render(t,d),e.setRenderTarget(u,m,g),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class xb extends qt{constructor(e,t,i,n,r,a,o,c,h,d){super(e=e!==void 0?e:[],t=t!==void 0?t:oa,i,n,r,a,o,c,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Tf extends Qn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new xb(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0&&t.generateMipmaps,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ut}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new fa(5,5,5),r=new un({name:"CubemapFromEquirect",uniforms:To(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:$i,blending:0});r.uniforms.tEquirect.value=t;const a=new Zt(n,r),o=t.minFilter;return t.minFilter===kn&&(t.minFilter=Ut),new Um(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,n){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,n);e.setRenderTarget(r)}}const Du=new le,U1=new le,Q1=new St;class Hr{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=Du.subVectors(i,t).cross(U1.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Du),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Q1.getNormalMatrix(e),n=this.coplanarPoint(Du).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rr=new Hn,Wc=new le;class Bf{constructor(e=new Hr,t=new Hr,i=new Hr,n=new Hr,r=new Hr,a=new Hr){this.planes=[e,t,i,n,r,a]}set(e,t,i,n,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=2e3){const i=this.planes,n=e.elements,r=n[0],a=n[1],o=n[2],c=n[3],h=n[4],d=n[5],u=n[6],m=n[7],g=n[8],y=n[9],E=n[10],b=n[11],C=n[12],B=n[13],I=n[14],k=n[15];if(i[0].setComponents(c-r,m-h,b-g,k-C).normalize(),i[1].setComponents(c+r,m+h,b+g,k+C).normalize(),i[2].setComponents(c+a,m+d,b+y,k+B).normalize(),i[3].setComponents(c-a,m-d,b-y,k-B).normalize(),i[4].setComponents(c-o,m-u,b-E,k-I).normalize(),t===Io)i[5].setComponents(c+o,m+u,b+E,k+I).normalize();else{if(t!==hd)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(o,u,E,I).normalize()}return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rr.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Rr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rr)}intersectsSprite(e){return Rr.center.set(0,0,0),Rr.radius=.7071067811865476,Rr.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rr)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(Wc.x=n.normal.x>0?e.max.x:e.min.x,Wc.y=n.normal.y>0?e.max.y:e.min.y,Wc.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(Wc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _b(){let s=null,e=!1,t=null,i=null;function n(r,a){t(r,a),i=s.requestAnimationFrame(n)}return{start:function(){e!==!0&&t!==null&&(i=s.requestAnimationFrame(n),e=!0)},stop:function(){s.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){s=r}}}function z1(s){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const i=e.get(t);i&&(s.deleteBuffer(i.buffer),e.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const r=e.get(t);return void((!r||r.version<t.version)&&e.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=e.get(t);if(n===void 0)e.set(t,function(r,a){const o=r.array,c=r.usage,h=o.byteLength,d=s.createBuffer();let u;if(s.bindBuffer(a,d),s.bufferData(a,o,c),r.onUploadCallback(),o instanceof Float32Array)u=s.FLOAT;else if(o instanceof Uint16Array)u=r.isFloat16BufferAttribute?s.HALF_FLOAT:s.UNSIGNED_SHORT;else if(o instanceof Int16Array)u=s.SHORT;else if(o instanceof Uint32Array)u=s.UNSIGNED_INT;else if(o instanceof Int32Array)u=s.INT;else if(o instanceof Int8Array)u=s.BYTE;else if(o instanceof Uint8Array)u=s.UNSIGNED_BYTE;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);u=s.UNSIGNED_BYTE}return{buffer:d,type:u,bytesPerElement:o.BYTES_PER_ELEMENT,version:r.version,size:h}}(t,i));else if(n.version<t.version){if(n.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function(r,a,o){const c=a.array,h=a._updateRange,d=a.updateRanges;if(s.bindBuffer(o,r),h.count===-1&&d.length===0&&s.bufferSubData(o,0,c),d.length!==0){for(let u=0,m=d.length;u<m;u++){const g=d[u];s.bufferSubData(o,g.start*c.BYTES_PER_ELEMENT,c,g.start,g.count)}a.clearUpdateRanges()}h.count!==-1&&(s.bufferSubData(o,h.offset*c.BYTES_PER_ELEMENT,c,h.offset,h.count),h.count=-1),a.onUploadCallback()})(n.buffer,t,i),n.version=t.version}}}}class ys extends Sn{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,a=t/2,o=Math.floor(i),c=Math.floor(n),h=o+1,d=c+1,u=e/o,m=t/c,g=[],y=[],E=[],b=[];for(let C=0;C<d;C++){const B=C*m-a;for(let I=0;I<h;I++){const k=I*u-r;y.push(k,-B,0),E.push(0,0,1),b.push(I/o),b.push(1-C/c)}}for(let C=0;C<c;C++)for(let B=0;B<o;B++){const I=B+h*C,k=B+h*(C+1),Q=B+1+h*(C+1),G=B+1+h*C;g.push(I,k,G),g.push(k,Q,G)}this.setIndex(g),this.setAttribute("position",new _n(y,3)),this.setAttribute("normal",new _n(E,3)),this.setAttribute("uv",new _n(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ys(e.width,e.height,e.widthSegments,e.heightSegments)}}const Bt={alphahash_fragment:`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment:`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment:`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex:`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,batching_vertex:`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,begin_vertex:`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment:`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex:`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common:`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment:`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment:`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex:`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex:`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin:`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps:`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment:`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex:`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex:`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment:`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment:`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,shadowmap_pars_vertex:`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, newPeak * vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment:`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment:`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},it={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new St},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new St}},envmap:{envMap:{value:null},envMapRotation:{value:new St},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new St}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new St}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new St},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new St},normalScale:{value:new vt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new St},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new St}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new St}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new St}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0},uvTransform:{value:new St}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new vt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new St},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0}}},ps={basic:{uniforms:ln([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:ln([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new At(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:ln([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:ln([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:ln([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new At(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:ln([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:ln([it.points,it.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:ln([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:ln([it.common,it.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:ln([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:ln([it.sprite,it.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new St},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new St}},vertexShader:Bt.backgroundCube_vert,fragmentShader:Bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:ln([it.common,it.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:ln([it.lights,it.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};ps.physical={uniforms:ln([ps.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new St},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new St},clearcoatNormalScale:{value:new vt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new St},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new St},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new St},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new St},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new St},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new St},transmissionSamplerSize:{value:new vt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new St},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new St},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new St},anisotropyVector:{value:new vt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new St}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};const qc={r:0,b:0,g:0},Lr=new zn,H1=new yt;function G1(s,e,t,i,n,r,a){const o=new At(0);let c,h,d=r===!0?0:1,u=null,m=0,g=null;function y(E,b){E.getRGB(qc,bb(s)),i.buffers.color.setClear(qc.r,qc.g,qc.b,b,a)}return{getClearColor:function(){return o},setClearColor:function(E,b=1){o.set(E),d=b,y(o,d)},getClearAlpha:function(){return d},setClearAlpha:function(E){d=E,y(o,d)},render:function(E,b){let C=!1,B=b.isScene===!0?b.background:null;B&&B.isTexture&&(B=(b.backgroundBlurriness>0?t:e).get(B)),B===null?y(o,d):B&&B.isColor&&(y(B,1),C=!0);const I=s.xr.getEnvironmentBlendMode();I==="additive"?i.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(s.autoClear||C)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),B&&(B.isCubeTexture||B.mapping===Bd)?(h===void 0&&(h=new Zt(new fa(1,1,1),new un({name:"BackgroundCubeMaterial",uniforms:To(ps.backgroundCube.uniforms),vertexShader:ps.backgroundCube.vertexShader,fragmentShader:ps.backgroundCube.fragmentShader,side:$i,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(k,Q,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),Lr.copy(b.backgroundRotation),Lr.x*=-1,Lr.y*=-1,Lr.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Lr.y*=-1,Lr.z*=-1),h.material.uniforms.envMap.value=B,h.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(H1.makeRotationFromEuler(Lr)),h.material.toneMapped=Ht.getTransfer(B.colorSpace)!==li,u===B&&m===B.version&&g===s.toneMapping||(h.material.needsUpdate=!0,u=B,m=B.version,g=s.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null)):B&&B.isTexture&&(c===void 0&&(c=new Zt(new ys(2,2),new un({name:"BackgroundMaterial",uniforms:To(ps.background.uniforms),vertexShader:ps.background.vertexShader,fragmentShader:ps.background.fragmentShader,side:ns,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=B,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=Ht.getTransfer(B.colorSpace)!==li,B.matrixAutoUpdate===!0&&B.updateMatrix(),c.material.uniforms.uvTransform.value.copy(B.matrix),u===B&&m===B.version&&g===s.toneMapping||(c.material.needsUpdate=!0,u=B,m=B.version,g=s.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}}}function V1(s,e){const t=s.getParameter(s.MAX_VERTEX_ATTRIBS),i={},n=h(null);let r=n,a=!1;function o(C){return s.bindVertexArray(C)}function c(C){return s.deleteVertexArray(C)}function h(C){const B=[],I=[],k=[];for(let Q=0;Q<t;Q++)B[Q]=0,I[Q]=0,k[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:I,attributeDivisors:k,object:C,attributes:{},index:null}}function d(){const C=r.newAttributes;for(let B=0,I=C.length;B<I;B++)C[B]=0}function u(C){m(C,0)}function m(C,B){const I=r.newAttributes,k=r.enabledAttributes,Q=r.attributeDivisors;I[C]=1,k[C]===0&&(s.enableVertexAttribArray(C),k[C]=1),Q[C]!==B&&(s.vertexAttribDivisor(C,B),Q[C]=B)}function g(){const C=r.newAttributes,B=r.enabledAttributes;for(let I=0,k=B.length;I<k;I++)B[I]!==C[I]&&(s.disableVertexAttribArray(I),B[I]=0)}function y(C,B,I,k,Q,G,U){U===!0?s.vertexAttribIPointer(C,B,I,Q,G):s.vertexAttribPointer(C,B,I,k,Q,G)}function E(){b(),a=!0,r!==n&&(r=n,o(r.object))}function b(){n.geometry=null,n.program=null,n.wireframe=!1}return{setup:function(C,B,I,k,Q){let G=!1;const U=function(te,ue,pe){const ce=pe.wireframe===!0;let he=i[te.id];he===void 0&&(he={},i[te.id]=he);let Me=he[ue.id];Me===void 0&&(Me={},he[ue.id]=Me);let De=Me[ce];return De===void 0&&(De=h(s.createVertexArray()),Me[ce]=De),De}(k,I,B);r!==U&&(r=U,o(r.object)),G=function(te,ue,pe,ce){const he=r.attributes,Me=ue.attributes;let De=0;const Qe=pe.getAttributes();for(const Ee in Qe)if(Qe[Ee].location>=0){const ke=he[Ee];let ee=Me[Ee];if(ee===void 0&&(Ee==="instanceMatrix"&&te.instanceMatrix&&(ee=te.instanceMatrix),Ee==="instanceColor"&&te.instanceColor&&(ee=te.instanceColor)),ke===void 0||ke.attribute!==ee||ee&&ke.data!==ee.data)return!0;De++}return r.attributesNum!==De||r.index!==ce}(C,k,I,Q),G&&function(te,ue,pe,ce){const he={},Me=ue.attributes;let De=0;const Qe=pe.getAttributes();for(const Ee in Qe)if(Qe[Ee].location>=0){let ke=Me[Ee];ke===void 0&&(Ee==="instanceMatrix"&&te.instanceMatrix&&(ke=te.instanceMatrix),Ee==="instanceColor"&&te.instanceColor&&(ke=te.instanceColor));const ee={};ee.attribute=ke,ke&&ke.data&&(ee.data=ke.data),he[Ee]=ee,De++}r.attributes=he,r.attributesNum=De,r.index=ce}(C,k,I,Q),Q!==null&&e.update(Q,s.ELEMENT_ARRAY_BUFFER),(G||a)&&(a=!1,function(te,ue,pe,ce){d();const he=ce.attributes,Me=pe.getAttributes(),De=ue.defaultAttributeValues;for(const Qe in Me){const Ee=Me[Qe];if(Ee.location>=0){let ke=he[Qe];if(ke===void 0&&(Qe==="instanceMatrix"&&te.instanceMatrix&&(ke=te.instanceMatrix),Qe==="instanceColor"&&te.instanceColor&&(ke=te.instanceColor)),ke!==void 0){const ee=ke.normalized,re=ke.itemSize,ye=e.get(ke);if(ye===void 0)continue;const me=ye.buffer,V=ye.type,z=ye.bytesPerElement,J=V===s.INT||V===s.UNSIGNED_INT||ke.gpuType===_f;if(ke.isInterleavedBufferAttribute){const ae=ke.data,Z=ae.stride,Se=ke.offset;if(ae.isInstancedInterleavedBuffer){for(let Ie=0;Ie<Ee.locationSize;Ie++)m(Ee.location+Ie,ae.meshPerAttribute);te.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Ie=0;Ie<Ee.locationSize;Ie++)u(Ee.location+Ie);s.bindBuffer(s.ARRAY_BUFFER,me);for(let Ie=0;Ie<Ee.locationSize;Ie++)y(Ee.location+Ie,re/Ee.locationSize,V,ee,Z*z,(Se+re/Ee.locationSize*Ie)*z,J)}else{if(ke.isInstancedBufferAttribute){for(let ae=0;ae<Ee.locationSize;ae++)m(Ee.location+ae,ke.meshPerAttribute);te.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let ae=0;ae<Ee.locationSize;ae++)u(Ee.location+ae);s.bindBuffer(s.ARRAY_BUFFER,me);for(let ae=0;ae<Ee.locationSize;ae++)y(Ee.location+ae,re/Ee.locationSize,V,ee,re*z,re/Ee.locationSize*ae*z,J)}}else if(De!==void 0){const ee=De[Qe];if(ee!==void 0)switch(ee.length){case 2:s.vertexAttrib2fv(Ee.location,ee);break;case 3:s.vertexAttrib3fv(Ee.location,ee);break;case 4:s.vertexAttrib4fv(Ee.location,ee);break;default:s.vertexAttrib1fv(Ee.location,ee)}}}}g()}(C,B,I,k),Q!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))},reset:E,resetDefaultState:b,dispose:function(){E();for(const C in i){const B=i[C];for(const I in B){const k=B[I];for(const Q in k)c(k[Q].object),delete k[Q];delete B[I]}delete i[C]}},releaseStatesOfGeometry:function(C){if(i[C.id]===void 0)return;const B=i[C.id];for(const I in B){const k=B[I];for(const Q in k)c(k[Q].object),delete k[Q];delete B[I]}delete i[C.id]},releaseStatesOfProgram:function(C){for(const B in i){const I=i[B];if(I[C.id]===void 0)continue;const k=I[C.id];for(const Q in k)c(k[Q].object),delete k[Q];delete I[C.id]}},initAttributes:d,enableAttribute:u,disableUnusedAttributes:g}}function $1(s,e,t){let i;this.setMode=function(n){i=n},this.render=function(n,r){s.drawArrays(i,n,r),t.update(r,i,1)},this.renderInstances=function(n,r,a){a!==0&&(s.drawArraysInstanced(i,n,r,a),t.update(r,i,a))},this.renderMultiDraw=function(n,r,a){if(a===0)return;const o=e.get("WEBGL_multi_draw");if(o===null)for(let c=0;c<a;c++)this.render(n[c],r[c]);else{o.multiDrawArraysWEBGL(i,n,0,r,0,a);let c=0;for(let h=0;h<a;h++)c+=r[h];t.update(c,i,1)}}}function W1(s,e,t){let i;function n(d){if(d==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";d="mediump"}return d==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let r=t.precision!==void 0?t.precision:"highp";const a=n(r);a!==r&&(console.warn("THREE.WebGLRenderer:",r,"not supported, using",a,"instead."),r=a);const o=t.logarithmicDepthBuffer===!0,c=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),h=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const d=e.get("EXT_texture_filter_anisotropic");i=s.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:n,precision:r,logarithmicDepthBuffer:o,maxTextures:c,maxVertexTextures:h,maxTextureSize:s.getParameter(s.MAX_TEXTURE_SIZE),maxCubemapSize:s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:s.getParameter(s.MAX_VERTEX_ATTRIBS),maxVertexUniforms:s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:s.getParameter(s.MAX_VARYING_VECTORS),maxFragmentUniforms:s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:s.getParameter(s.MAX_SAMPLES)}}function q1(s){const e=this;let t=null,i=0,n=!1,r=!1;const a=new Hr,o=new St,c={value:null,needsUpdate:!1};function h(d,u,m,g){const y=d!==null?d.length:0;let E=null;if(y!==0){if(E=c.value,g!==!0||E===null){const b=m+4*y,C=u.matrixWorldInverse;o.getNormalMatrix(C),(E===null||E.length<b)&&(E=new Float32Array(b));for(let B=0,I=m;B!==y;++B,I+=4)a.copy(d[B]).applyMatrix4(C,o),a.normal.toArray(E,I),E[I+3]=a.constant}c.value=E,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,E}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,u){const m=d.length!==0||u||i!==0||n;return n=u,i=d.length,m},this.beginShadows=function(){r=!0,h(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,u){t=h(d,u,0)},this.setState=function(d,u,m){const g=d.clippingPlanes,y=d.clipIntersection,E=d.clipShadows,b=s.get(d);if(!n||g===null||g.length===0||r&&!E)r?h(null):function(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const C=r?0:i,B=4*C;let I=b.clippingState||null;c.value=I,I=h(g,u,B,m);for(let k=0;k!==B;++k)I[k]=t[k];b.clippingState=I,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=C}}}function j1(s){let e=new WeakMap;function t(n,r){return r===sd?n.mapping=oa:r===304&&(n.mapping=_o),n}function i(n){const r=n.target;r.removeEventListener("dispose",i);const a=e.get(r);a!==void 0&&(e.delete(r),a.dispose())}return{get:function(n){if(n&&n.isTexture){const r=n.mapping;if(r===sd||r===304){if(e.has(n))return t(e.get(n).texture,n.mapping);{const a=n.image;if(a&&a.height>0){const o=new Tf(a.height);return o.fromEquirectangularTexture(s,n),e.set(n,o),n.addEventListener("dispose",i),t(o.texture,n.mapping)}return null}}}return n},dispose:function(){e=new WeakMap}}}class ko extends Eb{constructor(e=-1,t=1,i=1,n=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-e,a=i+e,o=n+t,c=n-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=h*this.view.offsetX,a=r+h*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const HA=[.125,.215,.35,.446,.526,.582],Zo=20,Pu=new ko,GA=new At;let Nu=null,Fu=0,ku=0,Ou=!1;const Gr=(1+Math.sqrt(5))/2,Ua=1/Gr,VA=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,Gr,Ua),new le(0,Gr,-Ua),new le(Ua,0,Gr),new le(-Ua,0,Gr),new le(Gr,Ua,0),new le(-Gr,Ua,0)];class $A{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){Nu=this._renderer.getRenderTarget(),Fu=this._renderer.getActiveCubeFace(),ku=this._renderer.getActiveMipmapLevel(),Ou=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Nu,Fu,ku),this._renderer.xr.enabled=Ou,e.scissorTest=!1,jc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oa||e.mapping===_o?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Nu=this._renderer.getRenderTarget(),Fu=this._renderer.getActiveCubeFace(),ku=this._renderer.getActiveMipmapLevel(),Ou=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ut,minFilter:Ut,generateMipmaps:!1,type:Vi,format:gi,colorSpace:Yt,depthBuffer:!1},n=WA(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=WA(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(a){const o=[],c=[],h=[];let d=a;const u=a-4+1+HA.length;for(let m=0;m<u;m++){const g=Math.pow(2,d);c.push(g);let y=1/g;m>a-4?y=HA[m-a+4-1]:m===0&&(y=0),h.push(y);const E=1/(g-2),b=-E,C=1+E,B=[b,b,C,b,C,C,b,b,C,C,b,C],I=6,k=6,Q=3,G=2,U=1,te=new Float32Array(Q*k*I),ue=new Float32Array(G*k*I),pe=new Float32Array(U*k*I);for(let he=0;he<I;he++){const Me=he%3*2/3-1,De=he>2?0:-1,Qe=[Me,De,0,Me+2/3,De,0,Me+2/3,De+1,0,Me,De,0,Me+2/3,De+1,0,Me,De+1,0];te.set(Qe,Q*k*he),ue.set(B,G*k*he);const Ee=[he,he,he,he,he,he];pe.set(Ee,U*k*he)}const ce=new Sn;ce.setAttribute("position",new ui(te,Q)),ce.setAttribute("uv",new ui(ue,G)),ce.setAttribute("faceIndex",new ui(pe,U)),o.push(ce),d>4&&d--}return{lodPlanes:o,sizeLods:c,sigmas:h}}(r)),this._blurMaterial=function(a,o,c){const h=new Float32Array(Zo),d=new le(0,1,0);return new un({name:"SphericalGaussianBlur",defines:{n:Zo,CUBEUV_TEXEL_WIDTH:1/o,CUBEUV_TEXEL_HEIGHT:1/c,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:h},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:Rf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return n}_compileMaterial(e){const t=new Zt(this._lodPlanes[0],e);this._renderer.compile(t,Pu)}_sceneToCubeUV(e,t,i,n){const r=new Ui(90,1,t,i),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,d=c.toneMapping;c.getClearColor(GA),c.toneMapping=Vs,c.autoClear=!1;const u=new On({name:"PMREM.Background",side:$i,depthWrite:!1,depthTest:!1}),m=new Zt(new fa,u);let g=!1;const y=e.background;y?y.isColor&&(u.color.copy(y),e.background=null,g=!0):(u.color.copy(GA),g=!0);for(let E=0;E<6;E++){const b=E%3;b===0?(r.up.set(0,a[E],0),r.lookAt(o[E],0,0)):b===1?(r.up.set(0,0,a[E]),r.lookAt(0,o[E],0)):(r.up.set(0,a[E],0),r.lookAt(0,0,o[E]));const C=this._cubeSize;jc(n,b*C,E>2?C:0,C,C),c.setRenderTarget(n),g&&c.render(m,r),c.render(e,r)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=d,c.autoClear=h,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===oa||e.mapping===_o;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=jA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qA());const r=n?this._cubemapMaterial:this._equirectMaterial,a=new Zt(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const o=this._cubeSize;jc(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(a,Pu)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const r=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),a=VA[(n-1)%VA.length];this._blur(e,n-1,n,r,a)}t.autoClear=i}_blur(e,t,i,n,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,"latitudinal",r),this._halfBlur(a,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,a,o){const c=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Zt(this._lodPlanes[n],h),u=h.uniforms,m=this._sizeLods[i]-1,g=isFinite(r)?Math.PI/(2*m):2*Math.PI/39,y=r/g,E=isFinite(r)?1+Math.floor(3*y):Zo;E>Zo&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${E} samples when the maximum is set to 20`);const b=[];let C=0;for(let k=0;k<Zo;++k){const Q=k/y,G=Math.exp(-Q*Q/2);b.push(G),k===0?C+=G:k<E&&(C+=2*G)}for(let k=0;k<b.length;k++)b[k]=b[k]/C;u.envMap.value=e.texture,u.samples.value=E,u.weights.value=b,u.latitudinal.value=a==="latitudinal",o&&(u.poleAxis.value=o);const{_lodMax:B}=this;u.dTheta.value=g,u.mipInt.value=B-i;const I=this._sizeLods[n];jc(t,3*I*(n>B-4?n-B+4:0),4*(this._cubeSize-I),3*I,2*I),c.setRenderTarget(t),c.render(d,Pu)}}function WA(s,e,t){const i=new Qn(s,e,t);return i.texture.mapping=Bd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function jc(s,e,t,i,n){s.viewport.set(e,t,i,n),s.scissor.set(e,t,i,n)}function qA(){return new un({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Rf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function jA(){return new un({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Rf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function Rf(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function X1(s){let e=new WeakMap,t=null;function i(n){const r=n.target;r.removeEventListener("dispose",i);const a=e.get(r);a!==void 0&&(e.delete(r),a.dispose())}return{get:function(n){if(n&&n.isTexture){const r=n.mapping,a=r===sd||r===304,o=r===oa||r===_o;if(a||o){let c=e.get(n);const h=c!==void 0?c.texture.pmremVersion:0;if(n.isRenderTargetTexture&&n.pmremVersion!==h)return t===null&&(t=new $A(s)),c=a?t.fromEquirectangular(n,c):t.fromCubemap(n,c),c.texture.pmremVersion=n.pmremVersion,e.set(n,c),c.texture;if(c!==void 0)return c.texture;{const d=n.image;return a&&d&&d.height>0||o&&d&&function(u){let m=0;const g=6;for(let y=0;y<g;y++)u[y]!==void 0&&m++;return m===g}(d)?(t===null&&(t=new $A(s)),c=a?t.fromEquirectangular(n):t.fromCubemap(n),c.texture.pmremVersion=n.pmremVersion,e.set(n,c),n.addEventListener("dispose",i),c.texture):null}}}return n},dispose:function(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}}}function Y1(s){const e={};function t(i){if(e[i]!==void 0)return e[i];let n;switch(i){case"WEBGL_depth_texture":n=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=s.getExtension(i)}return e[i]=n,n}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const n=t(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function K1(s,e,t,i){const n={},r=new WeakMap;function a(c){const h=c.target;h.index!==null&&e.remove(h.index);for(const u in h.attributes)e.remove(h.attributes[u]);for(const u in h.morphAttributes){const m=h.morphAttributes[u];for(let g=0,y=m.length;g<y;g++)e.remove(m[g])}h.removeEventListener("dispose",a),delete n[h.id];const d=r.get(h);d&&(e.remove(d),r.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(c){const h=[],d=c.index,u=c.attributes.position;let m=0;if(d!==null){const E=d.array;m=d.version;for(let b=0,C=E.length;b<C;b+=3){const B=E[b+0],I=E[b+1],k=E[b+2];h.push(B,I,I,k,k,B)}}else{if(u===void 0)return;{const E=u.array;m=u.version;for(let b=0,C=E.length/3-1;b<C;b+=3){const B=b+0,I=b+1,k=b+2;h.push(B,I,I,k,k,B)}}}const g=new(mb(h)?wb:yb)(h,1);g.version=m;const y=r.get(c);y&&e.remove(y),r.set(c,g)}return{get:function(c,h){return n[h.id]===!0||(h.addEventListener("dispose",a),n[h.id]=!0,t.memory.geometries++),h},update:function(c){const h=c.attributes;for(const u in h)e.update(h[u],s.ARRAY_BUFFER);const d=c.morphAttributes;for(const u in d){const m=d[u];for(let g=0,y=m.length;g<y;g++)e.update(m[g],s.ARRAY_BUFFER)}},getWireframeAttribute:function(c){const h=r.get(c);if(h){const d=c.index;d!==null&&h.version<d.version&&o(c)}else o(c);return r.get(c)}}}function J1(s,e,t){let i,n,r;this.setMode=function(a){i=a},this.setIndex=function(a){n=a.type,r=a.bytesPerElement},this.render=function(a,o){s.drawElements(i,o,n,a*r),t.update(o,i,1)},this.renderInstances=function(a,o,c){c!==0&&(s.drawElementsInstanced(i,o,n,a*r,c),t.update(o,i,c))},this.renderMultiDraw=function(a,o,c){if(c===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let d=0;d<c;d++)this.render(a[d]/r,o[d]);else{h.multiDrawElementsWEBGL(i,o,0,n,a,0,c);let d=0;for(let u=0;u<c;u++)d+=o[u];t.update(d,i,1)}}}function Z1(s){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(e.calls++,i){case s.TRIANGLES:e.triangles+=n*(t/3);break;case s.LINES:e.lines+=n*(t/2);break;case s.LINE_STRIP:e.lines+=n*(t-1);break;case s.LINE_LOOP:e.lines+=n*t;break;case s.POINTS:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function eI(s,e,t){const i=new WeakMap,n=new Jt;return{update:function(r,a,o){const c=r.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=h!==void 0?h.length:0;let u=i.get(a);if(u===void 0||u.count!==d){let ue=function(){U.dispose(),i.delete(a),a.removeEventListener("dispose",ue)};var m=ue;u!==void 0&&u.texture.dispose();const g=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,E=a.morphAttributes.color!==void 0,b=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],B=a.morphAttributes.color||[];let I=0;g===!0&&(I=1),y===!0&&(I=2),E===!0&&(I=3);let k=a.attributes.position.count*I,Q=1;k>e.maxTextureSize&&(Q=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const G=new Float32Array(k*Q*4*d),U=new gb(G,k,Q,d);U.type=Ti,U.needsUpdate=!0;const te=4*I;for(let pe=0;pe<d;pe++){const ce=b[pe],he=C[pe],Me=B[pe],De=k*Q*4*pe;for(let Qe=0;Qe<ce.count;Qe++){const Ee=Qe*te;g===!0&&(n.fromBufferAttribute(ce,Qe),G[De+Ee+0]=n.x,G[De+Ee+1]=n.y,G[De+Ee+2]=n.z,G[De+Ee+3]=0),y===!0&&(n.fromBufferAttribute(he,Qe),G[De+Ee+4]=n.x,G[De+Ee+5]=n.y,G[De+Ee+6]=n.z,G[De+Ee+7]=0),E===!0&&(n.fromBufferAttribute(Me,Qe),G[De+Ee+8]=n.x,G[De+Ee+9]=n.y,G[De+Ee+10]=n.z,G[De+Ee+11]=Me.itemSize===4?n.w:1)}}u={count:d,texture:U,size:new vt(k,Q)},i.set(a,u),a.addEventListener("dispose",ue)}if(r.isInstancedMesh===!0&&r.morphTexture!==null)o.getUniforms().setValue(s,"morphTexture",r.morphTexture,t);else{let g=0;for(let E=0;E<c.length;E++)g+=c[E];const y=a.morphTargetsRelative?1:1-g;o.getUniforms().setValue(s,"morphTargetBaseInfluence",y),o.getUniforms().setValue(s,"morphTargetInfluences",c)}o.getUniforms().setValue(s,"morphTargetsTexture",u.texture,t),o.getUniforms().setValue(s,"morphTargetsTextureSize",u.size)}}}function tI(s,e,t,i){let n=new WeakMap;function r(a){const o=a.target;o.removeEventListener("dispose",r),t.remove(o.instanceMatrix),o.instanceColor!==null&&t.remove(o.instanceColor)}return{update:function(a){const o=i.render.frame,c=a.geometry,h=e.get(a,c);if(n.get(h)!==o&&(e.update(h),n.set(h,o)),a.isInstancedMesh&&(a.hasEventListener("dispose",r)===!1&&a.addEventListener("dispose",r),n.get(a)!==o&&(t.update(a.instanceMatrix,s.ARRAY_BUFFER),a.instanceColor!==null&&t.update(a.instanceColor,s.ARRAY_BUFFER),n.set(a,o))),a.isSkinnedMesh){const d=a.skeleton;n.get(d)!==o&&(d.update(),n.set(d,o))}return h},dispose:function(){n=new WeakMap}}}class Sb extends qt{constructor(e,t,i,n,r,a,o,c,h,d){if((d=d!==void 0?d:yo)!==yo&&d!==zl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===yo&&(i=la),i===void 0&&d===zl&&(i=tc),super(null,n,r,a,o,c,d,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Gi,this.minFilter=c!==void 0?c:Gi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Cb=new qt,Ib=new Sb(1,1);Ib.compareFunction=515;const Mb=new gb,Tb=new Ab,Bb=new xb,XA=[],YA=[],KA=new Float32Array(16),JA=new Float32Array(9),ZA=new Float32Array(4);function Oo(s,e,t){const i=s[0];if(i<=0||i>0)return s;const n=e*t;let r=XA[n];if(r===void 0&&(r=new Float32Array(n),XA[n]=r),e!==0){i.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=t,s[a].toArray(r,o)}return r}function Bi(s,e){if(s.length!==e.length)return!1;for(let t=0,i=s.length;t<i;t++)if(s[t]!==e[t])return!1;return!0}function Ri(s,e){for(let t=0,i=e.length;t<i;t++)s[t]=e[t]}function Dd(s,e){let t=YA[e];t===void 0&&(t=new Int32Array(e),YA[e]=t);for(let i=0;i!==e;++i)t[i]=s.allocateTextureUnit();return t}function iI(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function nI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y||(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;s.uniform2fv(this.addr,e),Ri(t,e)}}function sI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z||(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)t[0]===e.r&&t[1]===e.g&&t[2]===e.b||(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bi(t,e))return;s.uniform3fv(this.addr,e),Ri(t,e)}}function rI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z&&t[3]===e.w||(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;s.uniform4fv(this.addr,e),Ri(t,e)}}function aI(s,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),Ri(t,e)}else{if(Bi(t,i))return;ZA.set(i),s.uniformMatrix2fv(this.addr,!1,ZA),Ri(t,i)}}function oI(s,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),Ri(t,e)}else{if(Bi(t,i))return;JA.set(i),s.uniformMatrix3fv(this.addr,!1,JA),Ri(t,i)}}function lI(s,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),Ri(t,e)}else{if(Bi(t,i))return;KA.set(i),s.uniformMatrix4fv(this.addr,!1,KA),Ri(t,i)}}function cI(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function hI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y||(s.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;s.uniform2iv(this.addr,e),Ri(t,e)}}function dI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z||(s.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bi(t,e))return;s.uniform3iv(this.addr,e),Ri(t,e)}}function uI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z&&t[3]===e.w||(s.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;s.uniform4iv(this.addr,e),Ri(t,e)}}function pI(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function mI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y||(s.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;s.uniform2uiv(this.addr,e),Ri(t,e)}}function fI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z||(s.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bi(t,e))return;s.uniform3uiv(this.addr,e),Ri(t,e)}}function gI(s,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z&&t[3]===e.w||(s.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;s.uniform4uiv(this.addr,e),Ri(t,e)}}function AI(s,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(s.uniform1i(this.addr,n),i[0]=n);const r=this.type===s.SAMPLER_2D_SHADOW?Ib:Cb;t.setTexture2D(e||r,n)}function vI(s,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(s.uniform1i(this.addr,n),i[0]=n),t.setTexture3D(e||Tb,n)}function yI(s,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(s.uniform1i(this.addr,n),i[0]=n),t.setTextureCube(e||Bb,n)}function wI(s,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(s.uniform1i(this.addr,n),i[0]=n),t.setTexture2DArray(e||Mb,n)}function bI(s,e){s.uniform1fv(this.addr,e)}function EI(s,e){const t=Oo(e,this.size,2);s.uniform2fv(this.addr,t)}function xI(s,e){const t=Oo(e,this.size,3);s.uniform3fv(this.addr,t)}function _I(s,e){const t=Oo(e,this.size,4);s.uniform4fv(this.addr,t)}function SI(s,e){const t=Oo(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function CI(s,e){const t=Oo(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function II(s,e){const t=Oo(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function MI(s,e){s.uniform1iv(this.addr,e)}function TI(s,e){s.uniform2iv(this.addr,e)}function BI(s,e){s.uniform3iv(this.addr,e)}function RI(s,e){s.uniform4iv(this.addr,e)}function LI(s,e){s.uniform1uiv(this.addr,e)}function DI(s,e){s.uniform2uiv(this.addr,e)}function PI(s,e){s.uniform3uiv(this.addr,e)}function NI(s,e){s.uniform4uiv(this.addr,e)}function FI(s,e,t){const i=this.cache,n=e.length,r=Dd(t,n);Bi(i,r)||(s.uniform1iv(this.addr,r),Ri(i,r));for(let a=0;a!==n;++a)t.setTexture2D(e[a]||Cb,r[a])}function kI(s,e,t){const i=this.cache,n=e.length,r=Dd(t,n);Bi(i,r)||(s.uniform1iv(this.addr,r),Ri(i,r));for(let a=0;a!==n;++a)t.setTexture3D(e[a]||Tb,r[a])}function OI(s,e,t){const i=this.cache,n=e.length,r=Dd(t,n);Bi(i,r)||(s.uniform1iv(this.addr,r),Ri(i,r));for(let a=0;a!==n;++a)t.setTextureCube(e[a]||Bb,r[a])}function UI(s,e,t){const i=this.cache,n=e.length,r=Dd(t,n);Bi(i,r)||(s.uniform1iv(this.addr,r),Ri(i,r));for(let a=0;a!==n;++a)t.setTexture2DArray(e[a]||Mb,r[a])}class QI{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function(n){switch(n){case 5126:return iI;case 35664:return nI;case 35665:return sI;case 35666:return rI;case 35674:return aI;case 35675:return oI;case 35676:return lI;case 5124:case 35670:return cI;case 35667:case 35671:return hI;case 35668:case 35672:return dI;case 35669:case 35673:return uI;case 5125:return pI;case 36294:return mI;case 36295:return fI;case 36296:return gI;case 35678:case 36198:case 36298:case 36306:case 35682:return AI;case 35679:case 36299:case 36307:return vI;case 35680:case 36300:case 36308:case 36293:return yI;case 36289:case 36303:case 36311:case 36292:return wI}}(t.type)}}class zI{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(n){switch(n){case 5126:return bI;case 35664:return EI;case 35665:return xI;case 35666:return _I;case 35674:return SI;case 35675:return CI;case 35676:return II;case 5124:case 35670:return MI;case 35667:case 35671:return TI;case 35668:case 35672:return BI;case 35669:case 35673:return RI;case 5125:return LI;case 36294:return DI;case 36295:return PI;case 36296:return NI;case 35678:case 36198:case 36298:case 36306:case 35682:return FI;case 35679:case 36299:case 36307:return kI;case 35680:case 36300:case 36308:case 36293:return OI;case 36289:case 36303:case 36311:case 36292:return UI}}(t.type)}}class HI{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let r=0,a=n.length;r!==a;++r){const o=n[r];o.setValue(e,t[o.id],i)}}}const Uu=/(\w+)(\])?(\[|\.)?/g;function ev(s,e){s.seq.push(e),s.map[e.id]=e}function GI(s,e,t){const i=s.name,n=i.length;for(Uu.lastIndex=0;;){const r=Uu.exec(i),a=Uu.lastIndex;let o=r[1];const c=r[2]==="]",h=r[3];if(c&&(o|=0),h===void 0||h==="["&&a+2===n){ev(t,h===void 0?new QI(o,s,e):new zI(o,s,e));break}{let d=t.map[o];d===void 0&&(d=new HI(o),ev(t,d)),t=d}}}class Uh{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const r=e.getActiveUniform(t,n);GI(r,e.getUniformLocation(t,r.name),this)}}setValue(e,t,i,n){const r=this.map[t];r!==void 0&&r.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];n!==void 0&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let r=0,a=t.length;r!==a;++r){const o=t[r],c=i[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,r=e.length;n!==r;++n){const a=e[n];a.id in t&&i.push(a)}return i}}function tv(s,e,t){const i=s.createShader(e);return s.shaderSource(i,t),s.compileShader(i),i}const VI=37297;let $I=0;function iv(s,e,t){const i=s.getShaderParameter(e,s.COMPILE_STATUS),n=s.getShaderInfoLog(e).trim();if(i&&n==="")return"";const r=/ERROR: 0:(\d+)/.exec(n);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+n+`

`+function(o,c){const h=o.split(`
`),d=[],u=Math.max(c-6,0),m=Math.min(c+6,h.length);for(let g=u;g<m;g++){const y=g+1;d.push(`${y===c?">":" "} ${y}: ${h[g]}`)}return d.join(`
`)}(s.getShaderSource(e),a)}return n}function WI(s,e){const t=function(i){const n=Ht.getPrimaries(Ht.workingColorSpace),r=Ht.getPrimaries(i);let a;switch(n===r?a="":n===cd&&r===ld?a="LinearDisplayP3ToLinearSRGB":n===ld&&r===cd&&(a="LinearSRGBToLinearDisplayP3"),i){case Yt:case ic:return[a,"LinearTransferOETF"];case di:case Ld:return[a,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[a,"LinearTransferOETF"]}}(e);return`vec4 ${s}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function qI(s,e){let t;switch(e){case c1:t="Linear";break;case h1:t="Reinhard";break;case d1:t="OptimizedCineon";break;case Td:t="ACESFilmic";break;case ub:t="AgX";break;case xf:t="Neutral";break;case u1:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function el(s){return s!==""}function nv(s,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function sv(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jI=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qm(s){return s.replace(jI,YI)}const XI=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function YI(s,e){let t=Bt[e];if(t===void 0){const i=XI.get(e);if(i===void 0)throw new Error("Can not resolve #include <"+e+">");t=Bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return Qm(t)}const KI=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rv(s){return s.replace(KI,JI)}function JI(s,e,t,i){let n="";for(let r=parseInt(e);r<parseInt(t);r++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return n}function av(s){let e=`precision ${s.precision} float;
	precision ${s.precision} int;
	precision ${s.precision} sampler2D;
	precision ${s.precision} samplerCube;
	precision ${s.precision} sampler3D;
	precision ${s.precision} sampler2DArray;
	precision ${s.precision} sampler2DShadow;
	precision ${s.precision} samplerCubeShadow;
	precision ${s.precision} sampler2DArrayShadow;
	precision ${s.precision} isampler2D;
	precision ${s.precision} isampler3D;
	precision ${s.precision} isamplerCube;
	precision ${s.precision} isampler2DArray;
	precision ${s.precision} usampler2D;
	precision ${s.precision} usampler3D;
	precision ${s.precision} usamplerCube;
	precision ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ZI(s,e,t,i){const n=s.getContext(),r=t.defines;let a=t.vertexShader,o=t.fragmentShader;const c=function(ce){let he="SHADOWMAP_TYPE_BASIC";return ce.shadowMapType===hb?he="SHADOWMAP_TYPE_PCF":ce.shadowMapType===GC?he="SHADOWMAP_TYPE_PCF_SOFT":ce.shadowMapType===zs&&(he="SHADOWMAP_TYPE_VSM"),he}(t),h=function(ce){let he="ENVMAP_TYPE_CUBE";if(ce.envMap)switch(ce.envMapMode){case oa:case _o:he="ENVMAP_TYPE_CUBE";break;case Bd:he="ENVMAP_TYPE_CUBE_UV"}return he}(t),d=function(ce){let he="ENVMAP_MODE_REFLECTION";return ce.envMap&&ce.envMapMode===_o&&(he="ENVMAP_MODE_REFRACTION"),he}(t),u=function(ce){let he="ENVMAP_BLENDING_NONE";if(ce.envMap)switch(ce.combine){case db:he="ENVMAP_BLENDING_MULTIPLY";break;case o1:he="ENVMAP_BLENDING_MIX";break;case l1:he="ENVMAP_BLENDING_ADD"}return he}(t),m=function(ce){const he=ce.envMapCubeUVHeight;if(he===null)return null;const Me=Math.log2(he)-2,De=1/he;return{texelWidth:1/(3*Math.max(Math.pow(2,Me),112)),texelHeight:De,maxMip:Me}}(t),g=function(ce){return[ce.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",ce.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(el).join(`
`)}(t),y=function(ce){const he=[];for(const Me in ce){const De=ce[Me];De!==!1&&he.push("#define "+Me+" "+De)}return he.join(`
`)}(r),E=n.createProgram();let b,C,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(el).join(`
`),b.length>0&&(b+=`
`),C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(el).join(`
`),C.length>0&&(C+=`
`)):(b=[av(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(el).join(`
`),C=[av(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",t.envMap?"#define "+u:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vs?"#define TONE_MAPPING":"",t.toneMapping!==Vs?Bt.tonemapping_pars_fragment:"",t.toneMapping!==Vs?qI("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Bt.colorspace_pars_fragment,WI("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(el).join(`
`)),a=Qm(a),a=nv(a,t),a=sv(a,t),o=Qm(o),o=nv(o,t),o=sv(o,t),a=rv(a),o=rv(o),t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,b=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,C=["#define varying in",t.glslVersion===bA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===bA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const I=B+b+a,k=B+C+o,Q=tv(n,n.VERTEX_SHADER,I),G=tv(n,n.FRAGMENT_SHADER,k);function U(ce){if(s.debug.checkShaderErrors){const he=n.getProgramInfoLog(E).trim(),Me=n.getShaderInfoLog(Q).trim(),De=n.getShaderInfoLog(G).trim();let Qe=!0,Ee=!0;if(n.getProgramParameter(E,n.LINK_STATUS)===!1)if(Qe=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(n,E,Q,G);else{const ke=iv(n,Q,"vertex"),ee=iv(n,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(E,n.VALIDATE_STATUS)+`

Material Name: `+ce.name+`
Material Type: `+ce.type+`

Program Info Log: `+he+`
`+ke+`
`+ee)}else he!==""?console.warn("THREE.WebGLProgram: Program Info Log:",he):Me!==""&&De!==""||(Ee=!1);Ee&&(ce.diagnostics={runnable:Qe,programLog:he,vertexShader:{log:Me,prefix:b},fragmentShader:{log:De,prefix:C}})}n.deleteShader(Q),n.deleteShader(G),te=new Uh(n,E),ue=function(he,Me){const De={},Qe=he.getProgramParameter(Me,he.ACTIVE_ATTRIBUTES);for(let Ee=0;Ee<Qe;Ee++){const ke=he.getActiveAttrib(Me,Ee),ee=ke.name;let re=1;ke.type===he.FLOAT_MAT2&&(re=2),ke.type===he.FLOAT_MAT3&&(re=3),ke.type===he.FLOAT_MAT4&&(re=4),De[ee]={type:ke.type,location:he.getAttribLocation(Me,ee),locationSize:re}}return De}(n,E)}let te,ue;n.attachShader(E,Q),n.attachShader(E,G),t.index0AttributeName!==void 0?n.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&n.bindAttribLocation(E,0,"position"),n.linkProgram(E),this.getUniforms=function(){return te===void 0&&U(this),te},this.getAttributes=function(){return ue===void 0&&U(this),ue};let pe=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return pe===!1&&(pe=n.getProgramParameter(E,VI)),pe},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$I++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=Q,this.fragmentShader=G,this}let eM=0;class tM{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),r=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(n)===!1&&(a.add(n),n.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new iM(e),t.set(e,i)),i}}class iM{constructor(e){this.id=eM++,this.code=e,this.usedTimes=0}}function nM(s,e,t,i,n,r,a){const o=new Mf,c=new tM,h=new Set,d=[],u=n.logarithmicDepthBuffer,m=n.vertexTextures;let g=n.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(b){return h.add(b),b===0?"uv":`uv${b}`}return{getParameters:function(b,C,B,I,k){const Q=I.fog,G=k.geometry,U=b.isMeshStandardMaterial?I.environment:null,te=(b.isMeshStandardMaterial?t:e).get(b.envMap||U),ue=te&&te.mapping===Bd?te.image.height:null,pe=y[b.type];b.precision!==null&&(g=n.getMaxPrecision(b.precision),g!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",g,"instead."));const ce=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,he=ce!==void 0?ce.length:0;let Me,De,Qe,Ee,ke=0;if(G.morphAttributes.position!==void 0&&(ke=1),G.morphAttributes.normal!==void 0&&(ke=2),G.morphAttributes.color!==void 0&&(ke=3),pe){const H=ps[pe];Me=H.vertexShader,De=H.fragmentShader}else Me=b.vertexShader,De=b.fragmentShader,c.update(b),Qe=c.getVertexShaderID(b),Ee=c.getFragmentShaderID(b);const ee=s.getRenderTarget(),re=k.isInstancedMesh===!0,ye=k.isBatchedMesh===!0,me=!!b.map,V=!!b.matcap,z=!!te,J=!!b.aoMap,ae=!!b.lightMap,Z=!!b.bumpMap,Se=!!b.normalMap,Ie=!!b.displacementMap,Oe=!!b.emissiveMap,K=!!b.metalnessMap,L=!!b.roughnessMap,oe=b.anisotropy>0,ne=b.clearcoat>0,Le=b.iridescence>0,fe=b.sheen>0,Re=b.transmission>0,Je=oe&&!!b.anisotropyMap,Xe=ne&&!!b.clearcoatMap,st=ne&&!!b.clearcoatNormalMap,Ve=ne&&!!b.clearcoatRoughnessMap,rt=Le&&!!b.iridescenceMap,Ze=Le&&!!b.iridescenceThicknessMap,Et=fe&&!!b.sheenColorMap,p=fe&&!!b.sheenRoughnessMap,l=!!b.specularMap,f=!!b.specularColorMap,v=!!b.specularIntensityMap,x=Re&&!!b.transmissionMap,w=Re&&!!b.thicknessMap,T=!!b.gradientMap,P=!!b.alphaMap,_=b.alphaTest>0,R=!!b.alphaHash,F=!!b.extensions;let S=Vs;b.toneMapped&&(ee!==null&&ee.isXRRenderTarget!==!0||(S=s.toneMapping));const D={shaderID:pe,shaderType:b.type,shaderName:b.name,vertexShader:Me,fragmentShader:De,defines:b.defines,customVertexShaderID:Qe,customFragmentShaderID:Ee,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:g,batching:ye,instancing:re,instancingColor:re&&k.instanceColor!==null,instancingMorph:re&&k.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:ee===null?s.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:Yt,alphaToCoverage:!!b.alphaToCoverage,map:me,matcap:V,envMap:z,envMapMode:z&&te.mapping,envMapCubeUVHeight:ue,aoMap:J,lightMap:ae,bumpMap:Z,normalMap:Se,displacementMap:m&&Ie,emissiveMap:Oe,normalMapObjectSpace:Se&&b.normalMapType===1,normalMapTangentSpace:Se&&b.normalMapType===0,metalnessMap:K,roughnessMap:L,anisotropy:oe,anisotropyMap:Je,clearcoat:ne,clearcoatMap:Xe,clearcoatNormalMap:st,clearcoatRoughnessMap:Ve,iridescence:Le,iridescenceMap:rt,iridescenceThicknessMap:Ze,sheen:fe,sheenColorMap:Et,sheenRoughnessMap:p,specularMap:l,specularColorMap:f,specularIntensityMap:v,transmission:Re,transmissionMap:x,thicknessMap:w,gradientMap:T,opaque:b.transparent===!1&&b.blending===1&&b.alphaToCoverage===!1,alphaMap:P,alphaTest:_,alphaHash:R,combine:b.combine,mapUv:me&&E(b.map.channel),aoMapUv:J&&E(b.aoMap.channel),lightMapUv:ae&&E(b.lightMap.channel),bumpMapUv:Z&&E(b.bumpMap.channel),normalMapUv:Se&&E(b.normalMap.channel),displacementMapUv:Ie&&E(b.displacementMap.channel),emissiveMapUv:Oe&&E(b.emissiveMap.channel),metalnessMapUv:K&&E(b.metalnessMap.channel),roughnessMapUv:L&&E(b.roughnessMap.channel),anisotropyMapUv:Je&&E(b.anisotropyMap.channel),clearcoatMapUv:Xe&&E(b.clearcoatMap.channel),clearcoatNormalMapUv:st&&E(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ve&&E(b.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&E(b.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&E(b.iridescenceThicknessMap.channel),sheenColorMapUv:Et&&E(b.sheenColorMap.channel),sheenRoughnessMapUv:p&&E(b.sheenRoughnessMap.channel),specularMapUv:l&&E(b.specularMap.channel),specularColorMapUv:f&&E(b.specularColorMap.channel),specularIntensityMapUv:v&&E(b.specularIntensityMap.channel),transmissionMapUv:x&&E(b.transmissionMap.channel),thicknessMapUv:w&&E(b.thicknessMap.channel),alphaMapUv:P&&E(b.alphaMap.channel),vertexTangents:!!G.attributes.tangent&&(Se||oe),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,pointsUvs:k.isPoints===!0&&!!G.attributes.uv&&(me||P),fog:!!Q,useFog:b.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:u,skinning:k.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:ke,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:b.dithering,shadowMapEnabled:s.shadowMap.enabled&&B.length>0,shadowMapType:s.shadowMap.type,toneMapping:S,useLegacyLights:s._useLegacyLights,decodeVideoTexture:me&&b.map.isVideoTexture===!0&&Ht.getTransfer(b.map.colorSpace)===li,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Zi,flipSided:b.side===$i,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionClipCullDistance:F&&b.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:F&&b.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()};return D.vertexUv1s=h.has(1),D.vertexUv2s=h.has(2),D.vertexUv3s=h.has(3),h.clear(),D},getProgramCacheKey:function(b){const C=[];if(b.shaderID?C.push(b.shaderID):(C.push(b.customVertexShaderID),C.push(b.customFragmentShaderID)),b.defines!==void 0)for(const B in b.defines)C.push(B),C.push(b.defines[B]);return b.isRawShaderMaterial===!1&&(function(B,I){B.push(I.precision),B.push(I.outputColorSpace),B.push(I.envMapMode),B.push(I.envMapCubeUVHeight),B.push(I.mapUv),B.push(I.alphaMapUv),B.push(I.lightMapUv),B.push(I.aoMapUv),B.push(I.bumpMapUv),B.push(I.normalMapUv),B.push(I.displacementMapUv),B.push(I.emissiveMapUv),B.push(I.metalnessMapUv),B.push(I.roughnessMapUv),B.push(I.anisotropyMapUv),B.push(I.clearcoatMapUv),B.push(I.clearcoatNormalMapUv),B.push(I.clearcoatRoughnessMapUv),B.push(I.iridescenceMapUv),B.push(I.iridescenceThicknessMapUv),B.push(I.sheenColorMapUv),B.push(I.sheenRoughnessMapUv),B.push(I.specularMapUv),B.push(I.specularColorMapUv),B.push(I.specularIntensityMapUv),B.push(I.transmissionMapUv),B.push(I.thicknessMapUv),B.push(I.combine),B.push(I.fogExp2),B.push(I.sizeAttenuation),B.push(I.morphTargetsCount),B.push(I.morphAttributeCount),B.push(I.numDirLights),B.push(I.numPointLights),B.push(I.numSpotLights),B.push(I.numSpotLightMaps),B.push(I.numHemiLights),B.push(I.numRectAreaLights),B.push(I.numDirLightShadows),B.push(I.numPointLightShadows),B.push(I.numSpotLightShadows),B.push(I.numSpotLightShadowsWithMaps),B.push(I.numLightProbes),B.push(I.shadowMapType),B.push(I.toneMapping),B.push(I.numClippingPlanes),B.push(I.numClipIntersection),B.push(I.depthPacking)}(C,b),function(B,I){o.disableAll(),I.supportsVertexTextures&&o.enable(0),I.instancing&&o.enable(1),I.instancingColor&&o.enable(2),I.instancingMorph&&o.enable(3),I.matcap&&o.enable(4),I.envMap&&o.enable(5),I.normalMapObjectSpace&&o.enable(6),I.normalMapTangentSpace&&o.enable(7),I.clearcoat&&o.enable(8),I.iridescence&&o.enable(9),I.alphaTest&&o.enable(10),I.vertexColors&&o.enable(11),I.vertexAlphas&&o.enable(12),I.vertexUv1s&&o.enable(13),I.vertexUv2s&&o.enable(14),I.vertexUv3s&&o.enable(15),I.vertexTangents&&o.enable(16),I.anisotropy&&o.enable(17),I.alphaHash&&o.enable(18),I.batching&&o.enable(19),B.push(o.mask),o.disableAll(),I.fog&&o.enable(0),I.useFog&&o.enable(1),I.flatShading&&o.enable(2),I.logarithmicDepthBuffer&&o.enable(3),I.skinning&&o.enable(4),I.morphTargets&&o.enable(5),I.morphNormals&&o.enable(6),I.morphColors&&o.enable(7),I.premultipliedAlpha&&o.enable(8),I.shadowMapEnabled&&o.enable(9),I.useLegacyLights&&o.enable(10),I.doubleSided&&o.enable(11),I.flipSided&&o.enable(12),I.useDepthPacking&&o.enable(13),I.dithering&&o.enable(14),I.transmission&&o.enable(15),I.sheen&&o.enable(16),I.opaque&&o.enable(17),I.pointsUvs&&o.enable(18),I.decodeVideoTexture&&o.enable(19),I.alphaToCoverage&&o.enable(20),B.push(o.mask)}(C,b),C.push(s.outputColorSpace)),C.push(b.customProgramCacheKey),C.join()},getUniforms:function(b){const C=y[b.type];let B;if(C){const I=ps[C];B=O1.clone(I.uniforms)}else B=b.uniforms;return B},acquireProgram:function(b,C){let B;for(let I=0,k=d.length;I<k;I++){const Q=d[I];if(Q.cacheKey===C){B=Q,++B.usedTimes;break}}return B===void 0&&(B=new ZI(s,C,b,r),d.push(B)),B},releaseProgram:function(b){if(--b.usedTimes==0){const C=d.indexOf(b);d[C]=d[d.length-1],d.pop(),b.destroy()}},releaseShaderCache:function(b){c.remove(b)},programs:d,dispose:function(){c.dispose()}}}function sM(){let s=new WeakMap;return{get:function(e){let t=s.get(e);return t===void 0&&(t={},s.set(e,t)),t},remove:function(e){s.delete(e)},update:function(e,t,i){s.get(e)[t]=i},dispose:function(){s=new WeakMap}}}function rM(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function ov(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function lv(){const s=[];let e=0;const t=[],i=[],n=[];function r(a,o,c,h,d,u){let m=s[e];return m===void 0?(m={id:a.id,object:a,geometry:o,material:c,groupOrder:h,renderOrder:a.renderOrder,z:d,group:u},s[e]=m):(m.id=a.id,m.object=a,m.geometry=o,m.material=c,m.groupOrder=h,m.renderOrder=a.renderOrder,m.z=d,m.group=u),e++,m}return{opaque:t,transmissive:i,transparent:n,init:function(){e=0,t.length=0,i.length=0,n.length=0},push:function(a,o,c,h,d,u){const m=r(a,o,c,h,d,u);c.transmission>0?i.push(m):c.transparent===!0?n.push(m):t.push(m)},unshift:function(a,o,c,h,d,u){const m=r(a,o,c,h,d,u);c.transmission>0?i.unshift(m):c.transparent===!0?n.unshift(m):t.unshift(m)},finish:function(){for(let a=e,o=s.length;a<o;a++){const c=s[a];if(c.id===null)break;c.id=null,c.object=null,c.geometry=null,c.material=null,c.group=null}},sort:function(a,o){t.length>1&&t.sort(a||rM),i.length>1&&i.sort(o||ov),n.length>1&&n.sort(o||ov)}}}function aM(){let s=new WeakMap;return{get:function(e,t){const i=s.get(e);let n;return i===void 0?(n=new lv,s.set(e,[n])):t>=i.length?(n=new lv,i.push(n)):n=i[t],n},dispose:function(){s=new WeakMap}}}function oM(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new At};break;case"SpotLight":t={position:new le,direction:new le,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new At,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new At,groundColor:new At};break;case"RectAreaLight":t={color:new At,position:new le,halfWidth:new le,halfHeight:new le}}return s[e.id]=t,t}}}let lM=0;function cM(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function hM(s){const e=new oM,t=function(){const o={};return{get:function(c){if(o[c.id]!==void 0)return o[c.id];let h;switch(c.type){case"DirectionalLight":case"SpotLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vt};break;case"PointLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vt,shadowCameraNear:1,shadowCameraFar:1e3}}return o[c.id]=h,h}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)i.probe.push(new le);const n=new le,r=new yt,a=new yt;return{setup:function(o,c){let h=0,d=0,u=0;for(let ue=0;ue<9;ue++)i.probe[ue].set(0,0,0);let m=0,g=0,y=0,E=0,b=0,C=0,B=0,I=0,k=0,Q=0,G=0;o.sort(cM);const U=c===!0?Math.PI:1;for(let ue=0,pe=o.length;ue<pe;ue++){const ce=o[ue],he=ce.color,Me=ce.intensity,De=ce.distance,Qe=ce.shadow&&ce.shadow.map?ce.shadow.map.texture:null;if(ce.isAmbientLight)h+=he.r*Me*U,d+=he.g*Me*U,u+=he.b*Me*U;else if(ce.isLightProbe){for(let Ee=0;Ee<9;Ee++)i.probe[Ee].addScaledVector(ce.sh.coefficients[Ee],Me);G++}else if(ce.isDirectionalLight){const Ee=e.get(ce);if(Ee.color.copy(ce.color).multiplyScalar(ce.intensity*U),ce.castShadow){const ke=ce.shadow,ee=t.get(ce);ee.shadowBias=ke.bias,ee.shadowNormalBias=ke.normalBias,ee.shadowRadius=ke.radius,ee.shadowMapSize=ke.mapSize,i.directionalShadow[m]=ee,i.directionalShadowMap[m]=Qe,i.directionalShadowMatrix[m]=ce.shadow.matrix,C++}i.directional[m]=Ee,m++}else if(ce.isSpotLight){const Ee=e.get(ce);Ee.position.setFromMatrixPosition(ce.matrixWorld),Ee.color.copy(he).multiplyScalar(Me*U),Ee.distance=De,Ee.coneCos=Math.cos(ce.angle),Ee.penumbraCos=Math.cos(ce.angle*(1-ce.penumbra)),Ee.decay=ce.decay,i.spot[y]=Ee;const ke=ce.shadow;if(ce.map&&(i.spotLightMap[k]=ce.map,k++,ke.updateMatrices(ce),ce.castShadow&&Q++),i.spotLightMatrix[y]=ke.matrix,ce.castShadow){const ee=t.get(ce);ee.shadowBias=ke.bias,ee.shadowNormalBias=ke.normalBias,ee.shadowRadius=ke.radius,ee.shadowMapSize=ke.mapSize,i.spotShadow[y]=ee,i.spotShadowMap[y]=Qe,I++}y++}else if(ce.isRectAreaLight){const Ee=e.get(ce);Ee.color.copy(he).multiplyScalar(Me),Ee.halfWidth.set(.5*ce.width,0,0),Ee.halfHeight.set(0,.5*ce.height,0),i.rectArea[E]=Ee,E++}else if(ce.isPointLight){const Ee=e.get(ce);if(Ee.color.copy(ce.color).multiplyScalar(ce.intensity*U),Ee.distance=ce.distance,Ee.decay=ce.decay,ce.castShadow){const ke=ce.shadow,ee=t.get(ce);ee.shadowBias=ke.bias,ee.shadowNormalBias=ke.normalBias,ee.shadowRadius=ke.radius,ee.shadowMapSize=ke.mapSize,ee.shadowCameraNear=ke.camera.near,ee.shadowCameraFar=ke.camera.far,i.pointShadow[g]=ee,i.pointShadowMap[g]=Qe,i.pointShadowMatrix[g]=ce.shadow.matrix,B++}i.point[g]=Ee,g++}else if(ce.isHemisphereLight){const Ee=e.get(ce);Ee.skyColor.copy(ce.color).multiplyScalar(Me*U),Ee.groundColor.copy(ce.groundColor).multiplyScalar(Me*U),i.hemi[b]=Ee,b++}}E>0&&(s.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=u;const te=i.hash;te.directionalLength===m&&te.pointLength===g&&te.spotLength===y&&te.rectAreaLength===E&&te.hemiLength===b&&te.numDirectionalShadows===C&&te.numPointShadows===B&&te.numSpotShadows===I&&te.numSpotMaps===k&&te.numLightProbes===G||(i.directional.length=m,i.spot.length=y,i.rectArea.length=E,i.point.length=g,i.hemi.length=b,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=B,i.pointShadowMap.length=B,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=B,i.spotLightMatrix.length=I+k-Q,i.spotLightMap.length=k,i.numSpotLightShadowsWithMaps=Q,i.numLightProbes=G,te.directionalLength=m,te.pointLength=g,te.spotLength=y,te.rectAreaLength=E,te.hemiLength=b,te.numDirectionalShadows=C,te.numPointShadows=B,te.numSpotShadows=I,te.numSpotMaps=k,te.numLightProbes=G,i.version=lM++)},setupView:function(o,c){let h=0,d=0,u=0,m=0,g=0;const y=c.matrixWorldInverse;for(let E=0,b=o.length;E<b;E++){const C=o[E];if(C.isDirectionalLight){const B=i.directional[h];B.direction.setFromMatrixPosition(C.matrixWorld),n.setFromMatrixPosition(C.target.matrixWorld),B.direction.sub(n),B.direction.transformDirection(y),h++}else if(C.isSpotLight){const B=i.spot[u];B.position.setFromMatrixPosition(C.matrixWorld),B.position.applyMatrix4(y),B.direction.setFromMatrixPosition(C.matrixWorld),n.setFromMatrixPosition(C.target.matrixWorld),B.direction.sub(n),B.direction.transformDirection(y),u++}else if(C.isRectAreaLight){const B=i.rectArea[m];B.position.setFromMatrixPosition(C.matrixWorld),B.position.applyMatrix4(y),a.identity(),r.copy(C.matrixWorld),r.premultiply(y),a.extractRotation(r),B.halfWidth.set(.5*C.width,0,0),B.halfHeight.set(0,.5*C.height,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),m++}else if(C.isPointLight){const B=i.point[d];B.position.setFromMatrixPosition(C.matrixWorld),B.position.applyMatrix4(y),d++}else if(C.isHemisphereLight){const B=i.hemi[g];B.direction.setFromMatrixPosition(C.matrixWorld),B.direction.transformDirection(y),g++}}},state:i}}function cv(s){const e=new hM(s),t=[],i=[];return{init:function(){t.length=0,i.length=0},state:{lightsArray:t,shadowsArray:i,lights:e,transmissionRenderTarget:null},setupLights:function(n){e.setup(t,n)},setupLightsView:function(n){e.setupView(t,n)},pushLight:function(n){t.push(n)},pushShadow:function(n){i.push(n)}}}function dM(s){let e=new WeakMap;return{get:function(t,i=0){const n=e.get(t);let r;return n===void 0?(r=new cv(s),e.set(t,[r])):i>=n.length?(r=new cv(s),n.push(r)):r=n[i],r},dispose:function(){e=new WeakMap}}}class Rb extends is{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uM extends is{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function pM(s,e,t){let i=new Bf;const n=new vt,r=new vt,a=new Jt,o=new Rb({depthPacking:3201}),c=new uM,h={},d=t.maxTextureSize,u={[ns]:$i,[$i]:ns,[Zi]:Zi},m=new un({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new vt},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const y=new Sn;y.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Zt(y,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hb;let C=this.type;function B(G,U){const te=e.update(E);m.defines.VSM_SAMPLES!==G.blurSamples&&(m.defines.VSM_SAMPLES=G.blurSamples,g.defines.VSM_SAMPLES=G.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),G.mapPass===null&&(G.mapPass=new Qn(n.x,n.y)),m.uniforms.shadow_pass.value=G.map.texture,m.uniforms.resolution.value=G.mapSize,m.uniforms.radius.value=G.radius,s.setRenderTarget(G.mapPass),s.clear(),s.renderBufferDirect(U,null,te,m,E,null),g.uniforms.shadow_pass.value=G.mapPass.texture,g.uniforms.resolution.value=G.mapSize,g.uniforms.radius.value=G.radius,s.setRenderTarget(G.map),s.clear(),s.renderBufferDirect(U,null,te,g,E,null)}function I(G,U,te,ue){let pe=null;const ce=te.isPointLight===!0?G.customDistanceMaterial:G.customDepthMaterial;if(ce!==void 0)pe=ce;else if(pe=te.isPointLight===!0?c:o,s.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0||U.map&&U.alphaTest>0){const he=pe.uuid,Me=U.uuid;let De=h[he];De===void 0&&(De={},h[he]=De);let Qe=De[Me];Qe===void 0&&(Qe=pe.clone(),De[Me]=Qe,U.addEventListener("dispose",Q)),pe=Qe}return pe.visible=U.visible,pe.wireframe=U.wireframe,pe.side=ue===zs?U.shadowSide!==null?U.shadowSide:U.side:U.shadowSide!==null?U.shadowSide:u[U.side],pe.alphaMap=U.alphaMap,pe.alphaTest=U.alphaTest,pe.map=U.map,pe.clipShadows=U.clipShadows,pe.clippingPlanes=U.clippingPlanes,pe.clipIntersection=U.clipIntersection,pe.displacementMap=U.displacementMap,pe.displacementScale=U.displacementScale,pe.displacementBias=U.displacementBias,pe.wireframeLinewidth=U.wireframeLinewidth,pe.linewidth=U.linewidth,te.isPointLight===!0&&pe.isMeshDistanceMaterial===!0&&(s.properties.get(pe).light=te),pe}function k(G,U,te,ue,pe){if(G.visible===!1)return;if(G.layers.test(U.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&pe===zs)&&(!G.frustumCulled||i.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,G.matrixWorld);const he=e.update(G),Me=G.material;if(Array.isArray(Me)){const De=he.groups;for(let Qe=0,Ee=De.length;Qe<Ee;Qe++){const ke=De[Qe],ee=Me[ke.materialIndex];if(ee&&ee.visible){const re=I(G,ee,ue,pe);G.onBeforeShadow(s,G,U,te,he,re,ke),s.renderBufferDirect(te,null,he,re,G,ke),G.onAfterShadow(s,G,U,te,he,re,ke)}}}else if(Me.visible){const De=I(G,Me,ue,pe);G.onBeforeShadow(s,G,U,te,he,De,null),s.renderBufferDirect(te,null,he,De,G,null),G.onAfterShadow(s,G,U,te,he,De,null)}}const ce=G.children;for(let he=0,Me=ce.length;he<Me;he++)k(ce[he],U,te,ue,pe)}function Q(G){G.target.removeEventListener("dispose",Q);for(const U in h){const te=h[U],ue=G.target.uuid;ue in te&&(te[ue].dispose(),delete te[ue])}}this.render=function(G,U,te){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||G.length===0)return;const ue=s.getRenderTarget(),pe=s.getActiveCubeFace(),ce=s.getActiveMipmapLevel(),he=s.state;he.setBlending(0),he.buffers.color.setClear(1,1,1,1),he.buffers.depth.setTest(!0),he.setScissorTest(!1);const Me=C!==zs&&this.type===zs,De=C===zs&&this.type!==zs;for(let Qe=0,Ee=G.length;Qe<Ee;Qe++){const ke=G[Qe],ee=ke.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",ke,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;n.copy(ee.mapSize);const re=ee.getFrameExtents();if(n.multiply(re),r.copy(ee.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(r.x=Math.floor(d/re.x),n.x=r.x*re.x,ee.mapSize.x=r.x),n.y>d&&(r.y=Math.floor(d/re.y),n.y=r.y*re.y,ee.mapSize.y=r.y)),ee.map===null||Me===!0||De===!0){const me=this.type!==zs?{minFilter:Gi,magFilter:Gi}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Qn(n.x,n.y,me),ee.map.texture.name=ke.name+".shadowMap",ee.camera.updateProjectionMatrix()}s.setRenderTarget(ee.map),s.clear();const ye=ee.getViewportCount();for(let me=0;me<ye;me++){const V=ee.getViewport(me);a.set(r.x*V.x,r.y*V.y,r.x*V.z,r.y*V.w),he.viewport(a),ee.updateMatrices(ke,me),i=ee.getFrustum(),k(U,te,ee.camera,ke,this.type)}ee.isPointLightShadow!==!0&&this.type===zs&&B(ee,te),ee.needsUpdate=!1}C=this.type,b.needsUpdate=!1,s.setRenderTarget(ue,pe,ce)}}function mM(s){const e=new function(){let L=!1;const oe=new Jt;let ne=null;const Le=new Jt(0,0,0,0);return{setMask:function(fe){ne===fe||L||(s.colorMask(fe,fe,fe,fe),ne=fe)},setLocked:function(fe){L=fe},setClear:function(fe,Re,Je,Xe,st){st===!0&&(fe*=Xe,Re*=Xe,Je*=Xe),oe.set(fe,Re,Je,Xe),Le.equals(oe)===!1&&(s.clearColor(fe,Re,Je,Xe),Le.copy(oe))},reset:function(){L=!1,ne=null,Le.set(-1,0,0,0)}}},t=new function(){let L=!1,oe=null,ne=null,Le=null;return{setTest:function(fe){fe?z(s.DEPTH_TEST):J(s.DEPTH_TEST)},setMask:function(fe){oe===fe||L||(s.depthMask(fe),oe=fe)},setFunc:function(fe){if(ne!==fe){switch(fe){case 0:s.depthFunc(s.NEVER);break;case 1:s.depthFunc(s.ALWAYS);break;case 2:s.depthFunc(s.LESS);break;case 3:default:s.depthFunc(s.LEQUAL);break;case 4:s.depthFunc(s.EQUAL);break;case 5:s.depthFunc(s.GEQUAL);break;case 6:s.depthFunc(s.GREATER);break;case 7:s.depthFunc(s.NOTEQUAL)}ne=fe}},setLocked:function(fe){L=fe},setClear:function(fe){Le!==fe&&(s.clearDepth(fe),Le=fe)},reset:function(){L=!1,oe=null,ne=null,Le=null}}},i=new function(){let L=!1,oe=null,ne=null,Le=null,fe=null,Re=null,Je=null,Xe=null,st=null;return{setTest:function(Ve){L||(Ve?z(s.STENCIL_TEST):J(s.STENCIL_TEST))},setMask:function(Ve){oe===Ve||L||(s.stencilMask(Ve),oe=Ve)},setFunc:function(Ve,rt,Ze){ne===Ve&&Le===rt&&fe===Ze||(s.stencilFunc(Ve,rt,Ze),ne=Ve,Le=rt,fe=Ze)},setOp:function(Ve,rt,Ze){Re===Ve&&Je===rt&&Xe===Ze||(s.stencilOp(Ve,rt,Ze),Re=Ve,Je=rt,Xe=Ze)},setLocked:function(Ve){L=Ve},setClear:function(Ve){st!==Ve&&(s.clearStencil(Ve),st=Ve)},reset:function(){L=!1,oe=null,ne=null,Le=null,fe=null,Re=null,Je=null,Xe=null,st=null}}},n=new WeakMap,r=new WeakMap;let a={},o={},c=new WeakMap,h=[],d=null,u=!1,m=null,g=null,y=null,E=null,b=null,C=null,B=null,I=new At(0,0,0),k=0,Q=!1,G=null,U=null,te=null,ue=null,pe=null;const ce=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let he=!1,Me=0;const De=s.getParameter(s.VERSION);De.indexOf("WebGL")!==-1?(Me=parseFloat(/^WebGL (\d)/.exec(De)[1]),he=Me>=1):De.indexOf("OpenGL ES")!==-1&&(Me=parseFloat(/^OpenGL ES (\d)/.exec(De)[1]),he=Me>=2);let Qe=null,Ee={};const ke=s.getParameter(s.SCISSOR_BOX),ee=s.getParameter(s.VIEWPORT),re=new Jt().fromArray(ke),ye=new Jt().fromArray(ee);function me(L,oe,ne,Le){const fe=new Uint8Array(4),Re=s.createTexture();s.bindTexture(L,Re),s.texParameteri(L,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(L,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let Je=0;Je<ne;Je++)L===s.TEXTURE_3D||L===s.TEXTURE_2D_ARRAY?s.texImage3D(oe,0,s.RGBA,1,1,Le,0,s.RGBA,s.UNSIGNED_BYTE,fe):s.texImage2D(oe+Je,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,fe);return Re}const V={};function z(L){a[L]!==!0&&(s.enable(L),a[L]=!0)}function J(L){a[L]!==!1&&(s.disable(L),a[L]=!1)}V[s.TEXTURE_2D]=me(s.TEXTURE_2D,s.TEXTURE_2D,1),V[s.TEXTURE_CUBE_MAP]=me(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[s.TEXTURE_2D_ARRAY]=me(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),V[s.TEXTURE_3D]=me(s.TEXTURE_3D,s.TEXTURE_3D,1,1),e.setClear(0,0,0,1),t.setClear(1),i.setClear(0),z(s.DEPTH_TEST),t.setFunc(3),Ie(!1),Oe(1),z(s.CULL_FACE),Se(0);const ae={[Xr]:s.FUNC_ADD,[VC]:s.FUNC_SUBTRACT,[$C]:s.FUNC_REVERSE_SUBTRACT};ae[103]=s.MIN,ae[104]=s.MAX;const Z={[WC]:s.ZERO,[qC]:s.ONE,[jC]:s.SRC_COLOR,[YC]:s.SRC_ALPHA,[i1]:s.SRC_ALPHA_SATURATE,[e1]:s.DST_COLOR,[JC]:s.DST_ALPHA,[XC]:s.ONE_MINUS_SRC_COLOR,[KC]:s.ONE_MINUS_SRC_ALPHA,[t1]:s.ONE_MINUS_DST_COLOR,[ZC]:s.ONE_MINUS_DST_ALPHA,[n1]:s.CONSTANT_COLOR,[s1]:s.ONE_MINUS_CONSTANT_COLOR,[r1]:s.CONSTANT_ALPHA,[a1]:s.ONE_MINUS_CONSTANT_ALPHA};function Se(L,oe,ne,Le,fe,Re,Je,Xe,st,Ve){if(L!==0){if(u===!1&&(z(s.BLEND),u=!0),L===5)fe=fe||oe,Re=Re||ne,Je=Je||Le,oe===g&&fe===b||(s.blendEquationSeparate(ae[oe],ae[fe]),g=oe,b=fe),ne===y&&Le===E&&Re===C&&Je===B||(s.blendFuncSeparate(Z[ne],Z[Le],Z[Re],Z[Je]),y=ne,E=Le,C=Re,B=Je),Xe.equals(I)!==!1&&st===k||(s.blendColor(Xe.r,Xe.g,Xe.b,st),I.copy(Xe),k=st),m=L,Q=!1;else if(L!==m||Ve!==Q){if(g===Xr&&b===Xr||(s.blendEquation(s.FUNC_ADD),g=Xr,b=Xr),Ve)switch(L){case 1:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case 2:s.blendFunc(s.ONE,s.ONE);break;case 3:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case 4:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}else switch(L){case 1:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case 2:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case 3:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case 4:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}y=null,E=null,C=null,B=null,I.set(0,0,0),k=0,m=L,Q=Ve}}else u===!0&&(J(s.BLEND),u=!1)}function Ie(L){G!==L&&(L?s.frontFace(s.CW):s.frontFace(s.CCW),G=L)}function Oe(L){L!==0?(z(s.CULL_FACE),L!==U&&(L===1?s.cullFace(s.BACK):L===2?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):J(s.CULL_FACE),U=L}function K(L,oe,ne){L?(z(s.POLYGON_OFFSET_FILL),ue===oe&&pe===ne||(s.polygonOffset(oe,ne),ue=oe,pe=ne)):J(s.POLYGON_OFFSET_FILL)}return{buffers:{color:e,depth:t,stencil:i},enable:z,disable:J,bindFramebuffer:function(L,oe){return o[L]!==oe&&(s.bindFramebuffer(L,oe),o[L]=oe,L===s.DRAW_FRAMEBUFFER&&(o[s.FRAMEBUFFER]=oe),L===s.FRAMEBUFFER&&(o[s.DRAW_FRAMEBUFFER]=oe),!0)},drawBuffers:function(L,oe){let ne=h,Le=!1;if(L){ne=c.get(oe),ne===void 0&&(ne=[],c.set(oe,ne));const fe=L.textures;if(ne.length!==fe.length||ne[0]!==s.COLOR_ATTACHMENT0){for(let Re=0,Je=fe.length;Re<Je;Re++)ne[Re]=s.COLOR_ATTACHMENT0+Re;ne.length=fe.length,Le=!0}}else ne[0]!==s.BACK&&(ne[0]=s.BACK,Le=!0);Le&&s.drawBuffers(ne)},useProgram:function(L){return d!==L&&(s.useProgram(L),d=L,!0)},setBlending:Se,setMaterial:function(L,oe){L.side===Zi?J(s.CULL_FACE):z(s.CULL_FACE);let ne=L.side===$i;oe&&(ne=!ne),Ie(ne),L.blending===1&&L.transparent===!1?Se(0):Se(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.blendColor,L.blendAlpha,L.premultipliedAlpha),t.setFunc(L.depthFunc),t.setTest(L.depthTest),t.setMask(L.depthWrite),e.setMask(L.colorWrite);const Le=L.stencilWrite;i.setTest(Le),Le&&(i.setMask(L.stencilWriteMask),i.setFunc(L.stencilFunc,L.stencilRef,L.stencilFuncMask),i.setOp(L.stencilFail,L.stencilZFail,L.stencilZPass)),K(L.polygonOffset,L.polygonOffsetFactor,L.polygonOffsetUnits),L.alphaToCoverage===!0?z(s.SAMPLE_ALPHA_TO_COVERAGE):J(s.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ie,setCullFace:Oe,setLineWidth:function(L){L!==te&&(he&&s.lineWidth(L),te=L)},setPolygonOffset:K,setScissorTest:function(L){L?z(s.SCISSOR_TEST):J(s.SCISSOR_TEST)},activeTexture:function(L){L===void 0&&(L=s.TEXTURE0+ce-1),Qe!==L&&(s.activeTexture(L),Qe=L)},bindTexture:function(L,oe,ne){ne===void 0&&(ne=Qe===null?s.TEXTURE0+ce-1:Qe);let Le=Ee[ne];Le===void 0&&(Le={type:void 0,texture:void 0},Ee[ne]=Le),Le.type===L&&Le.texture===oe||(Qe!==ne&&(s.activeTexture(ne),Qe=ne),s.bindTexture(L,oe||V[L]),Le.type=L,Le.texture=oe)},unbindTexture:function(){const L=Ee[Qe];L!==void 0&&L.type!==void 0&&(s.bindTexture(L.type,null),L.type=void 0,L.texture=void 0)},compressedTexImage2D:function(){try{s.compressedTexImage2D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexImage3D:function(){try{s.compressedTexImage3D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage2D:function(){try{s.texImage2D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage3D:function(){try{s.texImage3D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},updateUBOMapping:function(L,oe){let ne=r.get(oe);ne===void 0&&(ne=new WeakMap,r.set(oe,ne));let Le=ne.get(L);Le===void 0&&(Le=s.getUniformBlockIndex(oe,L.name),ne.set(L,Le))},uniformBlockBinding:function(L,oe){const ne=r.get(oe).get(L);n.get(oe)!==ne&&(s.uniformBlockBinding(oe,ne,L.__bindingPointIndex),n.set(oe,ne))},texStorage2D:function(){try{s.texStorage2D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texStorage3D:function(){try{s.texStorage3D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage2D:function(){try{s.texSubImage2D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage3D:function(){try{s.texSubImage3D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage2D:function(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage3D:function(){try{s.compressedTexSubImage3D.apply(s,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},scissor:function(L){re.equals(L)===!1&&(s.scissor(L.x,L.y,L.z,L.w),re.copy(L))},viewport:function(L){ye.equals(L)===!1&&(s.viewport(L.x,L.y,L.z,L.w),ye.copy(L))},reset:function(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.blendColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),a={},Qe=null,Ee={},o={},c=new WeakMap,h=[],d=null,u=!1,m=null,g=null,y=null,E=null,b=null,C=null,B=null,I=new At(0,0,0),k=0,Q=!1,G=null,U=null,te=null,ue=null,pe=null,re.set(0,0,s.canvas.width,s.canvas.height),ye.set(0,0,s.canvas.width,s.canvas.height),e.reset(),t.reset(),i.reset()}}}function fM(s,e,t,i,n,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator<"u"&&/OculusBrowser/g.test(navigator.userAgent),h=new vt,d=new WeakMap;let u;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(V,z){return g?new OffscreenCanvas(V,z):Hl("canvas")}function E(V,z,J){let ae=1;const Z=me(V);if((Z.width>J||Z.height>J)&&(ae=J/Math.max(Z.width,Z.height)),ae<1){if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const Se=Math.floor(ae*Z.width),Ie=Math.floor(ae*Z.height);u===void 0&&(u=y(Se,Ie));const Oe=z?y(Se,Ie):u;return Oe.width=Se,Oe.height=Ie,Oe.getContext("2d").drawImage(V,0,0,Se,Ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Z.width+"x"+Z.height+") to ("+Se+"x"+Ie+")."),Oe}return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Z.width+"x"+Z.height+")."),V}return V}function b(V){return V.generateMipmaps&&V.minFilter!==Gi&&V.minFilter!==Ut}function C(V){s.generateMipmap(V)}function B(V,z,J,ae,Z=!1){if(V!==null){if(s[V]!==void 0)return s[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Se=z;if(z===s.RED&&(J===s.FLOAT&&(Se=s.R32F),J===s.HALF_FLOAT&&(Se=s.R16F),J===s.UNSIGNED_BYTE&&(Se=s.R8)),z===s.RED_INTEGER&&(J===s.UNSIGNED_BYTE&&(Se=s.R8UI),J===s.UNSIGNED_SHORT&&(Se=s.R16UI),J===s.UNSIGNED_INT&&(Se=s.R32UI),J===s.BYTE&&(Se=s.R8I),J===s.SHORT&&(Se=s.R16I),J===s.INT&&(Se=s.R32I)),z===s.RG&&(J===s.FLOAT&&(Se=s.RG32F),J===s.HALF_FLOAT&&(Se=s.RG16F),J===s.UNSIGNED_BYTE&&(Se=s.RG8)),z===s.RG_INTEGER&&(J===s.UNSIGNED_BYTE&&(Se=s.RG8UI),J===s.UNSIGNED_SHORT&&(Se=s.RG16UI),J===s.UNSIGNED_INT&&(Se=s.RG32UI),J===s.BYTE&&(Se=s.RG8I),J===s.SHORT&&(Se=s.RG16I),J===s.INT&&(Se=s.RG32I)),z===s.RGB&&J===s.UNSIGNED_INT_5_9_9_9_REV&&(Se=s.RGB9_E5),z===s.RGBA){const Ie=Z?od:Ht.getTransfer(ae);J===s.FLOAT&&(Se=s.RGBA32F),J===s.HALF_FLOAT&&(Se=s.RGBA16F),J===s.UNSIGNED_BYTE&&(Se=Ie===li?s.SRGB8_ALPHA8:s.RGBA8),J===s.UNSIGNED_SHORT_4_4_4_4&&(Se=s.RGBA4),J===s.UNSIGNED_SHORT_5_5_5_1&&(Se=s.RGB5_A1)}return Se!==s.R16F&&Se!==s.R32F&&Se!==s.RG16F&&Se!==s.RG32F&&Se!==s.RGBA16F&&Se!==s.RGBA32F||e.get("EXT_color_buffer_float"),Se}function I(V,z){return b(V)===!0||V.isFramebufferTexture&&V.minFilter!==Gi&&V.minFilter!==Ut?Math.log2(Math.max(z.width,z.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?z.mipmaps.length:1}function k(V){const z=V.target;z.removeEventListener("dispose",k),function(J){const ae=i.get(J);if(ae.__webglInit===void 0)return;const Z=J.source,Se=m.get(Z);if(Se){const Ie=Se[ae.__cacheKey];Ie.usedTimes--,Ie.usedTimes===0&&G(J),Object.keys(Se).length===0&&m.delete(Z)}i.remove(J)}(z),z.isVideoTexture&&d.delete(z)}function Q(V){const z=V.target;z.removeEventListener("dispose",Q),function(J){const ae=i.get(J);if(J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(ae.__webglFramebuffer[Se]))for(let Ie=0;Ie<ae.__webglFramebuffer[Se].length;Ie++)s.deleteFramebuffer(ae.__webglFramebuffer[Se][Ie]);else s.deleteFramebuffer(ae.__webglFramebuffer[Se]);ae.__webglDepthbuffer&&s.deleteRenderbuffer(ae.__webglDepthbuffer[Se])}else{if(Array.isArray(ae.__webglFramebuffer))for(let Se=0;Se<ae.__webglFramebuffer.length;Se++)s.deleteFramebuffer(ae.__webglFramebuffer[Se]);else s.deleteFramebuffer(ae.__webglFramebuffer);if(ae.__webglDepthbuffer&&s.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&s.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let Se=0;Se<ae.__webglColorRenderbuffer.length;Se++)ae.__webglColorRenderbuffer[Se]&&s.deleteRenderbuffer(ae.__webglColorRenderbuffer[Se]);ae.__webglDepthRenderbuffer&&s.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}const Z=J.textures;for(let Se=0,Ie=Z.length;Se<Ie;Se++){const Oe=i.get(Z[Se]);Oe.__webglTexture&&(s.deleteTexture(Oe.__webglTexture),a.memory.textures--),i.remove(Z[Se])}i.remove(J)}(z)}function G(V){const z=i.get(V);s.deleteTexture(z.__webglTexture);const J=V.source;delete m.get(J)[z.__cacheKey],a.memory.textures--}let U=0;function te(V,z){const J=i.get(V);if(V.isVideoTexture&&function(ae){const Z=a.render.frame;d.get(ae)!==Z&&(d.set(ae,Z),ae.update())}(V),V.isRenderTargetTexture===!1&&V.version>0&&J.__version!==V.version){const ae=V.image;if(ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(ae.complete!==!1)return void De(J,V,z);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(s.TEXTURE_2D,J.__webglTexture,s.TEXTURE0+z)}const ue={[vs]:s.REPEAT,[Mi]:s.CLAMP_TO_EDGE,[So]:s.MIRRORED_REPEAT},pe={[Gi]:s.NEAREST,[Rd]:s.NEAREST_MIPMAP_NEAREST,[ea]:s.NEAREST_MIPMAP_LINEAR,[Ut]:s.LINEAR,[vo]:s.LINEAR_MIPMAP_NEAREST,[kn]:s.LINEAR_MIPMAP_LINEAR},ce={[m1]:s.NEVER,[b1]:s.ALWAYS,[f1]:s.LESS,[A1]:s.LEQUAL,[g1]:s.EQUAL,[w1]:s.GEQUAL,[v1]:s.GREATER,[y1]:s.NOTEQUAL};function he(V,z){if(z.type!==Ti||e.has("OES_texture_float_linear")!==!1||z.magFilter!==Ut&&z.magFilter!==vo&&z.magFilter!==ea&&z.magFilter!==kn&&z.minFilter!==Ut&&z.minFilter!==vo&&z.minFilter!==ea&&z.minFilter!==kn||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s.texParameteri(V,s.TEXTURE_WRAP_S,ue[z.wrapS]),s.texParameteri(V,s.TEXTURE_WRAP_T,ue[z.wrapT]),V!==s.TEXTURE_3D&&V!==s.TEXTURE_2D_ARRAY||s.texParameteri(V,s.TEXTURE_WRAP_R,ue[z.wrapR]),s.texParameteri(V,s.TEXTURE_MAG_FILTER,pe[z.magFilter]),s.texParameteri(V,s.TEXTURE_MIN_FILTER,pe[z.minFilter]),z.compareFunction&&(s.texParameteri(V,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(V,s.TEXTURE_COMPARE_FUNC,ce[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===Gi||z.minFilter!==ea&&z.minFilter!==kn||z.type===Ti&&e.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||i.get(z).__currentAnisotropy){const J=e.get("EXT_texture_filter_anisotropic");s.texParameterf(V,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,n.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy}}}function Me(V,z){let J=!1;V.__webglInit===void 0&&(V.__webglInit=!0,z.addEventListener("dispose",k));const ae=z.source;let Z=m.get(ae);Z===void 0&&(Z={},m.set(ae,Z));const Se=function(Ie){const Oe=[];return Oe.push(Ie.wrapS),Oe.push(Ie.wrapT),Oe.push(Ie.wrapR||0),Oe.push(Ie.magFilter),Oe.push(Ie.minFilter),Oe.push(Ie.anisotropy),Oe.push(Ie.internalFormat),Oe.push(Ie.format),Oe.push(Ie.type),Oe.push(Ie.generateMipmaps),Oe.push(Ie.premultiplyAlpha),Oe.push(Ie.flipY),Oe.push(Ie.unpackAlignment),Oe.push(Ie.colorSpace),Oe.join()}(z);if(Se!==V.__cacheKey){Z[Se]===void 0&&(Z[Se]={texture:s.createTexture(),usedTimes:0},a.memory.textures++,J=!0),Z[Se].usedTimes++;const Ie=Z[V.__cacheKey];Ie!==void 0&&(Z[V.__cacheKey].usedTimes--,Ie.usedTimes===0&&G(z)),V.__cacheKey=Se,V.__webglTexture=Z[Se].texture}return J}function De(V,z,J){let ae=s.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(ae=s.TEXTURE_2D_ARRAY),z.isData3DTexture&&(ae=s.TEXTURE_3D);const Z=Me(V,z),Se=z.source;t.bindTexture(ae,V.__webglTexture,s.TEXTURE0+J);const Ie=i.get(Se);if(Se.version!==Ie.__version||Z===!0){t.activeTexture(s.TEXTURE0+J);const Oe=Ht.getPrimaries(Ht.workingColorSpace),K=z.colorSpace===Kn?null:Ht.getPrimaries(z.colorSpace),L=z.colorSpace===Kn||Oe===K?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,z.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,z.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,L);let oe=E(z.image,!1,n.maxTextureSize);oe=ye(z,oe);const ne=r.convert(z.format,z.colorSpace),Le=r.convert(z.type);let fe,Re=B(z.internalFormat,ne,Le,z.colorSpace,z.isVideoTexture);he(ae,z);const Je=z.mipmaps,Xe=z.isVideoTexture!==!0&&Re!==Sf,st=Ie.__version===void 0||Z===!0,Ve=Se.dataReady,rt=I(z,oe);if(z.isDepthTexture)Re=s.DEPTH_COMPONENT16,z.type===Ti?Re=s.DEPTH_COMPONENT32F:z.type===la?Re=s.DEPTH_COMPONENT24:z.type===tc&&(Re=s.DEPTH24_STENCIL8),st&&(Xe?t.texStorage2D(s.TEXTURE_2D,1,Re,oe.width,oe.height):t.texImage2D(s.TEXTURE_2D,0,Re,oe.width,oe.height,0,ne,Le,null));else if(z.isDataTexture)if(Je.length>0){Xe&&st&&t.texStorage2D(s.TEXTURE_2D,rt,Re,Je[0].width,Je[0].height);for(let Ze=0,Et=Je.length;Ze<Et;Ze++)fe=Je[Ze],Xe?Ve&&t.texSubImage2D(s.TEXTURE_2D,Ze,0,0,fe.width,fe.height,ne,Le,fe.data):t.texImage2D(s.TEXTURE_2D,Ze,Re,fe.width,fe.height,0,ne,Le,fe.data);z.generateMipmaps=!1}else Xe?(st&&t.texStorage2D(s.TEXTURE_2D,rt,Re,oe.width,oe.height),Ve&&t.texSubImage2D(s.TEXTURE_2D,0,0,0,oe.width,oe.height,ne,Le,oe.data)):t.texImage2D(s.TEXTURE_2D,0,Re,oe.width,oe.height,0,ne,Le,oe.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){Xe&&st&&t.texStorage3D(s.TEXTURE_2D_ARRAY,rt,Re,Je[0].width,Je[0].height,oe.depth);for(let Ze=0,Et=Je.length;Ze<Et;Ze++)fe=Je[Ze],z.format!==gi?ne!==null?Xe?Ve&&t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ze,0,0,0,fe.width,fe.height,oe.depth,ne,fe.data,0,0):t.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Ze,Re,fe.width,fe.height,oe.depth,0,fe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?Ve&&t.texSubImage3D(s.TEXTURE_2D_ARRAY,Ze,0,0,0,fe.width,fe.height,oe.depth,ne,Le,fe.data):t.texImage3D(s.TEXTURE_2D_ARRAY,Ze,Re,fe.width,fe.height,oe.depth,0,ne,Le,fe.data)}else{Xe&&st&&t.texStorage2D(s.TEXTURE_2D,rt,Re,Je[0].width,Je[0].height);for(let Ze=0,Et=Je.length;Ze<Et;Ze++)fe=Je[Ze],z.format!==gi?ne!==null?Xe?Ve&&t.compressedTexSubImage2D(s.TEXTURE_2D,Ze,0,0,fe.width,fe.height,ne,fe.data):t.compressedTexImage2D(s.TEXTURE_2D,Ze,Re,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?Ve&&t.texSubImage2D(s.TEXTURE_2D,Ze,0,0,fe.width,fe.height,ne,Le,fe.data):t.texImage2D(s.TEXTURE_2D,Ze,Re,fe.width,fe.height,0,ne,Le,fe.data)}else if(z.isDataArrayTexture)Xe?(st&&t.texStorage3D(s.TEXTURE_2D_ARRAY,rt,Re,oe.width,oe.height,oe.depth),Ve&&t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,oe.width,oe.height,oe.depth,ne,Le,oe.data)):t.texImage3D(s.TEXTURE_2D_ARRAY,0,Re,oe.width,oe.height,oe.depth,0,ne,Le,oe.data);else if(z.isData3DTexture)Xe?(st&&t.texStorage3D(s.TEXTURE_3D,rt,Re,oe.width,oe.height,oe.depth),Ve&&t.texSubImage3D(s.TEXTURE_3D,0,0,0,0,oe.width,oe.height,oe.depth,ne,Le,oe.data)):t.texImage3D(s.TEXTURE_3D,0,Re,oe.width,oe.height,oe.depth,0,ne,Le,oe.data);else if(z.isFramebufferTexture){if(st)if(Xe)t.texStorage2D(s.TEXTURE_2D,rt,Re,oe.width,oe.height);else{let Ze=oe.width,Et=oe.height;for(let p=0;p<rt;p++)t.texImage2D(s.TEXTURE_2D,p,Re,Ze,Et,0,ne,Le,null),Ze>>=1,Et>>=1}}else if(Je.length>0){if(Xe&&st){const Ze=me(Je[0]);t.texStorage2D(s.TEXTURE_2D,rt,Re,Ze.width,Ze.height)}for(let Ze=0,Et=Je.length;Ze<Et;Ze++)fe=Je[Ze],Xe?Ve&&t.texSubImage2D(s.TEXTURE_2D,Ze,0,0,ne,Le,fe):t.texImage2D(s.TEXTURE_2D,Ze,Re,ne,Le,fe);z.generateMipmaps=!1}else if(Xe){if(st){const Ze=me(oe);t.texStorage2D(s.TEXTURE_2D,rt,Re,Ze.width,Ze.height)}Ve&&t.texSubImage2D(s.TEXTURE_2D,0,0,0,ne,Le,oe)}else t.texImage2D(s.TEXTURE_2D,0,Re,ne,Le,oe);b(z)&&C(ae),Ie.__version=Se.version,z.onUpdate&&z.onUpdate(z)}V.__version=z.version}function Qe(V,z,J,ae,Z,Se){const Ie=r.convert(J.format,J.colorSpace),Oe=r.convert(J.type),K=B(J.internalFormat,Ie,Oe,J.colorSpace);if(!i.get(z).__hasExternalTextures){const L=Math.max(1,z.width>>Se),oe=Math.max(1,z.height>>Se);Z===s.TEXTURE_3D||Z===s.TEXTURE_2D_ARRAY?t.texImage3D(Z,Se,K,L,oe,z.depth,0,Ie,Oe,null):t.texImage2D(Z,Se,K,L,oe,0,Ie,Oe,null)}t.bindFramebuffer(s.FRAMEBUFFER,V),re(z)?o.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,ae,Z,i.get(J).__webglTexture,0,ee(z)):(Z===s.TEXTURE_2D||Z>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Z<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,ae,Z,i.get(J).__webglTexture,Se),t.bindFramebuffer(s.FRAMEBUFFER,null)}function Ee(V,z,J){if(s.bindRenderbuffer(s.RENDERBUFFER,V),z.depthBuffer&&!z.stencilBuffer){let ae=s.DEPTH_COMPONENT24;if(J||re(z)){const Z=z.depthTexture;Z&&Z.isDepthTexture&&(Z.type===Ti?ae=s.DEPTH_COMPONENT32F:Z.type===la&&(ae=s.DEPTH_COMPONENT24));const Se=ee(z);re(z)?o.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Se,ae,z.width,z.height):s.renderbufferStorageMultisample(s.RENDERBUFFER,Se,ae,z.width,z.height)}else s.renderbufferStorage(s.RENDERBUFFER,ae,z.width,z.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,V)}else if(z.depthBuffer&&z.stencilBuffer){const ae=ee(z);J&&re(z)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,ae,s.DEPTH24_STENCIL8,z.width,z.height):re(z)?o.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,ae,s.DEPTH24_STENCIL8,z.width,z.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,z.width,z.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,V)}else{const ae=z.textures;for(let Z=0;Z<ae.length;Z++){const Se=ae[Z],Ie=r.convert(Se.format,Se.colorSpace),Oe=r.convert(Se.type),K=B(Se.internalFormat,Ie,Oe,Se.colorSpace),L=ee(z);J&&re(z)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,L,K,z.width,z.height):re(z)?o.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,L,K,z.width,z.height):s.renderbufferStorage(s.RENDERBUFFER,K,z.width,z.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function ke(V){const z=i.get(V),J=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!z.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");(function(ae,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(s.FRAMEBUFFER,ae),!Z.depthTexture||!Z.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(Z.depthTexture).__webglTexture&&Z.depthTexture.image.width===Z.width&&Z.depthTexture.image.height===Z.height||(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),te(Z.depthTexture,0);const Se=i.get(Z.depthTexture).__webglTexture,Ie=ee(Z);if(Z.depthTexture.format===yo)re(Z)?o.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Se,0,Ie):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Se,0);else{if(Z.depthTexture.format!==zl)throw new Error("Unknown depthTexture format");re(Z)?o.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Se,0,Ie):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Se,0)}})(z.__webglFramebuffer,V)}else if(J){z.__webglDepthbuffer=[];for(let ae=0;ae<6;ae++)t.bindFramebuffer(s.FRAMEBUFFER,z.__webglFramebuffer[ae]),z.__webglDepthbuffer[ae]=s.createRenderbuffer(),Ee(z.__webglDepthbuffer[ae],V,!1)}else t.bindFramebuffer(s.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer=s.createRenderbuffer(),Ee(z.__webglDepthbuffer,V,!1);t.bindFramebuffer(s.FRAMEBUFFER,null)}function ee(V){return Math.min(n.maxSamples,V.samples)}function re(V){const z=i.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function ye(V,z){const J=V.colorSpace,ae=V.format,Z=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||J!==Yt&&J!==Kn&&(Ht.getTransfer(J)===li?ae===gi&&Z===bi||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",J)),z}function me(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(h.width=V.naturalWidth||V.width,h.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(h.width=V.displayWidth,h.height=V.displayHeight):(h.width=V.width,h.height=V.height),h}this.allocateTextureUnit=function(){const V=U;return V>=n.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+n.maxTextures),U+=1,V},this.resetTextureUnits=function(){U=0},this.setTexture2D=te,this.setTexture2DArray=function(V,z){const J=i.get(V);V.version>0&&J.__version!==V.version?De(J,V,z):t.bindTexture(s.TEXTURE_2D_ARRAY,J.__webglTexture,s.TEXTURE0+z)},this.setTexture3D=function(V,z){const J=i.get(V);V.version>0&&J.__version!==V.version?De(J,V,z):t.bindTexture(s.TEXTURE_3D,J.__webglTexture,s.TEXTURE0+z)},this.setTextureCube=function(V,z){const J=i.get(V);V.version>0&&J.__version!==V.version?function(ae,Z,Se){if(Z.image.length!==6)return;const Ie=Me(ae,Z),Oe=Z.source;t.bindTexture(s.TEXTURE_CUBE_MAP,ae.__webglTexture,s.TEXTURE0+Se);const K=i.get(Oe);if(Oe.version!==K.__version||Ie===!0){t.activeTexture(s.TEXTURE0+Se);const L=Ht.getPrimaries(Ht.workingColorSpace),oe=Z.colorSpace===Kn?null:Ht.getPrimaries(Z.colorSpace),ne=Z.colorSpace===Kn||L===oe?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Z.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Z.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,ne);const Le=Z.isCompressedTexture||Z.image[0].isCompressedTexture,fe=Z.image[0]&&Z.image[0].isDataTexture,Re=[];for(let f=0;f<6;f++)Re[f]=Le||fe?fe?Z.image[f].image:Z.image[f]:E(Z.image[f],!0,n.maxCubemapSize),Re[f]=ye(Z,Re[f]);const Je=Re[0],Xe=r.convert(Z.format,Z.colorSpace),st=r.convert(Z.type),Ve=B(Z.internalFormat,Xe,st,Z.colorSpace),rt=Z.isVideoTexture!==!0,Ze=K.__version===void 0||Ie===!0,Et=Oe.dataReady;let p,l=I(Z,Je);if(he(s.TEXTURE_CUBE_MAP,Z),Le){rt&&Ze&&t.texStorage2D(s.TEXTURE_CUBE_MAP,l,Ve,Je.width,Je.height);for(let f=0;f<6;f++){p=Re[f].mipmaps;for(let v=0;v<p.length;v++){const x=p[v];Z.format!==gi?Xe!==null?rt?Et&&t.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v,0,0,x.width,x.height,Xe,x.data):t.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v,Ve,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rt?Et&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v,0,0,x.width,x.height,Xe,st,x.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v,Ve,x.width,x.height,0,Xe,st,x.data)}}}else{if(p=Z.mipmaps,rt&&Ze){p.length>0&&l++;const f=me(Re[0]);t.texStorage2D(s.TEXTURE_CUBE_MAP,l,Ve,f.width,f.height)}for(let f=0;f<6;f++)if(fe){rt?Et&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,0,0,Re[f].width,Re[f].height,Xe,st,Re[f].data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,Ve,Re[f].width,Re[f].height,0,Xe,st,Re[f].data);for(let v=0;v<p.length;v++){const x=p[v].image[f].image;rt?Et&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v+1,0,0,x.width,x.height,Xe,st,x.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v+1,Ve,x.width,x.height,0,Xe,st,x.data)}}else{rt?Et&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,0,0,Xe,st,Re[f]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,Ve,Xe,st,Re[f]);for(let v=0;v<p.length;v++){const x=p[v];rt?Et&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v+1,0,0,Xe,st,x.image[f]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,v+1,Ve,Xe,st,x.image[f])}}}b(Z)&&C(s.TEXTURE_CUBE_MAP),K.__version=Oe.version,Z.onUpdate&&Z.onUpdate(Z)}ae.__version=Z.version}(J,V,z):t.bindTexture(s.TEXTURE_CUBE_MAP,J.__webglTexture,s.TEXTURE0+z)},this.rebindTextures=function(V,z,J){const ae=i.get(V);z!==void 0&&Qe(ae.__webglFramebuffer,V,V.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),J!==void 0&&ke(V)},this.setupRenderTarget=function(V){const z=V.texture,J=i.get(V),ae=i.get(z);V.addEventListener("dispose",Q);const Z=V.textures,Se=V.isWebGLCubeRenderTarget===!0,Ie=Z.length>1;if(Ie||(ae.__webglTexture===void 0&&(ae.__webglTexture=s.createTexture()),ae.__version=z.version,a.memory.textures++),Se){J.__webglFramebuffer=[];for(let Oe=0;Oe<6;Oe++)if(z.mipmaps&&z.mipmaps.length>0){J.__webglFramebuffer[Oe]=[];for(let K=0;K<z.mipmaps.length;K++)J.__webglFramebuffer[Oe][K]=s.createFramebuffer()}else J.__webglFramebuffer[Oe]=s.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){J.__webglFramebuffer=[];for(let Oe=0;Oe<z.mipmaps.length;Oe++)J.__webglFramebuffer[Oe]=s.createFramebuffer()}else J.__webglFramebuffer=s.createFramebuffer();if(Ie)for(let Oe=0,K=Z.length;Oe<K;Oe++){const L=i.get(Z[Oe]);L.__webglTexture===void 0&&(L.__webglTexture=s.createTexture(),a.memory.textures++)}if(V.samples>0&&re(V)===!1){J.__webglMultisampledFramebuffer=s.createFramebuffer(),J.__webglColorRenderbuffer=[],t.bindFramebuffer(s.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Z.length;Oe++){const K=Z[Oe];J.__webglColorRenderbuffer[Oe]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,J.__webglColorRenderbuffer[Oe]);const L=r.convert(K.format,K.colorSpace),oe=r.convert(K.type),ne=B(K.internalFormat,L,oe,K.colorSpace,V.isXRRenderTarget===!0),Le=ee(V);s.renderbufferStorageMultisample(s.RENDERBUFFER,Le,ne,V.width,V.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Oe,s.RENDERBUFFER,J.__webglColorRenderbuffer[Oe])}s.bindRenderbuffer(s.RENDERBUFFER,null),V.depthBuffer&&(J.__webglDepthRenderbuffer=s.createRenderbuffer(),Ee(J.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Se){t.bindTexture(s.TEXTURE_CUBE_MAP,ae.__webglTexture),he(s.TEXTURE_CUBE_MAP,z);for(let Oe=0;Oe<6;Oe++)if(z.mipmaps&&z.mipmaps.length>0)for(let K=0;K<z.mipmaps.length;K++)Qe(J.__webglFramebuffer[Oe][K],V,z,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,K);else Qe(J.__webglFramebuffer[Oe],V,z,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0);b(z)&&C(s.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ie){for(let Oe=0,K=Z.length;Oe<K;Oe++){const L=Z[Oe],oe=i.get(L);t.bindTexture(s.TEXTURE_2D,oe.__webglTexture),he(s.TEXTURE_2D,L),Qe(J.__webglFramebuffer,V,L,s.COLOR_ATTACHMENT0+Oe,s.TEXTURE_2D,0),b(L)&&C(s.TEXTURE_2D)}t.unbindTexture()}else{let Oe=s.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Oe=V.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),t.bindTexture(Oe,ae.__webglTexture),he(Oe,z),z.mipmaps&&z.mipmaps.length>0)for(let K=0;K<z.mipmaps.length;K++)Qe(J.__webglFramebuffer[K],V,z,s.COLOR_ATTACHMENT0,Oe,K);else Qe(J.__webglFramebuffer,V,z,s.COLOR_ATTACHMENT0,Oe,0);b(z)&&C(Oe),t.unbindTexture()}V.depthBuffer&&ke(V)},this.updateRenderTargetMipmap=function(V){const z=V.textures;for(let J=0,ae=z.length;J<ae;J++){const Z=z[J];if(b(Z)){const Se=V.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,Ie=i.get(Z).__webglTexture;t.bindTexture(Se,Ie),C(Se),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function(V){if(V.samples>0&&re(V)===!1){const z=V.textures,J=V.width,ae=V.height;let Z=s.COLOR_BUFFER_BIT;const Se=[],Ie=V.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Oe=i.get(V),K=z.length>1;if(K)for(let L=0;L<z.length;L++)t.bindFramebuffer(s.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+L,s.RENDERBUFFER,null),t.bindFramebuffer(s.FRAMEBUFFER,Oe.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+L,s.TEXTURE_2D,null,0);t.bindFramebuffer(s.READ_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer);for(let L=0;L<z.length;L++){Se.push(s.COLOR_ATTACHMENT0+L),V.depthBuffer&&Se.push(Ie);const oe=Oe.__ignoreDepthValues!==void 0&&Oe.__ignoreDepthValues;if(oe===!1&&(V.depthBuffer&&(Z|=s.DEPTH_BUFFER_BIT),V.stencilBuffer&&Oe.__isTransmissionRenderTarget!==!0&&(Z|=s.STENCIL_BUFFER_BIT)),K&&s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,Oe.__webglColorRenderbuffer[L]),oe===!0&&(s.invalidateFramebuffer(s.READ_FRAMEBUFFER,[Ie]),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[Ie])),K){const ne=i.get(z[L]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,ne,0)}s.blitFramebuffer(0,0,J,ae,0,0,J,ae,Z,s.NEAREST),c&&s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Se)}if(t.bindFramebuffer(s.READ_FRAMEBUFFER,null),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),K)for(let L=0;L<z.length;L++){t.bindFramebuffer(s.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+L,s.RENDERBUFFER,Oe.__webglColorRenderbuffer[L]);const oe=i.get(z[L]).__webglTexture;t.bindFramebuffer(s.FRAMEBUFFER,Oe.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+L,s.TEXTURE_2D,oe,0)}t.bindFramebuffer(s.DRAW_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ke,this.setupFrameBufferTexture=Qe,this.useMultisampledRTT=re}function gM(s,e){return{convert:function(t,i=Kn){let n;const r=Ht.getTransfer(i);if(t===bi)return s.UNSIGNED_BYTE;if(t===1017)return s.UNSIGNED_SHORT_4_4_4_4;if(t===1018)return s.UNSIGNED_SHORT_5_5_5_1;if(t===35902)return s.UNSIGNED_INT_5_9_9_9_REV;if(t===1010)return s.BYTE;if(t===1011)return s.SHORT;if(t===1012)return s.UNSIGNED_SHORT;if(t===_f)return s.INT;if(t===la)return s.UNSIGNED_INT;if(t===Ti)return s.FLOAT;if(t===Vi)return s.HALF_FLOAT;if(t===1021)return s.ALPHA;if(t===1022)return s.RGB;if(t===gi)return s.RGBA;if(t===1024)return s.LUMINANCE;if(t===1025)return s.LUMINANCE_ALPHA;if(t===yo)return s.DEPTH_COMPONENT;if(t===zl)return s.DEPTH_STENCIL;if(t===ta)return s.RED;if(t===1029)return s.RED_INTEGER;if(t===ho)return s.RG;if(t===1031)return s.RG_INTEGER;if(t===1033)return s.RGBA_INTEGER;if(t===Nh||t===pu||t===mu||t===Fh)if(r===li){if(n=e.get("WEBGL_compressed_texture_s3tc_srgb"),n===null)return null;if(t===Nh)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===pu)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===mu)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===Fh)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(n=e.get("WEBGL_compressed_texture_s3tc"),n===null)return null;if(t===Nh)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===pu)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===mu)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Fh)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Lm||t===35841||t===Dm||t===35843){if(n=e.get("WEBGL_compressed_texture_pvrtc"),n===null)return null;if(t===Lm)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===35841)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Dm)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===35843)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Sf)return n=e.get("WEBGL_compressed_texture_etc1"),n!==null?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(t===Pm||t===Nm){if(n=e.get("WEBGL_compressed_texture_etc"),n===null)return null;if(t===Pm)return r===li?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(t===Nm)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(t===Fm||t===37809||t===37810||t===37811||t===rd||t===37813||t===37814||t===37815||t===37816||t===37817||t===37818||t===37819||t===37820||t===37821){if(n=e.get("WEBGL_compressed_texture_astc"),n===null)return null;if(t===Fm)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===37809)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===37810)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===37811)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===rd)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===37813)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===37814)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===37815)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===37816)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===37817)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===37818)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===37819)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===37820)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===37821)return r===li?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(t===kh||t===36494||t===36495){if(n=e.get("EXT_texture_compression_bptc"),n===null)return null;if(t===kh)return r===li?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(t===36494)return n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(t===36495)return n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(t===36283||t===36284||t===36285||t===36286){if(n=e.get("EXT_texture_compression_rgtc"),n===null)return null;if(t===kh)return n.COMPRESSED_RED_RGTC1_EXT;if(t===36284)return n.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(t===36285)return n.COMPRESSED_RED_GREEN_RGTC2_EXT;if(t===36286)return n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return t===tc?s.UNSIGNED_INT_24_8:s[t]!==void 0?s[t]:null}}}class AM extends Ui{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ur extends ii{constructor(){super(),this.isGroup=!0,this.type="Group"}}const vM={type:"move"};class Qu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ur,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ur,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ur,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,a=null;const o=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const E of e.hand.values()){const b=t.getJointPose(E,i),C=this._getHandJoint(h,E);b!==null&&(C.matrix.fromArray(b.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,C.jointRadius=b.radius),C.visible=b!==null}const d=h.joints["index-finger-tip"],u=h.joints["thumb-tip"],m=d.position.distanceTo(u.position),g=.02,y=.005;h.inputState.pinching&&m>g+y?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&m<=g-y&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(n=t.getPose(e.targetRaySpace,i),n===null&&r!==null&&(n=r),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(vM)))}return o!==null&&(o.visible=n!==null),c!==null&&(c.visible=r!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ur;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class yM{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const n=new qt;e.properties.get(n).__webglTexture=t.texture,t.depthNear==i.depthNear&&t.depthFar==i.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,n=new un({vertexShader:`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fragmentShader:`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Zt(new ys(20,20),n)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class wM extends rs{constructor(e,t){super();const i=this;let n=null,r=1,a=null,o="local-floor",c=1,h=null,d=null,u=null,m=null,g=null,y=null;const E=new yM,b=t.getContextAttributes();let C=null,B=null;const I=[],k=[],Q=new vt;let G=null;const U=new Ui;U.layers.enable(1),U.viewport=new Jt;const te=new Ui;te.layers.enable(2),te.viewport=new Jt;const ue=[U,te],pe=new AM;pe.layers.enable(1),pe.layers.enable(2);let ce=null,he=null;function Me(me){const V=k.indexOf(me.inputSource);if(V===-1)return;const z=I[V];z!==void 0&&(z.update(me.inputSource,me.frame,h||a),z.dispatchEvent({type:me.type,data:me.inputSource}))}function De(){n.removeEventListener("select",Me),n.removeEventListener("selectstart",Me),n.removeEventListener("selectend",Me),n.removeEventListener("squeeze",Me),n.removeEventListener("squeezestart",Me),n.removeEventListener("squeezeend",Me),n.removeEventListener("end",De),n.removeEventListener("inputsourceschange",Qe);for(let me=0;me<I.length;me++){const V=k[me];V!==null&&(k[me]=null,I[me].disconnect(V))}ce=null,he=null,E.reset(),e.setRenderTarget(C),g=null,m=null,u=null,n=null,B=null,ye.stop(),i.isPresenting=!1,e.setPixelRatio(G),e.setSize(Q.width,Q.height,!1),i.dispatchEvent({type:"sessionend"})}function Qe(me){for(let V=0;V<me.removed.length;V++){const z=me.removed[V],J=k.indexOf(z);J>=0&&(k[J]=null,I[J].disconnect(z))}for(let V=0;V<me.added.length;V++){const z=me.added[V];let J=k.indexOf(z);if(J===-1){for(let Z=0;Z<I.length;Z++){if(Z>=k.length){k.push(z),J=Z;break}if(k[Z]===null){k[Z]=z,J=Z;break}}if(J===-1)break}const ae=I[J];ae&&ae.connect(z)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let V=I[me];return V===void 0&&(V=new Qu,I[me]=V),V.getTargetRaySpace()},this.getControllerGrip=function(me){let V=I[me];return V===void 0&&(V=new Qu,I[me]=V),V.getGripSpace()},this.getHand=function(me){let V=I[me];return V===void 0&&(V=new Qu,I[me]=V),V.getHandSpace()},this.setFramebufferScaleFactor=function(me){r=me,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){o=me,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(me){h=me},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return u},this.getFrame=function(){return y},this.getSession=function(){return n},this.setSession=async function(me){if(n=me,n!==null){if(C=e.getRenderTarget(),n.addEventListener("select",Me),n.addEventListener("selectstart",Me),n.addEventListener("selectend",Me),n.addEventListener("squeeze",Me),n.addEventListener("squeezestart",Me),n.addEventListener("squeezeend",Me),n.addEventListener("end",De),n.addEventListener("inputsourceschange",Qe),b.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(Q),n.renderState.layers===void 0){const V={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:r};g=new XRWebGLLayer(n,t,V),n.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),B=new Qn(g.framebufferWidth,g.framebufferHeight,{format:gi,type:bi,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let V=null,z=null,J=null;b.depth&&(J=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,V=b.stencil?zl:yo,z=b.stencil?tc:la);const ae={colorFormat:t.RGBA8,depthFormat:J,scaleFactor:r};u=new XRWebGLBinding(n,t),m=u.createProjectionLayer(ae),n.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),B=new Qn(m.textureWidth,m.textureHeight,{format:gi,type:bi,depthTexture:new Sb(m.textureWidth,m.textureHeight,z,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0}),e.properties.get(B).__ignoreDepthValues=m.ignoreDepthValues}B.isXRRenderTarget=!0,this.setFoveation(c),h=null,a=await n.requestReferenceSpace(o),ye.setContext(n),ye.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(n!==null)return n.environmentBlendMode};const Ee=new le,ke=new le;function ee(me,V){V===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(V.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(n===null)return;E.texture!==null&&(me.near=E.depthNear,me.far=E.depthFar),pe.near=te.near=U.near=me.near,pe.far=te.far=U.far=me.far,ce===pe.near&&he===pe.far||(n.updateRenderState({depthNear:pe.near,depthFar:pe.far}),ce=pe.near,he=pe.far,U.near=ce,U.far=he,te.near=ce,te.far=he,U.updateProjectionMatrix(),te.updateProjectionMatrix(),me.updateProjectionMatrix());const V=me.parent,z=pe.cameras;ee(pe,V);for(let J=0;J<z.length;J++)ee(z[J],V);z.length===2?function(J,ae,Z){Ee.setFromMatrixPosition(ae.matrixWorld),ke.setFromMatrixPosition(Z.matrixWorld);const Se=Ee.distanceTo(ke),Ie=ae.projectionMatrix.elements,Oe=Z.projectionMatrix.elements,K=Ie[14]/(Ie[10]-1),L=Ie[14]/(Ie[10]+1),oe=(Ie[9]+1)/Ie[5],ne=(Ie[9]-1)/Ie[5],Le=(Ie[8]-1)/Ie[0],fe=(Oe[8]+1)/Oe[0],Re=K*Le,Je=K*fe,Xe=Se/(-Le+fe),st=Xe*-Le;ae.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(st),J.translateZ(Xe),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const Ve=K+Xe,rt=L+Xe,Ze=Re-st,Et=Je+(Se-st),p=oe*L/rt*Ve,l=ne*L/rt*Ve;J.projectionMatrix.makePerspective(Ze,Et,p,l,Ve,rt),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}(pe,U,te):pe.projectionMatrix.copy(U.projectionMatrix),function(J,ae,Z){Z===null?J.matrix.copy(ae.matrixWorld):(J.matrix.copy(Z.matrixWorld),J.matrix.invert(),J.matrix.multiply(ae.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(ae.projectionMatrix),J.projectionMatrixInverse.copy(ae.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=2*Mo*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}(me,pe,V)},this.getCamera=function(){return pe},this.getFoveation=function(){if(m!==null||g!==null)return c},this.setFoveation=function(me){c=me,m!==null&&(m.fixedFoveation=me),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=me)},this.hasDepthSensing=function(){return E.texture!==null};let re=null;const ye=new _b;ye.setAnimationLoop(function(me,V){if(d=V.getViewerPose(h||a),y=V,d!==null){const z=d.views;g!==null&&(e.setRenderTargetFramebuffer(B,g.framebuffer),e.setRenderTarget(B));let J=!1;z.length!==pe.cameras.length&&(pe.cameras.length=0,J=!0);for(let Z=0;Z<z.length;Z++){const Se=z[Z];let Ie=null;if(g!==null)Ie=g.getViewport(Se);else{const K=u.getViewSubImage(m,Se);Ie=K.viewport,Z===0&&(e.setRenderTargetTextures(B,K.colorTexture,m.ignoreDepthValues?void 0:K.depthStencilTexture),e.setRenderTarget(B))}let Oe=ue[Z];Oe===void 0&&(Oe=new Ui,Oe.layers.enable(Z),Oe.viewport=new Jt,ue[Z]=Oe),Oe.matrix.fromArray(Se.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(Se.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(Ie.x,Ie.y,Ie.width,Ie.height),Z===0&&(pe.matrix.copy(Oe.matrix),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale)),J===!0&&pe.cameras.push(Oe)}const ae=n.enabledFeatures;if(ae&&ae.includes("depth-sensing")){const Z=u.getDepthInformation(z[0]);Z&&Z.isValid&&Z.texture&&E.init(e,Z,n.renderState)}}for(let z=0;z<I.length;z++){const J=k[z],ae=I[z];J!==null&&ae!==void 0&&ae.update(J,V,h||a)}E.render(e,pe),re&&re(me,V),V.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:V}),y=null}),this.setAnimationLoop=function(me){re=me},this.dispose=function(){}}}const Dr=new zn,bM=new yt;function EM(s,e){function t(n,r){n.matrixAutoUpdate===!0&&n.updateMatrix(),r.value.copy(n.matrix)}function i(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map,t(r.map,n.mapTransform)),r.alphaMap&&(n.alphaMap.value=r.alphaMap,t(r.alphaMap,n.alphaMapTransform)),r.bumpMap&&(n.bumpMap.value=r.bumpMap,t(r.bumpMap,n.bumpMapTransform),n.bumpScale.value=r.bumpScale,r.side===$i&&(n.bumpScale.value*=-1)),r.normalMap&&(n.normalMap.value=r.normalMap,t(r.normalMap,n.normalMapTransform),n.normalScale.value.copy(r.normalScale),r.side===$i&&n.normalScale.value.negate()),r.displacementMap&&(n.displacementMap.value=r.displacementMap,t(r.displacementMap,n.displacementMapTransform),n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap,t(r.emissiveMap,n.emissiveMapTransform)),r.specularMap&&(n.specularMap.value=r.specularMap,t(r.specularMap,n.specularMapTransform)),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const a=e.get(r),o=a.envMap,c=a.envMapRotation;if(o&&(n.envMap.value=o,Dr.copy(c),Dr.x*=-1,Dr.y*=-1,Dr.z*=-1,o.isCubeTexture&&o.isRenderTargetTexture===!1&&(Dr.y*=-1,Dr.z*=-1),n.envMapRotation.value.setFromMatrix4(bM.makeRotationFromEuler(Dr)),n.flipEnvMap.value=o.isCubeTexture&&o.isRenderTargetTexture===!1?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const h=s._useLegacyLights===!0?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*h,t(r.lightMap,n.lightMapTransform)}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity,t(r.aoMap,n.aoMapTransform))}return{refreshFogUniforms:function(n,r){r.color.getRGB(n.fogColor.value,bb(s)),r.isFog?(n.fogNear.value=r.near,n.fogFar.value=r.far):r.isFogExp2&&(n.fogDensity.value=r.density)},refreshMaterialUniforms:function(n,r,a,o,c){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(n,r):r.isMeshToonMaterial?(i(n,r),function(h,d){d.gradientMap&&(h.gradientMap.value=d.gradientMap)}(n,r)):r.isMeshPhongMaterial?(i(n,r),function(h,d){h.specular.value.copy(d.specular),h.shininess.value=Math.max(d.shininess,1e-4)}(n,r)):r.isMeshStandardMaterial?(i(n,r),function(h,d){h.metalness.value=d.metalness,d.metalnessMap&&(h.metalnessMap.value=d.metalnessMap,t(d.metalnessMap,h.metalnessMapTransform)),h.roughness.value=d.roughness,d.roughnessMap&&(h.roughnessMap.value=d.roughnessMap,t(d.roughnessMap,h.roughnessMapTransform)),d.envMap&&(h.envMapIntensity.value=d.envMapIntensity)}(n,r),r.isMeshPhysicalMaterial&&function(h,d,u){h.ior.value=d.ior,d.sheen>0&&(h.sheenColor.value.copy(d.sheenColor).multiplyScalar(d.sheen),h.sheenRoughness.value=d.sheenRoughness,d.sheenColorMap&&(h.sheenColorMap.value=d.sheenColorMap,t(d.sheenColorMap,h.sheenColorMapTransform)),d.sheenRoughnessMap&&(h.sheenRoughnessMap.value=d.sheenRoughnessMap,t(d.sheenRoughnessMap,h.sheenRoughnessMapTransform))),d.clearcoat>0&&(h.clearcoat.value=d.clearcoat,h.clearcoatRoughness.value=d.clearcoatRoughness,d.clearcoatMap&&(h.clearcoatMap.value=d.clearcoatMap,t(d.clearcoatMap,h.clearcoatMapTransform)),d.clearcoatRoughnessMap&&(h.clearcoatRoughnessMap.value=d.clearcoatRoughnessMap,t(d.clearcoatRoughnessMap,h.clearcoatRoughnessMapTransform)),d.clearcoatNormalMap&&(h.clearcoatNormalMap.value=d.clearcoatNormalMap,t(d.clearcoatNormalMap,h.clearcoatNormalMapTransform),h.clearcoatNormalScale.value.copy(d.clearcoatNormalScale),d.side===$i&&h.clearcoatNormalScale.value.negate())),d.iridescence>0&&(h.iridescence.value=d.iridescence,h.iridescenceIOR.value=d.iridescenceIOR,h.iridescenceThicknessMinimum.value=d.iridescenceThicknessRange[0],h.iridescenceThicknessMaximum.value=d.iridescenceThicknessRange[1],d.iridescenceMap&&(h.iridescenceMap.value=d.iridescenceMap,t(d.iridescenceMap,h.iridescenceMapTransform)),d.iridescenceThicknessMap&&(h.iridescenceThicknessMap.value=d.iridescenceThicknessMap,t(d.iridescenceThicknessMap,h.iridescenceThicknessMapTransform))),d.transmission>0&&(h.transmission.value=d.transmission,h.transmissionSamplerMap.value=u.texture,h.transmissionSamplerSize.value.set(u.width,u.height),d.transmissionMap&&(h.transmissionMap.value=d.transmissionMap,t(d.transmissionMap,h.transmissionMapTransform)),h.thickness.value=d.thickness,d.thicknessMap&&(h.thicknessMap.value=d.thicknessMap,t(d.thicknessMap,h.thicknessMapTransform)),h.attenuationDistance.value=d.attenuationDistance,h.attenuationColor.value.copy(d.attenuationColor)),d.anisotropy>0&&(h.anisotropyVector.value.set(d.anisotropy*Math.cos(d.anisotropyRotation),d.anisotropy*Math.sin(d.anisotropyRotation)),d.anisotropyMap&&(h.anisotropyMap.value=d.anisotropyMap,t(d.anisotropyMap,h.anisotropyMapTransform))),h.specularIntensity.value=d.specularIntensity,h.specularColor.value.copy(d.specularColor),d.specularColorMap&&(h.specularColorMap.value=d.specularColorMap,t(d.specularColorMap,h.specularColorMapTransform)),d.specularIntensityMap&&(h.specularIntensityMap.value=d.specularIntensityMap,t(d.specularIntensityMap,h.specularIntensityMapTransform))}(n,r,c)):r.isMeshMatcapMaterial?(i(n,r),function(h,d){d.matcap&&(h.matcap.value=d.matcap)}(n,r)):r.isMeshDepthMaterial?i(n,r):r.isMeshDistanceMaterial?(i(n,r),function(h,d){const u=e.get(d).light;h.referencePosition.value.setFromMatrixPosition(u.matrixWorld),h.nearDistance.value=u.shadow.camera.near,h.farDistance.value=u.shadow.camera.far}(n,r)):r.isMeshNormalMaterial?i(n,r):r.isLineBasicMaterial?(function(h,d){h.diffuse.value.copy(d.color),h.opacity.value=d.opacity,d.map&&(h.map.value=d.map,t(d.map,h.mapTransform))}(n,r),r.isLineDashedMaterial&&function(h,d){h.dashSize.value=d.dashSize,h.totalSize.value=d.dashSize+d.gapSize,h.scale.value=d.scale}(n,r)):r.isPointsMaterial?function(h,d,u,m){h.diffuse.value.copy(d.color),h.opacity.value=d.opacity,h.size.value=d.size*u,h.scale.value=.5*m,d.map&&(h.map.value=d.map,t(d.map,h.uvTransform)),d.alphaMap&&(h.alphaMap.value=d.alphaMap,t(d.alphaMap,h.alphaMapTransform)),d.alphaTest>0&&(h.alphaTest.value=d.alphaTest)}(n,r,a,o):r.isSpriteMaterial?function(h,d){h.diffuse.value.copy(d.color),h.opacity.value=d.opacity,h.rotation.value=d.rotation,d.map&&(h.map.value=d.map,t(d.map,h.mapTransform)),d.alphaMap&&(h.alphaMap.value=d.alphaMap,t(d.alphaMap,h.alphaMapTransform)),d.alphaTest>0&&(h.alphaTest.value=d.alphaTest)}(n,r):r.isShadowMaterial?(n.color.value.copy(r.color),n.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function xM(s,e,t,i){let n={},r={},a=[];const o=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);function c(u,m,g,y){const E=u.value,b=m+"_"+g;if(y[b]===void 0)return y[b]=typeof E=="number"||typeof E=="boolean"?E:E.clone(),!0;{const C=y[b];if(typeof E=="number"||typeof E=="boolean"){if(C!==E)return y[b]=E,!0}else if(C.equals(E)===!1)return C.copy(E),!0}return!1}function h(u){const m={boundary:0,storage:0};return typeof u=="number"||typeof u=="boolean"?(m.boundary=4,m.storage=4):u.isVector2?(m.boundary=8,m.storage=8):u.isVector3||u.isColor?(m.boundary=16,m.storage=12):u.isVector4?(m.boundary=16,m.storage=16):u.isMatrix3?(m.boundary=48,m.storage=48):u.isMatrix4?(m.boundary=64,m.storage=64):u.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",u),m}function d(u){const m=u.target;m.removeEventListener("dispose",d);const g=a.indexOf(m.__bindingPointIndex);a.splice(g,1),s.deleteBuffer(n[m.id]),delete n[m.id],delete r[m.id]}return{bind:function(u,m){const g=m.program;i.uniformBlockBinding(u,g)},update:function(u,m){let g=n[u.id];g===void 0&&(function(b){const C=b.uniforms;let B=0;const I=16;for(let Q=0,G=C.length;Q<G;Q++){const U=Array.isArray(C[Q])?C[Q]:[C[Q]];for(let te=0,ue=U.length;te<ue;te++){const pe=U[te],ce=Array.isArray(pe.value)?pe.value:[pe.value];for(let he=0,Me=ce.length;he<Me;he++){const De=h(ce[he]),Qe=B%I;Qe!==0&&I-Qe<De.boundary&&(B+=I-Qe),pe.__data=new Float32Array(De.storage/Float32Array.BYTES_PER_ELEMENT),pe.__offset=B,B+=De.storage}}}const k=B%I;k>0&&(B+=I-k),b.__size=B,b.__cache={}}(u),g=function(b){const C=function(){for(let Q=0;Q<o;Q++)if(a.indexOf(Q)===-1)return a.push(Q),Q;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=C;const B=s.createBuffer(),I=b.__size,k=b.usage;return s.bindBuffer(s.UNIFORM_BUFFER,B),s.bufferData(s.UNIFORM_BUFFER,I,k),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,C,B),B}(u),n[u.id]=g,u.addEventListener("dispose",d));const y=m.program;i.updateUBOMapping(u,y);const E=e.render.frame;r[u.id]!==E&&(function(b){const C=n[b.id],B=b.uniforms,I=b.__cache;s.bindBuffer(s.UNIFORM_BUFFER,C);for(let k=0,Q=B.length;k<Q;k++){const G=Array.isArray(B[k])?B[k]:[B[k]];for(let U=0,te=G.length;U<te;U++){const ue=G[U];if(c(ue,k,U,I)===!0){const pe=ue.__offset,ce=Array.isArray(ue.value)?ue.value:[ue.value];let he=0;for(let Me=0;Me<ce.length;Me++){const De=ce[Me],Qe=h(De);typeof De=="number"||typeof De=="boolean"?(ue.__data[0]=De,s.bufferSubData(s.UNIFORM_BUFFER,pe+he,ue.__data)):De.isMatrix3?(ue.__data[0]=De.elements[0],ue.__data[1]=De.elements[1],ue.__data[2]=De.elements[2],ue.__data[3]=0,ue.__data[4]=De.elements[3],ue.__data[5]=De.elements[4],ue.__data[6]=De.elements[5],ue.__data[7]=0,ue.__data[8]=De.elements[6],ue.__data[9]=De.elements[7],ue.__data[10]=De.elements[8],ue.__data[11]=0):(De.toArray(ue.__data,he),he+=Qe.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,pe,ue.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}(u),r[u.id]=E)},dispose:function(){for(const u in n)s.deleteBuffer(n[u]);a=[],n={},r={}}}}class Lf{constructor(e={}){const{canvas:t=E1(),context:i=null,depth:n=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=e;let m;if(this.isWebGLRenderer=!0,i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=a;const g=new Uint32Array(4),y=new Int32Array(4);let E=null,b=null;const C=[],B=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=di,this._useLegacyLights=!1,this.toneMapping=Vs,this.toneMappingExposure=1;const I=this;let k=!1,Q=0,G=0,U=null,te=-1,ue=null;const pe=new Jt,ce=new Jt;let he=null;const Me=new At(0);let De=0,Qe=t.width,Ee=t.height,ke=1,ee=null,re=null;const ye=new Jt(0,0,Qe,Ee),me=new Jt(0,0,Qe,Ee);let V=!1;const z=new Bf;let J=!1,ae=!1;const Z=new yt,Se=new vt,Ie=new le,Oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return U===null?ke:1}let L,oe,ne,Le,fe,Re,Je,Xe,st,Ve,rt,Ze,Et,p,l,f,v,x,w,T,P,_,R,F,S=i;function D(N,Y){const ie=t.getContext(N,Y);return ie!==null?ie:null}try{const N={alpha:!0,depth:n,stencil:r,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Rm}`),t.addEventListener("webglcontextlost",q,!1),t.addEventListener("webglcontextrestored",W,!1),t.addEventListener("webglcontextcreationerror",de,!1),S===null){const Y="webgl2";if(S=D(Y,N),S===null)throw D(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}function H(){L=new Y1(S),L.init(),oe=new W1(S,L,e),_=new gM(S,L),ne=new mM(S),Le=new Z1(S),fe=new sM,Re=new fM(S,L,ne,fe,oe,_,Le),Je=new j1(I),Xe=new X1(I),st=new z1(S),R=new V1(S,st),Ve=new K1(S,st,Le,R),rt=new tI(S,Ve,st,Le),w=new eI(S,oe,Re),f=new q1(fe),Ze=new nM(I,Je,Xe,L,oe,R,f),Et=new EM(I,fe),p=new aM,l=new dM(L),x=new G1(I,Je,Xe,ne,rt,m,c),v=new pM(I,rt,oe),F=new xM(S,Le,oe,ne),T=new $1(S,L,Le),P=new J1(S,L,Le),Le.programs=Ze.programs,I.capabilities=oe,I.extensions=L,I.properties=fe,I.renderLists=p,I.shadowMap=v,I.state=ne,I.info=Le}H();const X=new wM(I,S);function q(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function W(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const N=Le.autoReset,Y=v.enabled,ie=v.autoUpdate,xe=v.needsUpdate,be=v.type;H(),Le.autoReset=N,v.enabled=Y,v.autoUpdate=ie,v.needsUpdate=xe,v.type=be}function de(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function ge(N){const Y=N.target;Y.removeEventListener("dispose",ge),function(ie){(function(xe){const be=fe.get(xe).programs;be!==void 0&&(be.forEach(function($e){Ze.releaseProgram($e)}),xe.isShaderMaterial&&Ze.releaseShaderCache(xe))})(ie),fe.remove(ie)}(Y)}function ve(N,Y,ie){N.transparent===!0&&N.side===Zi&&N.forceSinglePass===!1?(N.side=$i,N.needsUpdate=!0,Ge(N,Y,ie),N.side=ns,N.needsUpdate=!0,Ge(N,Y,ie),N.side=Zi):Ge(N,Y,ie)}this.xr=X,this.getContext=function(){return S},this.getContextAttributes=function(){return S.getContextAttributes()},this.forceContextLoss=function(){const N=L.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=L.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return ke},this.setPixelRatio=function(N){N!==void 0&&(ke=N,this.setSize(Qe,Ee,!1))},this.getSize=function(N){return N.set(Qe,Ee)},this.setSize=function(N,Y,ie=!0){X.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Qe=N,Ee=Y,t.width=Math.floor(N*ke),t.height=Math.floor(Y*ke),ie===!0&&(t.style.width=N+"px",t.style.height=Y+"px"),this.setViewport(0,0,N,Y))},this.getDrawingBufferSize=function(N){return N.set(Qe*ke,Ee*ke).floor()},this.setDrawingBufferSize=function(N,Y,ie){Qe=N,Ee=Y,ke=ie,t.width=Math.floor(N*ie),t.height=Math.floor(Y*ie),this.setViewport(0,0,N,Y)},this.getCurrentViewport=function(N){return N.copy(pe)},this.getViewport=function(N){return N.copy(ye)},this.setViewport=function(N,Y,ie,xe){N.isVector4?ye.set(N.x,N.y,N.z,N.w):ye.set(N,Y,ie,xe),ne.viewport(pe.copy(ye).multiplyScalar(ke).round())},this.getScissor=function(N){return N.copy(me)},this.setScissor=function(N,Y,ie,xe){N.isVector4?me.set(N.x,N.y,N.z,N.w):me.set(N,Y,ie,xe),ne.scissor(ce.copy(me).multiplyScalar(ke).round())},this.getScissorTest=function(){return V},this.setScissorTest=function(N){ne.setScissorTest(V=N)},this.setOpaqueSort=function(N){ee=N},this.setTransparentSort=function(N){re=N},this.getClearColor=function(N){return N.copy(x.getClearColor())},this.setClearColor=function(){x.setClearColor.apply(x,arguments)},this.getClearAlpha=function(){return x.getClearAlpha()},this.setClearAlpha=function(){x.setClearAlpha.apply(x,arguments)},this.clear=function(N=!0,Y=!0,ie=!0){let xe=0;if(N){let be=!1;if(U!==null){const $e=U.texture.format;be=$e===1033||$e===1031||$e===1029}if(be){const $e=U.texture.type,Ye=$e===bi||$e===la||$e===1012||$e===tc||$e===1017||$e===1018,je=x.getClearColor(),et=x.getClearAlpha(),ht=je.r,lt=je.g,dt=je.b;Ye?(g[0]=ht,g[1]=lt,g[2]=dt,g[3]=et,S.clearBufferuiv(S.COLOR,0,g)):(y[0]=ht,y[1]=lt,y[2]=dt,y[3]=et,S.clearBufferiv(S.COLOR,0,y))}else xe|=S.COLOR_BUFFER_BIT}Y&&(xe|=S.DEPTH_BUFFER_BIT),ie&&(xe|=S.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),S.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",q,!1),t.removeEventListener("webglcontextrestored",W,!1),t.removeEventListener("webglcontextcreationerror",de,!1),p.dispose(),l.dispose(),fe.dispose(),Je.dispose(),Xe.dispose(),rt.dispose(),R.dispose(),F.dispose(),Ze.dispose(),X.dispose(),X.removeEventListener("sessionstart",Fe),X.removeEventListener("sessionend",Be),Ue.stop()},this.renderBufferDirect=function(N,Y,ie,xe,be,$e){Y===null&&(Y=Oe);const Ye=be.isMesh&&be.matrixWorld.determinant()<0,je=function(kt,ri,ai,gt,bt){ri.isScene!==!0&&(ri=Oe),Re.resetTextureUnits();const Gn=ri.fog,ga=gt.isMeshStandardMaterial?ri.environment:null,cc=U===null?I.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:Yt,yr=(gt.isMeshStandardMaterial?Xe:Je).get(gt.envMap||ga),hc=gt.vertexColors===!0&&!!ai.attributes.color&&ai.attributes.color.itemSize===4,dc=!!ai.attributes.tangent&&(!!gt.normalMap||gt.anisotropy>0),uc=!!ai.morphAttributes.position,Cn=!!ai.morphAttributes.normal,tn=!!ai.morphAttributes.color;let as=Vs;gt.toneMapped&&(U!==null&&U.isXRRenderTarget!==!0||(as=I.toneMapping));const nn=ai.morphAttributes.position||ai.morphAttributes.normal||ai.morphAttributes.color,Qo=nn!==void 0?nn.length:0,Lt=fe.get(gt),In=b.state.lights;if(J===!0&&(ae===!0||kt!==ue)){const yi=kt===ue&&gt.id===te;f.setState(gt,kt,yi)}let Ii=!1;gt.version===Lt.__version?Lt.needsLights&&Lt.lightsStateVersion!==In.state.version||Lt.outputColorSpace!==cc||bt.isBatchedMesh&&Lt.batching===!1?Ii=!0:bt.isBatchedMesh||Lt.batching!==!0?bt.isInstancedMesh&&Lt.instancing===!1?Ii=!0:bt.isInstancedMesh||Lt.instancing!==!0?bt.isSkinnedMesh&&Lt.skinning===!1?Ii=!0:bt.isSkinnedMesh||Lt.skinning!==!0?bt.isInstancedMesh&&Lt.instancingColor===!0&&bt.instanceColor===null||bt.isInstancedMesh&&Lt.instancingColor===!1&&bt.instanceColor!==null||bt.isInstancedMesh&&Lt.instancingMorph===!0&&bt.morphTexture===null||bt.isInstancedMesh&&Lt.instancingMorph===!1&&bt.morphTexture!==null||Lt.envMap!==yr||gt.fog===!0&&Lt.fog!==Gn?Ii=!0:Lt.numClippingPlanes===void 0||Lt.numClippingPlanes===f.numPlanes&&Lt.numIntersection===f.numIntersection?(Lt.vertexAlphas!==hc||Lt.vertexTangents!==dc||Lt.morphTargets!==uc||Lt.morphNormals!==Cn||Lt.morphColors!==tn||Lt.toneMapping!==as||Lt.morphTargetsCount!==Qo)&&(Ii=!0):Ii=!0:Ii=!0:Ii=!0:Ii=!0:(Ii=!0,Lt.__version=gt.version);let Mn=Lt.currentProgram;Ii===!0&&(Mn=Ge(gt,ri,bt));let Es=!1,xs=!1,Aa=!1;const mi=Mn.getUniforms(),Tn=Lt.uniforms;if(ne.useProgram(Mn.program)&&(Es=!0,xs=!0,Aa=!0),gt.id!==te&&(te=gt.id,xs=!0),Es||ue!==kt){mi.setValue(S,"projectionMatrix",kt.projectionMatrix),mi.setValue(S,"viewMatrix",kt.matrixWorldInverse);const yi=mi.map.cameraPosition;yi!==void 0&&yi.setValue(S,Ie.setFromMatrixPosition(kt.matrixWorld)),oe.logarithmicDepthBuffer&&mi.setValue(S,"logDepthBufFC",2/(Math.log(kt.far+1)/Math.LN2)),(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial)&&mi.setValue(S,"isOrthographic",kt.isOrthographicCamera===!0),ue!==kt&&(ue=kt,xs=!0,Aa=!0)}if(bt.isSkinnedMesh){mi.setOptional(S,bt,"bindMatrix"),mi.setOptional(S,bt,"bindMatrixInverse");const yi=bt.skeleton;yi&&(yi.boneTexture===null&&yi.computeBoneTexture(),mi.setValue(S,"boneTexture",yi.boneTexture,Re))}bt.isBatchedMesh&&(mi.setOptional(S,bt,"batchingTexture"),mi.setValue(S,"batchingTexture",bt._matricesTexture,Re));const va=ai.morphAttributes;va.position===void 0&&va.normal===void 0&&va.color===void 0||w.update(bt,ai,Mn),(xs||Lt.receiveShadow!==bt.receiveShadow)&&(Lt.receiveShadow=bt.receiveShadow,mi.setValue(S,"receiveShadow",bt.receiveShadow)),gt.isMeshGouraudMaterial&&gt.envMap!==null&&(Tn.envMap.value=yr,Tn.flipEnvMap.value=yr.isCubeTexture&&yr.isRenderTargetTexture===!1?-1:1),gt.isMeshStandardMaterial&&gt.envMap===null&&ri.environment!==null&&(Tn.envMapIntensity.value=ri.environmentIntensity),xs&&(mi.setValue(S,"toneMappingExposure",I.toneMappingExposure),Lt.needsLights&&(pn=Aa,(Ei=Tn).ambientLightColor.needsUpdate=pn,Ei.lightProbe.needsUpdate=pn,Ei.directionalLights.needsUpdate=pn,Ei.directionalLightShadows.needsUpdate=pn,Ei.pointLights.needsUpdate=pn,Ei.pointLightShadows.needsUpdate=pn,Ei.spotLights.needsUpdate=pn,Ei.spotLightShadows.needsUpdate=pn,Ei.rectAreaLights.needsUpdate=pn,Ei.hemisphereLights.needsUpdate=pn),Gn&&gt.fog===!0&&Et.refreshFogUniforms(Tn,Gn),Et.refreshMaterialUniforms(Tn,gt,ke,Ee,b.state.transmissionRenderTarget),Uh.upload(S,se(Lt),Tn,Re));var Ei,pn;if(gt.isShaderMaterial&&gt.uniformsNeedUpdate===!0&&(Uh.upload(S,se(Lt),Tn,Re),gt.uniformsNeedUpdate=!1),gt.isSpriteMaterial&&mi.setValue(S,"center",bt.center),mi.setValue(S,"modelViewMatrix",bt.modelViewMatrix),mi.setValue(S,"normalMatrix",bt.normalMatrix),mi.setValue(S,"modelMatrix",bt.matrixWorld),gt.isShaderMaterial||gt.isRawShaderMaterial){const yi=gt.uniformsGroups;for(let js=0,pc=yi.length;js<pc;js++){const Xs=yi[js];F.update(Xs,Mn),F.bind(Xs,Mn)}}return Mn}(N,Y,ie,xe,be);ne.setMaterial(xe,Ye);let et=ie.index,ht=1;if(xe.wireframe===!0){if(et=Ve.getWireframeAttribute(ie),et===void 0)return;ht=2}const lt=ie.drawRange,dt=ie.attributes.position;let ut=lt.start*ht,si=(lt.start+lt.count)*ht;$e!==null&&(ut=Math.max(ut,$e.start*ht),si=Math.min(si,($e.start+$e.count)*ht)),et!==null?(ut=Math.max(ut,0),si=Math.min(si,et.count)):dt!=null&&(ut=Math.max(ut,0),si=Math.min(si,dt.count));const pi=si-ut;if(pi<0||pi===1/0)return;let ei;R.setup(be,xe,je,ie,et);let Rt=T;if(et!==null&&(ei=st.get(et),Rt=P,Rt.setIndex(ei)),be.isMesh)xe.wireframe===!0?(ne.setLineWidth(xe.wireframeLinewidth*K()),Rt.setMode(S.LINES)):Rt.setMode(S.TRIANGLES);else if(be.isLine){let kt=xe.linewidth;kt===void 0&&(kt=1),ne.setLineWidth(kt*K()),be.isLineSegments?Rt.setMode(S.LINES):be.isLineLoop?Rt.setMode(S.LINE_LOOP):Rt.setMode(S.LINE_STRIP)}else be.isPoints?Rt.setMode(S.POINTS):be.isSprite&&Rt.setMode(S.TRIANGLES);if(be.isBatchedMesh)Rt.renderMultiDraw(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount);else if(be.isInstancedMesh)Rt.renderInstances(ut,pi,be.count);else if(ie.isInstancedBufferGeometry){const kt=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,ri=Math.min(ie.instanceCount,kt);Rt.renderInstances(ut,pi,ri)}else Rt.render(ut,pi)},this.compile=function(N,Y,ie=null){ie===null&&(ie=N),b=l.get(ie),b.init(),B.push(b),ie.traverseVisible(function(be){be.isLight&&be.layers.test(Y.layers)&&(b.pushLight(be),be.castShadow&&b.pushShadow(be))}),N!==ie&&N.traverseVisible(function(be){be.isLight&&be.layers.test(Y.layers)&&(b.pushLight(be),be.castShadow&&b.pushShadow(be))}),b.setupLights(I._useLegacyLights);const xe=new Set;return N.traverse(function(be){const $e=be.material;if($e)if(Array.isArray($e))for(let Ye=0;Ye<$e.length;Ye++){const je=$e[Ye];ve(je,ie,be),xe.add(je)}else ve($e,ie,be),xe.add($e)}),B.pop(),b=null,xe},this.compileAsync=function(N,Y,ie=null){const xe=this.compile(N,Y,ie);return new Promise(be=>{function $e(){xe.forEach(function(Ye){fe.get(Ye).currentProgram.isReady()&&xe.delete(Ye)}),xe.size!==0?setTimeout($e,10):be(N)}L.get("KHR_parallel_shader_compile")!==null?$e():setTimeout($e,10)})};let Te=null;function Fe(){Ue.stop()}function Be(){Ue.start()}const Ue=new _b;function Ne(N,Y,ie,xe){if(N.visible===!1)return;if(N.layers.test(Y.layers)){if(N.isGroup)ie=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(Y);else if(N.isLight)b.pushLight(N),N.castShadow&&b.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||z.intersectsSprite(N)){xe&&Ie.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Z);const $e=rt.update(N),Ye=N.material;Ye.visible&&E.push(N,$e,Ye,ie,Ie.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||z.intersectsObject(N))){const $e=rt.update(N),Ye=N.material;if(xe&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),Ie.copy(N.boundingSphere.center)):($e.boundingSphere===null&&$e.computeBoundingSphere(),Ie.copy($e.boundingSphere.center)),Ie.applyMatrix4(N.matrixWorld).applyMatrix4(Z)),Array.isArray(Ye)){const je=$e.groups;for(let et=0,ht=je.length;et<ht;et++){const lt=je[et],dt=Ye[lt.materialIndex];dt&&dt.visible&&E.push(N,$e,dt,ie,Ie.z,lt)}}else Ye.visible&&E.push(N,$e,Ye,ie,Ie.z,null)}}const be=N.children;for(let $e=0,Ye=be.length;$e<Ye;$e++)Ne(be[$e],Y,ie,xe)}function qe(N,Y,ie,xe){const be=N.opaque,$e=N.transmissive,Ye=N.transparent;b.setupLightsView(ie),J===!0&&f.setGlobalState(I.clippingPlanes,ie),$e.length>0&&function(je,et,ht,lt){if((ht.isScene===!0?ht.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget===null&&(b.state.transmissionRenderTarget=new Qn(1,1,{generateMipmaps:!0,type:L.has("EXT_color_buffer_half_float")||L.has("EXT_color_buffer_float")?Vi:bi,minFilter:kn,samples:4,stencilBuffer:r}),fe.get(b.state.transmissionRenderTarget).__isTransmissionRenderTarget=!0);const ut=b.state.transmissionRenderTarget;I.getDrawingBufferSize(Se),ut.setSize(Se.x,Se.y);const si=I.getRenderTarget();I.setRenderTarget(ut),I.getClearColor(Me),De=I.getClearAlpha(),De<1&&I.setClearColor(16777215,.5),I.clear();const pi=I.toneMapping;I.toneMapping=Vs,Ae(je,ht,lt),Re.updateMultisampleRenderTarget(ut),Re.updateRenderTargetMipmap(ut);let ei=!1;for(let Rt=0,kt=et.length;Rt<kt;Rt++){const ri=et[Rt],ai=ri.object,gt=ri.geometry,bt=ri.material,Gn=ri.group;if(bt.side===Zi&&ai.layers.test(lt.layers)){const ga=bt.side;bt.side=$i,bt.needsUpdate=!0,Pe(ai,ht,lt,gt,bt,Gn),bt.side=ga,bt.needsUpdate=!0,ei=!0}}ei===!0&&(Re.updateMultisampleRenderTarget(ut),Re.updateRenderTargetMipmap(ut)),I.setRenderTarget(si),I.setClearColor(Me,De),I.toneMapping=pi}(be,$e,Y,ie),xe&&ne.viewport(pe.copy(xe)),be.length>0&&Ae(be,Y,ie),$e.length>0&&Ae($e,Y,ie),Ye.length>0&&Ae(Ye,Y,ie),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function Ae(N,Y,ie){const xe=Y.isScene===!0?Y.overrideMaterial:null;for(let be=0,$e=N.length;be<$e;be++){const Ye=N[be],je=Ye.object,et=Ye.geometry,ht=xe===null?Ye.material:xe,lt=Ye.group;je.layers.test(ie.layers)&&Pe(je,Y,ie,et,ht,lt)}}function Pe(N,Y,ie,xe,be,$e){N.onBeforeRender(I,Y,ie,xe,be,$e),N.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),be.onBeforeRender(I,Y,ie,xe,N,$e),be.transparent===!0&&be.side===Zi&&be.forceSinglePass===!1?(be.side=$i,be.needsUpdate=!0,I.renderBufferDirect(ie,Y,xe,be,N,$e),be.side=ns,be.needsUpdate=!0,I.renderBufferDirect(ie,Y,xe,be,N,$e),be.side=Zi):I.renderBufferDirect(ie,Y,xe,be,N,$e),N.onAfterRender(I,Y,ie,xe,be,$e)}function Ge(N,Y,ie){Y.isScene!==!0&&(Y=Oe);const xe=fe.get(N),be=b.state.lights,$e=b.state.shadowsArray,Ye=be.state.version,je=Ze.getParameters(N,be.state,$e,Y,ie),et=Ze.getProgramCacheKey(je);let ht=xe.programs;xe.environment=N.isMeshStandardMaterial?Y.environment:null,xe.fog=Y.fog,xe.envMap=(N.isMeshStandardMaterial?Xe:Je).get(N.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&N.envMap===null?Y.environmentRotation:N.envMapRotation,ht===void 0&&(N.addEventListener("dispose",ge),ht=new Map,xe.programs=ht);let lt=ht.get(et);if(lt!==void 0){if(xe.currentProgram===lt&&xe.lightsStateVersion===Ye)return we(N,je),lt}else je.uniforms=Ze.getUniforms(N),N.onBuild(ie,je,I),N.onBeforeCompile(je,I),lt=Ze.acquireProgram(je,et),ht.set(et,lt),xe.uniforms=je.uniforms;const dt=xe.uniforms;return(N.isShaderMaterial||N.isRawShaderMaterial)&&N.clipping!==!0||(dt.clippingPlanes=f.uniform),we(N,je),xe.needsLights=function(ut){return ut.isMeshLambertMaterial||ut.isMeshToonMaterial||ut.isMeshPhongMaterial||ut.isMeshStandardMaterial||ut.isShadowMaterial||ut.isShaderMaterial&&ut.lights===!0}(N),xe.lightsStateVersion=Ye,xe.needsLights&&(dt.ambientLightColor.value=be.state.ambient,dt.lightProbe.value=be.state.probe,dt.directionalLights.value=be.state.directional,dt.directionalLightShadows.value=be.state.directionalShadow,dt.spotLights.value=be.state.spot,dt.spotLightShadows.value=be.state.spotShadow,dt.rectAreaLights.value=be.state.rectArea,dt.ltc_1.value=be.state.rectAreaLTC1,dt.ltc_2.value=be.state.rectAreaLTC2,dt.pointLights.value=be.state.point,dt.pointLightShadows.value=be.state.pointShadow,dt.hemisphereLights.value=be.state.hemi,dt.directionalShadowMap.value=be.state.directionalShadowMap,dt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,dt.spotShadowMap.value=be.state.spotShadowMap,dt.spotLightMatrix.value=be.state.spotLightMatrix,dt.spotLightMap.value=be.state.spotLightMap,dt.pointShadowMap.value=be.state.pointShadowMap,dt.pointShadowMatrix.value=be.state.pointShadowMatrix),xe.currentProgram=lt,xe.uniformsList=null,lt}function se(N){if(N.uniformsList===null){const Y=N.currentProgram.getUniforms();N.uniformsList=Uh.seqWithValue(Y.seq,N.uniforms)}return N.uniformsList}function we(N,Y){const ie=fe.get(N);ie.outputColorSpace=Y.outputColorSpace,ie.batching=Y.batching,ie.instancing=Y.instancing,ie.instancingColor=Y.instancingColor,ie.instancingMorph=Y.instancingMorph,ie.skinning=Y.skinning,ie.morphTargets=Y.morphTargets,ie.morphNormals=Y.morphNormals,ie.morphColors=Y.morphColors,ie.morphTargetsCount=Y.morphTargetsCount,ie.numClippingPlanes=Y.numClippingPlanes,ie.numIntersection=Y.numClipIntersection,ie.vertexAlphas=Y.vertexAlphas,ie.vertexTangents=Y.vertexTangents,ie.toneMapping=Y.toneMapping}Ue.setAnimationLoop(function(N){Te&&Te(N)}),typeof self<"u"&&Ue.setContext(self),this.setAnimationLoop=function(N){Te=N,X.setAnimationLoop(N),N===null?Ue.stop():Ue.start()},X.addEventListener("sessionstart",Fe),X.addEventListener("sessionend",Be),this.render=function(N,Y){if(Y!==void 0&&Y.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(k===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),Y.parent===null&&Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),X.enabled===!0&&X.isPresenting===!0&&(X.cameraAutoUpdate===!0&&X.updateCamera(Y),Y=X.getCamera()),N.isScene===!0&&N.onBeforeRender(I,N,Y,U),b=l.get(N,B.length),b.init(),B.push(b),Z.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),z.setFromProjectionMatrix(Z),ae=this.localClippingEnabled,J=f.init(this.clippingPlanes,ae),E=p.get(N,C.length),E.init(),C.push(E),Ne(N,Y,0,I.sortObjects),E.finish(),I.sortObjects===!0&&E.sort(ee,re),this.info.render.frame++,J===!0&&f.beginShadows();const ie=b.state.shadowsArray;if(v.render(ie,N,Y),J===!0&&f.endShadows(),this.info.autoReset===!0&&this.info.reset(),X.enabled!==!1&&X.isPresenting!==!1&&X.hasDepthSensing()!==!1||x.render(E,N),b.setupLights(I._useLegacyLights),Y.isArrayCamera){const xe=Y.cameras;for(let be=0,$e=xe.length;be<$e;be++){const Ye=xe[be];qe(E,N,Ye,Ye.viewport)}}else qe(E,N,Y);U!==null&&(Re.updateMultisampleRenderTarget(U),Re.updateRenderTargetMipmap(U)),N.isScene===!0&&N.onAfterRender(I,N,Y),R.resetDefaultState(),te=-1,ue=null,B.pop(),b=B.length>0?B[B.length-1]:null,C.pop(),E=C.length>0?C[C.length-1]:null},this.getActiveCubeFace=function(){return Q},this.getActiveMipmapLevel=function(){return G},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(N,Y,ie){fe.get(N.texture).__webglTexture=Y,fe.get(N.depthTexture).__webglTexture=ie;const xe=fe.get(N);xe.__hasExternalTextures=!0,xe.__autoAllocateDepthBuffer=ie===void 0,xe.__autoAllocateDepthBuffer||L.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(N,Y){const ie=fe.get(N);ie.__webglFramebuffer=Y,ie.__useDefaultFramebuffer=Y===void 0},this.setRenderTarget=function(N,Y=0,ie=0){U=N,Q=Y,G=ie;let xe=!0,be=null,$e=!1,Ye=!1;if(N){const je=fe.get(N);je.__useDefaultFramebuffer!==void 0?(ne.bindFramebuffer(S.FRAMEBUFFER,null),xe=!1):je.__webglFramebuffer===void 0?Re.setupRenderTarget(N):je.__hasExternalTextures&&Re.rebindTextures(N,fe.get(N.texture).__webglTexture,fe.get(N.depthTexture).__webglTexture);const et=N.texture;(et.isData3DTexture||et.isDataArrayTexture||et.isCompressedArrayTexture)&&(Ye=!0);const ht=fe.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(be=Array.isArray(ht[Y])?ht[Y][ie]:ht[Y],$e=!0):be=N.samples>0&&Re.useMultisampledRTT(N)===!1?fe.get(N).__webglMultisampledFramebuffer:Array.isArray(ht)?ht[ie]:ht,pe.copy(N.viewport),ce.copy(N.scissor),he=N.scissorTest}else pe.copy(ye).multiplyScalar(ke).floor(),ce.copy(me).multiplyScalar(ke).floor(),he=V;if(ne.bindFramebuffer(S.FRAMEBUFFER,be)&&xe&&ne.drawBuffers(N,be),ne.viewport(pe),ne.scissor(ce),ne.setScissorTest(he),$e){const je=fe.get(N.texture);S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+Y,je.__webglTexture,ie)}else if(Ye){const je=fe.get(N.texture),et=Y||0;S.framebufferTextureLayer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,je.__webglTexture,ie||0,et)}te=-1},this.readRenderTargetPixels=function(N,Y,ie,xe,be,$e,Ye){if(!N||!N.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let je=fe.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ye!==void 0&&(je=je[Ye]),je){ne.bindFramebuffer(S.FRAMEBUFFER,je);try{const et=N.texture,ht=et.format,lt=et.type;if(ht!==gi&&_.convert(ht)!==S.getParameter(S.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const dt=lt===Vi&&(L.has("EXT_color_buffer_half_float")||L.has("EXT_color_buffer_float"));if(lt!==bi&&_.convert(lt)!==S.getParameter(S.IMPLEMENTATION_COLOR_READ_TYPE)&&lt!==Ti&&!dt)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Y>=0&&Y<=N.width-xe&&ie>=0&&ie<=N.height-be&&S.readPixels(Y,ie,xe,be,_.convert(ht),_.convert(lt),$e)}finally{const et=U!==null?fe.get(U).__webglFramebuffer:null;ne.bindFramebuffer(S.FRAMEBUFFER,et)}}},this.copyFramebufferToTexture=function(N,Y,ie=0){const xe=Math.pow(2,-ie),be=Math.floor(Y.image.width*xe),$e=Math.floor(Y.image.height*xe);Re.setTexture2D(Y,0),S.copyTexSubImage2D(S.TEXTURE_2D,ie,0,0,N.x,N.y,be,$e),ne.unbindTexture()},this.copyTextureToTexture=function(N,Y,ie,xe=0){const be=Y.image.width,$e=Y.image.height,Ye=_.convert(ie.format),je=_.convert(ie.type);Re.setTexture2D(ie,0),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,ie.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,ie.unpackAlignment),Y.isDataTexture?S.texSubImage2D(S.TEXTURE_2D,xe,N.x,N.y,be,$e,Ye,je,Y.image.data):Y.isCompressedTexture?S.compressedTexSubImage2D(S.TEXTURE_2D,xe,N.x,N.y,Y.mipmaps[0].width,Y.mipmaps[0].height,Ye,Y.mipmaps[0].data):S.texSubImage2D(S.TEXTURE_2D,xe,N.x,N.y,Ye,je,Y.image),xe===0&&ie.generateMipmaps&&S.generateMipmap(S.TEXTURE_2D),ne.unbindTexture()},this.copyTextureToTexture3D=function(N,Y,ie,xe,be=0){const $e=Math.round(N.max.x-N.min.x),Ye=Math.round(N.max.y-N.min.y),je=N.max.z-N.min.z+1,et=_.convert(xe.format),ht=_.convert(xe.type);let lt;if(xe.isData3DTexture)Re.setTexture3D(xe,0),lt=S.TEXTURE_3D;else{if(!xe.isDataArrayTexture&&!xe.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Re.setTexture2DArray(xe,0),lt=S.TEXTURE_2D_ARRAY}S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,xe.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,xe.unpackAlignment);const dt=S.getParameter(S.UNPACK_ROW_LENGTH),ut=S.getParameter(S.UNPACK_IMAGE_HEIGHT),si=S.getParameter(S.UNPACK_SKIP_PIXELS),pi=S.getParameter(S.UNPACK_SKIP_ROWS),ei=S.getParameter(S.UNPACK_SKIP_IMAGES),Rt=ie.isCompressedTexture?ie.mipmaps[be]:ie.image;S.pixelStorei(S.UNPACK_ROW_LENGTH,Rt.width),S.pixelStorei(S.UNPACK_IMAGE_HEIGHT,Rt.height),S.pixelStorei(S.UNPACK_SKIP_PIXELS,N.min.x),S.pixelStorei(S.UNPACK_SKIP_ROWS,N.min.y),S.pixelStorei(S.UNPACK_SKIP_IMAGES,N.min.z),ie.isDataTexture||ie.isData3DTexture?S.texSubImage3D(lt,be,Y.x,Y.y,Y.z,$e,Ye,je,et,ht,Rt.data):xe.isCompressedArrayTexture?S.compressedTexSubImage3D(lt,be,Y.x,Y.y,Y.z,$e,Ye,je,et,Rt.data):S.texSubImage3D(lt,be,Y.x,Y.y,Y.z,$e,Ye,je,et,ht,Rt),S.pixelStorei(S.UNPACK_ROW_LENGTH,dt),S.pixelStorei(S.UNPACK_IMAGE_HEIGHT,ut),S.pixelStorei(S.UNPACK_SKIP_PIXELS,si),S.pixelStorei(S.UNPACK_SKIP_ROWS,pi),S.pixelStorei(S.UNPACK_SKIP_IMAGES,ei),be===0&&xe.generateMipmaps&&S.generateMipmap(lt),ne.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?Re.setTextureCube(N,0):N.isData3DTexture?Re.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Re.setTexture2DArray(N,0):Re.setTexture2D(N,0),ne.unbindTexture()},this.resetState=function(){Q=0,G=0,U=null,ne.reset(),R.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Io}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Ld?"display-p3":"srgb",t.unpackColorSpace=Ht.workingColorSpace===ic?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Ar extends ii{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new zn,this.environmentIntensity=1,this.environmentRotation=new zn,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class _M{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=km,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ts()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return fb("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ts()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ts()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const an=new le;class Df{constructor(e,t,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)an.fromBufferAttribute(this,t),an.applyMatrix4(e),this.setXYZ(t,an.x,an.y,an.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)an.fromBufferAttribute(this,t),an.applyNormalMatrix(e),this.setXYZ(t,an.x,an.y,an.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)an.fromBufferAttribute(this,t),an.transformDirection(e),this.setXYZ(t,an.x,an.y,an.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Jn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Wt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Jn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Jn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Jn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Jn(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wt(t,this.array),i=Wt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wt(t,this.array),i=Wt(i,this.array),n=Wt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wt(t,this.array),i=Wt(i,this.array),n=Wt(n,this.array),r=Wt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[n+r])}return new ui(new this.array.constructor(t),this.itemSize,this.normalized)}return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Df(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[n+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const hv=new le,dv=new Jt,uv=new Jt,SM=new le,pv=new yt,Xc=new le,zu=new Hn,mv=new yt,Hu=new nc;class CM extends Zt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=wA,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new hn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Xc),this.boundingBox.expandByPoint(Xc)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Xc),this.boundingSphere.expandByPoint(Xc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,n=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zu.copy(this.boundingSphere),zu.applyMatrix4(n),e.ray.intersectsSphere(zu)!==!1&&(mv.copy(n).invert(),Hu.copy(e.ray).applyMatrix4(mv),this.boundingBox!==null&&Hu.intersectsBox(this.boundingBox)===!1||this._computeIntersections(e,t,Hu)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jt,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===wA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,n=this.geometry;dv.fromBufferAttribute(n.attributes.skinIndex,e),uv.fromBufferAttribute(n.attributes.skinWeight,e),hv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=uv.getComponent(r);if(a!==0){const o=dv.getComponent(r);pv.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(SM.copy(hv).applyMatrix4(pv),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Lb extends ii{constructor(){super(),this.isBone=!0,this.type="Bone"}}class sc extends qt{constructor(e=null,t=1,i=1,n,r,a,o,c,h=1003,d=1003,u,m){super(null,a,o,c,h,d,n,r,u,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fv=new yt,IM=new yt;class Pf{constructor(e=[],t=[]){this.uuid=ts(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new yt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const o=e[r]?e[r].matrixWorld:IM;fv.multiplyMatrices(o,t[r]),fv.toArray(i,16*r)}n!==null&&(n.needsUpdate=!0)}clone(){return new Pf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new sc(t,e,e,gi,Ti);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const r=e.bones[i];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new Lb),this.bones.push(a),this.boneInverses.push(new yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,r=t.length;n<r;n++){const a=t[n];e.bones.push(a.uuid);const o=i[n];e.boneInverses.push(o.toArray())}return e}}class zm extends ui{constructor(e,t,i,n=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qa=new yt,gv=new yt,Yc=[],Av=new hn,MM=new yt,tl=new Zt,il=new Hn;class TM extends Zt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zm(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<i;n++)this.setMatrixAt(n,MM)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new hn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Qa),Av.copy(e.boundingBox).applyMatrix4(Qa),this.boundingBox.union(Av)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Qa),il.copy(e.boundingSphere).applyMatrix4(Qa),this.boundingSphere.union(il)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,n=this.morphTexture.source.data.data,r=e*(i.length+1)+1;for(let a=0;a<i.length;a++)i[a]=n[r+a]}raycast(e,t){const i=this.matrixWorld,n=this.count;if(tl.geometry=this.geometry,tl.material=this.material,tl.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),il.copy(this.boundingSphere),il.applyMatrix4(i),e.ray.intersectsSphere(il)!==!1))for(let r=0;r<n;r++){this.getMatrixAt(r,Qa),gv.multiplyMatrices(i,Qa),tl.matrixWorld=gv,tl.raycast(e,Yc);for(let a=0,o=Yc.length;a<o;a++){const c=Yc[a];c.instanceId=r,c.object=this,t.push(c)}Yc.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new zm(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,n=i.length+1;this.morphTexture===null&&(this.morphTexture=new sc(new Float32Array(n*this.count),n,this.count,ta,Ti));const r=this.morphTexture.source.data.data;let a=0;for(let h=0;h<i.length;h++)a+=i[h];const o=this.geometry.morphTargetsRelative?1:1-a,c=n*e;r[c]=o,r.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class Db extends is{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new At(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vv=new le,yv=new le,wv=new yt,Gu=new nc,Kc=new Hn;class Nf extends ii{constructor(e=new Sn,t=new Db){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let n=1,r=t.count;n<r;n++)vv.fromBufferAttribute(t,n-1),yv.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=vv.distanceTo(yv);e.setAttribute("lineDistance",new _n(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Kc.copy(i.boundingSphere),Kc.applyMatrix4(n),Kc.radius+=r,e.ray.intersectsSphere(Kc)===!1)return;wv.copy(n).invert(),Gu.copy(e.ray).applyMatrix4(wv);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=new le,d=new le,u=new le,m=new le,g=this.isLineSegments?2:1,y=i.index,E=i.attributes.position;if(y!==null)for(let b=Math.max(0,a.start),C=Math.min(y.count,a.start+a.count)-1;b<C;b+=g){const B=y.getX(b),I=y.getX(b+1);if(h.fromBufferAttribute(E,B),d.fromBufferAttribute(E,I),Gu.distanceSqToSegment(h,d,m,u)>c)continue;m.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(m);k<e.near||k>e.far||t.push({distance:k,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(let b=Math.max(0,a.start),C=Math.min(E.count,a.start+a.count)-1;b<C;b+=g){if(h.fromBufferAttribute(E,b),d.fromBufferAttribute(E,b+1),Gu.distanceSqToSegment(h,d,m,u)>c)continue;m.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(m);B<e.near||B>e.far||t.push({distance:B,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,r=i.length;n<r;n++){const a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}}const bv=new le,Ev=new le;class BM extends Nf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let n=0,r=t.count;n<r;n+=2)bv.fromBufferAttribute(t,n),Ev.fromBufferAttribute(t,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+bv.distanceTo(Ev);e.setAttribute("lineDistance",new _n(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class RM extends Nf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Pb extends is{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const xv=new yt,Hm=new nc,Jc=new Hn,Zc=new le;class LM extends ii{constructor(e=new Sn,t=new Pb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jc.copy(i.boundingSphere),Jc.applyMatrix4(n),Jc.radius+=r,e.ray.intersectsSphere(Jc)===!1)return;xv.copy(n).invert(),Hm.copy(e.ray).applyMatrix4(xv);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=i.index,d=i.attributes.position;if(h!==null)for(let u=Math.max(0,a.start),m=Math.min(h.count,a.start+a.count);u<m;u++){const g=h.getX(u);Zc.fromBufferAttribute(d,g),_v(Zc,g,c,n,e,t,this)}else for(let u=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count);u<m;u++)Zc.fromBufferAttribute(d,u),_v(Zc,u,c,n,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,r=i.length;n<r;n++){const a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}}function _v(s,e,t,i,n,r,a){const o=Hm.distanceSqToPoint(s);if(o<t){const c=new le;Hm.closestPointToPoint(s,c),c.applyMatrix4(i);const h=n.ray.origin.distanceTo(c);if(h<n.near||h>n.far)return;r.push({distance:h,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,object:a})}}class DM extends qt{constructor(e,t,i,n,r,a,o,c,h){super(e,t,i,n,r,a,o,c,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Ut,this.magFilter=r!==void 0?r:Ut,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sa extends qt{constructor(e,t,i,n,r,a,o,c,h,d,u,m){super(null,a,o,c,h,d,n,r,u,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class PM extends sa{constructor(e,t,i,n,r,a){super(e,t,i,r,a),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=Mi}}class NM extends sa{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,oa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Nb extends qt{constructor(e,t,i,n,r,a,o,c,h){super(e,t,i,n,r,a,o,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ff extends Sn{constructor(e=1,t=32,i=16,n=0,r=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(a+o,Math.PI);let h=0;const d=[],u=new le,m=new le,g=[],y=[],E=[],b=[];for(let C=0;C<=i;C++){const B=[],I=C/i;let k=0;C===0&&a===0?k=.5/t:C===i&&c===Math.PI&&(k=-.5/t);for(let Q=0;Q<=t;Q++){const G=Q/t;u.x=-e*Math.cos(n+G*r)*Math.sin(a+I*o),u.y=e*Math.cos(a+I*o),u.z=e*Math.sin(n+G*r)*Math.sin(a+I*o),y.push(u.x,u.y,u.z),m.copy(u).normalize(),E.push(m.x,m.y,m.z),b.push(G+k,1-I),B.push(h++)}d.push(B)}for(let C=0;C<i;C++)for(let B=0;B<t;B++){const I=d[C][B+1],k=d[C][B],Q=d[C+1][B],G=d[C+1][B+1];(C!==0||a>0)&&g.push(I,k,G),(C!==i-1||c<Math.PI)&&g.push(k,Q,G)}this.setIndex(g),this.setAttribute("position",new _n(y,3)),this.setAttribute("normal",new _n(E,3)),this.setAttribute("uv",new _n(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ff(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Gl extends is{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new At(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zn,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ws extends Gl{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new vt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new At(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new At(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new At(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function eh(s,e,t){return!s||!t&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)}function FM(s){const e=s.length,t=new Array(e);for(let i=0;i!==e;++i)t[i]=i;return t.sort(function(i,n){return s[i]-s[n]}),t}function Sv(s,e,t){const i=s.length,n=new s.constructor(i);for(let r=0,a=0;a!==i;++r){const o=t[r]*e;for(let c=0;c!==e;++c)n[a++]=s[o+c]}return n}function Fb(s,e,t,i){let n=1,r=s[0];for(;r!==void 0&&r[i]===void 0;)r=s[n++];if(r===void 0)return;let a=r[i];if(a!==void 0)if(Array.isArray(a))do a=r[i],a!==void 0&&(e.push(r.time),t.push.apply(t,a)),r=s[n++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[i],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=s[n++];while(r!==void 0);else do a=r[i],a!==void 0&&(e.push(r.time),t.push(a)),r=s[n++];while(r!==void 0)}class rc{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let a;i:{n:if(!(e<n)){for(let o=i+2;;){if(n===void 0){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=n,n=t[++i],e<n)break t}a=t.length;break i}if(e>=r)break e;{const o=t[1];e<o&&(i=2,r=o);for(let c=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(n=r,r=t[--i-1],e>=r)break t}a=i,i=0}}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(n=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let a=0;a!==n;++a)t[a]=i[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kM extends rc{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:uo,endingEnd:uo}}intervalChanged_(e,t,i){const n=this.parameterPositions;let r=e-2,a=e+1,o=n[r],c=n[a];if(o===void 0)switch(this.getSettings_().endingStart){case po:r=e,o=2*t-i;break;case ad:r=n.length-2,o=t+n[r]-n[r+1];break;default:r=e,o=i}if(c===void 0)switch(this.getSettings_().endingEnd){case po:a=e,c=2*i-t;break;case ad:a=1,c=i+n[1]-n[0];break;default:a=e-1,c=t}const h=.5*(i-t),d=this.valueSize;this._weightPrev=h/(t-o),this._weightNext=h/(c-i),this._offsetPrev=r*d,this._offsetNext=a*d}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,h=c-o,d=this._offsetPrev,u=this._offsetNext,m=this._weightPrev,g=this._weightNext,y=(i-t)/(n-t),E=y*y,b=E*y,C=-m*b+2*m*E-m*y,B=(1+m)*b+(-1.5-2*m)*E+(-.5+m)*y+1,I=(-1-g)*b+(1.5+g)*E+.5*y,k=g*b-g*E;for(let Q=0;Q!==o;++Q)r[Q]=C*a[d+Q]+B*a[h+Q]+I*a[c+Q]+k*a[u+Q];return r}}class kb extends rc{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,h=c-o,d=(i-t)/(n-t),u=1-d;for(let m=0;m!==o;++m)r[m]=a[h+m]*u+a[c+m]*d;return r}}class OM extends rc{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class As{constructor(e,t,i,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eh(t,this.TimeBufferType),this.values=eh(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:eh(e.times,Array),values:eh(e.values,Array)};const n=e.getInterpolation();n!==e.DefaultInterpolation&&(i.interpolation=n)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new OM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kM(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Co:t=this.InterpolantFactoryMethodDiscrete;break;case ca:t=this.InterpolantFactoryMethodLinear;break;case fu:t=this.InterpolantFactoryMethodSmooth}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Co;case this.InterpolantFactoryMethodLinear:return ca;case this.InterpolantFactoryMethodSmooth:return fu}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let r=0,a=n-1;for(;r!==n&&i[r]<e;)++r;for(;a!==-1&&i[a]>t;)--a;if(++a,r!==0||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);const o=this.getValueSize();this.times=i.slice(r,a),this.values=this.values.slice(r*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let c=0;c!==r;c++){const h=i[c];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,h),e=!1;break}if(a!==null&&a>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,h,a),e=!1;break}a=h}if(n!==void 0&&(o=n,ArrayBuffer.isView(o)&&!(o instanceof DataView)))for(let c=0,h=n.length;c!==h;++c){const d=n[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}var o;return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),n=this.getInterpolation()===fu,r=e.length-1;let a=1;for(let o=1;o<r;++o){let c=!1;const h=e[o];if(h!==e[o+1]&&(o!==1||h!==e[0]))if(n)c=!0;else{const d=o*i,u=d-i,m=d+i;for(let g=0;g!==i;++g){const y=t[d+g];if(y!==t[u+g]||y!==t[m+g]){c=!0;break}}}if(c){if(o!==a){e[a]=e[o];const d=o*i,u=a*i;for(let m=0;m!==i;++m)t[u+m]=t[d+m]}++a}}if(r>0){e[a]=e[r];for(let o=r*i,c=a*i,h=0;h!==i;++h)t[c+h]=t[o+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=new this.constructor(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}As.prototype.TimeBufferType=Float32Array,As.prototype.ValueBufferType=Float32Array,As.prototype.DefaultInterpolation=ca;class oo extends As{}oo.prototype.ValueTypeName="bool",oo.prototype.ValueBufferType=Array,oo.prototype.DefaultInterpolation=Co,oo.prototype.InterpolantFactoryMethodLinear=void 0,oo.prototype.InterpolantFactoryMethodSmooth=void 0;class Ob extends As{}Ob.prototype.ValueTypeName="color";class Bo extends As{}Bo.prototype.ValueTypeName="number";class UM extends rc{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=(i-t)/(n-t);let h=e*o;for(let d=h+o;h!==d;h+=4)xn.slerpFlat(r,0,a,h-o,a,h,c);return r}}class ra extends As{InterpolantFactoryMethodLinear(e){return new UM(this.times,this.values,this.getValueSize(),e)}}ra.prototype.ValueTypeName="quaternion",ra.prototype.DefaultInterpolation=ca,ra.prototype.InterpolantFactoryMethodSmooth=void 0;class lo extends As{}lo.prototype.ValueTypeName="string",lo.prototype.ValueBufferType=Array,lo.prototype.DefaultInterpolation=Co,lo.prototype.InterpolantFactoryMethodLinear=void 0,lo.prototype.InterpolantFactoryMethodSmooth=void 0;class Ro extends As{}Ro.prototype.ValueTypeName="vector";class Gm{constructor(e="",t=-1,i=[],n=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=ts(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(QM(i[a]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=i.length;r!==a;++r)t.push(As.toJSON(i[r]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const r=t.length,a=[];for(let o=0;o<r;o++){let c=[],h=[];c.push((o+r-1)%r,o,(o+1)%r),h.push(0,1,0);const d=FM(c);c=Sv(c,1,d),h=Sv(h,1,d),n||c[0]!==0||(c.push(r),h.push(h[0])),a.push(new Bo(".morphTargetInfluences["+t[o].name+"]",c,h).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const n=e;i=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const h=e[o],d=h.name.match(r);if(d&&d.length>1){const u=d[1];let m=n[u];m||(n[u]=m=[]),m.push(h)}}const a=[];for(const o in n)a.push(this.CreateFromMorphTargetSequence(o,n[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,u,m,g,y){if(m.length!==0){const E=[],b=[];Fb(m,E,b,g),E.length!==0&&y.push(new d(u,E,b))}},n=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let d=0;d<h.length;d++){const u=h[d].keys;if(u&&u.length!==0)if(u[0].morphTargets){const m={};let g;for(g=0;g<u.length;g++)if(u[g].morphTargets)for(let y=0;y<u[g].morphTargets.length;y++)m[u[g].morphTargets[y]]=-1;for(const y in m){const E=[],b=[];for(let C=0;C!==u[g].morphTargets.length;++C){const B=u[g];E.push(B.time),b.push(B.morphTarget===y?1:0)}n.push(new Bo(".morphTargetInfluence["+y+"]",E,b))}c=m.length*a}else{const m=".bones["+t[d].name+"]";i(Ro,m+".position",u,"pos",n),i(ra,m+".quaternion",u,"rot",n),i(Ro,m+".scale",u,"scl",n)}}return n.length===0?null:new this(r,c,n,o)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QM(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bo;case"vector":case"vector2":case"vector3":case"vector4":return Ro;case"color":return Ob;case"quaternion":return ra;case"bool":case"boolean":return oo;case"string":return lo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(s.type);if(s.times===void 0){const t=[],i=[];Fb(s.keys,t,i,"value"),s.times=t,s.values=i}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const pr={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class Ub{constructor(e,t,i){const n=this;let r,a=!1,o=0,c=0;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){c++,a===!1&&n.onStart!==void 0&&n.onStart(d,o,c),a=!0},this.itemEnd=function(d){o++,n.onProgress!==void 0&&n.onProgress(d,o,c),o===c&&(a=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(d){n.onError!==void 0&&n.onError(d)},this.resolveURL=function(d){return r?r(d):d},this.setURLModifier=function(d){return r=d,this},this.addHandler=function(d,u){return h.push(d,u),this},this.removeHandler=function(d){const u=h.indexOf(d);return u!==-1&&h.splice(u,2),this},this.getHandler=function(d){for(let u=0,m=h.length;u<m;u+=2){const g=h[u],y=h[u+1];if(g.global&&(g.lastIndex=0),g.test(d))return y}return null}}}const zM=new Ub;class bs{constructor(e){this.manager=e!==void 0?e:zM,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(n,r){i.load(e,n,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}bs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ls={};class HM extends Error{constructor(e,t){super(e),this.response=t}}class $s extends bs{constructor(e){super(e)}load(e,t,i,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=pr.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Ls[e]!==void 0)return void Ls[e].push({onLoad:t,onProgress:i,onError:n});Ls[e]=[],Ls[e].push({onLoad:t,onProgress:i,onError:n});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const d=Ls[e],u=h.body.getReader(),m=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),g=m?parseInt(m):0,y=g!==0;let E=0;const b=new ReadableStream({start(C){(function B(){u.read().then(({done:I,value:k})=>{if(I)C.close();else{E+=k.byteLength;const Q=new ProgressEvent("progress",{lengthComputable:y,loaded:E,total:g});for(let G=0,U=d.length;G<U;G++){const te=d[G];te.onProgress&&te.onProgress(Q)}C.enqueue(k),B()}})})()}});return new Response(b)}throw new HM(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return h.json();default:if(o===void 0)return h.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),u=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(u);return h.arrayBuffer().then(g=>m.decode(g))}}}).then(h=>{pr.add(e,h);const d=Ls[e];delete Ls[e];for(let u=0,m=d.length;u<m;u++){const g=d[u];g.onLoad&&g.onLoad(h)}}).catch(h=>{const d=Ls[e];if(d===void 0)throw this.manager.itemError(e),h;delete Ls[e];for(let u=0,m=d.length;u<m;u++){const g=d[u];g.onError&&g.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class GM extends bs{constructor(e){super(e)}load(e,t,i,n){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=pr.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const o=Hl("img");function c(){d(),pr.add(e,this),t&&t(this),r.manager.itemEnd(e)}function h(u){d(),n&&n(u),r.manager.itemError(e),r.manager.itemEnd(e)}function d(){o.removeEventListener("load",c,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}class VM extends bs{constructor(e){super(e)}load(e,t,i,n){const r=this,a=new sc,o=new $s(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(c){let h;try{h=r.parse(c)}catch(d){if(n===void 0)return void console.error(d);n(d)}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Mi,a.wrapT=h.wrapT!==void 0?h.wrapT:Mi,a.magFilter=h.magFilter!==void 0?h.magFilter:Ut,a.minFilter=h.minFilter!==void 0?h.minFilter:Ut,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=kn),h.mipmapCount===1&&(a.minFilter=Ut),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},i,n),a}}class Qb extends bs{constructor(e){super(e)}load(e,t,i,n){const r=new qt,a=new GM(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){r.image=o,r.needsUpdate=!0,t!==void 0&&t(r)},i,n),r}}class Pd extends ii{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new At(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const Vu=new yt,Cv=new le,Iv=new le;class kf{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new vt(512,512),this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bf,this._frameExtents=new vt(1,1),this._viewportCount=1,this._viewports=[new Jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Cv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Cv),Iv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Iv),t.updateMatrixWorld(),Vu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vu),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Vu)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $M extends kf{constructor(){super(new Ui(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Mo*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WM extends Pd{constructor(e,t,i=0,n=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.distance=i,this.angle=n,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new $M}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Mv=new yt,nl=new le,$u=new le;class qM extends kf{constructor(){super(new Ui(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new vt(4,2),this._viewportCount=6,this._viewports=[new Jt(2,1,1,1),new Jt(0,1,1,1),new Jt(3,1,1,1),new Jt(1,1,1,1),new Jt(3,0,1,1),new Jt(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),nl.setFromMatrixPosition(e.matrixWorld),i.position.copy(nl),$u.copy(i.position),$u.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt($u),i.updateMatrixWorld(),n.makeTranslation(-nl.x,-nl.y,-nl.z),Mv.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mv)}}class zb extends Pd{constructor(e,t,i=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new qM}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class jM extends kf{constructor(){super(new ko(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Hb extends Pd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.shadow=new jM}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class XM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*n),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],i*n*1.092548),t.addScaledVector(a[5],n*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],i*r*1.092548),t.addScaledVector(a[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*n),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*i),t.addScaledVector(a[4],.858086*i*n),t.addScaledVector(a[5],.858086*n*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*i*r),t.addScaledVector(a[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}class YM extends Pd{constructor(e=new XM,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class kl{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class KM extends bs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=pr.get(e);if(a!==void 0)return r.manager.itemStart(e),a.then?void a.then(h=>{t&&t(h),r.manager.itemEnd(e)}).catch(h=>{n&&n(h)}):(setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a);const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const c=fetch(e,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(h){return pr.add(e,h),t&&t(h),r.manager.itemEnd(e),h}).catch(function(h){n&&n(h),pr.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});pr.add(e,c),r.manager.itemStart(e)}}class JM{constructor(e,t,i){let n,r,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,r=e*n+n;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==n;++o)i[r+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,r,0,o,n)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const c=t*this._origIndex;this._mixBufferRegion(i,n,c,1-r,t)}a>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(i[c]!==i[c+t]){o.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let r=i,a=n;r!==a;++r)t[r]=t[n+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,r){if(n>=.5)for(let a=0;a!==r;++a)e[t+a]=e[i+a]}_slerp(e,t,i,n){xn.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){const a=this._workIndex*r;xn.multiplyQuaternionsFlat(e,a,e,t,e,i),xn.slerpFlat(e,t,e,t,e,a,n)}_lerp(e,t,i,n,r){const a=1-n;for(let o=0;o!==r;++o){const c=t+o;e[c]=e[c]*a+e[i+o]*n}}_lerpAdditive(e,t,i,n,r){for(let a=0;a!==r;++a){const o=t+a;e[o]=e[o]+e[i+a]*n}}}const Of="\\[\\]\\.:\\/",ZM=new RegExp("["+Of+"]","g"),Wu="[^"+Of+"]",eT="[^"+Of.replace("\\.","")+"]",tT=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Wu)+/(WCOD+)?/.source.replace("WCOD",eT)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wu)+"$"),iT=["material","materials","bones","map"];class Ft{constructor(e,t,i){this.path=t,this.parsedPath=i||Ft.parseTrackName(t),this.node=Ft.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ft.Composite(e,t,i):new Ft(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ZM,"")}static parseTrackName(e){const t=tT.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const r=i.nodeName.substring(n+1);iT.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let a=0;a<r.length;a++){const o=r[a];if(o.name===t||o.uuid===t)return o;const c=i(o.children);if(c)return c}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=Ft.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===h){h=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(e[i]===void 0)return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(h!==void 0){if(e[h]===void 0)return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[h]}}const a=e[n];if(a===void 0){const h=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+n+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ft.Composite=class{constructor(s,e,t){const i=t||Ft.parseTrackName(e);this._targetGroup=s,this._bindings=s.subscribe_(e,i)}getValue(s,e){this.bind();const t=this._targetGroup.nCachedObjects_,i=this._bindings[t];i!==void 0&&i.getValue(s,e)}setValue(s,e){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=t.length;i!==n;++i)t[i].setValue(s,e)}bind(){const s=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=s.length;e!==t;++e)s[e].bind()}unbind(){const s=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=s.length;e!==t;++e)s[e].unbind()}},Ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ft.prototype.GetterByBindingType=[Ft.prototype._getValue_direct,Ft.prototype._getValue_array,Ft.prototype._getValue_arrayElement,Ft.prototype._getValue_toArray],Ft.prototype.SetterByBindingTypeAndVersioning=[[Ft.prototype._setValue_direct,Ft.prototype._setValue_direct_setNeedsUpdate,Ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_array,Ft.prototype._setValue_array_setNeedsUpdate,Ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_arrayElement,Ft.prototype._setValue_arrayElement_setNeedsUpdate,Ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_fromArray,Ft.prototype._setValue_fromArray_setNeedsUpdate,Ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nT{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const r=t.tracks,a=r.length,o=new Array(a),c={endingStart:uo,endingEnd:uo};for(let h=0;h!==a;++h){const d=r[h].createInterpolant(null);o[h]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pb,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const n=this._clip.duration,r=e._clip.duration,a=r/n,o=n/r;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,r=n.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,h=o.sampleValues;return c[0]=r,c[1]=r+i,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(r!==null){const c=(e-r)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,h=this._propertyBindings;if(this.blendMode===2501)for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(a),h[d].accumulateAdditive(o);else for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(a),h[d].accumulate(n,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,r=this._loopCount;const a=i===Cf;if(e===0)return r===-1||!a||1&~r?n:t-n;if(i===2200){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),n>=t||n<0){const o=Math.floor(n/t);n-=t*o,r+=Math.abs(o);const c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=n;if(a&&!(1&~r))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=po,n.endingEnd=po):(n.endingStart=e?this.zeroSlopeAtStart?po:uo:ad,n.endingEnd=t?this.zeroSlopeAtEnd?po:uo:ad)}_scheduleFading(e,t,i){const n=this._mixer,r=n.time;let a=this._weightInterpolant;a===null&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,c=a.sampleValues;return o[0]=r,c[0]=t,o[1]=r+e,c[1]=i,this}}const sT=new Float32Array(1);class rT extends rs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings,o=e._interpolants,c=i.uuid,h=this._bindingsByRootAndName;let d=h[c];d===void 0&&(d={},h[c]=d);for(let u=0;u!==r;++u){const m=n[u],g=m.name;let y=d[g];if(y!==void 0)++y.referenceCount,a[u]=y;else{if(y=a[u],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,c,g));continue}const E=t&&t._propertyBindings[u].binding.parsedPath;y=new JM(Ft.create(i,g,E),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,c,g),a[u]=y}o[u].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,i)}const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const r=t[i];r.useCount++==0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const r=t[i];--r.useCount==0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],c=o.knownActions,h=c[c.length-1],d=e._byClipCacheIndex;h._byClipCacheIndex=d,c[d]=h,c.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],c.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const r=t[i];--r.referenceCount==0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,r=this._bindings;let a=n[t];a===void 0&&(a={},n[t]=a),a[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,o=a[n],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete o[r],Object.keys(o).length===0&&delete a[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new kb(new Float32Array(2),new Float32Array(2),1,sT),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const n=t||this._root,r=n.uuid;let a=typeof e=="string"?Gm.findByName(n,e):e;const o=a!==null?a.uuid:e,c=this._actionsByClip[o];let h=null;if(i===void 0&&(i=a!==null?a.blendMode:p1),c!==void 0){const u=c.actionByRoot[r];if(u!==void 0&&u.blendMode===i)return u;h=c.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const d=new nT(this,a,t,i);return this._bindAction(d,h),this._addInactiveAction(d,o,r),d}existingAction(e,t){const i=t||this._root,n=i.uuid,r=typeof e=="string"?Gm.findByName(i,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(n,e,r,a);const o=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)o[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(r!==void 0){const a=r.knownActions;for(let o=0,c=a.length;o!==c;++o){const h=a[o];this._deactivateAction(h);const d=h._cacheIndex,u=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,u._cacheIndex=d,t[d]=u,t.pop(),this._removeInactiveBindingsForAction(h)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const r in i){const a=i[r].actionByRoot[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const n=this._bindingsByRootAndName[t];if(n!==void 0)for(const r in n){const a=n[r];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Uf{constructor(e){this.value=e}clone(){return new Uf(this.value.clone===void 0?this.value:this.value.clone())}}const Tv=new yt;function Bv(s,e){return s.distance-e.distance}function Vm(s,e,t,i){if(s.layers.test(e.layers)&&s.raycast(e,t),i===!0){const n=s.children;for(let r=0,a=n.length;r<a;r++)Vm(n[r],e,t,!0)}}class Qh{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Oi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rm}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rm);const zh=window,Qf=zh.ShadowRoot&&(zh.ShadyCSS===void 0||zh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Gb=Symbol(),Rv=new WeakMap;class aT{constructor(e,t,i){if(this._$cssResult$=!0,i!==Gb)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Qf&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=Rv.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Rv.set(t,e))}return e}toString(){return this.cssText}}const Lv=Qf?s=>s:s=>s instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(i=>new aT(typeof i=="string"?i:i+"",void 0,Gb))(t)})(s):s;var qu;const dd=window,Dv=dd.trustedTypes,oT=Dv?Dv.emptyScript:"",Pv=dd.reactiveElementPolyfillSupport,$m={toAttribute(s,e){switch(e){case Boolean:s=s?oT:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,e){let t=s;switch(e){case Boolean:t=s!==null;break;case Number:t=s===null?null:Number(s);break;case Object:case Array:try{t=JSON.parse(s)}catch{t=null}}return t}},Vb=(s,e)=>e!==s&&(e==e||s==s),ju={attribute:!0,type:String,converter:$m,reflect:!1,hasChanged:Vb},Wm="finalized";class sl extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const n=this._$Ep(i,t);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,t=ju){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||ju}static finalize(){if(this.hasOwnProperty(Wm))return!1;this[Wm]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of i)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)t.unshift(Lv(n))}else e!==void 0&&t.push(Lv(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return((i,n)=>{Qf?i.adoptedStyleSheets=n.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):n.forEach(r=>{const a=document.createElement("style"),o=zh.litNonce;o!==void 0&&a.setAttribute("nonce",o),a.textContent=r.cssText,i.appendChild(a)})})(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=ju){var n;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const a=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:$m).toAttribute(t,i.type);this._$El=e,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(r!==void 0&&this._$El!==r){const a=n.getPropertyOptions(r),o=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?a.converter:$m;this._$El=r,this[r]=o.fromAttribute(t,a.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Vb)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(i)):this._$Ek()}catch(n){throw t=!1,this._$Ek(),n}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Xu;sl[Wm]=!0,sl.elementProperties=new Map,sl.elementStyles=[],sl.shadowRootOptions={mode:"open"},Pv==null||Pv({ReactiveElement:sl}),((qu=dd.reactiveElementVersions)!==null&&qu!==void 0?qu:dd.reactiveElementVersions=[]).push("1.6.3");const ud=window,Lo=ud.trustedTypes,Nv=Lo?Lo.createPolicy("lit-html",{createHTML:s=>s}):void 0,qm="$lit$",dr=`lit$${(Math.random()+"").slice(9)}$`,$b="?"+dr,lT=`<${$b}>`,ha=document,Vl=()=>ha.createComment(""),$l=s=>s===null||typeof s!="object"&&typeof s!="function",Fv=Array.isArray,Yu=`[ 	
\f\r]`,rl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,kv=/-->/g,Ov=/>/g,Pr=RegExp(`>|${Yu}(?:([^\\s"'>=/]+)(${Yu}*=${Yu}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Uv=/'/g,Qv=/"/g,Wb=/^(?:script|style|textarea|title)$/i,th=(s=>(e,...t)=>({_$litType$:s,strings:e,values:t}))(1),Do=Symbol.for("lit-noChange"),Qi=Symbol.for("lit-nothing"),zv=new WeakMap,ia=ha.createTreeWalker(ha,129,null,!1);function qb(s,e){if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return Nv!==void 0?Nv.createHTML(e):e}const cT=(s,e)=>{const t=s.length-1,i=[];let n,r=e===2?"<svg>":"",a=rl;for(let o=0;o<t;o++){const c=s[o];let h,d,u=-1,m=0;for(;m<c.length&&(a.lastIndex=m,d=a.exec(c),d!==null);)m=a.lastIndex,a===rl?d[1]==="!--"?a=kv:d[1]!==void 0?a=Ov:d[2]!==void 0?(Wb.test(d[2])&&(n=RegExp("</"+d[2],"g")),a=Pr):d[3]!==void 0&&(a=Pr):a===Pr?d[0]===">"?(a=n??rl,u=-1):d[1]===void 0?u=-2:(u=a.lastIndex-d[2].length,h=d[1],a=d[3]===void 0?Pr:d[3]==='"'?Qv:Uv):a===Qv||a===Uv?a=Pr:a===kv||a===Ov?a=rl:(a=Pr,n=void 0);const g=a===Pr&&s[o+1].startsWith("/>")?" ":"";r+=a===rl?c+lT:u>=0?(i.push(h),c.slice(0,u)+qm+c.slice(u)+dr+g):c+dr+(u===-2?(i.push(void 0),o):g)}return[qb(s,r+(s[t]||"<?>")+(e===2?"</svg>":"")),i]};class Wl{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let r=0,a=0;const o=e.length-1,c=this.parts,[h,d]=cT(e,t);if(this.el=Wl.createElement(h,i),ia.currentNode=this.el.content,t===2){const u=this.el.content,m=u.firstChild;m.remove(),u.append(...m.childNodes)}for(;(n=ia.nextNode())!==null&&c.length<o;){if(n.nodeType===1){if(n.hasAttributes()){const u=[];for(const m of n.getAttributeNames())if(m.endsWith(qm)||m.startsWith(dr)){const g=d[a++];if(u.push(m),g!==void 0){const y=n.getAttribute(g.toLowerCase()+qm).split(dr),E=/([.?@])?(.*)/.exec(g);c.push({type:1,index:r,name:E[2],strings:y,ctor:E[1]==="."?dT:E[1]==="?"?pT:E[1]==="@"?mT:Nd})}else c.push({type:6,index:r})}for(const m of u)n.removeAttribute(m)}if(Wb.test(n.tagName)){const u=n.textContent.split(dr),m=u.length-1;if(m>0){n.textContent=Lo?Lo.emptyScript:"";for(let g=0;g<m;g++)n.append(u[g],Vl()),ia.nextNode(),c.push({type:2,index:++r});n.append(u[m],Vl())}}}else if(n.nodeType===8)if(n.data===$b)c.push({type:2,index:r});else{let u=-1;for(;(u=n.data.indexOf(dr,u+1))!==-1;)c.push({type:7,index:r}),u+=dr.length-1}r++}}static createElement(e,t){const i=ha.createElement("template");return i.innerHTML=e,i}}function Po(s,e,t=s,i){var n,r,a,o;if(e===Do)return e;let c=i!==void 0?(n=t._$Co)===null||n===void 0?void 0:n[i]:t._$Cl;const h=$l(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==h&&((r=c==null?void 0:c._$AO)===null||r===void 0||r.call(c,!1),h===void 0?c=void 0:(c=new h(s),c._$AT(s,t,i)),i!==void 0?((a=(o=t)._$Co)!==null&&a!==void 0?a:o._$Co=[])[i]=c:t._$Cl=c),c!==void 0&&(e=Po(s,c._$AS(s,e.values),c,i)),e}class hT{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:ha).importNode(i,!0);ia.currentNode=r;let a=ia.nextNode(),o=0,c=0,h=n[0];for(;h!==void 0;){if(o===h.index){let d;h.type===2?d=new ac(a,a.nextSibling,this,e):h.type===1?d=new h.ctor(a,h.name,h.strings,this,e):h.type===6&&(d=new fT(a,this,e)),this._$AV.push(d),h=n[++c]}o!==(h==null?void 0:h.index)&&(a=ia.nextNode(),o++)}return ia.currentNode=ha,r}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class ac{constructor(e,t,i,n){var r;this.type=2,this._$AH=Qi,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Po(this,e,t),$l(e)?e===Qi||e==null||e===""?(this._$AH!==Qi&&this._$AR(),this._$AH=Qi):e!==this._$AH&&e!==Do&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):(i=>Fv(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function")(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Qi&&$l(this._$AH)?this._$AA.nextSibling.data=e:this.$(ha.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Wl.createElement(qb(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.v(i);else{const a=new hT(r,this),o=a.u(this.options);a.v(i),this.$(o),this._$AH=a}}_$AC(e){let t=zv.get(e.strings);return t===void 0&&zv.set(e.strings,t=new Wl(e)),t}T(e){Fv(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new ac(this.k(Vl()),this.k(Vl()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class Nd{constructor(e,t,i,n,r){this.type=1,this._$AH=Qi,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Qi}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const r=this.strings;let a=!1;if(r===void 0)e=Po(this,e,t,0),a=!$l(e)||e!==this._$AH&&e!==Do,a&&(this._$AH=e);else{const o=e;let c,h;for(e=r[0],c=0;c<r.length-1;c++)h=Po(this,o[i+c],t,c),h===Do&&(h=this._$AH[c]),a||(a=!$l(h)||h!==this._$AH[c]),h===Qi?e=Qi:e!==Qi&&(e+=(h??"")+r[c+1]),this._$AH[c]=h}a&&!n&&this.j(e)}j(e){e===Qi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class dT extends Nd{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Qi?void 0:e}}const uT=Lo?Lo.emptyScript:"";class pT extends Nd{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Qi?this.element.setAttribute(this.name,uT):this.element.removeAttribute(this.name)}}class mT extends Nd{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=Po(this,e,t,0))!==null&&i!==void 0?i:Qi)===Do)return;const n=this._$AH,r=e===Qi&&n!==Qi||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==Qi&&(n===Qi||r);r&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class fT{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Po(this,e)}}const Hv=ud.litHtmlPolyfillSupport;Hv==null||Hv(Wl,ac),((Xu=ud.litHtmlVersions)!==null&&Xu!==void 0?Xu:ud.litHtmlVersions=[]).push("2.8.0");const jb=(s,e,t)=>{var i,n;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let a=r._$litPart$;if(a===void 0){const o=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:null;r._$litPart$=a=new ac(e.insertBefore(Vl(),o),o,void 0,t??{})}return a._$AI(s),a;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */},Hh=window,zf=Hh.ShadowRoot&&(Hh.ShadyCSS===void 0||Hh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Xb=Symbol(),Gv=new WeakMap;class gT{constructor(e,t,i){if(this._$cssResult$=!0,i!==Xb)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(zf&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=Gv.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Gv.set(t,e))}return e}toString(){return this.cssText}}const Vv=zf?s=>s:s=>s instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(i=>new gT(typeof i=="string"?i:i+"",void 0,Xb))(t)})(s):s;var Ku;const pd=window,$v=pd.trustedTypes,AT=$v?$v.emptyScript:"",Wv=pd.reactiveElementPolyfillSupport,jm={toAttribute(s,e){switch(e){case Boolean:s=s?AT:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,e){let t=s;switch(e){case Boolean:t=s!==null;break;case Number:t=s===null?null:Number(s);break;case Object:case Array:try{t=JSON.parse(s)}catch{t=null}}return t}},Yb=(s,e)=>e!==s&&(e==e||s==s),Ju={attribute:!0,type:String,converter:jm,reflect:!1,hasChanged:Yb},Xm="finalized";class Yr extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const n=this._$Ep(i,t);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,t=Ju){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Ju}static finalize(){if(this.hasOwnProperty(Xm))return!1;this[Xm]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of i)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)t.unshift(Vv(n))}else e!==void 0&&t.push(Vv(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return((i,n)=>{zf?i.adoptedStyleSheets=n.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):n.forEach(r=>{const a=document.createElement("style"),o=Hh.litNonce;o!==void 0&&a.setAttribute("nonce",o),a.textContent=r.cssText,i.appendChild(a)})})(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=Ju){var n;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const a=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:jm).toAttribute(t,i.type);this._$El=e,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(r!==void 0&&this._$El!==r){const a=n.getPropertyOptions(r),o=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?a.converter:jm;this._$El=r,this[r]=o.fromAttribute(t,a.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Yb)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(i)):this._$Ek()}catch(n){throw t=!1,this._$Ek(),n}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Zu,ep;Yr[Xm]=!0,Yr.elementProperties=new Map,Yr.elementStyles=[],Yr.shadowRootOptions={mode:"open"},Wv==null||Wv({ReactiveElement:Yr}),((Ku=pd.reactiveElementVersions)!==null&&Ku!==void 0?Ku:pd.reactiveElementVersions=[]).push("1.6.3");class Gh extends Yr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=jb(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Do}}Gh.finalized=!0,Gh._$litElement$=!0,(Zu=globalThis.litElementHydrateSupport)===null||Zu===void 0||Zu.call(globalThis,{LitElement:Gh});const qv=globalThis.litElementPolyfillSupport;qv==null||qv({LitElement:Gh}),((ep=globalThis.litElementVersions)!==null&&ep!==void 0?ep:globalThis.litElementVersions=[]).push("3.3.3");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,Jb=Kb&&self.XRSession.prototype.requestHitTestSource!=null,tp=self.ResizeObserver!=null,ip=self.IntersectionObserver!=null,Zb=Jb;(()=>{const s=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(s.substr(0,4))})();const vT=/android/i.test(navigator.userAgent),yT=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,wT=/firefox/i.test(navigator.userAgent),bT=/OculusBrowser/.test(navigator.userAgent),ET=vT&&!wT&&!bT,xT=!!(window.webkit&&window.webkit.messageHandlers),jv=(()=>{if(yT){if(xT)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const s=document.createElement("a");return!!(s.relList&&s.relList.supports&&s.relList.supports("ar"))}}return!1})(),eE=s=>s&&s!=="null"?_T(s):null,Xv=()=>{if(Zb)return;const s=[];throw Kb||s.push("WebXR Device API"),Jb||s.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${s.join(", ")}`)},_T=s=>new URL(s,window.location.toString()).toString(),Yv=(s,e)=>{let t=null;return(...i)=>{t!=null&&self.clearTimeout(t),t=self.setTimeout(()=>{t=null,s(...i)},e)}},ms=(s,e,t)=>Math.max(e,Math.min(t,s)),Ym=(()=>{const s=(()=>{var e;if(!((e=document.documentElement.getAttribute("itemtype"))===null||e===void 0)&&e.includes("schema.org/SearchResultsPage")||window.self!==window.top)return!0;const t=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(const i of t)if(i.name==="viewport")return!0;return!1})();return s||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>s?window.devicePixelRatio:1})(),Kv=(()=>{const s=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(s)})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const Il=Symbol("currentEnvironmentMap"),Vh=Symbol("currentBackground"),md=Symbol("updateEnvironment"),ih=Symbol("cancelEnvironmentUpdate");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=th`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${th`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${th`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${th`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,np=new WeakMap;function CT(){let s,e;function t(i,n,r,a,o,c){const h=c.num_components(),d=r.num_points()*h,u=d*o.BYTES_PER_ELEMENT,m=function(E,b){switch(b){case Float32Array:return E.DT_FLOAT32;case Int8Array:return E.DT_INT8;case Int16Array:return E.DT_INT16;case Int32Array:return E.DT_INT32;case Uint8Array:return E.DT_UINT8;case Uint16Array:return E.DT_UINT16;case Uint32Array:return E.DT_UINT32}}(i,o),g=i._malloc(u);n.GetAttributeDataArrayForAllPoints(r,c,m,u,g);const y=new o(i.HEAPF32.buffer,g,d).slice();return i._free(g),{name:a,array:y,itemSize:h}}onmessage=function(i){const n=i.data;switch(n.type){case"init":s=n.decoderConfig,e=new Promise(function(o){s.onModuleLoaded=function(c){o({draco:c})},DracoDecoderModule(s)});break;case"decode":const r=n.buffer,a=n.taskConfig;e.then(o=>{const c=o.draco,h=new c.Decoder;try{const d=function(m,g,y,E){const b=E.attributeIDs,C=E.attributeTypes;let B,I;const k=g.GetEncodedGeometryType(y);if(k===m.TRIANGULAR_MESH)B=new m.Mesh,I=g.DecodeArrayToMesh(y,y.byteLength,B);else{if(k!==m.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");B=new m.PointCloud,I=g.DecodeArrayToPointCloud(y,y.byteLength,B)}if(!I.ok()||B.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+I.error_msg());const Q={index:null,attributes:[]};for(const G in b){const U=self[C[G]];let te,ue;if(E.useUniqueIDs)ue=b[G],te=g.GetAttributeByUniqueId(B,ue);else{if(ue=g.GetAttributeId(B,m[b[G]]),ue===-1)continue;te=g.GetAttribute(B,ue)}const pe=t(m,g,B,G,U,te);G==="color"&&(pe.vertexColorSpace=E.vertexColorSpace),Q.attributes.push(pe)}return k===m.TRIANGULAR_MESH&&(Q.index=function(G,U,te){const ue=te.num_faces(),pe=3*ue,ce=4*pe,he=G._malloc(ce);U.GetTrianglesUInt32Array(te,ce,he);const Me=new Uint32Array(G.HEAPF32.buffer,he,pe).slice();return G._free(he),{array:Me,itemSize:1}}(m,g,B)),m.destroy(B),Q}(c,h,new Int8Array(r),a),u=d.attributes.map(m=>m.array.buffer);d.index&&u.push(d.index.array.buffer),self.postMessage({type:"decode",id:n.id,geometry:d},u)}catch(d){console.error(d),self.postMessage({type:"error",id:n.id,error:d.message})}finally{c.destroy(h)}})}}}function Jv(s,e){if(e===0)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(e===2||e===1){let t=s.getIndex();if(t===null){const a=[],o=s.getAttribute("position");if(o===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s;for(let c=0;c<o.count;c++)a.push(c);s.setIndex(a),t=s.getIndex()}const i=t.count-2,n=[];if(e===2)for(let a=1;a<=i;a++)n.push(t.getX(0)),n.push(t.getX(a)),n.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2==0?(n.push(t.getX(a)),n.push(t.getX(a+1)),n.push(t.getX(a+2))):(n.push(t.getX(a+2)),n.push(t.getX(a+1)),n.push(t.getX(a)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=s.clone();return r.setIndex(n),r.clearGroups(),r}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),s}class IT extends bs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new LT(t)}),this.register(function(t){return new zT(t)}),this.register(function(t){return new HT(t)}),this.register(function(t){return new GT(t)}),this.register(function(t){return new PT(t)}),this.register(function(t){return new NT(t)}),this.register(function(t){return new FT(t)}),this.register(function(t){return new kT(t)}),this.register(function(t){return new RT(t)}),this.register(function(t){return new OT(t)}),this.register(function(t){return new DT(t)}),this.register(function(t){return new QT(t)}),this.register(function(t){return new UT(t)}),this.register(function(t){return new TT(t)}),this.register(function(t){return new VT(t)}),this.register(function(t){return new $T(t)})}load(e,t,i,n){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const h=kl.extractUrlBase(e);a=kl.resolveURL(h,this.path)}else a=kl.extractUrlBase(e);this.manager.itemStart(e);const o=function(h){n?n(h):console.error(h),r.manager.itemError(e),r.manager.itemEnd(e)},c=new $s(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{r.parse(h,a,function(d){t(d),r.manager.itemEnd(e)},o)}catch(d){o(d)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){let r;const a={},o={},c=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===tE){try{a[Pt.KHR_BINARY_GLTF]=new jT(e)}catch(d){return void(n&&n(d))}r=JSON.parse(a[Pt.KHR_BINARY_GLTF].content)}else r=JSON.parse(c.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new lB(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](h);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,a[u.name]=!0}if(r.extensionsUsed)for(let d=0;d<r.extensionsUsed.length;++d){const u=r.extensionsUsed[d],m=r.extensionsRequired||[];switch(u){case Pt.KHR_MATERIALS_UNLIT:a[u]=new BT;break;case Pt.KHR_DRACO_MESH_COMPRESSION:a[u]=new XT(r,this.dracoLoader);break;case Pt.KHR_TEXTURE_TRANSFORM:a[u]=new YT;break;case Pt.KHR_MESH_QUANTIZATION:a[u]=new KT;break;default:m.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}h.setExtensions(a),h.setPlugins(o),h.parse(i,n)}parseAsync(e,t){const i=this;return new Promise(function(n,r){i.parse(e,t,n,r)})}}function MT(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const Pt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class TT{constructor(e){this.parser=e,this.name=Pt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,n=t.length;i<n;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let n=t.cache.get(i);if(n)return n;const r=t.json,a=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let o;const c=new At(16777215);a.color!==void 0&&c.setRGB(a.color[0],a.color[1],a.color[2],Yt);const h=a.range!==void 0?a.range:0;switch(a.type){case"directional":o=new Hb(c),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new zb(c),o.distance=h;break;case"spot":o=new WM(c),o.distance=h,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),o.decay=2,lr(o,a),a.intensity!==void 0&&(o.intensity=a.intensity),o.name=t.createUniqueName(a.name||"light_"+e),n=Promise.resolve(o),t.cache.add(i,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,n=i.json.nodes[e],r=(n.extensions&&n.extensions[this.name]||{}).light;return r===void 0?null:this._loadLight(r).then(function(a){return i._getNodeRef(t.cache,r,a)})}}class BT{constructor(){this.name=Pt.KHR_MATERIALS_UNLIT}getMaterialType(){return On}extendParams(e,t,i){const n=[];e.color=new At(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Yt),e.opacity=a[3]}r.baseColorTexture!==void 0&&n.push(i.assignTexture(e,"map",r.baseColorTexture,di))}return Promise.all(n)}}class RT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return n!==void 0&&(t.emissiveIntensity=n),Promise.resolve()}}class LT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new vt(o,o)}return Promise.all(r)}}class DT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class PT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new At(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=n.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Yt)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,di)),a.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class NT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class FT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new At().setRGB(o[0],o[1],o[2],Yt),Promise.all(r)}}class kT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}}class OT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new At().setRGB(o[0],o[1],o[2],Yt),a.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,di)),Promise.all(r)}}class UT{constructor(e){this.parser=e,this.name=Pt.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(r)}}class QT{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Ws:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],a=n.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class zT{constructor(e){this.parser=e,this.name=Pt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const r=n.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class HT{constructor(e){this.parser=e,this.name=Pt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=n.images[a.source];let c=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,c);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class GT{constructor(e){this.parser=e,this.name=Pt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=n.images[a.source];let c=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,c);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class VT{constructor(e){this.name=Pt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const n=i.extensions[this.name],r=this.parser.getDependency("buffer",n.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(o){const c=n.byteOffset||0,h=n.byteLength||0,d=n.count,u=n.byteStride,m=new Uint8Array(o,c,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,u,m,n.mode,n.filter).then(function(g){return g.buffer}):a.ready.then(function(){const g=new ArrayBuffer(d*u);return a.decodeGltfBuffer(new Uint8Array(g),d,u,m,n.mode,n.filter),g})})}return null}}class $T{constructor(e){this.name=Pt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const n=t.meshes[i.mesh];for(const c of n.primitives)if(c.mode!==Nn.TRIANGLES&&c.mode!==Nn.TRIANGLE_STRIP&&c.mode!==Nn.TRIANGLE_FAN&&c.mode!==void 0)return null;const r=i.extensions[this.name].attributes,a=[],o={};for(const c in r)a.push(this.parser.getDependency("accessor",r[c]).then(h=>(o[c]=h,o[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),d=h.isGroup?h.children:[h],u=c[0].count,m=[];for(const g of d){const y=new yt,E=new le,b=new xn,C=new le(1,1,1),B=new TM(g.geometry,g.material,u);for(let I=0;I<u;I++)o.TRANSLATION&&E.fromBufferAttribute(o.TRANSLATION,I),o.ROTATION&&b.fromBufferAttribute(o.ROTATION,I),o.SCALE&&C.fromBufferAttribute(o.SCALE,I),B.setMatrixAt(I,y.compose(E,b,C));for(const I in o)if(I==="_COLOR_0"){const k=o[I];B.instanceColor=new zm(k.array,k.itemSize,k.normalized)}else I!=="TRANSLATION"&&I!=="ROTATION"&&I!=="SCALE"&&g.geometry.setAttribute(I,o[I]);ii.prototype.copy.call(B,g),this.parser.assignFinalMaterial(B),m.push(B)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const tE="glTF",WT=1313821514,qT=5130562;class jT{constructor(e){this.name=Pt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==tE)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let a=0;for(;a<n;){const o=r.getUint32(a,!0);a+=4;const c=r.getUint32(a,!0);if(a+=4,c===WT){const h=new Uint8Array(e,12+a,o);this.content=i.decode(h)}else if(c===qT){const h=12+a;this.body=e.slice(h,h+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class XT{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},c={},h={};for(const d in a){const u=Km[d]||d.toLowerCase();o[u]=a[d]}for(const d in e.attributes){const u=Km[d]||d.toLowerCase();if(a[d]!==void 0){const m=i.accessors[e.attributes[d]],g=bo[m.componentType];h[u]=g.name,c[u]=m.normalized===!0}}return t.getDependency("bufferView",r).then(function(d){return new Promise(function(u,m){n.decodeDracoFile(d,function(g){for(const y in g.attributes){const E=g.attributes[y],b=c[y];b!==void 0&&(E.normalized=b)}u(g)},o,h,Yt,m)})})}}class YT{constructor(){this.name=Pt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord!==void 0&&t.texCoord!==e.channel||t.offset!==void 0||t.rotation!==void 0||t.scale!==void 0)&&(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class KT{constructor(){this.name=Pt.KHR_MESH_QUANTIZATION}}class iE extends rc{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n*3+n;for(let a=0;a!==n;a++)t[a]=i[r+a];return t}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=2*o,h=3*o,d=n-t,u=(i-t)/d,m=u*u,g=m*u,y=e*h,E=y-h,b=-2*g+3*m,C=g-m,B=1-b,I=C-m+u;for(let k=0;k!==o;k++){const Q=a[E+k+o],G=a[E+k+c]*d,U=a[y+k+o],te=a[y+k]*d;r[k]=B*Q+I*G+b*U+C*te}return r}}const JT=new xn;class ZT extends iE{interpolate_(e,t,i,n){const r=super.interpolate_(e,t,i,n);return JT.fromArray(r).normalize().toArray(r),r}}const Nn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},bo={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Zv={9728:Gi,9729:Ut,9984:Rd,9985:vo,9986:ea,9987:kn},e0={33071:Mi,33648:So,10497:vs},sp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Km={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},sr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eB={CUBICSPLINE:void 0,LINEAR:ca,STEP:Co},tB="OPAQUE",iB="MASK",nB="BLEND";function sB(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new Gl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ns})),s.DefaultMaterial}function Fr(s,e,t){for(const i in t.extensions)s[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function lr(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function rB(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let i=0,n=t.length;i<n;i++)s.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function aB(s){let e;const t=s.extensions&&s.extensions[Pt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+rp(t.attributes):s.indices+":"+rp(s.attributes)+":"+s.mode,s.targets!==void 0)for(let i=0,n=s.targets.length;i<n;i++)e+=":"+rp(s.targets[i]);return e}function rp(s){let e="";const t=Object.keys(s).sort();for(let i=0,n=t.length;i<n;i++)e+=t[i]+":"+s[t[i]]+";";return e}function Jm(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const oB=new yt;class lB{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new MT,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,n=!1,r=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,r=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||n&&r<98?this.textureLoader=new Qb(this.options.manager):this.textureLoader=new KM(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new $s(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][n.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:n.asset,parser:i,userData:{}};return Fr(r,o,n),lr(o,n),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){for(const c of o.scenes)c.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const a=t[n].joints;for(let o=0,c=a.length;o<c;o++)e[a[o]].isBone=!0}for(let n=0,r=e.length;n<r;n++){const a=e[n];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const n=i.clone(),r=(a,o)=>{const c=this.associations.get(a);c!=null&&this.associations.set(o,c);for(const[h,d]of a.children.entries())r(d,o.children[h])};return r(i,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const n=e(t[i]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let n=0;n<t.length;n++){const r=e(t[n]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":n=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(r,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Pt.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(r,a){i.load(kl.resolveURL(t.uri,n.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const n=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+n)})}loadAccessor(e){const t=this,i=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){const a=sp[n.type],o=bo[n.componentType],c=n.normalized===!0,h=new o(n.count*a);return Promise.resolve(new ui(h,a,c))}const r=[];return n.bufferView!==void 0?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),n.sparse!==void 0&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then(function(a){const o=a[0],c=sp[n.type],h=bo[n.componentType],d=h.BYTES_PER_ELEMENT,u=d*c,m=n.byteOffset||0,g=n.bufferView!==void 0?i.bufferViews[n.bufferView].byteStride:void 0,y=n.normalized===!0;let E,b;if(g&&g!==u){const C=Math.floor(m/g),B="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+C+":"+n.count;let I=t.cache.get(B);I||(E=new h(o,C*g,n.count*g/d),I=new _M(E,g/d),t.cache.add(B,I)),b=new Df(I,c,m%g/d,y)}else E=o===null?new h(n.count*c):new h(o,m,n.count*c),b=new ui(E,c,y);if(n.sparse!==void 0){const C=sp.SCALAR,B=bo[n.sparse.indices.componentType],I=n.sparse.indices.byteOffset||0,k=n.sparse.values.byteOffset||0,Q=new B(a[1],I,n.sparse.count*C),G=new h(a[2],k,n.sparse.count*c);o!==null&&(b=new ui(b.array.slice(),b.itemSize,b.normalized));for(let U=0,te=Q.length;U<te;U++){const ue=Q[U];if(b.setX(ue,G[U*c]),c>=2&&b.setY(ue,G[U*c+1]),c>=3&&b.setZ(ue,G[U*c+2]),c>=4&&b.setW(ue,G[U*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,i=this.options,n=t.textures[e].source,r=t.images[n];let a=this.textureLoader;if(r.uri){const o=i.manager.getHandler(r.uri);o!==null&&(a=o)}return this.loadTextureImage(e,n,a)}loadTextureImage(e,t,i){const n=this,r=this.json,a=r.textures[e],o=r.images[t],c=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=a.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const u=(r.samplers||{})[a.sampler]||{};return d.magFilter=Zv[u.magFilter]||Ut,d.minFilter=Zv[u.minFilter]||kn,d.wrapS=e0[u.wrapS]||vs,d.wrapT=e0[u.wrapT]||vs,n.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const i=this,n=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const a=n.images[e],o=self.URL||self.webkitURL;let c=a.uri||"",h=!1;if(a.bufferView!==void 0)c=i.getDependency("bufferView",a.bufferView).then(function(u){h=!0;const m=new Blob([u],{type:a.mimeType});return c=o.createObjectURL(m),c});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(u){return new Promise(function(m,g){let y=m;t.isImageBitmapLoader===!0&&(y=function(E){const b=new qt(E);b.needsUpdate=!0,m(b)}),t.load(kl.resolveURL(u,r.path),y,void 0,g)})}).then(function(u){var m;return h===!0&&o.revokeObjectURL(c),u.userData.mimeType=a.mimeType||((m=a.uri).search(/\.jpe?g($|\?)/i)>0||m.search(/^data\:image\/jpeg/)===0?"image/jpeg":m.search(/\.webp($|\?)/i)>0||m.search(/^data\:image\/webp/)===0?"image/webp":"image/png"),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),u});return this.sourceCache[e]=d,d}assignTexture(e,t,i,n){const r=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&((a=a.clone()).channel=i.texCoord),r.extensions[Pt.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[Pt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=r.associations.get(a);a=r.extensions[Pt.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),r.associations.set(a,c)}}return n!==void 0&&(a.colorSpace=n),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const n=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new Pb,is.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(o,c)),i=c}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new Db,is.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(o,c)),i=c}if(n||r||a){let o="ClonedMaterial:"+i.uuid+":";n&&(o+="derivative-tangents:"),r&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=i.clone(),r&&(c.vertexColors=!0),a&&(c.flatShading=!0),n&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return Gl}loadMaterial(e){const t=this,i=this.json,n=this.extensions,r=i.materials[e];let a;const o={},c=[];if((r.extensions||{})[Pt.KHR_MATERIALS_UNLIT]){const d=n[Pt.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,r,t))}else{const d=r.pbrMetallicRoughness||{};if(o.color=new At(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const u=d.baseColorFactor;o.color.setRGB(u[0],u[1],u[2],Yt),o.opacity=u[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,di)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(u){return u.getMaterialType&&u.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(u){return u.extendMaterialParams&&u.extendMaterialParams(e,o)})))}r.doubleSided===!0&&(o.side=Zi);const h=r.alphaMode||tB;if(h===nB?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===iB&&(o.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==On&&(c.push(t.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new vt(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;o.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&a!==On&&(c.push(t.assignTexture(o,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==On){const d=r.emissiveFactor;o.emissive=new At().setRGB(d[0],d[1],d[2],Yt)}return r.emissiveTexture!==void 0&&a!==On&&c.push(t.assignTexture(o,"emissiveMap",r.emissiveTexture,di)),Promise.all(c).then(function(){const d=new a(o);return r.name&&(d.name=r.name),lr(d,r),t.associations.set(d,{materials:e}),r.extensions&&Fr(n,d,r),d})}createUniqueName(e){const t=Ft.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,n=this.primitiveCache;function r(o){return i[Pt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(c){return t0(c,o,t)})}const a=[];for(let o=0,c=e.length;o<c;o++){const h=e[o],d=aB(h),u=n[d];if(u)a.push(u.promise);else{let m;m=h.extensions&&h.extensions[Pt.KHR_DRACO_MESH_COMPRESSION]?r(h):t0(new Sn,h,t),n[d]={primitive:h,promise:m},a.push(m)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,n=this.extensions,r=i.meshes[e],a=r.primitives,o=[];for(let c=0,h=a.length;c<h;c++){const d=a[c].material===void 0?sB(this.cache):this.getDependency("material",a[c].material);o.push(d)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(c){const h=c.slice(0,c.length-1),d=c[c.length-1],u=[];for(let g=0,y=d.length;g<y;g++){const E=d[g],b=a[g];let C;const B=h[g];if(b.mode===Nn.TRIANGLES||b.mode===Nn.TRIANGLE_STRIP||b.mode===Nn.TRIANGLE_FAN||b.mode===void 0)C=r.isSkinnedMesh===!0?new CM(E,B):new Zt(E,B),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),b.mode===Nn.TRIANGLE_STRIP?C.geometry=Jv(C.geometry,1):b.mode===Nn.TRIANGLE_FAN&&(C.geometry=Jv(C.geometry,2));else if(b.mode===Nn.LINES)C=new BM(E,B);else if(b.mode===Nn.LINE_STRIP)C=new Nf(E,B);else if(b.mode===Nn.LINE_LOOP)C=new RM(E,B);else{if(b.mode!==Nn.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);C=new LM(E,B)}Object.keys(C.geometry.morphAttributes).length>0&&rB(C,r),C.name=t.createUniqueName(r.name||"mesh_"+e),lr(C,r),b.extensions&&Fr(n,C,b),t.assignFinalMaterial(C),u.push(C)}for(let g=0,y=u.length;g<y;g++)t.associations.set(u[g],{meshes:e,primitives:g});if(u.length===1)return r.extensions&&Fr(n,u[0],r),u[0];const m=new ur;r.extensions&&Fr(n,m,r),t.associations.set(m,{meshes:e});for(let g=0,y=u.length;g<y;g++)m.add(u[g]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],n=i[i.type];if(n)return i.type==="perspective"?t=new Ui(Oh.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):i.type==="orthographic"&&(t=new ko(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),lr(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let n=0,r=t.joints.length;n<r;n++)i.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(n){const r=n.pop(),a=n,o=[],c=[];for(let h=0,d=a.length;h<d;h++){const u=a[h];if(u){o.push(u);const m=new yt;r!==null&&m.fromArray(r.array,16*h),c.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new Pf(o,c)})}loadAnimation(e){const t=this.json,i=this,n=t.animations[e],r=n.name?n.name:"animation_"+e,a=[],o=[],c=[],h=[],d=[];for(let u=0,m=n.channels.length;u<m;u++){const g=n.channels[u],y=n.samplers[g.sampler],E=g.target,b=E.node,C=n.parameters!==void 0?n.parameters[y.input]:y.input,B=n.parameters!==void 0?n.parameters[y.output]:y.output;E.node!==void 0&&(a.push(this.getDependency("node",b)),o.push(this.getDependency("accessor",C)),c.push(this.getDependency("accessor",B)),h.push(y),d.push(E))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c),Promise.all(h),Promise.all(d)]).then(function(u){const m=u[0],g=u[1],y=u[2],E=u[3],b=u[4],C=[];for(let B=0,I=m.length;B<I;B++){const k=m[B],Q=g[B],G=y[B],U=E[B],te=b[B];if(k===void 0)continue;k.updateMatrix&&k.updateMatrix();const ue=i._createAnimationTracks(k,Q,G,U,te);if(ue)for(let pe=0;pe<ue.length;pe++)C.push(ue[pe])}return new Gm(r,void 0,C)})}createNodeMesh(e){const t=this.json,i=this,n=t.nodes[e];return n.mesh===void 0?null:i.getDependency("mesh",n.mesh).then(function(r){const a=i._getNodeRef(i.meshCache,n.mesh,r);return n.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let c=0,h=n.weights.length;c<h;c++)o.morphTargetInfluences[c]=n.weights[c]}),a})}loadNode(e){const t=this,i=this.json.nodes[e],n=t._loadNodeShallow(e),r=[],a=i.children||[];for(let c=0,h=a.length;c<h;c++)r.push(t.getDependency("node",a[c]));const o=i.skin===void 0?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([n,Promise.all(r),o]).then(function(c){const h=c[0],d=c[1],u=c[2];u!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(u,oB)});for(let m=0,g=d.length;m<g;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],a=r.name?n.createUniqueName(r.name):"",o=[],c=n._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&o.push(c),r.camera!==void 0&&o.push(n.getDependency("camera",r.camera).then(function(h){return n._getNodeRef(n.cameraCache,r.camera,h)})),n._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){o.push(h)}),this.nodeCache[e]=Promise.all(o).then(function(h){let d;if(d=r.isBone===!0?new Lb:h.length>1?new ur:h.length===1?h[0]:new ii,d!==h[0])for(let u=0,m=h.length;u<m;u++)d.add(h[u]);if(r.name&&(d.userData.name=r.name,d.name=a),lr(d,r),r.extensions&&Fr(i,d,r),r.matrix!==void 0){const u=new yt;u.fromArray(r.matrix),d.applyMatrix4(u)}else r.translation!==void 0&&d.position.fromArray(r.translation),r.rotation!==void 0&&d.quaternion.fromArray(r.rotation),r.scale!==void 0&&d.scale.fromArray(r.scale);return n.associations.has(d)||n.associations.set(d,{}),n.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],n=this,r=new ur;i.name&&(r.name=n.createUniqueName(i.name)),lr(r,i),i.extensions&&Fr(t,r,i);const a=i.nodes||[],o=[];for(let c=0,h=a.length;c<h;c++)o.push(n.getDependency("node",a[c]));return Promise.all(o).then(function(c){for(let h=0,d=c.length;h<d;h++)r.add(c[h]);return n.associations=(h=>{const d=new Map;for(const[u,m]of n.associations)(u instanceof is||u instanceof qt)&&d.set(u,m);return h.traverse(u=>{const m=n.associations.get(u);m!=null&&d.set(u,m)}),d})(r),r})}_createAnimationTracks(e,t,i,n,r){const a=[],o=e.name?e.name:e.uuid,c=[];let h;switch(sr[r.path]===sr.weights?e.traverse(function(m){m.morphTargetInfluences&&c.push(m.name?m.name:m.uuid)}):c.push(o),sr[r.path]){case sr.weights:h=Bo;break;case sr.rotation:h=ra;break;case sr.position:case sr.scale:h=Ro;break;default:i.itemSize===1?h=Bo:h=Ro}const d=n.interpolation!==void 0?eB[n.interpolation]:ca,u=this._getArrayFromAccessor(i);for(let m=0,g=c.length;m<g;m++){const y=new h(c[m]+"."+sr[r.path],t.array,u,d);n.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),a.push(y)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Jm(t.constructor),n=new Float32Array(t.length);for(let r=0,a=t.length;r<a;r++)n[r]=t[r]*i;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){return new(this instanceof ra?ZT:iE)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function t0(s,e,t){const i=e.attributes,n=[];function r(a,o){return t.getDependency("accessor",a).then(function(c){s.setAttribute(o,c)})}for(const a in i){const o=Km[a]||a.toLowerCase();o in s.attributes||n.push(r(i[a],o))}if(e.indices!==void 0&&!s.index){const a=t.getDependency("accessor",e.indices).then(function(o){s.setIndex(o)});n.push(a)}return Ht.workingColorSpace!==Yt&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ht.workingColorSpace}" not supported.`),lr(s,e),function(a,o,c){const h=o.attributes,d=new hn;if(h.POSITION===void 0)return;{const g=c.json.accessors[h.POSITION],y=g.min,E=g.max;if(y===void 0||E===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(d.set(new le(y[0],y[1],y[2]),new le(E[0],E[1],E[2])),g.normalized){const b=Jm(bo[g.componentType]);d.min.multiplyScalar(b),d.max.multiplyScalar(b)}}const u=o.targets;if(u!==void 0){const g=new le,y=new le;for(let E=0,b=u.length;E<b;E++){const C=u[E];if(C.POSITION!==void 0){const B=c.json.accessors[C.POSITION],I=B.min,k=B.max;if(I!==void 0&&k!==void 0){if(y.setX(Math.max(Math.abs(I[0]),Math.abs(k[0]))),y.setY(Math.max(Math.abs(I[1]),Math.abs(k[1]))),y.setZ(Math.max(Math.abs(I[2]),Math.abs(k[2]))),B.normalized){const Q=Jm(bo[B.componentType]);y.multiplyScalar(Q)}g.max(y)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(g)}a.boundingBox=d;const m=new Hn;d.getCenter(m.center),m.radius=d.min.distanceTo(d.max)/2,a.boundingSphere=m}(s,e,t),Promise.all(n).then(function(){return e.targets!==void 0?function(a,o,c){let h=!1,d=!1,u=!1;for(let E=0,b=o.length;E<b;E++){const C=o[E];if(C.POSITION!==void 0&&(h=!0),C.NORMAL!==void 0&&(d=!0),C.COLOR_0!==void 0&&(u=!0),h&&d&&u)break}if(!h&&!d&&!u)return Promise.resolve(a);const m=[],g=[],y=[];for(let E=0,b=o.length;E<b;E++){const C=o[E];if(h){const B=C.POSITION!==void 0?c.getDependency("accessor",C.POSITION):a.attributes.position;m.push(B)}if(d){const B=C.NORMAL!==void 0?c.getDependency("accessor",C.NORMAL):a.attributes.normal;g.push(B)}if(u){const B=C.COLOR_0!==void 0?c.getDependency("accessor",C.COLOR_0):a.attributes.color;y.push(B)}}return Promise.all([Promise.all(m),Promise.all(g),Promise.all(y)]).then(function(E){const b=E[0],C=E[1],B=E[2];return h&&(a.morphAttributes.position=b),d&&(a.morphAttributes.normal=C),u&&(a.morphAttributes.color=B),a.morphTargetsRelative=!0,a})}(s,e.targets,t):s})}class cB{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:n,msg:r,transfer:a}=this.queue.shift();this.workersResolve[e]=n,this.workers[e].postMessage(r,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const n=this._getIdleWorker();n!==-1?(this._initWorker(n),this.workerStatus|=1<<n,this.workersResolve[n]=i,this.workers[n].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const i0=2,hB=0,dB=1,uB=10,nE=9,sE=15,rE=16,aE=22,oE=37,lE=43,cE=76,hE=83,dE=97,uE=100,pE=103,mE=109,fE=165,gE=166;class pB{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class al{constructor(e,t,i,n){this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=n,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const i=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,n)}}const on=[171,75,84,88,32,50,48,187,13,10,26,10];function n0(s){return typeof TextDecoder<"u"?new TextDecoder().decode(s):Buffer.from(s).toString("utf8")}let ap,Hs,Zm;const op={env:{emscripten_notify_memory_growth:function(s){Zm=new Uint8Array(Hs.exports.memory.buffer)}}};class mB{init(){return ap||(ap=typeof fetch<"u"?fetch("data:application/wasm;base64,"+s0).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,op)).then(this._init):WebAssembly.instantiate(Buffer.from(s0,"base64"),op).then(this._init),ap)}_init(e){Hs=e.instance,op.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Hs)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,n=Hs.exports.malloc(i);Zm.set(e,n),t=t||Number(Hs.exports.ZSTD_findDecompressedSize(n,i));const r=Hs.exports.malloc(t),a=Hs.exports.ZSTD_decompress(r,t,n,i),o=Zm.slice(r,r+a);return Hs.exports.free(n),Hs.exports.free(r),o}}const s0="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",lp=new WeakMap;let cp,hp=0;class fs extends bs{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new cB,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:(this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const e=new $s(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new $s(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const n=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,n]).then(([r,a])=>{const o=fs.BasisWorker.toString(),c=["/* constants */","let _EngineFormat = "+JSON.stringify(fs.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(fs.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(fs.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([c])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const h=new Worker(this.workerSourceURL),d=this.transcoderBinary.slice(0);return h.postMessage({type:"init",config:this.workerConfig,transcoderBinary:d},[d]),h})}),hp>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),hp++}return this.transcoderPending}load(e,t,i,n){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new $s(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,a=>{if(lp.has(a))return lp.get(a).promise.then(t).catch(n);this._createTexture(a).then(o=>t?t(o):null).catch(n)},i,n)}_createTextureFrom(e,t){const{faces:i,width:n,height:r,format:a,type:o,error:c,dfdFlags:h}=e;if(o==="error")return Promise.reject(c);let d;if(t.faceCount===6)d=new NM(i,a,bi);else{const u=i[0].mipmaps;d=t.layerCount>1?new PM(u,n,r,t.layerCount,a,bi):new sa(u,n,r,a,bi)}return d.minFilter=i[0].mipmaps.length===1?Ut:kn,d.magFilter=Ut,d.generateMipmaps=!1,d.needsUpdate=!0,d.colorSpace=r0(t),d.premultiplyAlpha=!!(1&h),d}async _createTexture(e,t={}){const i=function(a){const o=new Uint8Array(a.buffer,a.byteOffset,on.length);if(o[0]!==on[0]||o[1]!==on[1]||o[2]!==on[2]||o[3]!==on[3]||o[4]!==on[4]||o[5]!==on[5]||o[6]!==on[6]||o[7]!==on[7]||o[8]!==on[8]||o[9]!==on[9]||o[10]!==on[10]||o[11]!==on[11])throw new Error("Missing KTX 2.0 identifier.");const c=new pB,h=17*Uint32Array.BYTES_PER_ELEMENT,d=new al(a,on.length,h,!0);c.vkFormat=d._nextUint32(),c.typeSize=d._nextUint32(),c.pixelWidth=d._nextUint32(),c.pixelHeight=d._nextUint32(),c.pixelDepth=d._nextUint32(),c.layerCount=d._nextUint32(),c.faceCount=d._nextUint32();const u=d._nextUint32();c.supercompressionScheme=d._nextUint32();const m=d._nextUint32(),g=d._nextUint32(),y=d._nextUint32(),E=d._nextUint32(),b=d._nextUint64(),C=d._nextUint64(),B=new al(a,on.length+h,3*u*8,!0);for(let z=0;z<u;z++)c.levels.push({levelData:new Uint8Array(a.buffer,a.byteOffset+B._nextUint64(),B._nextUint64()),uncompressedByteLength:B._nextUint64()});const I=new al(a,m,g,!0),k={vendorId:I._skip(4)._nextUint16(),descriptorType:I._nextUint16(),versionNumber:I._nextUint16(),descriptorBlockSize:I._nextUint16(),colorModel:I._nextUint8(),colorPrimaries:I._nextUint8(),transferFunction:I._nextUint8(),flags:I._nextUint8(),texelBlockDimension:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],bytesPlane:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],samples:[]},Q=(k.descriptorBlockSize/4-6)/4;for(let z=0;z<Q;z++){const J={bitOffset:I._nextUint16(),bitLength:I._nextUint8(),channelType:I._nextUint8(),samplePosition:[I._nextUint8(),I._nextUint8(),I._nextUint8(),I._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&J.channelType?(J.sampleLower=I._nextInt32(),J.sampleUpper=I._nextInt32()):(J.sampleLower=I._nextUint32(),J.sampleUpper=I._nextUint32()),k.samples[z]=J}c.dataFormatDescriptor.length=0,c.dataFormatDescriptor.push(k);const G=new al(a,y,E,!0);for(;G._offset<E;){const z=G._nextUint32(),J=G._scan(z),ae=n0(J),Z=G._scan(z-J.byteLength);c.keyValue[ae]=ae.match(/^ktx/i)?n0(Z):Z,G._offset%4&&G._skip(4-G._offset%4)}if(C<=0)return c;const U=new al(a,b,C,!0),te=U._nextUint16(),ue=U._nextUint16(),pe=U._nextUint32(),ce=U._nextUint32(),he=U._nextUint32(),Me=U._nextUint32(),De=[];for(let z=0;z<u;z++)De.push({imageFlags:U._nextUint32(),rgbSliceByteOffset:U._nextUint32(),rgbSliceByteLength:U._nextUint32(),alphaSliceByteOffset:U._nextUint32(),alphaSliceByteLength:U._nextUint32()});const Qe=b+U._offset,Ee=Qe+pe,ke=Ee+ce,ee=ke+he,re=new Uint8Array(a.buffer,a.byteOffset+Qe,pe),ye=new Uint8Array(a.buffer,a.byteOffset+Ee,ce),me=new Uint8Array(a.buffer,a.byteOffset+ke,he),V=new Uint8Array(a.buffer,a.byteOffset+ee,Me);return c.globalData={endpointCount:te,selectorCount:ue,imageDescs:De,endpointsData:re,selectorsData:ye,tablesData:me,extendedData:V},c}(new Uint8Array(e));if(i.vkFormat!==0)return async function(a){const{vkFormat:o}=a;if(dp[o]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let c;a.supercompressionScheme===2&&(cp||(cp=new Promise(async u=>{const m=new mB;await m.init(),u(m)})),c=await cp);const h=[];for(let u=0;u<a.levels.length;u++){const m=Math.max(1,a.pixelWidth>>u),g=Math.max(1,a.pixelHeight>>u),y=a.pixelDepth?Math.max(1,a.pixelDepth>>u):0,E=a.levels[u];let b,C;if(a.supercompressionScheme===0)b=E.levelData;else{if(a.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");b=c.decode(E.levelData,E.uncompressedByteLength)}C=up[o]===Ti?new Float32Array(b.buffer,b.byteOffset,b.byteLength/Float32Array.BYTES_PER_ELEMENT):up[o]===Vi?new Uint16Array(b.buffer,b.byteOffset,b.byteLength/Uint16Array.BYTES_PER_ELEMENT):b,h.push({data:C,width:m,height:g,depth:y})}let d;if(fB.has(dp[o]))d=a.pixelDepth===0?new sc(h[0].data,a.pixelWidth,a.pixelHeight):new Ab(h[0].data,a.pixelWidth,a.pixelHeight,a.pixelDepth);else{if(a.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");d=new sa(h,a.pixelWidth,a.pixelHeight)}return d.mipmaps=h,d.type=up[o],d.format=dp[o],d.colorSpace=r0(a),d.needsUpdate=!0,Promise.resolve(d)}(i);const n=t,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:n},[e])).then(a=>this._createTextureFrom(a.data,i));return lp.set(e,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),hp--,this}}fs.BasisFormat={ETC1S:0,UASTC_4x4:1},fs.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},fs.EngineFormat={RGBAFormat:gi,RGBA_ASTC_4x4_Format:Fm,RGBA_BPTC_Format:kh,RGBA_ETC2_EAC_Format:Nm,RGBA_PVRTC_4BPPV1_Format:Dm,RGBA_S3TC_DXT5_Format:Fh,RGB_ETC1_Format:Sf,RGB_ETC2_Format:Pm,RGB_PVRTC_4BPPV1_Format:Lm,RGB_S3TC_DXT1_Format:Nh},fs.BasisWorker=function(){let s,e,t;const i=_EngineFormat,n=_TranscoderFormat,r=_BasisFormat;self.addEventListener("message",function(u){const m=u.data;switch(m.type){case"init":s=m.config,g=m.transcoderBinary,e=new Promise(y=>{t={wasmBinary:g,onRuntimeInitialized:y},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":e.then(()=>{try{const{faces:y,buffers:E,width:b,height:C,hasAlpha:B,format:I,dfdFlags:k}=function(Q){const G=new t.KTX2File(new Uint8Array(Q));function U(){G.close(),G.delete()}if(!G.isValid())throw U(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const te=G.isUASTC()?r.UASTC_4x4:r.ETC1S,ue=G.getWidth(),pe=G.getHeight(),ce=G.getLayers()||1,he=G.getLevels(),Me=G.getFaces(),De=G.getHasAlpha(),Qe=G.getDFDFlags(),{transcoderFormat:Ee,engineFormat:ke}=function(ye,me,V,z){let J,ae;const Z=ye===r.ETC1S?o:c;for(let Se=0;Se<Z.length;Se++){const Ie=Z[Se];if(s[Ie.if]&&Ie.basisFormat.includes(ye)&&!(z&&Ie.transcoderFormat.length<2)&&(!Ie.needsPowerOfTwo||h(me)&&h(V)))return J=Ie.transcoderFormat[z?1:0],ae=Ie.engineFormat[z?1:0],{transcoderFormat:J,engineFormat:ae}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),J=n.RGBA32,ae=i.RGBAFormat,{transcoderFormat:J,engineFormat:ae}}(te,ue,pe,De);if(!ue||!pe||!he)throw U(),new Error("THREE.KTX2Loader:	Invalid texture");if(!G.startTranscoding())throw U(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ee=[],re=[];for(let ye=0;ye<Me;ye++){const me=[];for(let V=0;V<he;V++){const z=[];let J,ae;for(let Se=0;Se<ce;Se++){const Ie=G.getImageLevelInfo(V,Se,ye);ye!==0||V!==0||Se!==0||Ie.origWidth%4==0&&Ie.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),he>1?(J=Ie.origWidth,ae=Ie.origHeight):(J=Ie.width,ae=Ie.height);const Oe=new Uint8Array(G.getImageTranscodedSizeInBytes(V,Se,0,Ee));if(!G.transcodeImage(Oe,V,Se,ye,Ee,0,-1,-1))throw U(),new Error("THREE.KTX2Loader: .transcodeImage failed.");z.push(Oe)}const Z=d(z);me.push({data:Z,width:J,height:ae}),re.push(Z.buffer)}ee.push({mipmaps:me,width:ue,height:pe,format:ke})}return U(),{faces:ee,buffers:re,width:ue,height:pe,hasAlpha:De,format:ke,dfdFlags:Qe}}(m.buffer);self.postMessage({type:"transcode",id:m.id,faces:y,width:b,height:C,hasAlpha:B,format:I,dfdFlags:k},E)}catch(y){console.error(y),self.postMessage({type:"error",id:m.id,error:y.message})}})}var g});const a=[{if:"astcSupported",basisFormat:[r.UASTC_4x4],transcoderFormat:[n.ASTC_4x4,n.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.BC7_M5,n.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.BC1,n.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.ETC1,n.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.PVRTC1_4_RGB,n.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],o=a.sort(function(u,m){return u.priorityETC1S-m.priorityETC1S}),c=a.sort(function(u,m){return u.priorityUASTC-m.priorityUASTC});function h(u){return u<=2||!(u&u-1)&&u!==0}function d(u){if(u.length===1)return u[0];let m=0;for(let E=0;E<u.length;E++)m+=u[E].byteLength;const g=new Uint8Array(m);let y=0;for(let E=0;E<u.length;E++){const b=u[E];g.set(b,y),y+=b.byteLength}return g}};const fB=new Set([gi,ho,ta]),dp={[mE]:gi,[dE]:gi,[oE]:gi,[lE]:gi,[pE]:ho,[hE]:ho,[rE]:ho,[aE]:ho,[uE]:ta,[cE]:ta,[sE]:ta,[nE]:ta,[gE]:rd,[fE]:rd},up={[mE]:Ti,[dE]:Vi,[oE]:bi,[lE]:bi,[pE]:Ti,[hE]:Vi,[rE]:bi,[aE]:bi,[uE]:Ti,[cE]:Vi,[sE]:bi,[nE]:bi,[gE]:bi,[fE]:bi};function r0(s){const e=s.dataFormatDescriptor[0];return e.colorPrimaries===dB?e.transferFunction===i0?di:Yt:e.colorPrimaries===uB?e.transferFunction===i0?Ld:ic:(e.colorPrimaries===hB||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),Kn)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a0,o0;const Xn=Symbol("retainerCount"),Ds=Symbol("recentlyUsed"),nh=Symbol("evict"),ol=Symbol("evictionThreshold"),pp=Symbol("cache");class gB{constructor(e,t=5){this[a0]=new Map,this[o0]=[],this[pp]=e,this[ol]=t}set evictionThreshold(e){this[ol]=e,this[nh]()}get evictionThreshold(){return this[ol]}get cache(){return this[pp]}retainerCount(e){return this[Xn].get(e)||0}reset(){this[Xn].clear(),this[Ds]=[]}retain(e){this[Xn].has(e)||this[Xn].set(e,0),this[Xn].set(e,this[Xn].get(e)+1);const t=this[Ds].indexOf(e);t!==-1&&this[Ds].splice(t,1),this[Ds].unshift(e),this[nh]()}release(e){this[Xn].has(e)&&this[Xn].set(e,Math.max(this[Xn].get(e)-1,0)),this[nh]()}[(a0=Xn,o0=Ds,nh)](){if(!(this[Ds].length<this[ol]))for(let e=this[Ds].length-1;e>=this[ol];--e){const t=this[Ds][e];this[Xn].get(t)===0&&(this[pp].delete(t),this[Ds].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=s=>{const e=new Map;for(const t of s.mappings)for(const i of t.variants)e.set(i,{material:null,gltfMaterialIndex:t.material});return e};class vB{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,i=t.json;if(i.extensions===void 0||i.extensions[this.name]===void 0)return null;const n=(r=>{const a=[],o=new Set;for(const c of r){let h=c,d=0;for(;o.has(h);)h=c+"."+ ++d;o.add(h),a.push(h)}return a})((i.extensions[this.name].variants||[]).map(r=>r.name));for(const r of e.scenes)r.traverse(a=>{const o=a;if(!o.material)return;const c=t.associations.get(o);if(c==null||c.meshes==null||c.primitives==null)return;const h=i.meshes[c.meshes].primitives[c.primitives].extensions;h&&h[this.name]&&(o.userData.variantMaterials=AB(h[this.name]))});return e.userData.variants=n,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AE,l0;qt.DEFAULT_ANISOTROPY=4;const Ps=new Map,mp=new Map;let c0;const h0=new class extends bs{constructor(s){super(s),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(s){return this.decoderPath=s,this}setDecoderConfig(s){return this.decoderConfig=s,this}setWorkerLimit(s){return this.workerLimit=s,this}load(s,e,t,i){const n=new $s(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(s,r=>{this.parse(r,e,i)},t,i)}parse(s,e,t=()=>{}){this.decodeDracoFile(s,e,null,null,di).catch(t)}decodeDracoFile(s,e,t,i,n=Yt,r=()=>{}){const a={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!t,vertexColorSpace:n};return this.decodeGeometry(s,a).then(e).catch(r)}decodeGeometry(s,e){const t=JSON.stringify(e);if(np.has(s)){const o=np.get(s);if(o.key===t)return o.promise;if(s.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const n=this.workerNextTaskID++,r=s.byteLength,a=this._getWorker(n,r).then(o=>(i=o,new Promise((c,h)=>{i._callbacks[n]={resolve:c,reject:h},i.postMessage({type:"decode",id:n,taskConfig:e,buffer:s},[s])}))).then(o=>this._createGeometry(o.geometry));return a.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),np.set(s,{key:t,promise:a}),a}_createGeometry(s){const e=new Sn;s.index&&e.setIndex(new ui(s.index.array,1));for(let t=0;t<s.attributes.length;t++){const i=s.attributes[t],n=i.name,r=i.array,a=i.itemSize,o=new ui(r,a);n==="color"&&(this._assignVertexColorSpace(o,i.vertexColorSpace),o.normalized=!(r instanceof Float32Array)),e.setAttribute(n,o)}return e}_assignVertexColorSpace(s,e){if(e!==di)return;const t=new At;for(let i=0,n=s.count;i<n;i++)t.fromBufferAttribute(s,i).convertSRGBToLinear(),s.setXYZ(i,t.r,t.g,t.b)}_loadLibrary(s,e){const t=new $s(this.manager);return t.setPath(this.decoderPath),t.setResponseType(e),t.setWithCredentials(this.withCredentials),new Promise((i,n)=>{t.load(s,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const s=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return s?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(t=>{const i=t[0];s||(this.decoderConfig.wasmBinary=t[1]);const n=CT.toString(),r=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(s,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){const r=n.data;switch(r.type){case"decode":i._callbacks[r.id].resolve(r);break;case"error":i._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[s]=e,t._taskLoad+=e,t})}_releaseTask(s,e){s._taskLoad-=s._taskCosts[e],delete s._callbacks[e],delete s._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(s=>s._taskLoad))}dispose(){for(let s=0;s<this.workerPool.length;++s)this.workerPool[s].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};let d0;const fp=new fs;let gp,Ap;const Vr=Symbol("loader"),cr=Symbol("evictionPolicy"),u0=Symbol("GLTFInstance");class ki extends rs{constructor(e){super(),this[l0]=new IT().register(t=>new vB(t)),this[u0]=e,this[Vr].setDRACOLoader(h0),this[Vr].setKTX2Loader(fp)}static setDRACODecoderLocation(e){c0=e,h0.setDecoderPath(e)}static getDRACODecoderLocation(){return c0}static setKTX2TranscoderLocation(e){d0=e,fp.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return d0}static setMeshoptDecoderLocation(e){var t;gp!==e&&(gp=e,Ap=(t=e,new Promise((i,n)=>{const r=document.createElement("script");document.body.appendChild(r),r.onload=i,r.onerror=n,r.async=!0,r.src=t})).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return gp}static initializeKTX2Loader(e){fp.detectSupport(e)}static get cache(){return Ps}static clearCache(){Ps.forEach((e,t)=>{this.delete(t)}),this[cr].reset()}static has(e){return Ps.has(e)}static async delete(e){if(!this.has(e))return;const t=Ps.get(e);mp.delete(e),Ps.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!mp.get(e)}get[(AE=cr,l0=Vr,cr)](){return this.constructor[cr]}async preload(e,t,i=()=>{}){if(this[Vr].setWithCredentials(ki.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!Ps.has(e)){Ap!=null&&this[Vr].setMeshoptDecoder(await Ap);const n=((o,c,h=()=>{})=>{const d=u=>{const m=u.loaded/u.total;h(Math.max(0,Math.min(1,isFinite(m)?m:1)))};return new Promise((u,m)=>{c.load(o,u,d,m)})})(e,this[Vr],o=>{i(.8*o)}),r=this[u0],a=n.then(o=>r.prepare(o)).then(o=>(i(.9),new r(o))).catch(o=>(console.error(o),new r));Ps.set(e,a)}await Ps.get(e),mp.set(e,!0),i&&i(1)}async load(e,t,i=()=>{}){await this.preload(e,t,i);const n=await Ps.get(e),r=await n.clone();return this[cr].retain(e),r.dispose=()=>{this[cr].release(e)},r}}ki[AE]=new gB(ki);class yB extends ii{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new vt(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const za=new le,p0=new yt,m0=new yt,f0=new le,g0=new le;class wB{constructor(e={}){const t=this;let i,n,r,a;const o={objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");function h(u,m,g){if(u.isCSS2DObject){za.setFromMatrixPosition(u.matrixWorld),za.applyMatrix4(m0);const y=u.visible===!0&&za.z>=-1&&za.z<=1&&u.layers.test(g.layers)===!0;if(u.element.style.display=y===!0?"":"none",y===!0){u.onBeforeRender(t,m,g);const b=u.element;b.style.transform="translate("+-100*u.center.x+"%,"+-100*u.center.y+"%)translate("+(za.x*r+r)+"px,"+(-za.y*a+a)+"px)",b.parentNode!==c&&c.appendChild(b),u.onAfterRender(t,m,g)}const E={distanceToCameraSquared:d(g,u)};o.objects.set(u,E)}for(let y=0,E=u.children.length;y<E;y++)h(u.children[y],m,g)}function d(u,m){return f0.setFromMatrixPosition(u.matrixWorld),g0.setFromMatrixPosition(m.matrixWorld),f0.distanceToSquared(g0)}c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:i,height:n}},this.render=function(u,m){u.matrixWorldAutoUpdate===!0&&u.updateMatrixWorld(),m.parent===null&&m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),p0.copy(m.matrixWorldInverse),m0.multiplyMatrices(m.projectionMatrix,p0),h(u,u,m),function(g){const y=function(b){const C=[];return b.traverse(function(B){B.isCSS2DObject&&C.push(B)}),C}(g).sort(function(b,C){return b.renderOrder!==C.renderOrder?C.renderOrder-b.renderOrder:o.objects.get(b).distanceToCameraSquared-o.objects.get(C).distanceToCameraSquared}),E=y.length;for(let b=0,C=y.length;b<C;b++)y[b].element.style.zIndex=E-b}(u)},this.setSize=function(u,m){i=u,n=m,r=i/2,a=n/2,c.style.width=u+"px",c.style.height=m+"px"}}}function sh(s,e,t){let i=t;const n=new le;return s.updateWorldMatrix(!0,!0),s.traverseVisible(r=>{const{geometry:a}=r;if(a!==void 0){const{position:o}=a.attributes;if(o!==void 0)for(let c=0,h=o.count;c<h;c++)r.isMesh?r.getVertexPosition(c,n):n.fromBufferAttribute(o,c),r.isSkinnedMesh||n.applyMatrix4(r.matrixWorld),i=e(i,n)}}),i}let ll,vp,Ha,rh;function $h(s,e=1/0,t=null){vp||(vp=new ys(2,2,1,1)),Ha||(Ha=new un({uniforms:{blitTexture:new Uf(s)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`})),Ha.uniforms.blitTexture.value=s,Ha.defines.IS_SRGB=s.colorSpace==di,Ha.needsUpdate=!0,rh||(rh=new Zt(vp,Ha),rh.frustumCulled=!1);const i=new Ui,n=new Ar;n.add(rh),t===null&&(t=ll=new Lf({antialias:!1}));const r=Math.min(s.image.width,e),a=Math.min(s.image.height,e);t.setSize(r,a),t.clear(),t.render(n,i);const o=document.createElement("canvas"),c=o.getContext("2d");o.width=r,o.height=a,c.drawImage(t.domElement,0,0,r,a);const h=new Nb(o);return h.minFilter=s.minFilter,h.magFilter=s.magFilter,h.wrapS=s.wrapS,h.wrapT=s.wrapT,h.name=s.name,ll&&(ll.forceContextLoss(),ll.dispose(),ll=null),h}const A0={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Hf{constructor(){this.pluginCallbacks=[],this.register(function(e){return new kB(e)}),this.register(function(e){return new OB(e)}),this.register(function(e){return new zB(e)}),this.register(function(e){return new HB(e)}),this.register(function(e){return new GB(e)}),this.register(function(e){return new VB(e)}),this.register(function(e){return new UB(e)}),this.register(function(e){return new QB(e)}),this.register(function(e){return new $B(e)}),this.register(function(e){return new WB(e)}),this.register(function(e){return new qB(e)}),this.register(function(e){return new jB(e)}),this.register(function(e){return new XB(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){const r=new FB,a=[];for(let o=0,c=this.pluginCallbacks.length;o<c;o++)a.push(this.pluginCallbacks[o](r));r.setPlugins(a),r.write(e,t,n).catch(i)}parseAsync(e,t){const i=this;return new Promise(function(n,r){i.parse(e,n,r,t)})}}const bB=0,v0=1,EB=2,xB=3,_B=4,yp=5120,wp=5121,bp=5122,Ep=5123,y0=5124,w0=5125,b0=5126,xp=34962,SB=34963,CB=9728,IB=9729,MB=9984,TB=9985,BB=9986,RB=9987,LB=33071,DB=33648,PB=10497,_p="KHR_mesh_quantization",An={};An[1003]=CB,An[1004]=MB,An[1005]=BB,An[1006]=IB,An[1007]=TB,An[1008]=RB,An[1001]=LB,An[1e3]=PB,An[1002]=DB;const E0={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},NB=new At;function cl(s,e){return s.length===e.length&&s.every(function(t,i){return t===e[i]})}function vE(s){return 4*Math.ceil(s/4)}function Sp(s,e=0){const t=vE(s.byteLength);if(t!==s.byteLength){const i=new Uint8Array(t);if(i.set(new Uint8Array(s)),e!==0)for(let n=s.byteLength;n<t;n++)i[n]=e;return i.buffer}return s}function x0(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function _0(s,e){if(s.toBlob!==void 0)return new Promise(i=>s.toBlob(i,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),s.convertToBlob({type:e,quality:t})}class FB{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const n=this,r=n.buffers,a=n.json;i=n.options;const o=n.extensionsUsed,c=n.extensionsRequired,h=new Blob(r,{type:"application/octet-stream"}),d=Object.keys(o),u=Object.keys(c);if(d.length>0&&(a.extensionsUsed=d),u.length>0&&(a.extensionsRequired=u),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=h.size),i.binary===!0){const m=new FileReader;m.readAsArrayBuffer(h),m.onloadend=function(){const g=Sp(m.result),y=new DataView(new ArrayBuffer(8));y.setUint32(0,g.byteLength,!0),y.setUint32(4,5130562,!0);const E=Sp((b=JSON.stringify(a),new TextEncoder().encode(b).buffer),32);var b;const C=new DataView(new ArrayBuffer(8));C.setUint32(0,E.byteLength,!0),C.setUint32(4,1313821514,!0);const B=new ArrayBuffer(12),I=new DataView(B);I.setUint32(0,1179937895,!0),I.setUint32(4,2,!0);const k=12+C.byteLength+E.byteLength+y.byteLength+g.byteLength;I.setUint32(8,k,!0);const Q=new Blob([B,C,E,y,g],{type:"application/octet-stream"}),G=new FileReader;G.readAsArrayBuffer(Q),G.onloadend=function(){t(G.result)}}}else if(a.buffers&&a.buffers.length>0){const m=new FileReader;m.readAsDataURL(h),m.onloadend=function(){const g=m.result;a.buffers[0].uri=g,t(a)}}else t(a)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const i=this.options,n=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const a in r.gltfExtensions)t.extensions[a]=r.gltfExtensions[a],n[a]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new le;for(let i=0,n=e.count;i<n;i++)if(Math.abs(t.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),n=new le;for(let r=0,a=i.count;r<a;r++)n.fromBufferAttribute(i,r),n.x===0&&n.y===0&&n.z===0?n.setX(1):n.normalize(),i.setXYZ(r,n.x,n.y,n.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const n={};t.offset.x===0&&t.offset.y===0||(n.offset=t.offset.toArray(),i=!0),t.rotation!==0&&(n.rotation=t.rotation,i=!0),t.repeat.x===1&&t.repeat.y===1||(n.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function i(m){return m.colorSpace===di?function(g){return g<.04045?.0773993808*g:Math.pow(.9478672986*g+.0521327014,2.4)}:function(g){return g}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof sa&&(e=$h(e)),t instanceof sa&&(t=$h(t));const n=e?e.image:null,r=t?t.image:null,a=Math.max(n?n.width:0,r?r.width:0),o=Math.max(n?n.height:0,r?r.height:0),c=x0();c.width=a,c.height=o;const h=c.getContext("2d");h.fillStyle="#00ffff",h.fillRect(0,0,a,o);const d=h.getImageData(0,0,a,o);if(n){h.drawImage(n,0,0,a,o);const m=i(e),g=h.getImageData(0,0,a,o).data;for(let y=2;y<g.length;y+=4)d.data[y]=256*m(g[y]/256)}if(r){h.drawImage(r,0,0,a,o);const m=i(t),g=h.getImageData(0,0,a,o).data;for(let y=1;y<g.length;y+=4)d.data[y]=256*m(g[y]/256)}h.putImageData(d,0,0);const u=(e||t).clone();return u.source=new If(c),u.colorSpace=Kn,u.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),u}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,n,r){const a=this.json;let o;switch(a.bufferViews||(a.bufferViews=[]),t){case yp:case wp:o=1;break;case bp:case Ep:o=2;break;default:o=4}let c=e.itemSize*o;r===xp&&(c=4*Math.ceil(c/4));const h=vE(n*c),d=new DataView(new ArrayBuffer(h));let u=0;for(let g=i;g<i+n;g++){for(let y=0;y<e.itemSize;y++){let E;e.itemSize>4?E=e.array[g*e.itemSize+y]:(y===0?E=e.getX(g):y===1?E=e.getY(g):y===2?E=e.getZ(g):y===3&&(E=e.getW(g)),e.normalized===!0&&(E=Oh.normalize(E,e.array))),t===b0?d.setFloat32(u,E,!0):t===y0?d.setInt32(u,E,!0):t===w0?d.setUint32(u,E,!0):t===bp?d.setInt16(u,E,!0):t===Ep?d.setUint16(u,E,!0):t===yp?d.setInt8(u,E):t===wp&&d.setUint8(u,E),u+=o}u%c!=0&&(u+=c-u%c)}const m={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:h};return r!==void 0&&(m.target=r),r===xp&&(m.byteStride=c),this.byteOffset+=h,a.bufferViews.push(m),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(n){const r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){const a=Sp(r.result),o={buffer:t.processBuffer(a),byteOffset:t.byteOffset,byteLength:a.byteLength};t.byteOffset+=a.byteLength,n(i.bufferViews.push(o)-1)}})}processAccessor(e,t,i,n){const r=this.json;let a;if(e.array.constructor===Float32Array)a=b0;else if(e.array.constructor===Int32Array)a=y0;else if(e.array.constructor===Uint32Array)a=w0;else if(e.array.constructor===Int16Array)a=bp;else if(e.array.constructor===Uint16Array)a=Ep;else if(e.array.constructor===Int8Array)a=yp;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);a=wp}if(i===void 0&&(i=0),n!==void 0&&n!==1/0||(n=e.count),n===0)return null;const o=function(u,m,g){const y={min:new Array(u.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(u.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let E=m;E<m+g;E++)for(let b=0;b<u.itemSize;b++){let C;u.itemSize>4?C=u.array[E*u.itemSize+b]:(b===0?C=u.getX(E):b===1?C=u.getY(E):b===2?C=u.getZ(E):b===3&&(C=u.getW(E)),u.normalized===!0&&(C=Oh.normalize(C,u.array))),y.min[b]=Math.min(y.min[b],C),y.max[b]=Math.max(y.max[b],C)}return y}(e,i,n);let c;t!==void 0&&(c=e===t.index?SB:xp);const h=this.processBufferView(e,a,i,n,c),d={bufferView:h.id,byteOffset:h.byteOffset,componentType:a,count:n,max:o.max,min:o.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return e.normalized===!0&&(d.normalized=!0),r.accessors||(r.accessors=[]),r.accessors.push(d)-1}processImage(e,t,i,n="image/png"){if(e!==null){const r=this,a=r.cache,o=r.json,c=r.options,h=r.pending;a.images.has(e)||a.images.set(e,{});const d=a.images.get(e),u=n+":flipY/"+i.toString();if(d[u]!==void 0)return d[u];o.images||(o.images=[]);const m={mimeType:n},g=x0();g.width=Math.min(e.width,c.maxTextureSize),g.height=Math.min(e.height,c.maxTextureSize);const y=g.getContext("2d");if(i===!0&&(y.translate(0,g.height),y.scale(1,-1)),e.data!==void 0){t!==gi&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>c.maxTextureSize||e.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const b=new Uint8ClampedArray(e.height*e.width*4);for(let C=0;C<b.length;C+=4)b[C+0]=e.data[C+0],b[C+1]=e.data[C+1],b[C+2]=e.data[C+2],b[C+3]=e.data[C+3];y.putImageData(new ImageData(b,e.width,e.height),0,0)}else{if(!(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas))throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");y.drawImage(e,0,0,g.width,g.height)}c.binary===!0?h.push(_0(g,n).then(b=>r.processBufferViewImage(b)).then(b=>{m.bufferView=b})):g.toDataURL!==void 0?m.uri=g.toDataURL(n):h.push(_0(g,n).then(b=>new FileReader().readAsDataURL(b)).then(b=>{m.uri=b}));const E=o.images.push(m)-1;return d[u]=E,E}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:An[e.magFilter],minFilter:An[e.minFilter],wrapS:An[e.wrapS],wrapT:An[e.wrapT]};return t.samplers.push(i)-1}processTexture(e){const t=this.options,i=this.cache,n=this.json;if(i.textures.has(e))return i.textures.get(e);n.textures||(n.textures=[]),e instanceof sa&&(e=$h(e,t.maxTextureSize));let r=e.userData.mimeType;r==="image/webp"&&(r="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(a.name=e.name),this._invokeAll(function(c){c.writeTexture&&c.writeTexture(e,a)});const o=n.textures.push(a)-1;return i.textures.set(e,o),o}processMaterial(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const n={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=e.color.toArray().concat([e.opacity]);if(cl(r,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=e.metalness,n.pbrMetallicRoughness.roughnessFactor=e.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const o=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),c={index:this.processTexture(o),channel:o.channel};this.applyTextureTransform(c,o),n.pbrMetallicRoughness.metallicRoughnessTexture=c}if(e.map){const o={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(o,e.map),n.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){const o=e.emissive;if(Math.max(o.r,o.g,o.b)>0&&(n.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),n.emissiveTexture=c}}if(e.normalMap){const o={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(o.scale=e.normalScale.x),this.applyTextureTransform(o,e.normalMap),n.normalTexture=o}if(e.aoMap){const o={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(o.strength=e.aoMapIntensity),this.applyTextureTransform(o,e.aoMap),n.occlusionTexture=o}e.transparent?n.alphaMode="BLEND":e.alphaTest>0&&(n.alphaMode="MASK",n.alphaCutoff=e.alphaTest),e.side===Zi&&(n.doubleSided=!0),e.name!==""&&(n.name=e.name),this.serializeUserData(e,n),this._invokeAll(function(o){o.writeMaterial&&o.writeMaterial(e,n)});const a=i.materials.push(n)-1;return t.materials.set(e,a),a}processMesh(e){const t=this.cache,i=this.json,n=[e.geometry.uuid];if(Array.isArray(e.material))for(let k=0,Q=e.material.length;k<Q;k++)n.push(e.material[k].uuid);else n.push(e.material.uuid);const r=n.join(":");if(t.meshes.has(r))return t.meshes.get(r);const a=e.geometry;let o;o=e.isLineSegments?v0:e.isLineLoop?EB:e.isLine?xB:e.isPoints?bB:e.material.wireframe?v0:_B;const c={},h={},d=[],u=[],m={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},g=a.getAttribute("normal");g===void 0||this.isNormalizedNormalAttribute(g)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(g)));let y=null;for(let k in a.attributes){if(k.slice(0,5)==="morph")continue;const Q=a.attributes[k];if(k=m[k]||k.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(k)||(k="_"+k),t.attributes.has(this.getUID(Q))){h[k]=t.attributes.get(this.getUID(Q));continue}y=null;const G=Q.array;k!=="JOINTS_0"||G instanceof Uint16Array||G instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new ui(new Uint16Array(G),Q.itemSize,Q.normalized));const U=this.processAccessor(y||Q,a);U!==null&&(k.startsWith("_")||this.detectMeshQuantization(k,Q),h[k]=U,t.attributes.set(this.getUID(Q),U))}if(g!==void 0&&a.setAttribute("normal",g),Object.keys(h).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const k=[],Q=[],G={};if(e.morphTargetDictionary!==void 0)for(const U in e.morphTargetDictionary)G[e.morphTargetDictionary[U]]=U;for(let U=0;U<e.morphTargetInfluences.length;++U){const te={};let ue=!1;for(const pe in a.morphAttributes){if(pe!=="position"&&pe!=="normal"){ue||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),ue=!0);continue}const ce=a.morphAttributes[pe][U],he=pe.toUpperCase(),Me=a.attributes[pe];if(t.attributes.has(this.getUID(ce,!0))){te[he]=t.attributes.get(this.getUID(ce,!0));continue}const De=ce.clone();if(!a.morphTargetsRelative)for(let Qe=0,Ee=ce.count;Qe<Ee;Qe++)for(let ke=0;ke<ce.itemSize;ke++)ke===0&&De.setX(Qe,ce.getX(Qe)-Me.getX(Qe)),ke===1&&De.setY(Qe,ce.getY(Qe)-Me.getY(Qe)),ke===2&&De.setZ(Qe,ce.getZ(Qe)-Me.getZ(Qe)),ke===3&&De.setW(Qe,ce.getW(Qe)-Me.getW(Qe));te[he]=this.processAccessor(De,a),t.attributes.set(this.getUID(Me,!0),te[he])}u.push(te),k.push(e.morphTargetInfluences[U]),e.morphTargetDictionary!==void 0&&Q.push(G[U])}c.weights=k,Q.length>0&&(c.extras={},c.extras.targetNames=Q)}const E=Array.isArray(e.material);if(E&&a.groups.length===0)return null;let b=!1;if(E&&a.index===null){const k=[];for(let Q=0,G=a.attributes.position.count;Q<G;Q++)k[Q]=Q;a.setIndex(k),b=!0}const C=E?e.material:[e.material],B=E?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let k=0,Q=B.length;k<Q;k++){const G={mode:o,attributes:h};if(this.serializeUserData(a,G),u.length>0&&(G.targets=u),a.index!==null){let te=this.getUID(a.index);B[k].start===void 0&&B[k].count===void 0||(te+=":"+B[k].start+":"+B[k].count),t.attributes.has(te)?G.indices=t.attributes.get(te):(G.indices=this.processAccessor(a.index,a,B[k].start,B[k].count),t.attributes.set(te,G.indices)),G.indices===null&&delete G.indices}const U=this.processMaterial(C[B[k].materialIndex]);U!==null&&(G.material=U),d.push(G)}b===!0&&a.setIndex(null),c.primitives=d,i.meshes||(i.meshes=[]),this._invokeAll(function(k){k.writeMesh&&k.writeMesh(e,c)});const I=i.meshes.push(c)-1;return t.meshes.set(r,I),I}detectMeshQuantization(e,t){if(this.extensionsUsed[_p])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const n=e.split("_",1)[0];A0[n]&&A0[n].includes(i)&&(this.extensionsUsed[_p]=!0,this.extensionsRequired[_p]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:Oh.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(n.name=e.type),t.cameras.push(n)-1}processAnimation(e,t){const i=this.json,n=this.nodeMap;i.animations||(i.animations=[]);const r=(e=Hf.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,a=[],o=[];for(let c=0;c<r.length;++c){const h=r[c],d=Ft.parseTrackName(h.name);let u=Ft.findNode(t,d.nodeName);const m=E0[d.propertyName];if(d.objectName==="bones"&&(u=u.isSkinnedMesh===!0?u.skeleton.getBoneByName(d.objectIndex):void 0),!u||!m)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',h.name),null;const g=1;let y,E=h.values.length/h.times.length;m===E0.morphTargetInfluences&&(E/=u.morphTargetInfluences.length),h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(y="CUBICSPLINE",E/=3):y=h.getInterpolation()===Co?"STEP":"LINEAR",o.push({input:this.processAccessor(new ui(h.times,g)),output:this.processAccessor(new ui(h.values,E)),interpolation:y}),a.push({sampler:o.length-1,target:{node:n.get(u),path:m}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:o,channels:a}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,n=t.nodes[i.get(e)],r=e.skeleton;if(r===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const o=[],c=new Float32Array(16*r.bones.length),h=new yt;for(let d=0;d<r.bones.length;++d)o.push(i.get(r.bones[d])),h.copy(r.boneInverses[d]),h.multiply(e.bindMatrix).toArray(c,16*d);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new ui(c,16)),joints:o,skeleton:i.get(a)}),n.skin=t.skins.length-1}processNode(e){const t=this.json,i=this.options,n=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(i.trs){const o=e.quaternion.toArray(),c=e.position.toArray(),h=e.scale.toArray();cl(o,[0,0,0,1])||(r.rotation=o),cl(c,[0,0,0])||(r.translation=c),cl(h,[1,1,1])||(r.scale=h)}else e.matrixAutoUpdate&&e.updateMatrix(),cl(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])===!1&&(r.matrix=e.matrix.elements);if(e.name!==""&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){const o=this.processMesh(e);o!==null&&(r.mesh=o)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const o=[];for(let c=0,h=e.children.length;c<h;c++){const d=e.children[c];if(d.visible||i.onlyVisible===!1){const u=this.processNode(d);u!==null&&o.push(u)}}o.length>0&&(r.children=o)}this._invokeAll(function(o){o.writeNode&&o.writeNode(e,r)});const a=t.nodes.push(r)-1;return n.set(e,a),a}processScene(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const n={};e.name!==""&&(n.name=e.name),t.scenes.push(n);const r=[];for(let a=0,o=e.children.length;a<o;a++){const c=e.children[a];if(c.visible||i.onlyVisible===!1){const h=this.processNode(c);h!==null&&r.push(h)}}r.length>0&&(n.nodes=r),this.serializeUserData(e,n)}processObjects(e){const t=new Ar;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(n){n.beforeParse&&n.beforeParse(e)});const i=[];for(let n=0;n<e.length;n++)e[n]instanceof Ar?this.processScene(e[n]):i.push(e[n]);i.length>0&&this.processObjects(i);for(let n=0;n<this.skins.length;++n)this.processSkin(this.skins[n]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);this._invokeAll(function(n){n.afterParse&&n.afterParse(e)})}_invokeAll(e){for(let t=0,i=this.plugins.length;t<i;t++)e(this.plugins[t])}}class kB{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const i=this.writer,n=i.json,r=i.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(1-e.penumbra)*e.angle,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&e.target.position.x===0&&e.target.position.y===0&&e.target.position.z===-1||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},r[this.name]=!0);const o=n.extensions[this.name].lights;o.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}}class OB{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class UB{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){const a={index:i.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(a,e.clearcoatMap),r.clearcoatTexture=a}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const a={index:i.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(a,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){const a={index:i.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};i.applyTextureTransform(a,e.clearcoatNormalMap),r.clearcoatNormalTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class QB{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){const a={index:i.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(a,e.iridescenceMap),r.iridescenceTexture=a}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const a={index:i.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(a,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class zB{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){const a={index:i.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(a,e.transmissionMap),r.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class HB{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){const a={index:i.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(a,e.thicknessMap),r.thicknessTexture=a}r.attenuationDistance=e.attenuationDistance,r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class GB{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const i=this.writer.extensionsUsed,n={};n.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class VB{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(NB)&&!e.specularIntensityMap&&!e.specularColorMap)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.specularIntensityMap){const a={index:i.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(a,e.specularIntensityMap),r.specularTexture=a}if(e.specularColorMap){const a={index:i.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(a,e.specularColorMap),r.specularColorTexture=a}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class $B{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.sheenRoughnessMap){const a={index:i.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(a,e.sheenRoughnessMap),r.sheenRoughnessTexture=a}if(e.sheenColorMap){const a={index:i.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(a,e.sheenColorMap),r.sheenColorTexture=a}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class WB{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.anisotropyMap){const a={index:i.processTexture(e.anisotropyMap)};i.applyTextureTransform(a,e.anisotropyMap),r.anisotropyTexture=a}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class qB{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,n={};n.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class jB{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.bumpMap){const a={index:i.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(a,e.bumpMap),r.bumpTexture=a}r.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class XB{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const i=this.writer,n=e,r=new Float32Array(3*n.count),a=new Float32Array(4*n.count),o=new Float32Array(3*n.count),c=new yt,h=new le,d=new xn,u=new le;for(let g=0;g<n.count;g++)n.getMatrixAt(g,c),c.decompose(h,d,u),h.toArray(r,3*g),d.toArray(a,4*g),u.toArray(o,3*g);const m={TRANSLATION:i.processAccessor(new ui(r,3)),ROTATION:i.processAccessor(new ui(a,4)),SCALE:i.processAccessor(new ui(o,3))};n.instanceColor&&(m._COLOR_0=i.processAccessor(n.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:m},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}}Hf.Utils={insertKeyframe:function(s,e){const i=s.getValueSize(),n=new s.TimeBufferType(s.times.length+1),r=new s.ValueBufferType(s.values.length+i),a=s.createInterpolant(new s.ValueBufferType(i));let o;if(s.times.length===0){n[0]=e;for(let c=0;c<i;c++)r[c]=0;o=0}else if(e<s.times[0]){if(Math.abs(s.times[0]-e)<.001)return 0;n[0]=e,n.set(s.times,1),r.set(a.evaluate(e),0),r.set(s.values,i),o=0}else if(e>s.times[s.times.length-1]){if(Math.abs(s.times[s.times.length-1]-e)<.001)return s.times.length-1;n[n.length-1]=e,n.set(s.times,0),r.set(s.values,0),r.set(a.evaluate(e),s.values.length),o=n.length-1}else for(let c=0;c<s.times.length;c++){if(Math.abs(s.times[c]-e)<.001)return c;if(s.times[c]<e&&s.times[c+1]>e){n.set(s.times.slice(0,c+1),0),n[c+1]=e,n.set(s.times.slice(c+1),c+2),r.set(s.values.slice(0,(c+1)*i),0),r.set(a.evaluate(e),(c+1)*i),r.set(s.values.slice((c+1)*i),(c+2)*i),o=c+1;break}}return s.times=n,s.values=r,o},mergeMorphTargetTracks:function(s,e){const t=[],i={},n=s.tracks;for(let r=0;r<n.length;++r){let a=n[r];const o=Ft.parseTrackName(a.name),c=Ft.findNode(e,o.nodeName);if(o.propertyName!=="morphTargetInfluences"||o.propertyIndex===void 0){t.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(ca)}const h=c.morphTargetInfluences.length,d=c.morphTargetDictionary[o.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let u;if(i[c.uuid]===void 0){u=a.clone();const g=new u.ValueBufferType(h*u.times.length);for(let y=0;y<u.times.length;y++)g[y*h+d]=u.values[y];u.name=(o.nodeName||"")+".morphTargetInfluences",u.values=g,i[c.uuid]=u,t.push(u);continue}const m=a.createInterpolant(new a.ValueBufferType(1));u=i[c.uuid];for(let g=0;g<u.times.length;g++)u.values[g*h+d]=m.evaluate(u.times[g]);for(let g=0;g<a.times.length;g++){const y=this.insertKeyframe(u,a.times[g]);u.values[y*h+d]=a.values[g]}}return s.tracks=t,s}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=s=>s.material!==void 0&&s.userData&&s.userData.variantMaterials&&!!Array.from(s.userData.variantMaterials.values()).filter(e=>Wh(e.material)),Wh=s=>s&&s.isMaterial&&!Array.isArray(s);class YB{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set;for(const i of e)i.traverse(n=>{if(!S0(n))return;const r=n.userData.variantMaterials,a=n.userData.variantData;for(const[o,c]of a){const h=r.get(c.index);h&&Wh(h.material)&&t.add(o)}});t.forEach(i=>this.variantNames.push(i))}writeMesh(e,t){if(!S0(e))return;const i=e.userData,n=i.variantMaterials,r=i.variantData,a=new Map,o=new Map,c=Array.from(r.values()).sort((u,m)=>u.index-m.index);for(const[u,m]of c.entries())o.set(m.index,u);for(const u of r.values()){const m=n.get(u.index);if(!m||!Wh(m.material))continue;const g=this.writer.processMaterial(m.material);a.has(g)||a.set(g,{material:g,variants:[]}),a.get(g).variants.push(o.get(u.index))}const h=Array.from(a.values()).map(u=>u.variants.sort((m,g)=>m-g)&&u).sort((u,m)=>u.material-m.material);if(h.length===0)return;const d=Wh(i.originalMaterial)?this.writer.processMaterial(i.originalMaterial):-1;for(const u of t.primitives)d>=0&&(u.material=d),u.extensions=u.extensions||{},u.extensions[this.name]={mappings:h}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map(i=>({name:i}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class KB{constructor(e,t,i,n,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const a=t.xr.getSession();if(n&&"XRWebGLBinding"in window){const o=new Tf(16);e.environment=o.texture;const c=t.getContext();switch(a.preferredReflectionFormat){case"srgba8":c.getExtension("EXT_sRGB");break;case"rgba16f":c.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(a,c),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}a.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const n=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/n,i.primaryLightIntensity.y/n,i.primaryLightIntensity.z/n),this.xrLight.directionalLight.intensity=n,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class JB extends ur{constructor(e,t=!0){super(),this.lightProbe=new YM,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new Hb,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,n=!1;e.xr.addEventListener("sessionstart",()=>{const r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then(a=>{i=new KB(this,e,a,t,()=>{n=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{i&&(i.dispose(),i=null),n&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(.001,e)}update(e,t,i,n){const r=2e-4*this.naturalFrequency;if(e==null||n===0||e===t&&this.velocity===0)return t;if(i<0)return e;const a=e-t,o=this.velocity+this.naturalFrequency*a,c=a+i*o,h=Math.exp(-this.naturalFrequency*i),d=(o-this.naturalFrequency*c)*h,u=-this.naturalFrequency*(d+o*h);return Math.abs(d)<r*Math.abs(n)&&u*a>=0?(this.velocity=0,t):(this.velocity=d,t+c*h)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=.2,ZB=Math.PI/24,C0=new vt,ah=(s,e,t)=>{let i=e>0?t>0?0:-Math.PI/2:t>0?Math.PI/2:Math.PI;for(let n=0;n<=12;++n)s.push(e+.17*Math.cos(i),t+.17*Math.sin(i),0,e+fd*Math.cos(i),t+fd*Math.sin(i),0),i+=ZB};class I0 extends Zt{constructor(e,t){const i=new Sn,n=[],r=[],{size:a,boundingBox:o}=e,c=a.x/2,h=(t==="back"?a.y:a.z)/2;ah(r,c,h),ah(r,-c,h),ah(r,-c,-h),ah(r,c,-h);const d=r.length/3;for(let g=0;g<d-2;g+=2)n.push(g,g+1,g+3,g,g+3,g+2);const u=d-2;n.push(u,u+1,1,u,1,0),i.setAttribute("position",new _n(r,3)),i.setIndex(n),super(i),this.side=t;const m=this.material;switch(m.side=Zi,m.transparent=!0,m.opacity=0,this.goalOpacity=0,this.opacityDamper=new yn,this.hitPlane=new Zt(new ys(2*(c+fd),2*(h+fd))),this.hitPlane.visible=!1,this.hitPlane.material.side=Zi,this.add(this.hitPlane),o.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=o.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=o.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.offsetHeight=0}getHit(e,t,i){C0.set(t,-i),this.hitPlane.visible=!0;const n=e.positionAndNormalFromPoint(C0,this.hitPlane);return this.hitPlane.visible=!1,n==null?null:n.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const n=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),n}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?.75:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){var e;const{geometry:t,material:i}=this.hitPlane;t.dispose(),i.dispose(),this.geometry.dispose(),this.material.dispose(),(e=this.parent)===null||e===void 0||e.remove(this)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=(s,e)=>({type:"number",number:s,unit:e}),Gs=(()=>{const s={};return e=>{const t=e;if(t in s)return s[t];const i=[];let n=0;for(;e;){if(++n>1e3){e="";break}const r=yE(e),a=r.nodes[0];if(a==null||a.terms.length===0)break;i.push(a),e=r.remainingInput}return s[t]=i}})(),yE=(()=>{const s=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,t=/^[\),]/;return i=>{const n=[];for(;i.length&&(i=i.trim(),!t.test(i));)if(i[0]==="("){const{nodes:r,remainingInput:a}=M0(i);i=a,n.push({type:"function",name:{type:"ident",value:"calc"},arguments:r})}else if(s.test(i)){const r=eR(i),a=r.nodes[0];if((i=r.remainingInput)[0]==="("){const{nodes:o,remainingInput:c}=M0(i);n.push({type:"function",name:a,arguments:o}),i=c}else n.push(a)}else if(e.test(i))n.push({type:"operator",value:i[0]}),i=i.slice(1);else{const{nodes:r,remainingInput:a}=i[0]==="#"?iR(i):tR(i);if(r.length===0)break;n.push(r[0]),i=a}return{nodes:[{type:"expression",terms:n}],remainingInput:i}}})(),eR=(()=>{const s=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const t=e.match(s);return{nodes:[{type:"ident",value:t==null?e:e.substr(0,t.index)}],remainingInput:t==null?"":e.substr(t.index)}}})(),tR=(()=>{const s=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,t=/^(m|mm|cm|rad|deg|[%])$/;return i=>{const n=i.match(s),r=n==null?"0":n[0],a=(i=r==null?i:i.slice(r.length)).match(e);let o=a!=null&&a[0]!==""?a[0]:null;const c=a==null?i:i.slice(o.length);return o==null||t.test(o)||(o=null),{nodes:[{type:"number",number:parseFloat(r)||0,unit:o}],remainingInput:c}}})(),iR=(()=>{const s=/^[a-f0-9]*/i;return e=>{const t=(e=e.slice(1).trim()).match(s);return{nodes:t==null?[]:[{type:"hex",value:t[0]}],remainingInput:t==null?e:e.slice(t[0].length)}}})(),M0=s=>{const e=[];for(s=s.slice(1).trim();s.length;){const t=yE(s);if(e.push(t.nodes[0]),(s=t.remainingInput.trim())[0]===",")s=s.slice(1).trim();else if(s[0]===")"){s=s.slice(1);break}}return{nodes:e,remainingInput:s}},T0=Symbol("visitedTypes");class nR{constructor(e){this[T0]=e}walk(e,t){const i=e.slice();for(;i.length;){const n=i.shift();switch(this[T0].indexOf(n.type)>-1&&t(n),n.type){case"expression":i.unshift(...n.terms);break;case"function":i.unshift(n.name,...n.arguments)}}}}const vr=Object.freeze({type:"number",number:0,unit:null}),Fd=(s,e=0)=>{let{number:t,unit:i}=s;if(isFinite(t)){if(s.unit==="rad"||s.unit==null)return s}else t=e,i="rad";return{type:"number",number:(i==="deg"&&t!=null?t:0)*Math.PI/180,unit:"rad"}},B0=(s,e=0)=>{let t,{number:i,unit:n}=s;if(isFinite(i)){if(s.unit==="m")return s}else i=e,n="m";switch(n){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*i,unit:"m"}},gs=(()=>{const s=t=>t,e={rad:s,deg:Fd,m:s,mm:B0,cm:B0};return(t,i=vr)=>{isFinite(t.number)||(t.number=i.number,t.unit=i.unit);const{unit:n}=t;if(n==null)return t;const r=e[n];return r==null?i:r(t)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wE,R0,L0;const Uo=Symbol("evaluate"),qh=Symbol("lastValue");class hi{constructor(){this[wE]=null}static evaluatableFor(e,t=vr){if(e instanceof hi)return e;if(e.type==="number")return e.unit==="%"?new sR(e,t):e;switch(e.name.value){case"calc":return new oR(e,t);case"env":return new rR(e)}return vr}static evaluate(e){return e instanceof hi?e.evaluate():e}static isConstant(e){return!(e instanceof hi)||e.isConstant}static applyIntrinsics(e,t){const{basis:i,keywords:n}=t,{auto:r}=n;return i.map((a,o)=>{const c=r[o]==null?a:r[o];let h=e[o]?e[o]:c;if(h.type==="ident"){const d=h.value;d in n&&(h=n[d][o])}return h!=null&&h.type!=="ident"||(h=c),h.unit==="%"?en(h.number/100*a.number,a.unit):(h=gs(h,a),h.unit!==a.unit?a:h)})}get isConstant(){return!1}evaluate(){return this.isConstant&&this[qh]!=null||(this[qh]=this[Uo]()),this[qh]}}wE=qh;const D0=Symbol("percentage"),Cp=Symbol("basis");class sR extends hi{constructor(e,t){super(),this[D0]=e,this[Cp]=t}get isConstant(){return!0}[Uo](){return en(this[D0].number/100*this[Cp].number,this[Cp].unit)}}const oh=Symbol("identNode");class rR extends hi{constructor(e){super(),this[R0]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;t!=null&&t.type==="ident"&&(this[oh]=t)}get isConstant(){return!1}[(R0=oh,Uo)](){return this[oh]!=null&&this[oh].value==="window-scroll-y"?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:vr}}const aR=/[\*\/]/,Ga=Symbol("evaluator");class oR extends hi{constructor(e,t=vr){if(super(),this[L0]=null,e.arguments.length!==1)return;const i=e.arguments[0].terms.slice(),n=[];for(;i.length;){const r=i.shift();if(n.length>0){const a=n[n.length-1];if(a.type==="operator"&&aR.test(a.value)){const o=n.pop(),c=n.pop();if(c==null)return;n.push(new N0(o,hi.evaluatableFor(c,t),hi.evaluatableFor(r,t)));continue}}n.push(r.type==="operator"?r:hi.evaluatableFor(r,t))}for(;n.length>2;){const[r,a,o]=n.splice(0,3);if(a.type!=="operator")return;n.unshift(new N0(a,hi.evaluatableFor(r,t),hi.evaluatableFor(o,t)))}n.length===1&&(this[Ga]=n[0])}get isConstant(){return this[Ga]==null||hi.isConstant(this[Ga])}[(L0=Ga,Uo)](){return this[Ga]!=null?hi.evaluate(this[Ga]):vr}}const P0=Symbol("operator"),Ip=Symbol("left"),Mp=Symbol("right");class N0 extends hi{constructor(e,t,i){super(),this[P0]=e,this[Ip]=t,this[Mp]=i}get isConstant(){return hi.isConstant(this[Ip])&&hi.isConstant(this[Mp])}[Uo](){const e=gs(hi.evaluate(this[Ip])),t=gs(hi.evaluate(this[Mp])),{number:i,unit:n}=e,{number:r,unit:a}=t;if(a!=null&&n!=null&&a!=n)return vr;const o=n||a;let c;switch(this[P0].value){case"+":c=i+r;break;case"-":c=i-r;break;case"/":c=i/r;break;case"*":c=i*r;break;default:return vr}return{type:"number",number:c,unit:o}}}const Tp=Symbol("evaluatables"),F0=Symbol("intrinsics");class bE extends hi{constructor(e,t){super(),this[F0]=t;const i=e[0],n=i!=null?i.terms:[];this[Tp]=t.basis.map((r,a)=>{const o=n[a];return o==null?{type:"ident",value:"auto"}:o.type==="ident"?o:hi.evaluatableFor(o,r)})}get isConstant(){for(const e of this[Tp])if(!hi.isConstant(e))return!1;return!0}[Uo](){const e=this[Tp].map(t=>hi.evaluate(t));return hi.applyIntrinsics(e,this[F0]).map(t=>t.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EE,xE,_E,SE;const Va=Symbol("instances"),k0=Symbol("activateListener"),O0=Symbol("deactivateListener"),Bp=Symbol("notifyInstances"),U0=Symbol("notify"),Q0=Symbol("callback");class us{constructor(e){this[Q0]=e}static[Bp](){for(const e of us[Va])e[U0]()}static[(EE=Va,k0)](){window.addEventListener("scroll",this[Bp],{passive:!0})}static[O0](){window.removeEventListener("scroll",this[Bp])}observe(){us[Va].size===0&&us[k0](),us[Va].add(this)}disconnect(){us[Va].delete(this),us[Va].size===0&&us[O0]()}[U0](){this[Q0]()}}us[EE]=new Set;const z0=Symbol("computeStyleCallback"),CE=Symbol("astWalker"),Ml=Symbol("dependencies"),IE=Symbol("onScroll");class lR{constructor(e){this[xE]={},this[_E]=new nR(["function"]),this[SE]=()=>{this[z0]({relatedState:"window-scroll"})},this[z0]=e}observeEffectsFor(e){const t={},i=this[Ml];this[CE].walk(e,n=>{const{name:r}=n,a=n.arguments[0].terms[0];if(r.value==="env"&&a!=null&&a.type==="ident"&&a.value==="window-scroll-y"&&t["window-scroll"]==null){const o="window-scroll"in i?i["window-scroll"]:new us(this[IE]);o.observe(),delete i["window-scroll"],t["window-scroll"]=o}});for(const n in i)i[n].disconnect();this[Ml]=t}dispose(){for(const e in this[Ml])this[Ml][e].disconnect()}}xE=Ml,_E=CE,SE=IE;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=s=>{const e=s.observeEffects||!1,t=s.intrinsics instanceof Function?s.intrinsics:()=>s.intrinsics;return(i,n)=>{const r=i.updated,a=i.connectedCallback,o=i.disconnectedCallback,c=Symbol(`${n}StyleEffector`),h=Symbol(`${n}StyleEvaluator`),d=Symbol(`${n}UpdateEvaluator`),u=Symbol(`${n}EvaluateAndSync`);Object.defineProperties(i,{[c]:{value:null,writable:!0},[h]:{value:null,writable:!0},[d]:{value:function(){const m=Gs(this[n]);this[h]=new bE(m,t(this)),this[c]==null&&e&&(this[c]=new lR(()=>this[u]())),this[c]!=null&&this[c].observeEffectsFor(m)}},[u]:{value:function(){if(this[h]==null)return;const m=this[h].evaluate();this[s.updateHandler](m)}},updated:{value:function(m){m.has(n)&&(this[d](),this[u]()),r.call(this,m)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(n,this[n])}},disconnectedCallback:{value:function(){o.call(this),this[c]!=null&&(this[c].dispose(),this[c]=null)}}})}},ME=s=>s<.5?2*s*s:(4-2*s)*s-1,cR=(s,e,t=ME)=>i=>s+(e-s)*t(i),mo=s=>{const e=[],t=[];let i=s.initialValue;for(let n=0;n<s.keyframes.length;++n){const r=s.keyframes[n],{value:a,frames:o}=r,c=r.ease||ME,h=cR(i,a,c);e.push(h),t.push(o),i=a}return((n,r)=>{const a=r.map((o=0,c=>o+=c));var o;return c=>{c=ms(c,0,1),c*=a[a.length-1];const h=a.findIndex(m=>m>=c),d=h<1?0:a[h-1],u=a[h];return n[h]((c-d)/(u-d))}})(e,t)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const hR=mo({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),dR=mo({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),TE="0deg 75deg 105%",uR=["front","right","back","left"],pR=["upper-","","lower-"],lh="auto",mR="basic",H0="wiggle",fR="none",G0=()=>({basis:[Fd(en(30,"deg"))],keywords:{auto:[null]}}),gR=()=>({basis:[Fd(en(12,"deg"))],keywords:{auto:[null]}}),BE=(()=>{const s=Gs(TE)[0].terms,e=gs(s[0]),t=gs(s[1]);return i=>{const n=i[tt].idealCameraDistance();return{basis:[e,t,en(n,"m")],keywords:{auto:[null,null,en(105,"%")]}}}})(),AR=s=>{const e=2.2*s[tt].boundingSphere.radius;return{basis:[en(-1/0,"rad"),en(Math.PI/8,"rad"),en(e,"m")],keywords:{auto:[null,null,null]}}},vR=s=>{const e=BE(s),t=new bE([],e).evaluate()[2];return{basis:[en(1/0,"rad"),en(Math.PI-Math.PI/8,"rad"),en(t,"m")],keywords:{auto:[null,null,null]}}},yR=s=>{const e=s[tt].boundingBox.getCenter(new le);return{basis:[en(e.x,"m"),en(e.y,"m"),en(e.z,"m")],keywords:{auto:[null,null,null]}}},RE=Math.PI/2,wR=Math.PI/3,bR=RE/2,ER=2*Math.PI,$t=Symbol("controls"),jh=Symbol("panElement"),Rp=Symbol("promptElement"),ch=Symbol("promptAnimatedContainer"),Lp=Symbol("fingerAnimatedContainers"),hh=Symbol("deferInteractionPrompt"),V0=Symbol("updateAria"),Ns=Symbol("a11y"),$0=Symbol("updateA11y"),W0=Symbol("updateCameraForRadius"),$a=Symbol("cancelPrompts"),Dp=Symbol("onChange"),hl=Symbol("onPointerChange"),kr=Symbol("waitingToPromptUser"),dh=Symbol("userHasInteracted"),Wa=Symbol("promptElementVisibleTime"),dl=Symbol("lastPromptOffset"),uh=Symbol("cancellationSource"),Pp=Symbol("lastSpherical"),ul=Symbol("jumpCamera"),Np=Symbol("initialized"),pl=Symbol("maintainThetaPhi"),q0=Symbol("syncCameraOrbit"),j0=Symbol("syncFieldOfView"),X0=Symbol("syncCameraTarget"),Y0=Symbol("syncMinCameraOrbit"),K0=Symbol("syncMaxCameraOrbit"),J0=Symbol("syncMinFieldOfView"),Z0=Symbol("syncMaxFieldOfView"),xR=new vt,ey=new le,ty=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),ph=Math.PI/8,Fp=.04,fi={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class _R extends rs{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=fi.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new St,this.panPerPixel=0,this.spherical=new Qh,this.goalSpherical=new Qh,this.thetaDamper=new yn,this.phiDamper=new yn,this.radiusDamper=new yn,this.logFov=Math.log(ty.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new yn,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=n=>{if(this.enablePan)n.preventDefault();else for(const r of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:r.id})))},this.touchModeZoom=(n,r)=>{if(!this._disableZoom){const a=this.twoTouchDistance(this.pointers[0],this.pointers[1]),o=Fp*this.zoomSensitivity*(this.lastSeparation-a)*50/this.scene.height;this.lastSeparation=a,this.userAdjustOrbit(0,0,o)}this.panPerPixel>0&&this.movePan(n,r)},this.disableScroll=n=>{n.preventDefault()},this.touchModeRotate=(n,r)=>{const{touchAction:a}=this._options;if(!this.touchDecided&&a!=="none"){this.touchDecided=!0;const o=Math.abs(n),c=Math.abs(r);if(this.changeSource===fi.USER_INTERACTION&&(a==="pan-y"&&c>o||a==="pan-x"&&o>c))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(n,r)},this.onPointerDown=n=>{if(this.pointers.length>2)return;const{element:r}=this;this.pointers.length===0&&(r.addEventListener("pointermove",this.onPointerMove),r.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=n.clientX,this.startPointerPosition.clientY=n.clientY,this.startTime=performance.now());try{r.setPointerCapture(n.pointerId)}catch{}this.pointers.push({clientX:n.clientX,clientY:n.clientY,id:n.pointerId}),this.isUserPointing=!1,n.pointerType==="touch"?(this.changeSource=n.altKey?fi.AUTOMATIC:fi.USER_INTERACTION,this.onTouchChange(n)):(this.changeSource=fi.USER_INTERACTION,this.onMouseDown(n)),this.changeSource===fi.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=n=>{const r=this.pointers.find(h=>h.id===n.pointerId);if(r==null)return;if(n.pointerType==="mouse"&&n.buttons===0)return void this.onPointerUp(n);const a=this.pointers.length,o=(n.clientX-r.clientX)/a,c=(n.clientY-r.clientY)/a;o===0&&c===0||(r.clientX=n.clientX,r.clientY=n.clientY,n.pointerType==="touch"?(this.changeSource=n.altKey?fi.AUTOMATIC:fi.USER_INTERACTION,this.touchMode!==null&&this.touchMode(o,c)):(this.changeSource=fi.USER_INTERACTION,this.panPerPixel>0?this.movePan(o,c):this.handleSinglePointerMove(o,c)))},this.onPointerUp=n=>{const{element:r}=this,a=this.pointers.findIndex(o=>o.id===n.pointerId);a!==-1&&this.pointers.splice(a,1),this.panPerPixel>0&&!n.altKey&&this.resetRadius(),this.pointers.length===0?(r.removeEventListener("pointermove",this.onPointerMove),r.removeEventListener("pointerup",this.onPointerUp),r.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(n)):this.touchMode!==null&&this.onTouchChange(n),this.scene.element[jh].style.opacity=0,r.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=n=>{this.changeSource=fi.USER_INTERACTION;const r=n.deltaY*(n.deltaMode==1?18:1)*Fp*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,r),n.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=n=>{const{changeSource:r}=this;this.changeSource=fi.USER_INTERACTION,(n.shiftKey&&this.enablePan?this.panKeyCodeHandler(n):this.orbitZoomKeyCodeHandler(n))?(n.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=r},this._options=Object.assign({},ty),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new Qh){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=t===0?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,i=this.goalSpherical.radius){const{minimumAzimuthalAngle:n,maximumAzimuthalAngle:r,minimumPolarAngle:a,maximumPolarAngle:o,minimumRadius:c,maximumRadius:h}=this._options,{theta:d,phi:u,radius:m}=this.goalSpherical,g=ms(e,n,r);isFinite(n)||isFinite(r)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-g)+g);const y=ms(t,a,o),E=ms(i,c,h);return(g!==d||y!==u||E!==m)&&!!(isFinite(g)&&isFinite(y)&&isFinite(E))&&(this.goalSpherical.theta=g,this.goalSpherical.phi=y,this.goalSpherical.radius=E,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=ms(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){const{theta:n,phi:r,radius:a}=this.goalSpherical,{minimumRadius:o,maximumRadius:c,minimumFieldOfView:h,maximumFieldOfView:d}=this._options,u=this.spherical.theta-n,m=Math.PI-.001,g=n-ms(e,-m-u,m-u),y=r-t,E=i===0?0:((i>0?c:o)-a)/(Math.log(i>0?d:h)-this.goalLogFov),b=a+i*(isFinite(E)?E:2*(c-o));if(this.setOrbit(g,y,b),i!==0){const C=this.goalLogFov+i;this.setFieldOfView(Math.exp(C))}}jumpToGoal(){this.update(0,1e4)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:i,maximumRadius:n}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(r)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,n),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&t!=="none"?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new zn(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:i,clientY:n}=e,{clientX:r,clientY:a}=t,o=r-i,c=a-n;return Math.sqrt(o*o+c*c)}handleSinglePointerMove(e,t){const i=this.pixelLengthToSphericalAngle(e),n=this.pixelLengthToSphericalAngle(t);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,n,0)}initializePan(){const{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=.018*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){const{scene:i}=this,n=ey.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;n.multiplyScalar(r);const a=i.getTarget();a.add(n.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(a,a),i.setTarget(a.x,a.y,a.z)}recenter(e){if(performance.now()>this.startTime+300||Math.abs(e.clientX-this.startPointerPosition.clientX)>2||Math.abs(e.clientY-this.startPointerPosition.clientY)>2)return;const{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(i==null){const{cameraTarget:n}=t.element;t.element.cameraTarget="",t.element.cameraTarget=n,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(xR.set(0,0));if(t==null)return;e.target.worldToLocal(t.position);const i=e.getTarget(),{theta:n,phi:r}=this.spherical,a=n-e.yaw,o=ey.set(Math.sin(r)*Math.sin(a),Math.cos(r),Math.sin(r)*Math.cos(a)),c=o.dot(t.position.sub(i));i.add(o.multiplyScalar(c)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-c)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[jh].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[jh].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,Fp*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-.04*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-ph,0);break;case"ArrowDown":this.userAdjustOrbit(0,ph,0);break;case"ArrowLeft":this.userAdjustOrbit(-ph,0,0);break;case"ArrowRight":this.userAdjustOrbit(ph,0,0);break;default:t=!1}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:t=!1}return t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1/1.3,Xh="not-presenting",LE="session-started",CR="object-placed",IR="failed",DE="tracking",MR="not-tracking",mh=new le,TR=new yt,BR=new le,RR=new Ui(45,1,.1,100);class LR extends rs{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new le,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new le,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new le,this.goalYaw=0,this.goalScale=1,this.xDamper=new yn,this.yDamper=new yn,this.zDamper=new yn,this.yawDamper=new yn,this.scaleDamper=new yn,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new I0(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const i=this.transientHitTestSource;if(i==null)return;const n=this.frame.getHitTestResultsForTransientInput(i),r=this.presentedScene,a=this.placementBox;if(n.length===1){this.inputSource=t.inputSource;const{axes:o}=this.inputSource.gamepad,c=a.getHit(this.presentedScene,o[0],o[1]);a.show=!0,c!=null?(this.isTranslating=!0,this.lastDragPosition.copy(c)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=1.5*o[0])}else if(n.length===2){a.show=!0,this.isTwoFingering=!0;const{separation:o}=this.fingerPolar(n);this.firstRatio=o/r.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){Xv();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return Xv(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise((h,d)=>{requestAnimationFrame(()=>h())});e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),t===!0&&(this.xrLight=new JB(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const h=this.presentedScene;h.add(this.xrLight),h.environment=this.xrLight.environment}));const n=await this.resolveARSession();n.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;const a=await n.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const o=20*Math.PI/180,c=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(o),z:-Math.cos(o)});n.requestHitTestSource({space:a,offsetRay:c}).then(h=>{this.initialHitSource=h}),this.currentSession=n,this.placementBox=new I0(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:LE})}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,t!=null){const{element:a}=t;this.xrLight!=null&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowOffset(0);const o=this.turntableRotation;o!=null&&(t.yaw=o);const c=this.oldShadowIntensity;c!=null&&t.setShadowIntensity(c),t.setEnvironmentAndSkybox(a[Il],a[Vh]);const h=this.oldTarget;t.setTarget(h.x,h.y,h.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0),a.requestUpdate("cameraTarget"),a.requestUpdate("maxCameraOrbit"),a[jl](a.getBoundingClientRect()),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:fi.NONE}}))})}this.renderer.height=0;const i=this.exitWebXRButtonContainer;i!=null&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const n=this.transientHitTestSource;n!=null&&(n.cancel(),this.transientHitTestSource=null);const r=this.initialHitSource;r!=null&&(r.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:Xh})}updateView(e){const t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(RR),t.xrCamera=i.getCamera();const{elements:n}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(n[1],n[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const a=e.recommendedViewportScale;e.requestViewportScale(Math.max(a,.25))}const r=i.getBaseLayer();if(r!=null){const a=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(a.x,a.y,a.width,a.height)}}placeInitially(){const e=this.presentedScene,{position:t,element:i}=e,n=e.getCamera(),{width:r,height:a}=this.overlay.getBoundingClientRect();e.setSize(r,a),n.projectionMatrixInverse.copy(n.projectionMatrix).invert();const{theta:o,radius:c}=i.getCameraOrbit(),h=n.getWorldDirection(mh);e.yaw=Math.atan2(-h.x,-h.z)-o,this.goalYaw=e.yaw,t.copy(n.position).add(h.multiplyScalar(c)),this.updateTarget();const d=e.getTarget();t.add(d).sub(this.oldTarget),this.goalPosition.copy(t),e.setHotspotsVisibility(!0);const{session:u}=this.frame;u.addEventListener("selectstart",this.onSelectStart),u.addEventListener("selectend",this.onSelectEnd),u.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(m=>{this.transientHitTestSource=m})}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return t!=null&&(mh.copy(t).sub(this.presentedScene.getCamera().position),mh.length()>10)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(i==null)return null;const n=TR.fromArray(i.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(n.elements[4],n.elements[6])),n.elements[5]>.75!==this.placeOnWall?BR.setFromMatrixPosition(n):null}moveToFloor(e){const t=this.initialHitSource;if(t==null)return;const i=e.getHitTestResults(t);if(i.length==0)return;const n=i[0],r=this.getHitPoint(n);r!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:CR}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,n=i[0]-t[0],r=i[1]-t[1],a=Math.atan2(r,n);let o=this.lastAngle-a;return o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),this.lastAngle=a,{separation:Math.sqrt(n*n+r*r),deltaYaw:o}}processInput(e){const t=this.transientHitTestSource;if(t==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const i=e.getHitTestResultsForTransientInput(t),n=this.presentedScene,r=n.scale.x;if(this.isTwoFingering)if(i.length<2)this.isTwoFingering=!1;else{const{separation:a,deltaYaw:o}=this.fingerPolar(i);if(this.placeOnWall===!1&&(this.goalYaw+=o),n.canScale){const c=a/this.firstRatio;this.goalScale=c<1.3&&c>SR?1:c}}else if(i.length!==2)if(this.isRotating){const a=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=a-this.lastAngle,this.lastAngle=a}else this.isTranslating&&i.forEach(a=>{if(a.inputSource!==this.inputSource)return;let o=null;if(a.results.length>0&&(o=this.getHitPoint(a.results[0])),o==null&&(o=this.getTouchLocation()),o!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const c=o.y-this.lastDragPosition.y;if(c<0){this.placementBox.offsetHeight=c/r,this.presentedScene.setShadowOffset(c);const h=mh.copy(n.getCamera().position),d=-c/(h.y-o.y);h.multiplyScalar(d),o.multiplyScalar(1-d).add(h)}}this.goalPosition.add(o),this.lastDragPosition.copy(o)}});else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:a}=this.fingerPolar(i);this.firstRatio=a/r}}moveScene(e){const t=this.presentedScene,{position:i,yaw:n}=t,r=t.boundingSphere.radius,a=this.goalPosition,o=t.scale.x,c=this.placementBox;let h=fi.NONE;if(!a.equals(i)||this.goalScale!==o){h=fi.USER_INTERACTION;let{x:d,y:u,z:m}=i;d=this.xDamper.update(d,a.x,e,r),u=this.yDamper.update(u,a.y,e,r),m=this.zDamper.update(m,a.z,e,r),i.set(d,u,m);const g=this.scaleDamper.update(o,this.goalScale,e,1);if(t.scale.set(g,g,g),!this.isTranslating){const y=a.y-u;this.placementComplete&&this.placeOnWall===!1?(c.offsetHeight=y/g,t.setShadowOffset(y)):y===0&&(this.placementComplete=!0,c.show=!1,t.setShadowIntensity(.8))}}c.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(n,this.goalYaw,e,Math.PI),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:h}}))}onWebXRFrame(e,t){this.frame=t,++this.frames;const i=this.threeRenderer.xr.getReferenceSpace(),n=t.getViewerPose(i);n==null&&this.tracking===!0&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:MR}));const r=this.presentedScene;if(n==null||r==null||!r.element.loaded)return void this.threeRenderer.clear();this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:DE}));let a=!0;for(const o of n.views){if(this.updateView(o),a){this.moveToFloor(t),this.processInput(t);const c=e-this.lastTick;this.moveScene(c),this.renderer.preRender(r,e,c),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),a=!1}}}function DR(s){const e=new Map,t=new Map,i=s.clone();return PE(s,i,function(n,r){e.set(r,n),t.set(n,r)}),i.traverse(function(n){if(!n.isSkinnedMesh)return;const r=n,a=e.get(n),o=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=o.map(function(c){return t.get(c)}),r.bind(r.skeleton,r.bindMatrix)}),i}function PE(s,e,t){t(s,e);for(let i=0;i<s.children.length;i++)PE(s.children[i],e.children[i],t)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=Symbol("prepared"),gd=Symbol("prepare"),hs=Symbol("preparedGLTF"),Ad=Symbol("clone");class PR{constructor(e){this[hs]=e}static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[iy])return e;const t=this[gd](e);return t[iy]=!0,t}static[gd](e){const{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[hs].parser}get animations(){return this[hs].animations}get scene(){return this[hs].scene}get scenes(){return this[hs].scenes}get cameras(){return this[hs].cameras}get asset(){return this[hs].asset}get userData(){return this[hs].userData}clone(){return new this.constructor(this[Ad]())}dispose(){this.scenes.forEach(e=>{e.traverse(t=>{const i=t;i.material&&((Array.isArray(i.material)?i.material:[i.material]).forEach(n=>{for(const r in n){const a=n[r];if(a instanceof qt){const o=a.source.data;o.close!=null&&o.close(),a.dispose()}}n.dispose()}),i.geometry.dispose())})})}[Ad](){const e=this[hs],t=DR(this.scene);NR(t,this.scene);const i=[t],n=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:n})}}const NR=(s,e)=>{NE(s,e,(t,i)=>{i.userData.variantMaterials!==void 0&&(t.userData.variantMaterials=new Map(i.userData.variantMaterials)),i.userData.variantData!==void 0&&(t.userData.variantData=i.userData.variantData),i.userData.originalMaterial!==void 0&&(t.userData.originalMaterial=i.userData.originalMaterial)})},NE=(s,e,t)=>{t(s,e);for(let i=0;i<s.children.length;i++)NE(s.children[i],e.children[i],t)},ny=Symbol("threeGLTF"),sy=Symbol("gltf"),ry=Symbol("gltfElementMap"),ay=Symbol("threeObjectMap"),oy=Symbol("parallelTraverseThreeScene"),ly=Symbol("correlateOriginalThreeGLTF"),cy=Symbol("correlateCloneThreeGLTF");class ql{constructor(e,t,i,n){this[ny]=e,this[sy]=t,this[ry]=n,this[ay]=i}static from(e,t){return t!=null?this[cy](e,t):this[ly](e)}static[ly](e){const t=e.parser.json,i=e.parser.associations,n=new Map,r={name:"Default"},a={type:"materials",index:-1};for(const o of i.keys())o instanceof is&&i.get(o)==null&&(a.index<0&&(t.materials==null&&(t.materials=[]),a.index=t.materials.length,t.materials.push(r)),o.name=r.name,i.set(o,{materials:a.index}));for(const[o,c]of i){c&&(o.userData=o.userData||{},o.userData.associations=c);for(const h in c)if(h!=null&&h!=="primitives"){const d=h,u=(t[d]||[])[c[d]];if(u==null)continue;let m=n.get(u);m==null&&(m=new Set,n.set(u,m)),m.add(o)}}return new ql(e,t,i,n)}static[cy](e,t){const i=t.threeGLTF,n=t.gltf,r=JSON.parse(JSON.stringify(n)),a=new Map,o=new Map;for(let c=0;c<i.scenes.length;c++)this[oy](i.scenes[c],e.scenes[c],(h,d)=>{const u=t.threeObjectMap.get(h);if(u!=null){for(const m in u)if(m!=null&&m!=="primitives"){const g=m,y=u[g],E=r[g][y],b=a.get(d)||{};b[g]=y,a.set(d,b);const C=o.get(E)||new Set;C.add(d),o.set(E,C)}}});return new ql(e,r,a,o)}static[oy](e,t,i){const n=(r,a)=>{if(i(r,a),r.isObject3D){const o=r,c=a;if(o.material)if(Array.isArray(o.material))for(let h=0;h<o.material.length;++h)i(o.material[h],c.material[h]);else i(o.material,c.material);for(let h=0;h<r.children.length;++h)n(r.children[h],a.children[h])}};n(e,t)}get threeGLTF(){return this[ny]}get gltf(){return this[sy]}get gltfElementMap(){return this[ry]}get threeObjectMap(){return this[ay]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=Symbol("correlatedSceneGraph");class FR extends PR{static[gd](e){const t=super[gd](e);t[ml]==null&&(t[ml]=ql.from(t));const{scene:i}=t,n=new Hn(void 0,1/0);return i.traverse(r=>{r.renderOrder=1e3,r.frustumCulled=!1,r.name||(r.name=r.uuid);const a=r;if(a.material){const{geometry:o}=a;a.castShadow=!0,a.isSkinnedMesh&&(o.boundingSphere=n,o.boundingBox=null);const c=a.material;if(c.isMeshBasicMaterial===!0&&(c.toneMapped=!1),c.shadowSide=ns,c.aoMap){const{gltf:h,threeObjectMap:d}=t[ml],u=d.get(c);if(h.materials!=null&&u!=null&&u.materials!=null){const m=h.materials[u.materials];m.occlusionTexture&&m.occlusionTexture.texCoord===0&&o.attributes.uv!=null&&o.setAttribute("uv2",o.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[hs][ml]}[Ad](){const e=super[Ad](),t=new Map;return e.scene.traverse(i=>{const n=i;if(n.material){const a=n.material;if(a!=null){if(t.has(a.uuid))return void(n.material=t.get(a.uuid));n.material=a.clone(),t.set(a.uuid,n.material)}}const r=i;r.target!==void 0&&r.add(r.target)}),e[ml]=ql.from(e,this.correlatedSceneGraph),e}}const hy=(s,e,t)=>{let i;switch(s){case bi:i=new Uint8ClampedArray(e*t*4);break;case Vi:i=new Uint16Array(e*t*4);break;case la:i=new Uint32Array(e*t*4);break;case 1010:i=new Int8Array(e*t*4);break;case 1011:i=new Int16Array(e*t*4);break;case _f:i=new Int32Array(e*t*4);break;case Ti:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let fh;class Gf{constructor(e){var t,i,n,r,a,o,c,h,d,u,m,g,y,E,b,C;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(I){throw this._renderer.setRenderTarget(null),I}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const B={format:gi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.generateMipmaps)!==void 0&&((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps),magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:Ut,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.minFilter:Ut,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples:void 0,wrapS:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS:Mi,wrapT:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT)!==void 0?(E=e.renderTargetOptions)===null||E===void 0?void 0:E.wrapT:Mi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Gf.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Ar,this._camera=new ko,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((I,k,Q,G)=>{if(fh!==void 0)return fh;const U=new Qn(1,1,G);k.setRenderTarget(U);const te=new Zt(new ys,new On({color:16777215}));k.render(te,Q),k.setRenderTarget(null);const ue=hy(I,U.width,U.height);return k.readRenderTargetPixels(U,0,0,U.width,U.height,ue),U.dispose(),te.geometry.dispose(),te.material.dispose(),fh=ue[0]!==0,fh})(this._type,this._renderer,this._camera,B)){let I;this._type===Vi&&(I=this._renderer.extensions.has("EXT_color_buffer_float")?Ti:void 0),I!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to 1015`),this._type=I):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Zt(new ys,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Qn(this.width,this.height,B),this._renderTarget.texture.mapping=((b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping)!==void 0?(C=e.renderTargetOptions)===null||C===void 0?void 0:C.mapping:xo}static instantiateRenderer(){const e=new Lf;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=hy(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new sc(this.toArray(),this.width,this.height,gi,this._type,(e==null?void 0:e.mapping)||xo,(e==null?void 0:e.wrapS)||Mi,(e==null?void 0:e.wrapT)||Mi,(e==null?void 0:e.magFilter)||Ut,(e==null?void 0:e.minFilter)||Ut,(e==null?void 0:e.anisotropy)||1,Yt);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0&&(e==null?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof un&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof qt&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof qt&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class kR extends un{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:n,gainMapMax:r,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:c,sdr:h,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`,uniforms:{sdr:{value:h},gainMap:{value:d},gamma:{value:new le(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new le().fromArray(t)},offsetSdr:{value:new le().fromArray(i)},gainMapMin:{value:new le().fromArray(n)},gainMapMax:{value:new le().fromArray(r)},weightFactor:{value:(Math.log2(a)-o)/(c-o)}},blending:0,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class FE extends Error{}class kE extends Error{}const fl=(s,e,t)=>{var i;let n;const r=(i=s.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(r)n=r;else{const a=s.getElementsByTagName(e)[0];if(!a){if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}{const o=a.getElementsByTagName("rdf:li");if(o.length!==3)throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`);n=Array.from(o).map(c=>c.innerHTML)}}return n};class OR{constructor(e){this.options={debug:!(!e||e.debug===void 0)&&e.debug,extractFII:!e||e.extractFII===void 0||e.extractFII,extractNonFII:!e||e.extractNonFII===void 0||e.extractNonFII}}extract(e){return new Promise((t,i)=>{const n=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496)return void i(new Error("Not a valid jpeg"));const a=r.byteLength;let o,c=2,h=0;for(;c<a;){if(++h>250)return void i(new Error(`Found no marker after ${h} loops 😵`));if(r.getUint8(c)!==255)return void i(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${r.getUint8(c).toString(16)}`));if(o=r.getUint8(c+1),n&&console.log(`Marker: ${o.toString(16)}`),o===226){n&&console.log("Found APP2 marker (0xffe2)");const d=c+4;if(r.getUint32(d)===1297106432){const u=d+4;let m;if(r.getUint16(u)===18761)m=!1;else{if(r.getUint16(u)!==19789)return void i(new Error("No valid endianness marker found in TIFF header"));m=!0}if(r.getUint16(u+2,!m)!==42)return void i(new Error("Not valid TIFF data! (no 0x002A marker)"));const g=r.getUint32(u+4,!m);if(g<8)return void i(new Error("Not valid TIFF data! (First offset less than 8)"));const y=u+g,E=r.getUint16(y,!m),b=y+2;let C=0;for(let k=b;k<b+12*E;k+=12)r.getUint16(k,!m)===45057&&(C=r.getUint32(k+8,!m));const B=y+2+12*E+4,I=[];for(let k=B;k<B+16*C;k+=16){const Q={MPType:r.getUint32(k,!m),size:r.getUint32(k+4,!m),dataOffset:r.getUint32(k+8,!m),dependantImages:r.getUint32(k+12,!m),start:-1,end:-1,isFII:!1};Q.dataOffset?(Q.start=u+Q.dataOffset,Q.isFII=!1):(Q.start=0,Q.isFII=!0),Q.end=Q.start+Q.size,I.push(Q)}if(this.options.extractNonFII&&I.length){const k=new Blob([r]),Q=[];for(const G of I){if(G.isFII&&!this.options.extractFII)continue;const U=k.slice(G.start,G.end+1,"image/jpeg");Q.push(U)}t(Q)}}}c+=2+r.getUint16(c+2)}})}}const UR=async s=>{const e=(n=>{var r,a;let o;o=typeof TextDecoder<"u"?new TextDecoder().decode(n):n.toString();let c=o.indexOf("<x:xmpmeta");const h=new DOMParser;for(;c!==-1;){const d=o.indexOf("x:xmpmeta>",c);o.slice(c,d+10);const u=o.slice(c,d+10);try{const m=h.parseFromString(u,"text/xml").getElementsByTagName("rdf:Description")[0],g=fl(m,"hdrgm:GainMapMin","0"),y=fl(m,"hdrgm:GainMapMax"),E=fl(m,"hdrgm:Gamma","1"),b=fl(m,"hdrgm:OffsetSDR","0.015625"),C=fl(m,"hdrgm:OffsetHDR","0.015625");let B=(r=m.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||r===void 0?void 0:r.nodeValue;B||(B="0");const I=(a=m.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||a===void 0?void 0:a.nodeValue;if(!I)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(g)?g.map(k=>parseFloat(k)):[parseFloat(g),parseFloat(g),parseFloat(g)],gainMapMax:Array.isArray(y)?y.map(k=>parseFloat(k)):[parseFloat(y),parseFloat(y),parseFloat(y)],gamma:Array.isArray(E)?E.map(k=>parseFloat(k)):[parseFloat(E),parseFloat(E),parseFloat(E)],offsetSdr:Array.isArray(b)?b.map(k=>parseFloat(k)):[parseFloat(b),parseFloat(b),parseFloat(b)],offsetHdr:Array.isArray(C)?C.map(k=>parseFloat(k)):[parseFloat(C),parseFloat(C),parseFloat(C)],hdrCapacityMin:parseFloat(B),hdrCapacityMax:parseFloat(I)}}catch{}c=o.indexOf("<x:xmpmeta",d)}})(s);if(!e)throw new kE("Gain map XMP metadata not found");const t=new OR({extractFII:!0,extractNonFII:!0}),i=await t.extract(s);if(i.length!==2)throw new FE("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},dy=s=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=n=>{t(n)},i.src=URL.createObjectURL(s)});class QR extends bs{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Ub}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new kR({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new qt,sdr:new qt});return new Gf({width:16,height:16,type:Vi,colorSpace:Yt,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,n){const r=n?new Blob([n],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let o,c,h=!1;if(typeof createImageBitmap>"u"){const m=await Promise.all([r?dy(r):Promise.resolve(void 0),dy(a)]);c=m[0],o=m[1],h=!0}else{const m=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);c=m[0],o=m[1]}const d=new qt(c||new ImageData(2,2),xo,Mi,Mi,Ut,1008,gi,bi,1,Yt);d.flipY=h,d.needsUpdate=!0;const u=new qt(o,xo,Mi,Mi,Ut,1008,gi,bi,1,di);u.flipY=h,u.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=d,e.material.sdr=u,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class zR extends QR{load(e,t,i,n){const r=this.prepareQuadRenderer(),a=new $s(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(o);let h,d,u;try{const m=await UR(c);h=m.sdr,d=m.gainMap,u=m.metadata}catch(m){if(!(m instanceof kE||m instanceof FE))throw m;console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),u={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},h=c}try{await this.render(r,u,h,d)}catch(m){return this.manager.itemError(e),typeof n=="function"&&n(m),void r.disposeOnDemandRenderer()}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof n=="function"&&n(o)}),r}}class HR extends VM{constructor(e){super(e),this.type=Vi}parse(e){const t=function(y,E){switch(y){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(E||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(E||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(E||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(E||""))}},i=function(y,E,b){E=E||1024;let C=y.pos,B=-1,I=0,k="",Q=String.fromCharCode.apply(null,new Uint16Array(y.subarray(C,C+128)));for(;0>(B=Q.indexOf(`
`))&&I<E&&C<y.byteLength;)k+=Q,I+=Q.length,C+=128,Q+=String.fromCharCode.apply(null,new Uint16Array(y.subarray(C,C+128)));return-1<B&&(b!==!1&&(y.pos+=I+B+1),k+Q.slice(0,B))},n=function(y,E,b,C){const B=y[E+3],I=Math.pow(2,B-128)/255;b[C+0]=y[E+0]*I,b[C+1]=y[E+1]*I,b[C+2]=y[E+2]*I,b[C+3]=1},r=function(y,E,b,C){const B=y[E+3],I=Math.pow(2,B-128)/255;b[C+0]=Fc.toHalfFloat(Math.min(y[E+0]*I,65504)),b[C+1]=Fc.toHalfFloat(Math.min(y[E+1]*I,65504)),b[C+2]=Fc.toHalfFloat(Math.min(y[E+2]*I,65504)),b[C+3]=Fc.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;const o=function(y){const E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,I={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let k,Q;for((y.pos>=y.byteLength||!(k=i(y)))&&t(1,"no header found"),(Q=k.match(/^#\?(\S+)/))||t(3,"bad initial token"),I.valid|=1,I.programtype=Q[1],I.string+=k+`
`;k=i(y),k!==!1;)if(I.string+=k+`
`,k.charAt(0)!=="#"){if((Q=k.match(E))&&(I.gamma=parseFloat(Q[1])),(Q=k.match(b))&&(I.exposure=parseFloat(Q[1])),(Q=k.match(C))&&(I.valid|=2,I.format=Q[1]),(Q=k.match(B))&&(I.valid|=4,I.height=parseInt(Q[1],10),I.width=parseInt(Q[2],10)),2&I.valid&&4&I.valid)break}else I.comments+=k+`
`;return 2&I.valid||t(3,"missing format specifier"),4&I.valid||t(3,"missing image size specifier"),I}(a),c=o.width,h=o.height,d=function(y,E,b){const C=E;if(C<8||C>32767||y[0]!==2||y[1]!==2||128&y[2])return new Uint8Array(y);C!==(y[2]<<8|y[3])&&t(3,"wrong scanline width");const B=new Uint8Array(4*E*b);B.length||t(4,"unable to allocate buffer space");let I=0,k=0;const Q=4*C,G=new Uint8Array(4),U=new Uint8Array(Q);let te=b;for(;te>0&&k<y.byteLength;){k+4>y.byteLength&&t(1),G[0]=y[k++],G[1]=y[k++],G[2]=y[k++],G[3]=y[k++],G[0]==2&&G[1]==2&&(G[2]<<8|G[3])==C||t(3,"bad rgbe scanline format");let ue,pe=0;for(;pe<Q&&k<y.byteLength;){ue=y[k++];const he=ue>128;if(he&&(ue-=128),(ue===0||pe+ue>Q)&&t(3,"bad scanline data"),he){const Me=y[k++];for(let De=0;De<ue;De++)U[pe++]=Me}else U.set(y.subarray(k,k+ue),pe),pe+=ue,k+=ue}const ce=C;for(let he=0;he<ce;he++){let Me=0;B[I]=U[he+Me],Me+=C,B[I+1]=U[he+Me],Me+=C,B[I+2]=U[he+Me],Me+=C,B[I+3]=U[he+Me],I+=4}te--}return B}(a.subarray(a.pos),c,h);let u,m,g;switch(this.type){case Ti:g=d.length/4;const y=new Float32Array(4*g);for(let b=0;b<g;b++)n(d,4*b,y,4*b);u=y,m=Ti;break;case Vi:g=d.length/4;const E=new Uint16Array(4*g);for(let b=0;b<g;b++)r(d,4*b,E,4*b);u=E,m=Vi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:c,height:h,data:u,header:o.string,gamma:o.gamma,exposure:o.exposure,type:m}}setDataType(e){return this.type=e,this}load(e,t,i,n){return super.load(e,function(r,a){switch(r.type){case Ti:case Vi:r.colorSpace=Yt,r.minFilter=Ut,r.magFilter=Ut,r.generateMipmaps=!1,r.flipY=!0}t&&t(r,a)},i,n)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},VR={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class uy extends Ar{constructor(e){super(),this.position.y=-3.5;const t=new fa;t.deleteAttribute("uv");const i=new Gl({metalness:0,side:$i}),n=new Gl({metalness:0}),r=e=="legacy"?GR:VR,a=new zb(16777215,r.topLight.intensity,28,2);a.position.set(...r.topLight.position),this.add(a);const o=new Zt(t,i);o.position.set(...r.room.position),o.scale.set(...r.room.scale),this.add(o);for(const c of r.boxes){const h=new Zt(t,n);h.position.set(...c.position),h.rotation.set(0,c.rotation,0),h.scale.set(...c.scale),this.add(h)}for(const c of r.lights){const h=new Zt(t,this.createAreaLightMaterial(c.intensity));h.position.set(...c.position),h.scale.set(...c.scale),this.add(h)}}createAreaLightMaterial(e){const t=new On;return t.color.setScalar(e),t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=20,$R=/\.hdr(\.js)?$/;class py{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return this._ldrLoader==null&&(this._ldrLoader=new Qb),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get imageLoader(){return this._imageLoader==null&&(this._imageLoader=new zR(this.threeRenderer)),this._imageLoader.setWithCredentials(this.withCredentials),this._imageLoader}get hdrLoader(){return this._hdrLoader==null&&(this._hdrLoader=new HR,this._hdrLoader.setDataType(Vi)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){const{LottieLoader:e}=await zC(()=>import(this.lottieLoaderUrl),[]);this._lottieLoader=new e}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(e){const t=await new Promise((i,n)=>this.ldrLoader.load(e,i,()=>{},n));return t.name=e,t.flipY=!1,t}async loadLottie(e,t){const i=await this.getLottieLoader();i.setQuality(t);const n=await new Promise((r,a)=>i.load(e,r,()=>{},a));return n.name=e,n}async loadEquirect(e,t=()=>{}){try{const i=$R.test(e),n=i?this.hdrLoader:this.imageLoader,r=await new Promise((a,o)=>n.load(e,c=>{const{renderTarget:h}=c;if(h!=null){const{texture:d}=h;c.dispose(!1),a(d)}else a(c)},c=>{t(c.loaded/c.total*.9)},o));return t(1),r.name=e,r.mapping=sd,i||(r.colorSpace=di),r}finally{t&&t(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,i=()=>{}){const n=t!=="legacy";t!=="legacy"&&t!=="neutral"||(t=null),t=eE(t);let r,a=Promise.resolve(null);e&&(a=this.loadEquirectFromUrl(e,i)),r=t?this.loadEquirectFromUrl(t,i):e?this.loadEquirectFromUrl(e,i):n?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[o,c]=await Promise.all([r,a]);if(o==null)throw new Error("Failed to load environment map.");return{environmentMap:o,skybox:c}}async loadEquirectFromUrl(e,t){if(!this.skyboxCache.has(e)){const i=this.loadEquirect(e,t);this.skyboxCache.set(e,i)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await((h=0)=>new Promise(d=>setTimeout(d,h)))();const i=this.threeRenderer,n=new Tf(256,{generateMipmaps:!1,type:Vi,format:gi,colorSpace:Yt,depthBuffer:!0}),r=new Um(.1,100,n),a=r.renderTarget.texture;a.name=t;const o=i.outputColorSpace,c=i.toneMapping;return i.toneMapping=Vs,i.outputColorSpace=Yt,r.update(i,e),this.blurCubemap(n,.04),i.toneMapping=c,i.outputColorSpace=o,a}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new uy("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new uy("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(gh);const n=new fa,r=new Zt(n,this.blurMaterial);this.blurScene=new Ar,this.blurScene.add(r)}const i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,n){const r=e.width,a=isFinite(i)?Math.PI/(2*r):2*Math.PI/39,o=i/a,c=isFinite(i)?1+Math.floor(3*o):gh;c>gh&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${c} samples when the maximum is set to 20`);const h=[];let d=0;for(let m=0;m<gh;++m){const g=m/o,y=Math.exp(-g*g/2);h.push(y),m==0?d+=y:m<c&&(d+=2*y)}for(let m=0;m<h.length;m++)h[m]=h[m]/d;const u=this.blurMaterial.uniforms;u.envMap.value=e.texture,u.samples.value=c,u.weights.value=h,u.latitudinal.value=n==="latitudinal",u.dTheta.value=a,new Um(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),i=new le(0,1,0);return new un({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:0,depthTest:!1,depthWrite:!1,side:$i})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=[1,.79,.62,.5,.4,.31,.25],my="high-performance";class Zn extends rs{constructor(e){super(),this.loader=new ki(FR),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;(t=this.textureUtils)===null||t===void 0||t.dispose(),this.textureUtils=new py(this.threeRenderer);for(const i of this.scenes)i.element[md]()},this.dpr=Ym(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Lf({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=Td}catch(t){console.warn(t)}this.arRenderer=new LR(this),this.textureUtils=this.canRender?new py(this.threeRenderer):null,ki.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton||(this._singleton=new Zn({powerPreference:(self.ModelViewerElement||{}).powerPreference||my,debug:Kv()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new Zn({powerPreference:(self.ModelViewerElement||{}).powerPreference||my,debug:Kv()});for(const t of e)t.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return qa[this.scaleStep]}set minScale(e){let t=1;for(;t<qa.length&&!(qa[t]<e);)++t;this.lastStep=t-1}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new vt;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((i,n)=>this.render(i,n))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[af]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,i=null;for(const r of this.scenes){const{element:a}=r;a.modelIsVisible&&r.externalRenderer==null&&++t,e.parentElement===r.canvas.parentElement&&(i=r)}const n=t>1;if(i!=null){const r=n&&!this.multipleScenesVisible,a=!i.element.modelIsVisible;if(r||a){const{width:o,height:c}=this.sceneSize(i);this.copyPixels(i,o,c),e.parentElement.removeChild(e)}}this.multipleScenesVisible=n}updateRendererSize(){var e;const t=Ym();if(t!==this.dpr)for(const r of this.scenes){const{element:a}=r;a[co](a.getBoundingClientRect())}let i=0,n=0;for(const r of this.scenes)i=Math.max(i,r.width),n=Math.max(n,r.height);if(i!==this.width||n!==this.height||t!==this.dpr){this.width=i,this.height=n,this.dpr=t,i=Math.ceil(i*t),n=Math.ceil(n*t),this.canRender&&this.threeRenderer.setSize(i,n,!1);for(const r of this.scenes){const{canvas:a}=r;a.width=i,a.height=n,r.forceRescale(),(e=r.effectRenderer)===null||e===void 0||e.setSize(i,n)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=ms(.2*(e-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else{if(e.scaleStep==0)return!1;e.scaleStep=0,this.rescaleCanvas(e)}return!0}rescaleCanvas(e){const t=qa[e.scaleStep],i=Math.ceil(this.width/t),n=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${n}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${n}px`;const a=this.dpr*t,o=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:a,minimumDpr:this.dpr*qa[this.lastStep],pixelWidth:Math.ceil(e.width*a),pixelHeight:Math.ceil(e.height*a),reason:o}}))}sceneSize(e){const{dpr:t}=this,i=qa[e.scaleStep];return{width:Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),height:Math.min(Math.ceil(e.height*i*t),this.canvas3D.height)}}copyPixels(e,t,i){const n=e.context;n!=null?(n.clearRect(0,0,t,i),n.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")):console.log("could not acquire 2d context")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){const{element:n,exposure:r,toneMapping:a}=e;n[ds](t,i);const o=typeof r=="number"&&!Number.isNaN(r),c=n.environmentImage,h=n.skyboxImage,d=a===xf&&(c==="neutral"||c==="legacy"||!c&&!h);this.threeRenderer.toneMappingExposure=(o?r:1)*(d?1.3:1)}render(e,t){if(t!=null)return void this.arRenderer.onWebXRFrame(e,t);const i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);const{canvas3D:n}=this;for(const r of this.orderedScenes()){const{element:a}=r;if(!a.loaded||!a.modelIsVisible&&r.renderCount>0||(this.preRender(r,e,i),!this.shouldRender(r)))continue;if(r.externalRenderer!=null){const h=r.getCamera();h.updateMatrix();const{matrix:d,projectionMatrix:u}=h,m=d.elements.slice(),g=r.getTarget();m[12]+=g.x,m[13]+=g.y,m[14]+=g.z,r.externalRenderer.render({viewMatrix:m,projectionMatrix:u.elements});continue}if(!a.modelIsVisible&&!this.multipleScenesVisible)for(const h of this.scenes)h.element.modelIsVisible&&h.queueRender();const{width:o,height:c}=this.sceneSize(r);r.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-c,o,c),r.effectRenderer!=null?r.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=r.toneMapping,this.threeRenderer.render(r,r.camera)),this.multipleScenesVisible||!r.element.modelIsVisible&&r.renderCount===0?this.copyPixels(r,o,c):n.parentElement!==r.canvas.parentElement&&(r.canvas.parentElement.appendChild(n),r.canvas.classList.remove("show")),r.hasRendered(),++r.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt=Symbol("correlatedObjects"),Qt=Symbol("onUpdate");class oc{constructor(e,t=null){this[Qt]=e,this[Mt]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new On,WR=new ys(2,2);let qR=0;const cn=Symbol("threeTexture"),gy=Symbol("threeTextures");class jR extends oc{get[cn](){var e;return(e=this[Mt])===null||e===void 0?void 0:e.values().next().value}get[gy](){return this[Mt]}constructor(e,t){super(e,new Set(t?[t]:[])),this[cn].image.src||(this[cn].image.src=t.name?t.name:"adhoc_image"+qR++),this[cn].image.name||(this[cn].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[cn].image.name||""}get uri(){return this[cn].image.src}get bufferView(){return this[cn].image.bufferView}get element(){const e=this[cn];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[cn];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const t of this[gy])t.image.name=e}update(){const e=this[cn];e&&e.isCanvasTexture&&!e.animation&&(this[cn].needsUpdate=!0,this[Qt]())}async createThumbnail(e,t){const i=new Ar;fy.map=this[cn];const n=new Zt(WR,fy);i.add(n);const r=new ko(-1,1,1,-1,0,1),{threeRenderer:a}=Zn.singleton,o=new Qn(e,t);a.setRenderTarget(o),a.render(i,r),a.setRenderTarget(null);const c=new Uint8Array(e*t*4);a.readRenderTargetPixels(o,0,0,e,t,c),mr.width=e,mr.height=t;const h=mr.getContext("2d"),d=h.createImageData(e,t);return d.data.set(c),h.putImageData(d,0,0),new Promise(async(u,m)=>{mr.toBlob(g=>{if(!g)return m("Failed to capture thumbnail.");u(URL.createObjectURL(g))},"image/png")})}}var zi,fr;(function(s){s[s.Nearest=9728]="Nearest",s[s.Linear=9729]="Linear",s[s.NearestMipmapNearest=9984]="NearestMipmapNearest",s[s.LinearMipmapNearest=9985]="LinearMipmapNearest",s[s.NearestMipmapLinear=9986]="NearestMipmapLinear",s[s.LinearMipmapLinear=9987]="LinearMipmapLinear"})(zi||(zi={})),function(s){s[s.ClampToEdge=33071]="ClampToEdge",s[s.MirroredRepeat=33648]="MirroredRepeat",s[s.Repeat=10497]="Repeat"}(fr||(fr={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map([[fr.Repeat,vs],[fr.ClampToEdge,Mi],[fr.MirroredRepeat,So]]),ef=new Map([[vs,fr.Repeat],[Mi,fr.ClampToEdge],[So,fr.MirroredRepeat]]),XR=new Map([[zi.Nearest,Gi],[zi.Linear,Ut],[zi.NearestMipmapNearest,Rd],[zi.LinearMipmapNearest,vo],[zi.NearestMipmapLinear,ea],[zi.LinearMipmapLinear,kn]]),OE=new Map([[Gi,zi.Nearest],[Ut,zi.Linear],[Rd,zi.NearestMipmapNearest],[vo,zi.LinearMipmapNearest],[ea,zi.NearestMipmapLinear],[kn,zi.LinearMipmapLinear]]),YR=new Map([[zi.Nearest,Gi],[zi.Linear,Ut]]),UE=new Map([[Gi,zi.Nearest],[Ut,zi.Linear]]),KR=s=>OE.has(s),JR=s=>UE.has(s),ZR=s=>ef.has(s),Fs=Symbol("threeTexture"),vy=Symbol("threeTextures"),ar=Symbol("setProperty");class eL extends oc{get[Fs](){var e;return(e=this[Mt])===null||e===void 0?void 0:e.values().next().value}get[vy](){return this[Mt]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[Fs].name||""}get minFilter(){return OE.get(this[Fs].minFilter)}get magFilter(){return UE.get(this[Fs].magFilter)}get wrapS(){return ef.get(this[Fs].wrapS)}get wrapT(){return ef.get(this[Fs].wrapT)}get rotation(){return this[Fs].rotation}get scale(){return of(this[Fs].repeat)}get offset(){return of(this[Fs].offset)}setMinFilter(e){this[ar]("minFilter",XR.get(e))}setMagFilter(e){this[ar]("magFilter",YR.get(e))}setWrapS(e){this[ar]("wrapS",Ay.get(e))}setWrapT(e){this[ar]("wrapT",Ay.get(e))}setRotation(e){e==null&&(e=0),this[ar]("rotation",e)}setScale(e){e==null&&(e={u:1,v:1}),this[ar]("repeat",new vt(e.u,e.v))}setOffset(e){e==null&&(e={u:0,v:0}),this[ar]("offset",new vt(e.u,e.v))}[ar](e,t){if(((i,n)=>{switch(i){case"minFilter":return KR(n);case"magFilter":return JR(n);case"wrapS":case"wrapT":return ZR(n);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${i}" on Sampler`)}})(e,t))for(const i of this[vy])i[e]=t,i.needsUpdate=!0;this[Qt]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=Symbol("image"),wy=Symbol("sampler"),by=Symbol("threeTexture");class QE extends oc{constructor(e,t){super(e,new Set(t?[t]:[])),this[wy]=new eL(e,t),this[yy]=new jR(e,t)}get[by](){var e;return(e=this[Mt])===null||e===void 0?void 0:e.values().next().value}get name(){return this[by].name||""}set name(e){for(const t of this[Mt])t.name=e}get sampler(){return this[wy]}get source(){return this[yy]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zE,HE,GE;const $r=Symbol("texture"),Wr=Symbol("transform"),kp=Symbol("materials"),Ey=Symbol("usage"),ja=Symbol("onUpdate"),Tl=Symbol("activeVideo");var ft;(function(s){s[s.Base=0]="Base",s[s.MetallicRoughness=1]="MetallicRoughness",s[s.Normal=2]="Normal",s[s.Occlusion=3]="Occlusion",s[s.Emissive=4]="Emissive",s[s.Clearcoat=5]="Clearcoat",s[s.ClearcoatRoughness=6]="ClearcoatRoughness",s[s.ClearcoatNormal=7]="ClearcoatNormal",s[s.SheenColor=8]="SheenColor",s[s.SheenRoughness=9]="SheenRoughness",s[s.Transmission=10]="Transmission",s[s.Thickness=11]="Thickness",s[s.Specular=12]="Specular",s[s.SpecularColor=13]="SpecularColor",s[s.Iridescence=14]="Iridescence",s[s.IridescenceThickness=15]="IridescenceThickness",s[s.Anisotropy=16]="Anisotropy"})(ft||(ft={}));class fo{constructor(e,t,i,n){this[zE]=null,this[HE]={rotation:0,scale:new vt(1,1),offset:new vt(0,0)},this[GE]=!1,i&&(this[Wr].rotation=i.rotation,this[Wr].scale.copy(i.repeat),this[Wr].offset.copy(i.offset),this[$r]=new QE(e,i)),this[ja]=e,this[kp]=n,this[Ey]=t}get texture(){return this[$r]}setTexture(e){var t,i;const n=e!=null?e.source[cn]:null,r=(t=this[$r])===null||t===void 0?void 0:t.source[cn];if(r!=null&&r.isVideoTexture?this[Tl]=!1:!((i=this[$r])===null||i===void 0)&&i.source.animation&&this[$r].source.animation.removeEventListener("enterFrame",this[ja]),this[$r]=e,n!=null&&n.isVideoTexture){const o=n.image;if(this[Tl]=!0,o.requestVideoFrameCallback!=null){const c=()=>{this[Tl]&&(this[ja](),o.requestVideoFrameCallback(c))};o.requestVideoFrameCallback(c)}else{const c=()=>{this[Tl]&&(this[ja](),requestAnimationFrame(c))};requestAnimationFrame(c)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[ja]);let a=di;if(this[kp])for(const o of this[kp]){switch(this[Ey]){case ft.Base:o.map=n;break;case ft.MetallicRoughness:a=Yt,o.metalnessMap=n,o.roughnessMap=n;break;case ft.Normal:a=Yt,o.normalMap=n;break;case ft.Occlusion:a=Yt,o.aoMap=n;break;case ft.Emissive:o.emissiveMap=n;break;case ft.Clearcoat:o.clearcoatMap=n;break;case ft.ClearcoatRoughness:o.clearcoatRoughnessMap=n;break;case ft.ClearcoatNormal:o.clearcoatNormalMap=n;break;case ft.SheenColor:o.sheenColorMap=n;break;case ft.SheenRoughness:o.sheenRoughnessMap=n;break;case ft.Transmission:o.transmissionMap=n;break;case ft.Thickness:o.thicknessMap=n;break;case ft.Specular:o.specularIntensityMap=n;break;case ft.SpecularColor:o.specularColorMap=n;break;case ft.Iridescence:o.iridescenceMap=n;break;case ft.IridescenceThickness:o.iridescenceThicknessMap=n;break;case ft.Anisotropy:o.anisotropyMap=n}o.needsUpdate=!0}n&&(n.colorSpace=a,n.rotation=this[Wr].rotation,n.repeat=this[Wr].scale,n.offset=this[Wr].offset),this[ja]()}}zE=$r,HE=Wr,GE=Tl;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=Symbol("threeMaterial"),Ah=Symbol("threeMaterials"),xy=Symbol("baseColorTexture"),_y=Symbol("metallicRoughnessTexture");class tL extends oc{constructor(e,t){super(e,t);const{map:i,metalnessMap:n}=t.values().next().value;this[xy]=new fo(e,ft.Base,i,t),this[_y]=new fo(e,ft.MetallicRoughness,n,t)}get[Ah](){return this[Mt]}get[gl](){var e;return(e=this[Mt])===null||e===void 0?void 0:e.values().next().value}get baseColorFactor(){const e=[0,0,0,this[gl].opacity];return this[gl].color.toArray(e),e}get metallicFactor(){return this[gl].metalness}get roughnessFactor(){return this[gl].roughness}get baseColorTexture(){return this[xy]}get metallicRoughnessTexture(){return this[_y]}setBaseColorFactor(e){const t=new At;e instanceof Array?t.fromArray(e):t.set(e);for(const i of this[Ah])i.color.set(t),e instanceof Array&&e.length>3?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[Qt]()}setMetallicFactor(e){for(const t of this[Ah])t.metalness=e;this[Qt]()}setRoughnessFactor(e){for(const t of this[Ah])t.roughness=e;this[Qt]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sy,Cy;const Iy=Symbol("pbrMetallicRoughness"),My=Symbol("normalTexture"),Ty=Symbol("occlusionTexture"),By=Symbol("emissiveTexture"),oi=Symbol("backingThreeMaterial"),Ry=Symbol("applyAlphaCutoff"),Op=Symbol("getAlphaMode"),Xa=Symbol("lazyLoadGLTFInfo"),Up=Symbol("initialize"),tf=Symbol("getLoadedMaterial"),ct=Symbol("ensureMaterialIsLoaded"),Ly=Symbol("gltfIndex"),Bl=Symbol("setActive"),Yh=Symbol("variantIndices"),Qp=Symbol("isActive"),Kh=Symbol("variantSet"),Dy=Symbol("modelVariants"),zp=Symbol("name"),dn=Symbol("pbrTextures");class Hp extends oc{constructor(e,t,i,n,r,a,o=void 0){super(e,r),this[Sy]=new Set,this[Cy]=new Map,this[Ly]=t,this[Qp]=i,this[Dy]=n,this[zp]=a,o==null?this[Up]():this[Xa]=o}get[(Sy=Kh,Cy=dn,oi)](){return this[Mt].values().next().value}[Up](){const e=this[Qt],t=this[Mt];this[Iy]=new tL(e,t);const{normalMap:i,aoMap:n,emissiveMap:r}=t.values().next().value;this[My]=new fo(e,ft.Normal,i,t),this[Ty]=new fo(e,ft.Occlusion,n,t),this[By]=new fo(e,ft.Emissive,r,t);const a=o=>{this[dn].set(o,new fo(e,o,null,t))};a(ft.Clearcoat),a(ft.ClearcoatRoughness),a(ft.ClearcoatNormal),a(ft.SheenColor),a(ft.SheenRoughness),a(ft.Transmission),a(ft.Thickness),a(ft.Specular),a(ft.SpecularColor),a(ft.Iridescence),a(ft.IridescenceThickness),a(ft.Anisotropy)}async[tf](){if(this[Xa]!=null){const{set:e,material:t}=await this[Xa].doLazyLoad();return this[Mt]=e,this[Up](),this[Xa]=void 0,this.ensureLoaded=async()=>{},t}return this[Mt].values().next().value}colorFromRgb(e){const t=new At;return e instanceof Array?t.fromArray(e):t.set(e),t}[ct](){if(this[Xa]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[tf]()}get isLoaded(){return this[Xa]==null}get isActive(){return this[Qp]}[Bl](e){this[Qp]=e}get name(){return this[zp]||""}set name(e){if(this[zp]=e,this[Mt]!=null)for(const t of this[Mt])t.name=e}get pbrMetallicRoughness(){return this[ct](),this[Iy]}get normalTexture(){return this[ct](),this[My]}get occlusionTexture(){return this[ct](),this[Ty]}get emissiveTexture(){return this[ct](),this[By]}get emissiveFactor(){return this[ct](),this[oi].emissive.toArray()}get index(){return this[Ly]}[Yh](){return this[Kh]}hasVariant(e){const t=this[Dy].get(e);return t!=null&&this[Kh].has(t.index)}setEmissiveFactor(e){this[ct]();const t=this.colorFromRgb(e);for(const i of this[Mt])i.emissive.set(t);this[Qt]()}[Op](){return this[oi].transparent?"BLEND":this[oi].alphaTest>0?"MASK":"OPAQUE"}[Ry](){this[ct]();for(const e of this[Mt])this[Op]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[ct]();for(const t of this[Mt])t.alphaTest=e,t.needsUpdate=!0;this[Ry](),this[Qt]()}getAlphaCutoff(){return this[ct](),this[oi].alphaTest}setDoubleSided(e){this[ct]();for(const t of this[Mt])t.side=e?Zi:ns,t.needsUpdate=!0;this[Qt]()}getDoubleSided(){return this[ct](),this[oi].side==Zi}setAlphaMode(e){this[ct]();const t=(i,n)=>{i.transparent=n,i.depthWrite=!n};for(const i of this[Mt])t(i,e==="BLEND"),i.alphaTest=e==="MASK"?.5:void 0,i.needsUpdate=!0;this[Qt]()}getAlphaMode(){return this[ct](),this[Op]()}get emissiveStrength(){return this[ct](),this[oi].emissiveIntensity}setEmissiveStrength(e){this[ct]();for(const t of this[Mt])t.emissiveIntensity=e;this[Qt]()}get clearcoatFactor(){return this[ct](),this[oi].clearcoat}get clearcoatRoughnessFactor(){return this[ct](),this[oi].clearcoatRoughness}get clearcoatTexture(){return this[ct](),this[dn].get(ft.Clearcoat)}get clearcoatRoughnessTexture(){return this[ct](),this[dn].get(ft.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[ct](),this[dn].get(ft.ClearcoatNormal)}get clearcoatNormalScale(){return this[ct](),this[oi].clearcoatNormalScale.x}setClearcoatFactor(e){this[ct]();for(const t of this[Mt])t.clearcoat=e;this[Qt]()}setClearcoatRoughnessFactor(e){this[ct]();for(const t of this[Mt])t.clearcoatRoughness=e;this[Qt]()}setClearcoatNormalScale(e){this[ct]();for(const t of this[Mt])t.clearcoatNormalScale=new vt(e,e);this[Qt]()}get ior(){return this[ct](),this[oi].ior}setIor(e){this[ct]();for(const t of this[Mt])t.ior=e;this[Qt]()}get sheenColorFactor(){return this[ct](),this[oi].sheenColor.toArray()}get sheenColorTexture(){return this[ct](),this[dn].get(ft.SheenColor)}get sheenRoughnessFactor(){return this[ct](),this[oi].sheenRoughness}get sheenRoughnessTexture(){return this[ct](),this[dn].get(ft.SheenRoughness)}setSheenColorFactor(e){this[ct]();const t=this.colorFromRgb(e);for(const i of this[Mt])i.sheenColor.set(t),i.sheen=1;this[Qt]()}setSheenRoughnessFactor(e){this[ct]();for(const t of this[Mt])t.sheenRoughness=e,t.sheen=1;this[Qt]()}get transmissionFactor(){return this[ct](),this[oi].transmission}get transmissionTexture(){return this[ct](),this[dn].get(ft.Transmission)}setTransmissionFactor(e){this[ct]();for(const t of this[Mt])t.transmission=e;this[Qt]()}get thicknessFactor(){return this[ct](),this[oi].thickness}get thicknessTexture(){return this[ct](),this[dn].get(ft.Thickness)}get attenuationDistance(){return this[ct](),this[oi].attenuationDistance}get attenuationColor(){return this[ct](),this[oi].attenuationColor.toArray()}setThicknessFactor(e){this[ct]();for(const t of this[Mt])t.thickness=e;this[Qt]()}setAttenuationDistance(e){this[ct]();for(const t of this[Mt])t.attenuationDistance=e;this[Qt]()}setAttenuationColor(e){this[ct]();const t=this.colorFromRgb(e);for(const i of this[Mt])i.attenuationColor.set(t);this[Qt]()}get specularFactor(){return this[ct](),this[oi].specularIntensity}get specularTexture(){return this[ct](),this[dn].get(ft.Specular)}get specularColorFactor(){return this[ct](),this[oi].specularColor.toArray()}get specularColorTexture(){return this[ct](),this[dn].get(ft.SheenColor)}setSpecularFactor(e){this[ct]();for(const t of this[Mt])t.specularIntensity=e;this[Qt]()}setSpecularColorFactor(e){this[ct]();const t=this.colorFromRgb(e);for(const i of this[Mt])i.specularColor.set(t);this[Qt]()}get iridescenceFactor(){return this[ct](),this[oi].iridescence}get iridescenceTexture(){return this[ct](),this[dn].get(ft.Iridescence)}get iridescenceIor(){return this[ct](),this[oi].iridescenceIOR}get iridescenceThicknessMinimum(){return this[ct](),this[oi].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[ct](),this[oi].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[ct](),this[dn].get(ft.IridescenceThickness)}setIridescenceFactor(e){this[ct]();for(const t of this[Mt])t.iridescence=e;this[Qt]()}setIridescenceIor(e){this[ct]();for(const t of this[Mt])t.iridescenceIOR=e;this[Qt]()}setIridescenceThicknessMinimum(e){this[ct]();for(const t of this[Mt])t.iridescenceThicknessRange[0]=e;this[Qt]()}setIridescenceThicknessMaximum(e){this[ct]();for(const t of this[Mt])t.iridescenceThicknessRange[1]=e;this[Qt]()}get anisotropyStrength(){return this[ct](),this[oi].anisotropy}get anisotropyRotation(){return this[ct](),this[oi].anisotropyRotation}get anisotropyTexture(){return this[ct](),this[dn].get(ft.Anisotropy)}setAnisotropyStrength(e){this[ct]();for(const t of this[Mt])t.anisotropy=e;this[Qt]()}setAnisotropyRotation(e){this[ct]();for(const t of this[Mt])t.anisotropyRotation=e;this[Qt]()}}class VE{constructor(e){this.name="",this.children=new Array,this.name=e}}class Gp extends VE{constructor(e,t,i,n){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:r,threeGLTF:a,threeObjectMap:o}=n;this.parser=a.parser,this.modelVariants=i,this.mesh.userData.variantData=i;const c=o.get(e.material);c.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=c.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const h=e.userData.associations||{};if(h.meshes==null)return void console.error("Mesh is missing primitive index association");const d=((r.meshes||[])[h.meshes].primitives||[])[h.primitives];if(d!=null){if(d.material!=null)this.materials.set(d.material,t[d.material]);else{const u=t.findIndex(m=>m.name==="Default");u>=0?this.materials.set(u,t[u]):console.warn("gltfPrimitive has no material!")}if(d.extensions&&d.extensions.KHR_materials_variants){const u=d.extensions.KHR_materials_variants,m=a.parser.json.extensions.KHR_materials_variants.variants;for(const g of u.mappings){const y=t[g.material];this.materials.set(g.material,y);for(const E of g.variants){const{name:b}=m[E];this.variantToMaterialMap.set(E,y),y[Yh]().add(E),i.has(b)||i.set(b,{name:b,index:E})}}}}else console.error("Mesh primitive definition is missing.")}async setActiveMaterial(e){const t=this.materials.get(e);if(t!=null&&e!==this.activeMaterialIdx){this.mesh.material=await t[tf]();const{normalScale:i}=this.mesh.material;i!=null&&i.y*i.x<0!=(this.mesh.geometry.attributes.tangent==null)&&this.parser.assignFinalMaterial(this.mesh),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const t=this.variantToMaterialMap.get(e);if(t!=null)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(t.material!=null)continue;const i=await this.enableVariantHelper(e);i!=null&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const i=this.modelVariants.get(t).index;return e[Yh]().add(i),this.variantToMaterialMap.set(i,e),this.materials.set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;t!=null&&t.delete(e)}}updateVariantUserData(e,t){t[Yh]().add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[Mt].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return t==null||!this.variantInfo.has(t.index)||(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Py,Ny,Fy,ky,Oy,Uy;const Or=Symbol("materials"),vh=Symbol("hierarchy"),Qy=Symbol("roots"),ks=Symbol("primitives"),$E=Symbol("prepareVariantsForExport"),WE=Symbol("switchVariant"),qE=Symbol("materialFromPoint"),nf=Symbol("nodeFromPoint"),jE=Symbol("nodeFromIndex"),Xi=Symbol("variantData"),sf=Symbol("availableVariants"),Vp=Symbol("modelOnUpdate"),zy=Symbol("cloneMaterial");class iL{constructor(e,t,i,n){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=n}}class nL{constructor(e,t=()=>{}){this[Py]=new Array,this[Ny]=new Array,this[Fy]=new Array,this[ky]=new Array,this[Oy]=()=>{},this[Uy]=new Map,this[Vp]=t;const{gltf:i,threeGLTF:n,gltfElementMap:r}=e;for(const[c,h]of i.materials.entries()){const d=r.get(h);if(d!=null)this[Or].push(new Hp(t,c,!0,this[Xi],d,h.name));else{const u=(i.materials||[])[c],m=c,g=async()=>{const y=await n.parser.getDependency("material",m),E=new Set;return r.set(u,E),E.add(y),{set:E,material:y}};this[Or].push(new Hp(t,c,!1,this[Xi],d,h.name,new iL(i,r,u,g)))}}const a=new Map,o=new Array;for(const c of n.scene.children)o.push(c);for(;o.length>0;){const c=o.pop();let h=null;c instanceof Zt?(h=new Gp(c,this.materials,this[Xi],e),this[ks].push(h)):h=new VE(c.name);const d=a.get(c);d!=null?d.children.push(h):this[Qy].push(h),this[vh].push(h);for(const u of c.children)o.push(u),a.set(c,h)}}get materials(){return this[Or]}[(Py=Or,Ny=vh,Fy=Qy,ky=ks,Oy=Vp,Uy=Xi,sf)](){const e=Array.from(this[Xi].values());return e.sort((t,i)=>t.index-i.index),e.map(t=>t.name)}getMaterialByName(e){const t=this[Or].filter(i=>i.name===e);return t.length>0?t[0]:null}[jE](e,t){const i=this[vh].find(n=>{if(n instanceof Gp){const{meshes:r,primitives:a}=n.mesh.userData.associations;if(r==e&&a==t)return!0}return!1});return i??null}[nf](e){return this[vh].find(t=>t instanceof Gp&&t.mesh===e.object)}[qE](e){return this[nf](e).getActiveMaterial()}async[WE](e){for(const t of this[ks])await t.enableVariant(e);for(const t of this.materials)t[Bl](!1);for(const t of this[ks])this.materials[t.getActiveMaterial().index][Bl](!0)}async[$E](){const e=new Array;for(const t of this[ks])e.push(t.instantiateVariants());await Promise.all(e)}[zy](e,t){const i=this.materials[e];i.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const n=i[Mt],r=new Set;for(const[o,c]of n.entries()){const h=c.clone();h.name=t+(n.size>1?"_inst"+o:""),r.add(h)}const a=new Hp(this[Vp],this[Or].length,!1,this[Xi],r,t);return this[Or].push(a),a}createMaterialInstanceForVariant(e,t,i,n=!0){let r=null;for(const a of this[ks]){const o=this[Xi].get(i);o!=null&&a.variantInfo.has(o.index)||a.getMaterial(e)!=null&&(this.hasVariant(i)||this.createVariant(i),r==null&&(r=this[zy](e,t)),a.addVariant(r,i))}if(n&&r!=null){r[Bl](!0),this.materials[e][Bl](!1);for(const a of this[ks])a.enableVariant(i)}return r}createVariant(e){this[Xi].has(e)?console.warn(`Variant '${e}'' already exists`):this[Xi].set(e,{name:e,index:this[Xi].size})}hasVariant(e){return this[Xi].has(e)}setMaterialToVariant(e,t){if(this[sf]().find(i=>i===t)!=null)if(e<0||e>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const i of this[ks]){const n=i.getMaterial(e);n!=null&&i.addVariant(n,t)}else console.warn(`Can't add material to '${t}', the variant does not exist.'`)}updateVariantName(e,t){const i=this[Xi].get(e);i!=null&&(i.name=t,this[Xi].set(t,i),this[Xi].delete(e))}deleteVariant(e){const t=this[Xi].get(e);if(t!=null){for(const i of this.materials)i.hasVariant(e)&&i[Kh].delete(t.index);for(const i of this[ks])i.deleteVariant(t.index);this[Xi].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $p=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const Jh=Symbol("currentGLTF"),Zh=Symbol("originalGltfJson"),qr=Symbol("model"),Wp=Symbol("getOnUpdateMethod"),Al=Symbol("buildTexture");/* @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL extends Zt{constructor(){super(void 0,new On({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(e=this.height,t=this.radius,i=128){e==this.height&&t==this.radius&&i==this.resolution||(this.height=e,this.radius=t,this.resolution=i,e>0&&t>0&&(this.geometry.dispose(),this.geometry=function(n,r,a){const o=new Ff(r,2*a,a);o.scale(1,1,-1);const c=o.getAttribute("position"),h=new le;for(let d=0;d<c.count;++d)if(h.fromBufferAttribute(c,d),h.y<0){const u=3*-n/2,m=h.y<u?-n/h.y:1-h.y*h.y/(3*u*u);h.multiplyScalar(m),h.toArray(c.array,3*d)}return c.needsUpdate=!0,o}(e,t,i)))}}const yh=new le,qp=new le,jp=new le,wh=new St,Hy=new Fn,Gy=new xn;class XE extends yB{constructor(e){super(document.createElement("div")),this.normal=new le(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const t=Gs(e)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,gs(t[i]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const t=Gs(e)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,t[i].number)}updateSurface(e){if(!e&&this.initialized)return;const{mesh:t,tri:i,bary:n}=this;if(t==null||i==null||n==null)return;t.getVertexPosition(i.x,yh),t.getVertexPosition(i.y,qp),t.getVertexPosition(i.z,jp),yh.toArray(wh.elements,0),qp.toArray(wh.elements,3),jp.toArray(wh.elements,6),this.position.copy(n).applyMatrix3(wh);const r=this.parent;r.worldToLocal(t.localToWorld(this.position)),Hy.set(yh,qp,jp),Hy.getNormal(this.normal).transformDirection(t.matrixWorld);const a=r.parent;Gy.setFromAxisAngle(yh.set(0,1,0),-a.yaw),this.normal.applyQuaternion(Gy)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const i=t,n=i.dataset.visibilityAttribute;if(n!=null){const r=`data-${n}`;i.toggleAttribute(r,e)}i.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const rL={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},aL={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function Vy(s,e,t){return(1-t)*s+t*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL extends ii{constructor(e,t,i){super(),this.camera=new ko,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Rb,this.horizontalBlurMaterial=new un(rL),this.verticalBlurMaterial=new un(aL),this.intensity=0,this.softness=1,this.boundingBox=new hn,this.size=new le,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:n}=this;n.rotation.x=Math.PI/2,n.left=-.5,n.right=.5,n.bottom=-.5,n.top=.5,this.add(n);const r=new ys,a=new On({opacity:1,transparent:!0,side:$i});this.floor=new Zt(r,a),this.floor.userData.noHit=!0,n.add(this.floor),this.blurPlane=new Zt(r),this.blurPlane.visible=!1,n.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(o){o.fragmentShader=o.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){const{boundingBox:n,size:r,rotation:a,position:o}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(o),i==="back"){const{min:c,max:h}=n;[c.y,c.z]=[c.z,c.y],[h.y,h.z]=[h.z,h.y],[r.y,r.z]=[r.z,r.y],a.x=Math.PI/2,a.y=Math.PI}else a.x=0,a.y=0;if(this.isAnimated){const c=n.min.y,h=n.max.y;r.y=this.maxDimension,n.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),n.min.y=c,n.max.y=h,r.set(this.maxDimension,h-c,this.maxDimension)}i==="bottom"?o.y=n.min.y:o.z=n.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:i}=this,n=this.isAnimated?2:1,r=n*Math.pow(2,9-3*e);this.setMapSize(r);const a=t.y/2,o=t.y*n;i.near=0,i.far=Vy(o,a,e),this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=2);const i=Math.floor(t.x>t.z?e:e*t.x/t.z),n=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10+i,a=10+n;if(this.renderTarget==null||this.renderTarget.width===r&&this.renderTarget.height===a||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const o={format:gi};this.renderTarget=new Qn(r,a,o),this.renderTargetBlur=new Qn(r,a,o),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+10/i),t.z*(1+10/n),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*Vy(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return .001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const n=e.xr.enabled;e.xr.enabled=!1;const r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=n,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){const{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:n,renderTarget:r,renderTargetBlur:a,blurPlane:o}=this;o.visible=!0,o.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(a),e.render(o,t),o.material=n,n.uniforms.v.value=1/this.renderTarget.height,n.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(o,t),o.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=new le,$y=new le,Wy=new le,Yp=new class{constructor(s,e,t=0,i=1/0){this.ray=new nc(s,e),this.near=t,this.far=i,this.camera=null,this.layers=new Mf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(s,e){this.ray.set(s,e)}setFromCamera(s,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(s.x,s.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(s.x,s.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(s){return Tv.identity().extractRotation(s.matrixWorld),this.ray.origin.setFromMatrixPosition(s.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Tv),this}intersectObject(s,e=!0,t=[]){return Vm(s,this,t,e),t.sort(Bv),t}intersectObjects(s,e=!0,t=[]){for(let i=0,n=s.length;i<n;i++)Vm(s[i],this,t,e);return t.sort(Bv),t}},lL=new le,vl=new vt;class cL extends Ar{constructor({canvas:e,element:t,width:i,height:n}){super(),this.annotationRenderer=new wB,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new Ui(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new ii,this.animationNames=[],this.boundingBox=new hn,this.boundingSphere=new Hn,this.size=new le,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=Td,this.canScale=!0,this.isDirty=!1,this.goalTarget=new le,this.targetDamperX=new yn,this.targetDamperY=new yn,this.targetDamperZ=new yn,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new sL,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new Ui(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(i,n),this.target.name="Target",this.mixer=new rT(this.target);const{domElement:r}=this.annotationRenderer,{style:a}=r;a.display="none",a.pointerEvents="none",a.position="absolute",a.top="0",this.element.shadowRoot.querySelector(".default").appendChild(r),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){if(!e||e===this.url)return void t(1);if(this.reset(),this.url=e,this.externalRenderer!=null){const o=await this.externalRenderer.load(t);return this.boundingSphere.radius=o.framedRadius,void(this.idealAspect=o.fieldOfViewAspect)}let i;this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{i=await new Promise(async(o,c)=>{this.cancelPendingSourceChange=()=>c();try{o(await this.element[zt].loader.load(e,this.element,t))}catch(h){c(h)}})}catch(o){if(o==null)return;throw o}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=i,i!=null&&(this._model=i.scene,this.target.add(i.scene));const{animations:n}=i,r=new Map,a=[];for(const o of n)r.set(o.name,o),a.push(o.name);this.animations=n,this.animationsByName=r,this.animationNames=a,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;t!=null&&(t.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[Jh]=null,this.element[Zh]=null,this.element[qr]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.externalRenderer!=null){const i=Ym();this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new hn;e.traverse(i=>{const n=i;if(!n.material||!n.material.transparent)return;t.setFromObject(n);const r=t.getSize(lL),a=Math.min(r.x,r.y,r.z);Math.max(r.x,r.y,r.z)<100*a||this.markBakedShadow(n)})}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,i=new hn;this.boundingBox.getSize(this.size);for(const n of this.bakedShadows)i.setFromObject(n),i.min.y<e.y+this.size.y/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z||i.min.z<e.z+this.size.z/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(n)}applyTransform(){const{model:e}=this;if(e==null)return;const t=Gs(this.element.orientation)[0].terms,i=gs(t[0]).number,n=gs(t[1]).number,r=gs(t[2]).number;e.quaternion.setFromEuler(new zn(n,r,i,"YXZ"));const a=Gs(this.element.scale)[0].terms;e.scale.set(a[0].number,a[1].number,a[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const t=(i,n)=>i.expandByPoint(n);this.setBakedShadowVisibility(!1),this.boundingBox=sh(e,t,new hn),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(i=>this.unmarkBakedShadow(i)),this.boundingBox=sh(e,t,new hn)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget()),this.boundingSphere.radius=Math.sqrt(sh(e,(i,n)=>Math.max(i,t.distanceToSquared(n)),0)),this.idealAspect=sh(e,(i,n)=>{n.sub(t);const r=Math.sqrt(n.x*n.x+n.z*n.z);return Math.max(i,r/(this.idealCameraDistance()-Math.abs(n.y)))},0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(this.xrCamera!=null)vl.set(e/window.screen.width,t/window.screen.height);else{const i=this.element.getBoundingClientRect();vl.set((e-i.x)/this.width,(t-i.y)/this.height)}return vl.multiplyScalar(2).subScalar(1),vl.y*=-1,vl}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[zt].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?10:1)}setGroundedSkybox(){const e=Gs(this.element.skyboxHeight)[0].terms[0],t=gs(e).number,i=10*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,i),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(e){const t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{const n=this.boundingSphere.radius/10;let{x:r,y:a,z:o}=i;return r=this.targetDamperX.update(r,t.x,e,n),a=this.targetDamperY.update(a,t.y,e,n),o=this.targetDamperZ.update(o,t.z,e,n),this.groundedSkybox.position.x=-r,this.groundedSkybox.position.z=-o,this.target.position.set(r,a,o),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:i,z:n}=this.position;this.yaw=Math.atan2(e-i,t-n)}get model(){return this._model}set yaw(e){this.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop!==Cf||1&~e?this.currentAnimationAction.time:this.duration-this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,t=0,i=2201,n=1/0){if(this._currentGLTF==null)return;const{animations:r}=this;if(r==null||r.length===0)return;let a=null;if(e!=null&&(a=this.animationsByName.get(e),a==null)){const o=parseInt(e);!isNaN(o)&&o>=0&&o<r.length&&(a=r[o])}a==null&&(a=r[0]);try{const{currentAnimationAction:o}=this,c=this.mixer.clipAction(a,this);this.currentAnimationAction=c,this.element.paused?this.mixer.stopAllAction():(c.paused=!1,o!=null&&c!==o?c.crossFadeFrom(o,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),c.setLoop(i,n),c.enabled=!0,c.clampWhenFinished=!0,c.play()}catch(o){console.error(o)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(e!=null){const t=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;t!=null&&t.needsUpdate==1&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const t=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new oL(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;t!=null&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;t!=null&&t.setOffset(e)}hitFromPoint(e,t=this){return Yp.setFromCamera(e,this.getCamera()),Yp.intersectObject(t,!0).find(i=>i.object.visible&&!i.object.userData.noHit)}positionAndNormalFromPoint(e,t=this){var i;const n=this.hitFromPoint(e,t);return n==null?null:{position:n.point,normal:n.face!=null?n.face.normal.clone().applyNormalMatrix(new St().getNormalMatrix(n.object.matrixWorld)):Yp.ray.direction.clone().multiplyScalar(-1),uv:(i=n.uv)!==null&&i!==void 0?i:null}}surfaceFromPoint(e,t=this){const i=this.element.model;if(i==null)return null;const n=this.hitFromPoint(e,t);if(n==null||n.face==null)return null;const r=i[nf](n),{meshes:a,primitives:o}=r.mesh.userData.associations,c=new le,h=new le,d=new le,{a:u,b:m,c:g}=n.face,y=n.object;y.getVertexPosition(u,c),y.getVertexPosition(m,h),y.getVertexPosition(g,d);const E=new Fn(c,h,d),b=new le;return E.getBarycoord(y.worldToLocal(n.point),b),`${a} ${o} ${u} ${m} ${g} ${b.x.toFixed(3)} ${b.y.toFixed(3)} ${b.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let i=0,n=t.length;i<n;i++){const r=t[i];r instanceof XE&&e(r)}}initializeSurface(e){if(e.surface!=null&&e.mesh==null){const t=Gs(e.surface)[0].terms;if(t.length!=8)return void console.warn(e.surface+" does not have exactly 8 numbers.");const i=this.element.model[jE](t[0].number,t[1].number),n=new le(t[2].number,t[3].number,t[4].number);if(i==null)return void console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");const r=i.mesh.geometry.attributes.position.count;if(n.x>=r||n.y>=r||n.z>=r)return void console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");const a=new le(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=n,e.bary=a}}updateSurfaceHotspots(){const e=!this.element.paused;this.forHotspots(t=>{this.initializeSurface(t),t.updateSurface(e)})}updateHotspotsVisibility(e){this.forHotspots(t=>{Xp.copy(e),$y.setFromMatrixPosition(t.matrixWorld),Xp.sub($y),Wy.copy(t.normal).transformDirection(this.target.matrixWorld),Xp.dot(Wy)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;const{schemaElement:i,element:n}=this,{alt:r,poster:a,iosSrc:o}=n;if(e!=null){const c=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((t=e.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];o&&c.push({"@type":"MediaObject",contentUrl:o,encodingFormat:"model/vnd.usdz+zip"});const h={"@context":"http://schema.org/","@type":"3DModel",image:a??void 0,name:r??void 0,encoding:c};i.textContent=JSON.stringify(h),document.head.appendChild(i)}else i.parentElement!=null&&i.parentElement.removeChild(i)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),this.ongoingActivityCount===1&&this.announceTotalProgress(t,0,e),i=>{let n;return n=Math.max(ms(i,0,1),t.progress),n!==t.progress&&this.announceTotalProgress(t,n,e),t.progress}}announceTotalProgress(e,t,i){let n=0,r=0;t==1&&(e.completed=!0);for(const c of this.ongoingActivities){const{progress:h}=c;n+=1-h,c.completed&&r++}const a=e.progress;e.progress=t,this.totalProgress+=(t-a)*(1-this.totalProgress)/n;const o=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:o,reason:i}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qy,jy,Xy,Yy,Ky,Jy,Zy,ew,tw,iw,nw,sw,rw,bh=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const mr=document.createElement("canvas"),Kp=Symbol("fallbackResizeHandler"),aw=Symbol("defaultAriaLabel"),Eh=Symbol("resizeObserver"),Ya=Symbol("clearModelTimeout"),Jp=Symbol("onContextLost"),Ka=Symbol("loaded"),Zp=Symbol("status"),em=Symbol("onFocus"),tm=Symbol("onBlur"),co=Symbol("updateSize"),xh=Symbol("intersectionObserver"),jr=Symbol("isElementInViewport"),vd=Symbol("announceModelVisibility"),go=Symbol("ariaLabel"),rf=Symbol("altDefaulted"),yl=Symbol("statusElement"),yd=Symbol("updateStatus"),Rl=Symbol("loadedTime"),Eo=Symbol("updateSource"),ow=Symbol("markLoaded"),ed=Symbol("container"),Yn=Symbol("input"),af=Symbol("canvas"),tt=Symbol("scene"),Yi=Symbol("needsRender"),ds=Symbol("tick"),hr=Symbol("onModelLoad"),jl=Symbol("onResize"),zt=Symbol("renderer"),Kr=Symbol("progressTracker"),lw=Symbol("getLoaded"),Jr=Symbol("getModelIsVisible"),Ao=Symbol("shouldAttemptPreload"),or=s=>({x:s.x,y:s.y,z:s.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),of=s=>({u:s.x,v:s.y,toString(){return`${this.u} ${this.v}`}});class Ll extends Yr{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[qy]=!1,this[jy]=!1,this[Xy]=0,this[Yy]="",this[Ky]=null,this[Jy]=Yv(()=>{const n=this.getBoundingClientRect();this[co](n)},50),this[Zy]=Yv(n=>{const r=this.modelIsVisible;r!==n&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:r}}))},0),this[ew]=null,this[tw]=null,this[iw]=new hL,this[nw]=()=>{this[yl].textContent=this[Zp]},this[sw]=()=>{this[yl].textContent=""},this[rw]=n=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:n.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;let t,i;if((n=>{jb(ST,n)})(e),this[ed]=e.querySelector(".container"),this[Yn]=e.querySelector(".userInput"),this[af]=e.querySelector("canvas"),this[yl]=e.querySelector("#status"),this[aw]=this[Yn].getAttribute("aria-label"),this.isConnected){const n=this.getBoundingClientRect();t=n.width,i=n.height}else t=300,i=150;this[tt]=new cL({canvas:this[af],element:this,width:t,height:i}),Promise.resolve().then(()=>{this[co](this.getBoundingClientRect())}),tp&&(this[Eh]=new ResizeObserver(n=>{if(!this[zt].isPresenting)for(let r of n)r.target===this&&this[co](r.contentRect)})),ip?this[xh]=new IntersectionObserver(n=>{for(let r of n)if(r.target===this){const a=this.modelIsVisible;this[jr]=r.isIntersecting,this[vd](a),this[jr]&&!this.loaded&&this[Eo]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[jr]=!0}static get is(){return"model-viewer"}static set modelCacheSize(e){ki[cr].evictionThreshold=e}static get modelCacheSize(){return ki[cr].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Zn.singleton.minScale=e}static get minimumRenderScale(){return Zn.singleton.minScale}get loaded(){return this[lw]()}get[(qy=jr,jy=Ka,Xy=Rl,Yy=Zp,Ky=Ya,Jy=Kp,Zy=vd,ew=Eh,tw=xh,iw=Kr,zt)](){return Zn.singleton}get modelIsVisible(){return this[Jr]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),tp?this[Eh].observe(this):self.addEventListener("resize",this[Kp]),ip&&this[xh].observe(this),this.addEventListener("focus",this[em]),this.addEventListener("blur",this[tm]);const e=this[zt];e.addEventListener("contextlost",this[Jp]),e.registerScene(this[tt]),this[Ya]!=null&&(self.clearTimeout(this[Ya]),this[Ya]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),tp?this[Eh].unobserve(this):self.removeEventListener("resize",this[Kp]),ip&&this[xh].unobserve(this),this.removeEventListener("focus",this[em]),this.removeEventListener("blur",this[tm]);const e=this[zt];e.removeEventListener("contextlost",this[Jp]),e.unregisterScene(this[tt]),this[Ya]=self.setTimeout(()=>{this[tt].dispose(),this[Ya]=null},10)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[Ka]=!1,this[Rl]=0,this[tt].reset()):this.src!==this[tt].url&&(this[Ka]=!1,this[Rl]=0,this[Eo]())),e.has("alt")&&this[Yn].setAttribute("aria-label",this[go]),e.has("withCredentials")&&(ki.withCredentials=this.withCredentials,this[zt].textureUtils.withCredentials=this.withCredentials),e.has("generateSchema")&&(this.generateSchema?this[tt].updateSchema(this.src):this[tt].updateSchema(null))}toDataURL(e,t){return this[zt].displayCanvas(this[tt]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,n=e?e.idealAspect:void 0,{width:r,height:a,idealAspect:o,aspect:c}=this[tt],{dpr:h,scaleFactor:d}=this[zt];let u=r*d*h,m=a*d*h,g=0,y=0;if(n===!0)if(o>c){const E=m;m=Math.round(u/o),y=(E-m)/2}else{const E=u;u=Math.round(m*o),g=(E-u)/2}mr.width=u,mr.height=m;try{return new Promise(async(E,b)=>{mr.getContext("2d").drawImage(this[zt].displayCanvas(this[tt]),g,y,u,m,0,0,u,m),mr.toBlob(C=>{if(!C)return b(new Error("Unable to retrieve canvas blob"));E(C)},t,i)})}finally{this[co]({width:r,height:a})}}registerEffectComposer(e){e.setRenderer(this[zt].threeRenderer),e.setMainCamera(this[tt].getCamera()),e.setMainScene(this[tt]),this[tt].effectRenderer=e}unregisterEffectComposer(){this[tt].effectRenderer=null}registerRenderer(e){this[tt].externalRenderer=e}unregisterRenderer(){this[tt].externalRenderer=null}get[go](){return this[rf]}get[rf](){return this.alt==null||this.alt==="null"?this[aw]:this.alt}[lw](){return this[Ka]}[Jr](){return this.loaded&&this[jr]}[Ao](){return!!this.src&&this[jr]}[co]({width:e,height:t}){e!==0&&t!==0&&(this[ed].style.width=`${e}px`,this[ed].style.height=`${t}px`,this[jl]({width:e,height:t}))}[ds](e,t){var i;(i=this[tt].effectRenderer)===null||i===void 0||i.beforeRender(e,t)}[ow](){this[Ka]||(this[Ka]=!0,this[Rl]=performance.now())}[Yi](){this[tt].queueRender()}[hr](){}[yd](e){this[Zp]=e;const t=this.getRootNode();t!=null&&t.activeElement===this&&this[yl].textContent!=e&&(this[yl].textContent=e)}[(nw=em,sw=tm,jl)](e){this[tt].setSize(e.width,e.height)}async[(rw=Jp,Eo)](){const e=this[tt];if(this.loaded||!this[Ao]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[yd]("Loading"),e.stopAnimation();const t=this[Kr].beginActivity("model-load"),i=this.src;try{const n=e.setSource(i,a=>t(.95*ms(a,0,1))),r=this[md]();await Promise.all([n,r]),this[ow](),this[hr](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(a=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),a()})})})}catch(n){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:n}}))}finally{t(1)}}}bh([mt({type:String})],Ll.prototype,"alt",void 0),bh([mt({type:String})],Ll.prototype,"src",void 0),bh([mt({type:Boolean,attribute:"with-credentials"})],Ll.prototype,"withCredentials",void 0),bh([mt({type:Boolean,attribute:"generate-schema"})],Ll.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var im=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const _h=Symbol("changeAnimation"),Os=Symbol("paused"),dL={repetitions:1/0,pingpong:!1},Ur=Symbol("hotspotMap"),nm=Symbol("mutationCallback"),wl=Symbol("observer"),sm=Symbol("addHotspot"),cw=Symbol("removeHotspot"),rm=new yt;/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Wi=Uint8Array,wn=Uint16Array,Vf=Int32Array,$f=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wf=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hw=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YE=function(s,e){for(var t=new wn(31),i=0;i<31;++i)t[i]=e+=1<<s[i-1];var n=new Vf(t[30]);for(i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)n[r]=r-t[i]<<5|i;return{b:t,r:n}},KE=YE($f,2),uL=KE.b,lf=KE.r;uL[28]=258,lf[258]=28;for(var dw=YE(Wf,0).r,cf=new wn(32768),ci=0;ci<32768;++ci){var Qr=(43690&ci)>>1|(21845&ci)<<1;Qr=(61680&(Qr=(52428&Qr)>>2|(13107&Qr)<<2))>>4|(3855&Qr)<<4,cf[ci]=((65280&Qr)>>8|(255&Qr)<<8)>>1}var Ol=function(s,e,t){for(var i=s.length,n=0,r=new wn(e);n<i;++n)s[n]&&++r[s[n]-1];var a,o=new wn(e);for(n=1;n<e;++n)o[n]=o[n-1]+r[n-1]<<1;if(t){a=new wn(1<<e);var c=15-e;for(n=0;n<i;++n)if(s[n])for(var h=n<<4|s[n],d=e-s[n],u=o[s[n]-1]++<<d,m=u|(1<<d)-1;u<=m;++u)a[cf[u]>>c]=h}else for(a=new wn(i),n=0;n<i;++n)s[n]&&(a[n]=cf[o[s[n]-1]++]>>15-s[n]);return a},da=new Wi(288);for(ci=0;ci<144;++ci)da[ci]=8;for(ci=144;ci<256;++ci)da[ci]=9;for(ci=256;ci<280;++ci)da[ci]=7;for(ci=280;ci<288;++ci)da[ci]=8;var wd=new Wi(32);for(ci=0;ci<32;++ci)wd[ci]=5;var pL=Ol(da,9,0),mL=Ol(wd,5,0),JE=function(s){return(s+7)/8|0},ZE=function(s,e,t){return(e==null||e<0)&&(e=0),(t==null||t>s.length)&&(t=s.length),new Wi(s.subarray(e,t))},fL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kd=function(s,e,t){var i=new Error(e||fL[s]);if(i.code=s,Error.captureStackTrace&&Error.captureStackTrace(i,kd),!t)throw i;return i},Us=function(s,e,t){t<<=7&e;var i=e/8|0;s[i]|=t,s[i+1]|=t>>8},bl=function(s,e,t){t<<=7&e;var i=e/8|0;s[i]|=t,s[i+1]|=t>>8,s[i+2]|=t>>16},am=function(s,e){for(var t=[],i=0;i<s.length;++i)s[i]&&t.push({s:i,f:s[i]});var n=t.length,r=t.slice();if(!n)return{t:tx,l:0};if(n==1){var a=new Wi(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(Q,G){return Q.f-G.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],h=0,d=1,u=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=n-1;)o=t[t[h].f<t[u].f?h++:u++],c=t[h!=d&&t[h].f<t[u].f?h++:u++],t[d++]={s:-1,f:o.f+c.f,l:o,r:c};var m=r[0].s;for(i=1;i<n;++i)r[i].s>m&&(m=r[i].s);var g=new wn(m+1),y=hf(t[d-1],g,0);if(y>e){i=0;var E=0,b=y-e,C=1<<b;for(r.sort(function(Q,G){return g[G.s]-g[Q.s]||Q.f-G.f});i<n;++i){var B=r[i].s;if(!(g[B]>e))break;E+=C-(1<<y-g[B]),g[B]=e}for(E>>=b;E>0;){var I=r[i].s;g[I]<e?E-=1<<e-g[I]++-1:++i}for(;i>=0&&E;--i){var k=r[i].s;g[k]==e&&(--g[k],++E)}y=e}return{t:new Wi(g),l:y}},hf=function(s,e,t){return s.s==-1?Math.max(hf(s.l,e,t+1),hf(s.r,e,t+1)):e[s.s]=t},uw=function(s){for(var e=s.length;e&&!s[--e];);for(var t=new wn(++e),i=0,n=s[0],r=1,a=function(c){t[i++]=c},o=1;o<=e;++o)if(s[o]==n&&o!=e)++r;else{if(!n&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(n),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(n);r=1,n=s[o]}return{c:t.subarray(0,i),n:e}},El=function(s,e){for(var t=0,i=0;i<e.length;++i)t+=s[i]*e[i];return t},ex=function(s,e,t){var i=t.length,n=JE(e+2);s[n]=255&i,s[n+1]=i>>8,s[n+2]=255^s[n],s[n+3]=255^s[n+1];for(var r=0;r<i;++r)s[n+r+4]=t[r];return 8*(n+4+i)},pw=function(s,e,t,i,n,r,a,o,c,h,d){Us(e,d++,t),++n[256];for(var u=am(n,15),m=u.t,g=u.l,y=am(r,15),E=y.t,b=y.l,C=uw(m),B=C.c,I=C.n,k=uw(E),Q=k.c,G=k.n,U=new wn(19),te=0;te<B.length;++te)++U[31&B[te]];for(te=0;te<Q.length;++te)++U[31&Q[te]];for(var ue=am(U,7),pe=ue.t,ce=ue.l,he=19;he>4&&!pe[hw[he-1]];--he);var Me,De,Qe,Ee,ke=h+5<<3,ee=El(n,da)+El(r,wd)+a,re=El(n,m)+El(r,E)+a+14+3*he+El(U,pe)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&ke<=ee&&ke<=re)return ex(e,d,s.subarray(c,c+h));if(Us(e,d,1+(re<ee)),d+=2,re<ee){Me=Ol(m,g,0),De=m,Qe=Ol(E,b,0),Ee=E;var ye=Ol(pe,ce,0);for(Us(e,d,I-257),Us(e,d+5,G-1),Us(e,d+10,he-4),d+=14,te=0;te<he;++te)Us(e,d+3*te,pe[hw[te]]);d+=3*he;for(var me=[B,Q],V=0;V<2;++V){var z=me[V];for(te=0;te<z.length;++te){var J=31&z[te];Us(e,d,ye[J]),d+=pe[J],J>15&&(Us(e,d,z[te]>>5&127),d+=z[te]>>12)}}}else Me=pL,De=da,Qe=mL,Ee=wd;for(te=0;te<o;++te){var ae=i[te];if(ae>255){bl(e,d,Me[(J=ae>>18&31)+257]),d+=De[J+257],J>7&&(Us(e,d,ae>>23&31),d+=$f[J]);var Z=31&ae;bl(e,d,Qe[Z]),d+=Ee[Z],Z>3&&(bl(e,d,ae>>5&8191),d+=Wf[Z])}else bl(e,d,Me[ae]),d+=De[ae]}return bl(e,d,Me[256]),d+De[256]},gL=new Vf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tx=new Wi(0),AL=function(){for(var s=new Int32Array(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(1&t&&-306674912)^t>>>1;s[e]=t}return s}(),vL=function(){var s=-1;return{p:function(e){for(var t=s,i=0;i<e.length;++i)t=AL[255&t^e[i]]^t>>>8;s=t},d:function(){return~s}}},yL=function(s,e,t,i,n){if(!n&&(n={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),a=new Wi(r.length+s.length);a.set(r),a.set(s,r.length),s=a,n.w=r.length}return function(o,c,h,d,u,m){var g=m.z||o.length,y=new Wi(d+g+5*(1+Math.ceil(g/7e3))+u),E=y.subarray(d,y.length-u),b=m.l,C=7&(m.r||0);if(c){C&&(E[0]=m.r>>3);for(var B=gL[c-1],I=B>>13,k=8191&B,Q=(1<<h)-1,G=m.p||new wn(32768),U=m.h||new wn(Q+1),te=Math.ceil(h/3),ue=2*te,pe=function(Ve){return(o[Ve]^o[Ve+1]<<te^o[Ve+2]<<ue)&Q},ce=new Vf(25e3),he=new wn(288),Me=new wn(32),De=0,Qe=0,Ee=m.i||0,ke=0,ee=m.w||0,re=0;Ee+2<g;++Ee){var ye=pe(Ee),me=32767&Ee,V=U[ye];if(G[me]=V,U[ye]=me,ee<=Ee){var z=g-Ee;if((De>7e3||ke>24576)&&(z>423||!b)){C=pw(o,E,0,ce,he,Me,Qe,ke,re,Ee-re,C),ke=De=Qe=0,re=Ee;for(var J=0;J<286;++J)he[J]=0;for(J=0;J<30;++J)Me[J]=0}var ae=2,Z=0,Se=k,Ie=me-V&32767;if(z>2&&ye==pe(Ee-Ie))for(var Oe=Math.min(I,z)-1,K=Math.min(32767,Ee),L=Math.min(258,z);Ie<=K&&--Se&&me!=V;){if(o[Ee+ae]==o[Ee+ae-Ie]){for(var oe=0;oe<L&&o[Ee+oe]==o[Ee+oe-Ie];++oe);if(oe>ae){if(ae=oe,Z=Ie,oe>Oe)break;var ne=Math.min(Ie,oe-2),Le=0;for(J=0;J<ne;++J){var fe=Ee-Ie+J&32767,Re=fe-G[fe]&32767;Re>Le&&(Le=Re,V=fe)}}}Ie+=(me=V)-(V=G[me])&32767}if(Z){ce[ke++]=268435456|lf[ae]<<18|dw[Z];var Je=31&lf[ae],Xe=31&dw[Z];Qe+=$f[Je]+Wf[Xe],++he[257+Je],++Me[Xe],ee=Ee+ae,++De}else ce[ke++]=o[Ee],++he[o[Ee]]}}for(Ee=Math.max(Ee,ee);Ee<g;++Ee)ce[ke++]=o[Ee],++he[o[Ee]];C=pw(o,E,b,ce,he,Me,Qe,ke,re,Ee-re,C),b||(m.r=7&C|E[C/8|0]<<3,C-=7,m.h=U,m.p=G,m.i=Ee,m.w=ee)}else{for(Ee=m.w||0;Ee<g+b;Ee+=65535){var st=Ee+65535;st>=g&&(E[C/8|0]=b,st=g),C=ex(E,C+1,o.subarray(Ee,st))}m.i=g}return ZE(y,0,d+JE(C)+u)}(s,e.level==null?6:e.level,e.mem==null?n.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+e.mem,t,i,n)},ix=function(s,e){var t={};for(var i in s)t[i]=s[i];for(var i in e)t[i]=e[i];return t},Hi=function(s,e,t){for(;t;++e)s[e]=t,t>>>=8};function wL(s,e){return yL(s,e||{},0,0)}var nx=function(s,e,t,i){for(var n in s){var r=s[n],a=e+n,o=i;Array.isArray(r)&&(o=ix(i,r[1]),r=r[0]),r instanceof Wi?t[a]=[r,o]:(t[a+="/"]=[new Wi(0),o],nx(r,a,t,i))}},mw=typeof TextEncoder<"u"&&new TextEncoder,bL=typeof TextDecoder<"u"&&new TextDecoder;try{bL.decode(tx,{stream:!0})}catch{}function bd(s,e){if(e){for(var t=new Wi(s.length),i=0;i<s.length;++i)t[i]=s.charCodeAt(i);return t}if(mw)return mw.encode(s);var n=s.length,r=new Wi(s.length+(s.length>>1)),a=0,o=function(d){r[a++]=d};for(i=0;i<n;++i){if(a+5>r.length){var c=new Wi(a+8+(n-i<<1));c.set(r),r=c}var h=s.charCodeAt(i);h<128||e?o(h):h<2048?(o(192|h>>6),o(128|63&h)):h>55295&&h<57344?(o(240|(h=65536+(1047552&h)|1023&s.charCodeAt(++i))>>18),o(128|h>>12&63),o(128|h>>6&63),o(128|63&h)):(o(224|h>>12),o(128|h>>6&63),o(128|63&h))}return ZE(r,0,a)}var df=function(s){var e=0;if(s)for(var t in s){var i=s[t].length;i>65535&&kd(9),e+=i+4}return e},fw=function(s,e,t,i,n,r,a,o){var c=i.length,h=t.extra,d=o&&o.length,u=df(h);Hi(s,e,a!=null?33639248:67324752),e+=4,a!=null&&(s[e++]=20,s[e++]=t.os),s[e]=20,e+=2,s[e++]=t.flag<<1|(r<0&&8),s[e++]=n&&8,s[e++]=255&t.compression,s[e++]=t.compression>>8;var m=new Date(t.mtime==null?Date.now():t.mtime),g=m.getFullYear()-1980;if((g<0||g>119)&&kd(10),Hi(s,e,g<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>1),e+=4,r!=-1&&(Hi(s,e,t.crc),Hi(s,e+4,r<0?-r-2:r),Hi(s,e+8,t.size)),Hi(s,e+12,c),Hi(s,e+14,u),e+=16,a!=null&&(Hi(s,e,d),Hi(s,e+6,t.attrs),Hi(s,e+10,a),e+=14),s.set(i,e),e+=c,u)for(var y in h){var E=h[y],b=E.length;Hi(s,e,+y),Hi(s,e+2,b),s.set(E,e+4),e+=4+b}return d&&(s.set(o,e),e+=d),e};function EL(s,e){e||(e={});var t={},i=[];nx(s,"",t,e);var n=0,r=0;for(var a in t){var o=t[a],c=o[0],h=o[1],d=h.level==0?0:8,u=(U=bd(a)).length,m=h.comment,g=m&&bd(m),y=g&&g.length,E=df(h.extra);u>65535&&kd(11);var b=d?wL(c,h):c,C=b.length,B=vL();B.p(c),i.push(ix(h,{size:c.length,crc:B.d(),c:b,f:U,m:g,u:u!=a.length||g&&m.length!=y,o:n,compression:d})),n+=30+u+E+C,r+=76+2*(u+E)+(y||0)+C}for(var I=new Wi(r+22),k=n,Q=r-n,G=0;G<i.length;++G){var U=i[G];fw(I,U.o,U,U.f,U.u,U.c.length);var te=30+U.f.length+df(U.extra);I.set(U.c,U.o+te),fw(I,n,U,U.f,U.u,U.c.length,U.o,U.m),n+=16+te+(U.m?U.m.length:0)}return function(ue,pe,ce,he,Me){Hi(ue,pe,101010256),Hi(ue,pe+8,ce),Hi(ue,pe+10,ce),Hi(ue,pe+12,he),Hi(ue,pe+16,Me)}(I,n,i.length,Q,k),I}class xL{async parse(e,t={}){t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},quickLookCompatible:!1,maxTextureSize:1024},t);const i={},n="model.usda";i[n]=null;let r=gw();r+=function(h){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{
		token preliminary:anchoring:type = "${h.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${h.ar.planeAnchoring.alignment}"

`}(t);const a={},o={};e.traverseVisible(h=>{if(h.isMesh){const d=h.geometry,u=h.material;if(u.isMeshStandardMaterial){const m="geometries/Geometry_"+d.id+".usda";if(!(m in i)){const g=function(y){return`
def "Geometry"
{
${function(b){const C="Geometry",B=b.attributes,I=B.position.count;return`
	def Mesh "${C}"
	{
		int[] faceVertexCounts = [${function(k){const Q=k.index!==null?k.index.count:k.attributes.position.count;return Array(Q/3).fill(3).join(", ")}(b)}]
		int[] faceVertexIndices = [${function(k){const Q=k.index,G=[];if(Q!==null)for(let U=0;U<Q.count;U++)G.push(Q.getX(U));else{const U=k.attributes.position.count;for(let te=0;te<U;te++)G.push(te)}return G.join(", ")}(b)}]
		normal3f[] normals = [${om(B.normal,I)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${om(B.position,I)}]
${function(k){let Q="";for(let U=0;U<4;U++){const te=U>0?U:"",ue=k["uv"+te];ue!==void 0&&(Q+=`
		texCoord2f[] primvars:st${te} = [${SL(ue)}] (
			interpolation = "vertex"
		)`)}const G=k.color;return G!==void 0&&(Q+=`
	color3f[] primvars:displayColor = [${om(G,G.count)}] (
		interpolation = "vertex"
		)`),Q}(B)}
		uniform token subdivisionScheme = "none"
	}
`}(y)}
}
`}(d);i[m]=function(y){let E=gw();return E+=y,bd(E)}(g)}u.uuid in a||(a[u.uuid]=u),r+=function(g,y,E){const b="Object_"+g.id,C=Aw(g.matrixWorld);return g.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",g),`def Xform "${b}" (
	prepend references = @./geometries/Geometry_${y.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${C}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${E.id}>
}

`}(h,d,u)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",h)}else h.isCamera&&(r+=function(d){const u=d.name?d.name:"Camera_"+d.id,m=Aw(d.matrixWorld);return d.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",d),d.isOrthographicCamera?`def Camera "${u}"
		{
			matrix4d xformOp:transform = ${m}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${d.near.toPrecision(Ki)}, ${d.far.toPrecision(Ki)})
			float horizontalAperture = ${(10*(Math.abs(d.left)+Math.abs(d.right))).toPrecision(Ki)}
			float verticalAperture = ${(10*(Math.abs(d.top)+Math.abs(d.bottom))).toPrecision(Ki)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${u}"
		{
			matrix4d xformOp:transform = ${m}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${d.near.toPrecision(Ki)}, ${d.far.toPrecision(Ki)})
			float focalLength = ${d.getFocalLength().toPrecision(Ki)}
			float focusDistance = ${d.focus.toPrecision(Ki)}
			float horizontalAperture = ${d.getFilmWidth().toPrecision(Ki)}
			token projection = "perspective"
			float verticalAperture = ${d.getFilmHeight().toPrecision(Ki)}
		}
	
	`}(h))}),r+=`
		}
	}
}

`,r+=function(h,d,u=!1){const m=[];for(const g in h){const y=h[g];m.push(CL(y,d,u))}return`def "Materials"
{
${m.join("")}
}

`}(a,o,t.quickLookCompatible),i[n]=bd(r),r=null;for(const h in o){let d=o[h];d.isCompressedTexture===!0&&(d=$h(d));const u=_L(d.image,d.flipY,t.maxTextureSize),m=await new Promise(g=>u.toBlob(g,"image/png",1));i[`textures/Texture_${h}.png`]=new Uint8Array(await m.arrayBuffer())}let c=0;for(const h in i){const d=i[h];c+=34+h.length;const u=63&c;if(u!==4){const m=new Uint8Array(64-u);i[h]=[d,{extra:{12345:m}}]}c=d.length}return EL(i,{level:0})}}function _L(s,e,t){if(typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&s instanceof ImageBitmap){const i=t/Math.max(s.width,s.height),n=document.createElement("canvas");n.width=s.width*Math.min(1,i),n.height=s.height*Math.min(1,i);const r=n.getContext("2d");return e===!0&&(r.translate(0,n.height),r.scale(1,-1)),r.drawImage(s,0,0,n.width,n.height),n}throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Ki=7;function gw(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`}function Aw(s){const e=s.elements;return`( ${Sh(e,0)}, ${Sh(e,4)}, ${Sh(e,8)}, ${Sh(e,12)} )`}function Sh(s,e){return`(${s[e+0]}, ${s[e+1]}, ${s[e+2]}, ${s[e+3]})`}function om(s,e){if(s===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const t=[];for(let i=0;i<s.count;i++){const n=s.getX(i),r=s.getY(i),a=s.getZ(i);t.push(`(${n.toPrecision(Ki)}, ${r.toPrecision(Ki)}, ${a.toPrecision(Ki)})`)}return t.join(", ")}function SL(s){const e=[];for(let t=0;t<s.count;t++){const i=s.getX(t),n=s.getY(t);e.push(`(${i.toPrecision(Ki)}, ${1-n.toPrecision(Ki)})`)}return e.join(", ")}function CL(s,e,t=!1){const i="			",n=[],r=[];function a(o,c,h){const d=o.source.id+"_"+o.flipY;e[d]=o;const u=o.channel>0?"st"+o.channel:"st",m={1e3:"repeat",1001:"clamp",1002:"mirror"},g=o.repeat.clone(),y=o.offset.clone(),E=o.rotation,b=Math.sin(E),C=Math.cos(E);return y.y=1-y.y-g.y,t?(y.x=y.x/g.x,y.y=y.y/g.y,y.x+=b/g.x,y.y+=C-1):(y.x+=b*g.x,y.y+=(1-C)*g.y),`
		def Shader "PrimvarReader_${c}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${u}"
			float2 outputs:result
		}

		def Shader "Transform2d_${c}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${s.id}/PrimvarReader_${c}.outputs:result>
			float inputs:rotation = ${(E*(180/Math.PI)).toFixed(Ki)}
			float2 inputs:scale = ${yw(g)}
			float2 inputs:translation = ${yw(y)}
			float2 outputs:result
		}

		def Shader "Texture_${o.id}_${c}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${d}.png@
			float2 inputs:st.connect = </Materials/Material_${s.id}/Transform2d_${c}.outputs:result>
			${h!==void 0?"float4 inputs:scale = "+function(B){return`(${B.r}, ${B.g}, ${B.b}, 1.0)`}(h):""}
			token inputs:sourceColorSpace = "${o.colorSpace===Kn?"raw":"sRGB"}"
			token inputs:wrapS = "${m[o.wrapS]}"
			token inputs:wrapT = "${m[o.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${s.transparent||s.alphaTest>0?"float outputs:a":""}
		}`}return s.side===Zi&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",s),s.map!==null?(n.push(`${i}color3f inputs:diffuseColor.connect = </Materials/Material_${s.id}/Texture_${s.map.id}_diffuse.outputs:rgb>`),s.transparent?n.push(`${i}float inputs:opacity.connect = </Materials/Material_${s.id}/Texture_${s.map.id}_diffuse.outputs:a>`):s.alphaTest>0&&(n.push(`${i}float inputs:opacity.connect = </Materials/Material_${s.id}/Texture_${s.map.id}_diffuse.outputs:a>`),n.push(`${i}float inputs:opacityThreshold = ${s.alphaTest}`)),r.push(a(s.map,"diffuse",s.color))):n.push(`${i}color3f inputs:diffuseColor = ${vw(s.color)}`),s.emissiveMap!==null?(n.push(`${i}color3f inputs:emissiveColor.connect = </Materials/Material_${s.id}/Texture_${s.emissiveMap.id}_emissive.outputs:rgb>`),r.push(a(s.emissiveMap,"emissive"))):s.emissive.getHex()>0&&n.push(`${i}color3f inputs:emissiveColor = ${vw(s.emissive)}`),s.normalMap!==null&&(n.push(`${i}normal3f inputs:normal.connect = </Materials/Material_${s.id}/Texture_${s.normalMap.id}_normal.outputs:rgb>`),r.push(a(s.normalMap,"normal"))),s.aoMap!==null&&(n.push(`${i}float inputs:occlusion.connect = </Materials/Material_${s.id}/Texture_${s.aoMap.id}_occlusion.outputs:r>`),r.push(a(s.aoMap,"occlusion"))),s.roughnessMap!==null&&s.roughness===1?(n.push(`${i}float inputs:roughness.connect = </Materials/Material_${s.id}/Texture_${s.roughnessMap.id}_roughness.outputs:g>`),r.push(a(s.roughnessMap,"roughness"))):n.push(`${i}float inputs:roughness = ${s.roughness}`),s.metalnessMap!==null&&s.metalness===1?(n.push(`${i}float inputs:metallic.connect = </Materials/Material_${s.id}/Texture_${s.metalnessMap.id}_metallic.outputs:b>`),r.push(a(s.metalnessMap,"metallic"))):n.push(`${i}float inputs:metallic = ${s.metalness}`),s.alphaMap!==null?(n.push(`${i}float inputs:opacity.connect = </Materials/Material_${s.id}/Texture_${s.alphaMap.id}_opacity.outputs:r>`),n.push(`${i}float inputs:opacityThreshold = 0.0001`),r.push(a(s.alphaMap,"opacity"))):n.push(`${i}float inputs:opacity = ${s.opacity}`),s.isMeshPhysicalMaterial&&(n.push(`${i}float inputs:clearcoat = ${s.clearcoat}`),n.push(`${i}float inputs:clearcoatRoughness = ${s.clearcoatRoughness}`),n.push(`${i}float inputs:ior = ${s.ior}`)),`
	def Material "Material_${s.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${n.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${s.id}/PreviewSurface.outputs:surface>

${r.join(`
`)}

	}
`}function vw(s){return`(${s.r}, ${s.g}, ${s.b})`}function yw(s){return`(${s.x}, ${s.y})`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ja=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};let ww=!1,bw=!1;const Ew="#model-viewer-no-ar-fallback",IL=(xw=["quick-look","scene-viewer","webxr","none"],s=>{try{const e=Gs(s),t=(e.length?e[0].terms:[]).filter(i=>i&&i.type==="ident").map(i=>i.value).filter(i=>xw.indexOf(i)>-1);return new Set(t)}catch{}return new Set});var xw;const lm="quick-look",_w="scene-viewer",Sw="webxr",xl="none",Qs=Symbol("arButtonContainer"),Cw=Symbol("enterARWithWebXR"),Iw=Symbol("openSceneViewer"),Mw=Symbol("openIOSARQuickLook"),ML=Symbol("canActivateAR"),Ch=Symbol("arMode"),cm=Symbol("arModes"),Za=Symbol("arAnchor"),Ih=Symbol("preload"),Mh=Symbol("onARButtonContainerClick"),hm=Symbol("onARStatus"),dm=Symbol("onARTracking"),um=Symbol("onARTap"),_l=Symbol("selectARMode"),pm=Symbol("triggerLoad");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mm=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const fm="auto",TL="auto",BL="eager",eo=Symbol("defaultProgressBarElement"),gm=Symbol("posterContainerElement"),to=Symbol("defaultPosterElement"),Sl=Symbol("shouldDismissPoster"),Am=Symbol("hidePoster"),Th=Symbol("modelIsRevealed"),vm=Symbol("updateProgressBar"),RL=Symbol("ariaLabelCallToAction"),ym=Symbol("onProgress");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wm=function(s,e,t,i){for(var n,r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o=s.length-1;o>=0;o--)(n=s[o])&&(a=(r<3?n(a):r>3?n(e,t,a):n(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a};const LL=Math.PI/32,DL={basis:[Fd(en(LL,"rad"))],keywords:{auto:[null]}},io=Symbol("autoRotateStartTime"),bm=Symbol("radiansPerSecond"),Tw=Symbol("syncRotationRate"),Em=Symbol("onCameraChange"),PL=(s=>{var e,t,i;class n extends s{constructor(){super(...arguments),this[e]=new Map,this[t]=a=>{a.forEach(o=>{o instanceof MutationRecord&&o.type!=="childList"||(o.addedNodes.forEach(c=>{this[sm](c)}),o.removedNodes.forEach(c=>{this[cw](c)}),this[Yi]())})},this[i]=new MutationObserver(this[nm])}connectedCallback(){super.connectedCallback();for(let o=0;o<this.children.length;++o)this[sm](this.children[o]);const{ShadyDOM:a}=self;a==null?this[wl].observe(this,{childList:!0}):this[wl]=a.observeChildren(this,this[nm])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:a}=self;a==null?this[wl].disconnect():a.unobserveChildren(this[wl])}[(e=Ur,t=nm,i=wl,ds)](a,o){super[ds](a,o);const c=this[tt],{annotationRenderer:h}=c,d=c.getCamera();c.shouldRender()&&(c.updateSurfaceHotspots(),c.updateHotspotsVisibility(d.position),h.domElement.style.display="",h.render(c,d))}updateHotspot(a){const o=this[Ur].get(a.name);o!=null&&(o.updatePosition(a.position),o.updateNormal(a.normal),o.surface=a.surface,this[Yi]())}queryHotspot(a){const o=this[Ur].get(a);if(o==null)return null;const c=or(o.position),h=or(o.normal),d=o.facingCamera,u=this[tt],m=u.getCamera(),g=new le;g.setFromMatrixPosition(o.matrixWorld),g.project(m);const y=u.width/2,E=u.height/2;g.x=g.x*y+y,g.y=-g.y*E+E;const b=or(new le(g.x,g.y,g.z));return Number.isFinite(b.x)&&Number.isFinite(b.y)?{position:c,normal:h,canvasPosition:b,facingCamera:d}:null}positionAndNormalFromPoint(a,o){const c=this[tt],h=c.getNDC(a,o),d=c.positionAndNormalFromPoint(h);if(d==null)return null;rm.copy(c.target.matrixWorld).invert();const u=or(d.position.applyMatrix4(rm)),m=or(d.normal.transformDirection(rm));let g=null;return d.uv!=null&&(g=of(d.uv)),{position:u,normal:m,uv:g}}surfaceFromPoint(a,o){const c=this[tt],h=c.getNDC(a,o);return c.surfaceFromPoint(h)}[sm](a){if(!(a instanceof HTMLElement&&a.slot.indexOf("hotspot")===0))return;let o=this[Ur].get(a.slot);o!=null?o.increment():(o=new XE({name:a.slot,position:a.dataset.position,normal:a.dataset.normal,surface:a.dataset.surface}),this[Ur].set(a.slot,o),this[tt].addHotspot(o)),this[tt].queueRender()}[cw](a){if(!(a instanceof HTMLElement))return;const o=this[Ur].get(a.slot);o&&(o.decrement()&&(this[tt].removeHotspot(o),this[Ur].delete(a.slot)),this[tt].queueRender())}}return n})((s=>{var e,t,i;class n extends s{constructor(){super(...arguments),this[e]=void 0,this[t]=null,this[i]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[qr]}get availableVariants(){return this.model?this.model[sf]():[]}get originalGltfJson(){return this[Zh]}[(e=qr,t=Jh,i=Zh,Wp)](){return()=>{this[Yi]()}}[Al](a){return a.colorSpace=di,a.wrapS=vs,a.wrapT=vs,new QE(this[Wp](),a)}async createTexture(a,o="image/png"){const{textureUtils:c}=this[zt],h=await c.loadImage(a);return h.userData.mimeType=o,this[Al](h)}async createLottieTexture(a,o=1){const{textureUtils:c}=this[zt],h=await c.loadLottie(a,o);return this[Al](h)}createVideoTexture(a){const o=document.createElement("video");o.crossOrigin=this.withCredentials?"use-credentials":"anonymous",o.src=a,o.muted=!0,o.playsInline=!0,o.loop=!0,o.play();const c=new DM(o);return this[Al](c)}createCanvasTexture(){const a=document.createElement("canvas"),o=new Nb(a);return this[Al](o)}async updated(a){if(super.updated(a),a.has("variantName")){const o=this[Kr].beginActivity("variant-update");o(.1);const c=this[qr],{variantName:h}=this;c!=null&&(await c[WE](h),this[Yi](),this.dispatchEvent(new CustomEvent("variant-applied"))),o(1)}if(a.has("orientation")||a.has("scale")){if(!this.loaded)return;const o=this[tt];o.applyTransform(),o.updateBoundingBox(),o.updateShadow(),this[zt].arRenderer.onUpdateScene(),this[Yi]()}}[hr](){super[hr]();const{currentGLTF:a}=this[tt];if(a!=null){const{correlatedSceneGraph:o}=a;o!=null&&a!==this[Jh]&&(this[qr]=new nL(o,this[Wp]()),this[Zh]=JSON.parse(JSON.stringify(o.gltf))),"variants"in a.userData&&this.requestUpdate("variantName")}this[Jh]=a}async exportScene(a){const o=this[tt];return new Promise(async(c,h)=>{const d={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(d,a),d.animations=o.animations,d.truncateDrawRange=!0;const u=o.shadow;let m=!1;u!=null&&(m=u.visible,u.visible=!1),await this[qr][$E](),new Hf().register(g=>new YB(g)).parse(o.model,g=>c(new Blob([d.binary?g:JSON.stringify(g)],{type:d.binary?"application/octet-stream":"application/json"})),()=>h("glTF export failed"),d),u!=null&&(u.visible=m)})}materialFromPoint(a,o){const c=this[qr];if(c==null)return null;const h=this[tt],d=h.getNDC(a,o),u=h.hitFromPoint(d);return u==null||u.face==null?null:c[qE](u)}}return $p([mt({type:String,attribute:"variant-name"})],n.prototype,"variantName",void 0),$p([mt({type:String,attribute:"orientation"})],n.prototype,"orientation",void 0),$p([mt({type:String,attribute:"scale"})],n.prototype,"scale",void 0),n})((s=>{var e,t,i;class n extends s{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[e]=performance.now(),this[t]=0,this[i]=a=>{this.autoRotate&&a.detail.source==="user-interaction"&&(this[io]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[Em]),this[io]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[Em]),this[io]=performance.now()}updated(a){super.updated(a),a.has("autoRotate")&&(this[io]=performance.now())}[(e=io,t=bm,Tw)](a){this[bm]=a[0]}[ds](a,o){if(super[ds](a,o),!this.autoRotate||!this[Jr]()||this[zt].isPresenting)return;const c=Math.min(o,a-this[io]-this.autoRotateDelay);c>0&&(this[tt].yaw=this.turntableRotation+this[bm]*c*.001)}get turntableRotation(){return this[tt].yaw}resetTurntableRotation(a=0){this[tt].yaw=a}}return i=Em,wm([mt({type:Boolean,attribute:"auto-rotate"})],n.prototype,"autoRotate",void 0),wm([mt({type:Number,attribute:"auto-rotate-delay"})],n.prototype,"autoRotateDelay",void 0),wm([rr({intrinsics:DL,updateHandler:Tw}),mt({type:String,attribute:"rotation-per-second"})],n.prototype,"rotationPerSecond",void 0),n})((s=>{var e,t,i;class n extends s{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this.toneMapping="auto",this.skyboxHeight="0",this[e]=null,this[t]=null,this[i]=null}updated(a){super.updated(a),a.has("shadowIntensity")&&(this[tt].setShadowIntensity(.5*this.shadowIntensity),this[Yi]()),a.has("shadowSoftness")&&(this[tt].setShadowSoftness(this.shadowSoftness),this[Yi]()),a.has("exposure")&&(this[tt].exposure=this.exposure,this[Yi]()),a.has("toneMapping")&&(this[tt].toneMapping=this.toneMapping==="commerce"||this.toneMapping==="neutral"?xf:this.toneMapping==="agx"?ub:Td,this[Yi]()),(a.has("environmentImage")||a.has("skyboxImage"))&&this[Ao]()&&this[md](),a.has("skyboxHeight")&&(this[tt].setGroundedSkybox(),this[Yi]())}hasBakedShadow(){return this[tt].bakedShadows.size>0}async[(e=Il,t=Vh,i=ih,md)](){const{skyboxImage:a,environmentImage:o}=this;this[ih]!=null&&(this[ih](),this[ih]=null);const{textureUtils:c}=this[zt];if(c==null)return;const h=this[Kr].beginActivity("environment-update");try{const{environmentMap:d,skybox:u}=await c.generateEnvironmentMapAndSkybox(eE(a),o,m=>h(ms(m,0,1)));this[Il]!==d&&(this[Il]=d,this.dispatchEvent(new CustomEvent("environment-change"))),this[Vh]=u!=null?u.name===d.name?d:u:null,this[tt].setEnvironmentAndSkybox(this[Il],this[Vh])}catch(d){if(d instanceof Error)throw this[tt].setEnvironmentAndSkybox(null,null),d}finally{h(1)}}}return Nr([mt({type:String,attribute:"environment-image"})],n.prototype,"environmentImage",void 0),Nr([mt({type:String,attribute:"skybox-image"})],n.prototype,"skyboxImage",void 0),Nr([mt({type:Number,attribute:"shadow-intensity"})],n.prototype,"shadowIntensity",void 0),Nr([mt({type:Number,attribute:"shadow-softness"})],n.prototype,"shadowSoftness",void 0),Nr([mt({type:Number})],n.prototype,"exposure",void 0),Nr([mt({type:String,attribute:"tone-mapping"})],n.prototype,"toneMapping",void 0),Nr([mt({type:String,attribute:"skybox-height"})],n.prototype,"skyboxHeight",void 0),n})((s=>{var e,t,i,n,r,a,o,c,h,d,u,m,g,y,E,b,C,B;class I extends s{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=TE,this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=lh,this.interactionPromptStyle=H0,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=fR,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this.a11y=null,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[t]=this.shadowRoot.querySelector("#prompt"),this[i]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[n]=this.shadowRoot.querySelector(".pan-target"),this[r]=0,this[a]=1/0,this[o]=!1,this[c]=!1,this[h]=fi.AUTOMATIC,this[d]=new _R(this[tt].camera,this[Yn],this[tt]),this[u]=new Qh,this[m]=!1,this[g]=!1,this[y]=!1,this[E]={},this[b]=()=>{const Q=this[$t].changeSource;this[uh]=Q,Q===fi.USER_INTERACTION&&(this[dh]=!0,this[hh]())},this[C]=()=>{this[V0](),this[Yi]();const Q=this[$t].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Q}}))},this[B]=Q=>{this[ed].classList.toggle("pointer-tumbling",Q.type==="pointer-change-start")}}get inputSensitivity(){return this[$t].inputSensitivity}set inputSensitivity(Q){this[$t].inputSensitivity=Q}getCameraOrbit(){const{theta:Q,phi:G,radius:U}=this[Pp];return{theta:Q,phi:G,radius:U,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return or(this[zt].isPresenting?this[zt].arRenderer.target:this[tt].getTarget())}getFieldOfView(){return this[$t].getFieldOfView()}getMinimumFieldOfView(){return this[$t].options.minimumFieldOfView}getMaximumFieldOfView(){return this[$t].options.maximumFieldOfView}getIdealAspect(){return this[tt].idealAspect}jumpCameraToGoal(){this[ul]=!0,this.requestUpdate(ul,!1)}resetInteractionPrompt(){this[dl]=0,this[Wa]=1/0,this[dh]=!1,this[kr]=this.interactionPrompt===lh&&this.cameraControls}zoom(Q){const G=new WheelEvent("wheel",{deltaY:-30*Q});this[Yn].dispatchEvent(G)}connectedCallback(){super.connectedCallback(),this[$t].addEventListener("user-interaction",this[$a]),this[$t].addEventListener("pointer-change-start",this[hl]),this[$t].addEventListener("pointer-change-end",this[hl])}disconnectedCallback(){super.disconnectedCallback(),this[$t].removeEventListener("user-interaction",this[$a]),this[$t].removeEventListener("pointer-change-start",this[hl]),this[$t].removeEventListener("pointer-change-end",this[hl])}updated(Q){super.updated(Q);const G=this[$t],U=this[tt];if(Q.has("cameraControls")&&(this.cameraControls?(G.enableInteraction(),this.interactionPrompt===lh&&(this[kr]=!0)):(G.disableInteraction(),this[hh]()),this[Yn].setAttribute("aria-label",this[go])),Q.has("disableZoom")&&(G.disableZoom=this.disableZoom),Q.has("disablePan")&&(G.enablePan=!this.disablePan),Q.has("disableTap")&&(G.enableTap=!this.disableTap),(Q.has("interactionPrompt")||Q.has("cameraControls")||Q.has("src"))&&(this.interactionPrompt===lh&&this.cameraControls&&!this[dh]?this[kr]=!0:this[hh]()),Q.has("interactionPromptStyle")&&(this[ch].style.opacity=this.interactionPromptStyle==mR?"1":"0"),Q.has("touchAction")){const te=this.touchAction;G.applyOptions({touchAction:te}),G.updateTouchActionStyle()}Q.has("orbitSensitivity")&&(G.orbitSensitivity=this.orbitSensitivity),Q.has("zoomSensitivity")&&(G.zoomSensitivity=this.zoomSensitivity),Q.has("panSensitivity")&&(G.panSensitivity=this.panSensitivity),Q.has("interpolationDecay")&&(G.setDamperDecayTime(this.interpolationDecay),U.setTargetDamperDecayTime(this.interpolationDecay)),Q.has("a11y")&&this[$0](),this[ul]===!0&&Promise.resolve().then(()=>{G.jumpToGoal(),U.jumpToGoal(),this[Dp](),this[ul]=!1})}async updateFraming(){const Q=this[tt],G=Q.adjustedFoV(Q.framedFoVDeg);await Q.updateFraming();const U=Q.adjustedFoV(Q.framedFoVDeg),te=this[$t].getFieldOfView()/G;this[$t].setFieldOfView(U*te),this[pl]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(Q,G,U){const te=this[Yn],ue=this[Lp];if(ue[0].style.opacity==="1")return void console.warn("interact() failed because an existing interaction is running.");const pe=new Array;pe.push({x:mo(G.x),y:mo(G.y)});const ce=[{x:pe[0].x(0),y:pe[0].y(0)}];U!=null&&(pe.push({x:mo(U.x),y:mo(U.y)}),ce.push({x:pe[1].x(0),y:pe[1].y(0)}));let he=performance.now();const{width:Me,height:De}=this[tt],Qe=this.getBoundingClientRect(),Ee=re=>{for(const[ye,me]of ce.entries()){const{style:V}=ue[ye];V.transform=`translateX(${Me*me.x}px) translateY(${De*me.y}px)`,re==="pointerdown"?V.opacity="1":re==="pointerup"&&(V.opacity="0");const z={pointerId:ye-5678,pointerType:"touch",target:te,clientX:Me*me.x+Qe.x,clientY:De*me.y+Qe.y,altKey:!0};te.dispatchEvent(new PointerEvent(re,z))}},ke=()=>{const re=this[uh];if(re!==fi.AUTOMATIC||!te.isConnected){for(const me of this[Lp])me.style.opacity="0";return Ee("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:re}})),void document.removeEventListener("visibilitychange",ee)}const ye=Math.min(1,(performance.now()-he)/Q);for(const[me,V]of ce.entries())V.x=pe[me].x(ye),V.y=pe[me].y(ye);Ee("pointermove"),ye<1?requestAnimationFrame(ke):(Ee("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:fi.AUTOMATIC}})),document.removeEventListener("visibilitychange",ee))},ee=()=>{let re=0;document.visibilityState==="hidden"?re=performance.now()-he:he=performance.now()-re};document.addEventListener("visibilitychange",ee),Ee("pointerdown"),this[uh]=fi.AUTOMATIC,requestAnimationFrame(ke)}[(e=Rp,t=ch,i=Lp,n=jh,r=dl,a=Wa,o=dh,c=kr,h=uh,d=$t,u=Pp,m=ul,g=Np,y=pl,E=Ns,j0)](Q){const G=this[$t],U=this[tt];U.framedFoVDeg=180*Q[0]/Math.PI,G.changeSource=fi.NONE,G.setFieldOfView(U.adjustedFoV(U.framedFoVDeg)),this[$a]()}[q0](Q){const G=this[$t];if(this[pl]){const{theta:U,phi:te}=this.getCameraOrbit();Q[0]=U,Q[1]=te,this[pl]=!1}G.changeSource=fi.NONE,G.setOrbit(Q[0],Q[1],Q[2]),this[$a]()}[Y0](Q){this[$t].applyOptions({minimumAzimuthalAngle:Q[0],minimumPolarAngle:Q[1],minimumRadius:Q[2]}),this.jumpCameraToGoal()}[K0](Q){this[$t].applyOptions({maximumAzimuthalAngle:Q[0],maximumPolarAngle:Q[1],maximumRadius:Q[2]}),this[W0](Q[2]),this.jumpCameraToGoal()}[J0](Q){this[$t].applyOptions({minimumFieldOfView:180*Q[0]/Math.PI}),this.jumpCameraToGoal()}[Z0](Q){const G=this[tt].adjustedFoV(180*Q[0]/Math.PI);this[$t].applyOptions({maximumFieldOfView:G}),this.jumpCameraToGoal()}[X0](Q){const[G,U,te]=Q;this[zt].arRenderer.isPresenting||this[tt].setTarget(G,U,te),this[$t].changeSource=fi.NONE,this[zt].arRenderer.updateTarget(),this[$a]()}[ds](Q,G){if(super[ds](Q,G),this[zt].isPresenting||!this[Jr]())return;const U=this[$t],te=this[tt],ue=performance.now();if(this[kr]&&this.loaded&&ue>this[Rl]+this.interactionPromptThreshold&&(this[kr]=!1,this[Wa]=ue,this[Rp].classList.add("visible")),isFinite(this[Wa])&&this.interactionPromptStyle===H0){const he=(ue-this[Wa])/5e3%1,Me=hR(he),De=dR(he);if(this[ch].style.opacity=`${De}`,Me!==this[dl]){const Qe=Me*te.width*.05,Ee=(Me-this[dl])*Math.PI/16;this[ch].style.transform=`translateX(${Qe}px)`,U.changeSource=fi.AUTOMATIC,U.adjustOrbit(Ee,0,0),this[dl]=Me}}const pe=U.update(Q,G),ce=te.updateTarget(G);(pe||ce)&&this[Dp]()}[hh](){this[kr]=!1,this[Rp].classList.remove("visible"),this[Wa]=1/0}[W0](Q){const G=Math.max(this[tt].farRadius(),Q),U=Math.abs(2*G);this[$t].updateNearFar(0,U)}[V0](){const{theta:Q,phi:G}=this[$t].getCameraSpherical(this[Pp]),U=(4+Math.floor((Q%ER+bR)/RE))%4,te=Math.floor(G/wR),ue=`${pR[te]}${uR[U]}`,pe=ue;pe in this[Ns]?this[yd](this[Ns][pe]):this[yd](`View from stage ${ue}`)}get[go](){let Q=". Use mouse, touch or arrow keys to move.";return"interaction-prompt"in this[Ns]&&(Q=`. ${this[Ns]["interaction-prompt"]}`),super[go].replace(/\.$/,"")+(this.cameraControls?Q:"")}async[jl](Q){const G=this[$t],U=this[tt],te=U.adjustedFoV(U.framedFoVDeg);super[jl](Q);const ue=U.adjustedFoV(U.framedFoVDeg)/te,pe=G.getFieldOfView()*(isFinite(ue)?ue:1);G.updateAspect(this[tt].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[$t].setFieldOfView(pe),this.jumpCameraToGoal()}[hr](){super[hr](),this[Np]?this[pl]=!0:this[Np]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(b=$a,C=Dp,B=hl,$0)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[Ns]=JSON.parse(this.a11y)}catch(Q){console.warn("Error parsing a11y JSON:",Q)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[Ns]={};else typeof this.a11y=="object"&&this.a11y!=null?this[Ns]=Object.assign({},this.a11y):this[Ns]={};this[Yn].setAttribute("aria-label",this[go])}}return _i([mt({type:Boolean,attribute:"camera-controls"})],I.prototype,"cameraControls",void 0),_i([rr({intrinsics:BE,observeEffects:!0,updateHandler:q0}),mt({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],I.prototype,"cameraOrbit",void 0),_i([rr({intrinsics:yR,observeEffects:!0,updateHandler:X0}),mt({type:String,attribute:"camera-target",hasChanged:()=>!0})],I.prototype,"cameraTarget",void 0),_i([rr({intrinsics:G0,observeEffects:!0,updateHandler:j0}),mt({type:String,attribute:"field-of-view",hasChanged:()=>!0})],I.prototype,"fieldOfView",void 0),_i([rr({intrinsics:AR,updateHandler:Y0}),mt({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],I.prototype,"minCameraOrbit",void 0),_i([rr({intrinsics:vR,updateHandler:K0}),mt({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],I.prototype,"maxCameraOrbit",void 0),_i([rr({intrinsics:gR,updateHandler:J0}),mt({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],I.prototype,"minFieldOfView",void 0),_i([rr({intrinsics:G0,updateHandler:Z0}),mt({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],I.prototype,"maxFieldOfView",void 0),_i([mt({type:Number,attribute:"interaction-prompt-threshold"})],I.prototype,"interactionPromptThreshold",void 0),_i([mt({type:String,attribute:"interaction-prompt"})],I.prototype,"interactionPrompt",void 0),_i([mt({type:String,attribute:"interaction-prompt-style"})],I.prototype,"interactionPromptStyle",void 0),_i([mt({type:Number,attribute:"orbit-sensitivity"})],I.prototype,"orbitSensitivity",void 0),_i([mt({type:Number,attribute:"zoom-sensitivity"})],I.prototype,"zoomSensitivity",void 0),_i([mt({type:Number,attribute:"pan-sensitivity"})],I.prototype,"panSensitivity",void 0),_i([mt({type:String,attribute:"touch-action"})],I.prototype,"touchAction",void 0),_i([mt({type:Boolean,attribute:"disable-zoom"})],I.prototype,"disableZoom",void 0),_i([mt({type:Boolean,attribute:"disable-pan"})],I.prototype,"disablePan",void 0),_i([mt({type:Boolean,attribute:"disable-tap"})],I.prototype,"disableTap",void 0),_i([mt({type:Number,attribute:"interpolation-decay"})],I.prototype,"interpolationDecay",void 0),_i([mt()],I.prototype,"a11y",void 0),I})((s=>{var e,t,i,n,r,a,o,c,h,d;class u extends s{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[t]=this.shadowRoot.querySelector(".ar-button"),this[i]=document.createElement("a"),this[n]=new Set,this[r]=xl,this[a]=!1,this[o]=g=>{g.preventDefault(),this.activateAR()},this[c]=({status:g})=>{g!==Xh&&this[zt].arRenderer.presentedScene!==this[tt]||(this.setAttribute("ar-status",g),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:g}})),g===Xh?this.removeAttribute("ar-tracking"):g===LE&&this.setAttribute("ar-tracking",DE))},this[h]=({status:g})=>{this.setAttribute("ar-tracking",g),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:g}}))},this[d]=g=>{g.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[Ch]!==xl}connectedCallback(){super.connectedCallback(),this[zt].arRenderer.addEventListener("status",this[hm]),this.setAttribute("ar-status",Xh),this[zt].arRenderer.addEventListener("tracking",this[dm]),this[Za].addEventListener("message",this[um])}disconnectedCallback(){super.disconnectedCallback(),this[zt].arRenderer.removeEventListener("status",this[hm]),this[zt].arRenderer.removeEventListener("tracking",this[dm]),this[Za].removeEventListener("message",this[um])}update(g){super.update(g),g.has("arScale")&&(this[tt].canScale=this.arScale!=="fixed"),g.has("arPlacement")&&(this[tt].updateShadow(),this[Yi]()),g.has("arModes")&&(this[cm]=IL(this.arModes)),(g.has("ar")||g.has("arModes")||g.has("src")||g.has("iosSrc"))&&this[_l]()}async activateAR(){switch(this[Ch]){case lm:await this[Mw]();break;case Sw:await this[Cw]();break;case _w:this[Iw]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async[(e=ML,t=Qs,i=Za,n=cm,r=Ch,a=Ih,o=Mh,c=hm,h=dm,d=um,_l)](){var g;let y=xl;if(this.ar){if(this.src!=null)for(const E of this[cm]){if(E==="webxr"&&Zb&&!ww&&await this[zt].arRenderer.supportsPresentation()){y=Sw;break}if(E==="scene-viewer"&&!bw&&(ET||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((g=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||g===void 0)&&g.includes("XR")))){y=_w;break}if(E==="quick-look"&&jv){y=lm;break}}y===xl&&this.iosSrc!=null&&jv&&(y=lm)}if(y!==xl)this[Qs].classList.add("enabled"),this[Qs].addEventListener("click",this[Mh]);else if(this[Qs].classList.contains("enabled")){this[Qs].removeEventListener("click",this[Mh]),this[Qs].classList.remove("enabled");const E=IR;this.setAttribute("ar-status",E),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:E}}))}this[Ch]=y}async[Cw](){console.log("Attempting to present in AR with WebXR..."),await this[pm]();try{this[Qs].removeEventListener("click",this[Mh]);const{arRenderer:g}=this[zt];g.placeOnWall=this.arPlacement==="wall",await g.present(this[tt],this.xrEnvironment)}catch(g){console.warn("Error while trying to present in AR with WebXR"),console.error(g),await this[zt].arRenderer.stopPresenting(),ww=!0,console.warn("Falling back to next ar-mode"),await this[_l](),this.activateAR()}finally{this[_l]()}}async[pm](){this.loaded||(this[Ih]=!0,this[Eo](),await((g,y,E=null)=>new Promise(b=>{g.addEventListener(y,function C(B){E&&!E(B)||(b(B),g.removeEventListener(y,C))})}))(this,"load"),this[Ih]=!1)}[Ao](){return super[Ao]()||this[Ih]}[Iw](){const g=self.location.toString(),y=new URL(g),E=new URL(this.src,g);E.hash&&(E.hash="");const b=new URLSearchParams(E.search);if(y.hash=Ew,b.set("mode","ar_preferred"),b.has("disable_occlusion")||b.set("disable_occlusion","true"),this.arScale==="fixed"&&b.set("resizable","false"),this.arPlacement==="wall"&&b.set("enable_vertical_placement","true"),b.has("sound")){const B=new URL(b.get("sound"),g);b.set("sound",B.toString())}if(b.has("link")){const B=new URL(b.get("link"),g);b.set("link",B.toString())}const C=`intent://arvr.google.com/scene-viewer/1.2?${b.toString()+"&file="+encodeURIComponent(E.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(y.toString())};end;`;self.addEventListener("hashchange",()=>{self.location.hash===Ew&&(bw=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[_l]())},{once:!0}),this[Za].setAttribute("href",C),console.log("Attempting to present in AR with Scene Viewer..."),this[Za].click()}async[Mw](){const g=!this.iosSrc;this[Qs].classList.remove("enabled");const y=g?await this.prepareUSDZ():this.iosSrc,E=new URL(y,self.location.toString());if(g){const B=self.location.toString(),I=new URL(B),k=new URL(this.src,I);k.hash&&(E.hash=k.hash)}this.arScale==="fixed"&&(E.hash&&(E.hash+="&"),E.hash+="allowsContentScaling=0");const b=this[Za];b.setAttribute("rel","ar");const C=document.createElement("img");b.appendChild(C),b.setAttribute("href",E.toString()),g&&b.setAttribute("download","model.usdz"),b.style.display="none",b.isConnected||this.shadowRoot.appendChild(b),console.log("Attempting to present in AR with Quick Look..."),b.click(),b.removeChild(C),g&&URL.revokeObjectURL(y),this[Qs].classList.add("enabled")}async prepareUSDZ(){const g=this[Kr].beginActivity("usdz-conversion");await this[pm]();const{model:y,shadow:E,target:b}=this[tt];if(y==null)return"";let C=!1;E!=null&&(C=E.visible,E.visible=!1),g(.2);const B=new xL;b.remove(y),y.position.copy(b.position),y.updateWorldMatrix(!1,!0);const I=await B.parse(y);y.position.set(0,0,0),b.add(y);const k=new Blob([I],{type:"model/vnd.usdz+zip"}),Q=URL.createObjectURL(k);return g(1),E!=null&&(E.visible=C),Q}}return Ja([mt({type:Boolean,attribute:"ar"})],u.prototype,"ar",void 0),Ja([mt({type:String,attribute:"ar-scale"})],u.prototype,"arScale",void 0),Ja([mt({type:String,attribute:"ar-placement"})],u.prototype,"arPlacement",void 0),Ja([mt({type:String,attribute:"ar-modes"})],u.prototype,"arModes",void 0),Ja([mt({type:String,attribute:"ios-src"})],u.prototype,"iosSrc",void 0),Ja([mt({type:Boolean,attribute:"xr-environment"})],u.prototype,"xrEnvironment",void 0),u})((s=>{var e,t,i,n,r,a,o,c;class h extends s{constructor(...u){super(...u),this.poster=null,this.reveal=fm,this.loading=TL,this[e]=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".slot.poster"),this[n]=this.shadowRoot.querySelector("#default-poster"),this[r]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[a]=this[to].getAttribute("aria-label"),this[o]=((b,C)=>{let B=null;const I=(...k)=>{B==null&&(b(...k),B=self.setTimeout(()=>B=null,C))};return I.flush=()=>{B!=null&&(self.clearTimeout(B),B=null)},I})(b=>{const C=this[eo].parentNode;requestAnimationFrame(()=>{this[eo].style.transform=`scaleX(${b})`,b===0&&(C.removeChild(this[eo]),C.appendChild(this[eo])),this[eo].classList.toggle("hide",b===1)})},100),this[c]=b=>{const C=b.detail.totalProgress,B=b.detail.reason;C===1&&(this[vm].flush(),this.loaded&&(this[Sl]||this.reveal===fm)&&this[Am]()),this[vm](C),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:C,reason:B}}))};const m=self.ModelViewerElement||{},g=m.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.5.6/";ki.setDRACODecoderLocation(g);const y=m.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";ki.setKTX2TranscoderLocation(y),m.meshoptDecoderLocation&&ki.setMeshoptDecoderLocation(m.meshoptDecoderLocation);const E=m.lottieLoaderLocation||"https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";Zn.singleton.textureUtils.lottieLoaderUrl=E}static set dracoDecoderLocation(u){ki.setDRACODecoderLocation(u)}static get dracoDecoderLocation(){return ki.getDRACODecoderLocation()}static set ktx2TranscoderLocation(u){ki.setKTX2TranscoderLocation(u)}static get ktx2TranscoderLocation(){return ki.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(u){ki.setMeshoptDecoderLocation(u)}static get meshoptDecoderLocation(){return ki.getMeshoptDecoderLocation()}static set lottieLoaderLocation(u){Zn.singleton.textureUtils.lottieLoaderUrl=u}static get lottieLoaderLocation(){return Zn.singleton.textureUtils.lottieLoaderUrl}static mapURLs(u){Zn.singleton.loader[Vr].manager.setURLModifier(u)}dismissPoster(){this.loaded?this[Am]():(this[Sl]=!0,this[Eo]())}showPoster(){const u=this[gm];if(u.classList.contains("show"))return;u.classList.add("show"),this[Yn].classList.remove("show");const m=this[to];m.removeAttribute("tabindex"),m.removeAttribute("aria-hidden");const g=this.modelIsVisible;this[Th]=!1,this[vd](g)}getDimensions(){return or(this[tt].size)}getBoundingBoxCenter(){return or(this[tt].boundingBox.getCenter(new le))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[Kr].addEventListener("progress",this[ym])}disconnectedCallback(){super.disconnectedCallback(),this[Kr].removeEventListener("progress",this[ym])}async updated(u){super.updated(u),u.has("poster")&&this.poster!=null&&(this[to].style.backgroundImage=`url(${this.poster})`),u.has("alt")&&this[to].setAttribute("aria-label",this[rf]),(u.has("reveal")||u.has("loading"))&&this[Eo]()}[(e=Th,t=Sl,i=gm,n=to,r=eo,a=RL,o=vm,c=ym,Ao)](){return!!this.src&&(this[Sl]||this.loading===BL||this.reveal===fm&&this[jr])}[Am](){this[Sl]=!1;const u=this[gm];if(!u.classList.contains("show"))return;u.classList.remove("show"),this[Yn].classList.add("show");const m=this.modelIsVisible;this[Th]=!0,this[vd](m);const g=this.getRootNode();g&&g.activeElement===this&&this[Yn].focus();const y=this[to];y.setAttribute("aria-hidden","true"),y.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[Jr](){return super[Jr]()&&this[Th]}}return mm([mt({type:String})],h.prototype,"poster",void 0),mm([mt({type:String})],h.prototype,"reveal",void 0),mm([mt({type:String})],h.prototype,"loading",void 0),h})((s=>{var e;class t extends s{constructor(...n){super(n),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[tt].subscribeMixerEvent("loop",r=>{const a=r.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:a}}))}),this[tt].subscribeMixerEvent("finished",()=>{this[Os]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[tt].animationNames:[]}get duration(){return this[tt].duration}get paused(){return this[Os]}get currentTime(){return this[tt].animationTime}set currentTime(n){this[tt].animationTime=n,this[Yi]()}get timeScale(){return this[tt].animationTimeScale}set timeScale(n){this[tt].animationTimeScale=n}pause(){this[Os]||(this[Os]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(n){this.availableAnimations.length>0&&(this[Os]=!1,this[_h](n),this.dispatchEvent(new CustomEvent("play")))}[(e=Os,hr)](){super[hr](),this[Os]=!0,this.animationName!=null&&this[_h](),this.autoplay&&this.play()}[ds](n,r){super[ds](n,r),this[Os]||!this[Jr]()&&!this[zt].isPresenting||(this[tt].updateAnimation(r/1e3),this[Yi]())}updated(n){super.updated(n),n.has("autoplay")&&this.autoplay&&this.play(),n.has("animationName")&&this[_h]()}[_h](n=dL){var r;const a=(r=n.repetitions)!==null&&r!==void 0?r:1/0,o=n.pingpong?Cf:a===1?2200:pb;this[tt].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,o,a),this[Os]&&(this[tt].updateAnimation(0),this[Yi]())}}return im([mt({type:Boolean})],t.prototype,"autoplay",void 0),im([mt({type:String,attribute:"animation-name"})],t.prototype,"animationName",void 0),im([mt({type:Number,attribute:"animation-crossfade-duration"})],t.prototype,"animationCrossfadeDuration",void 0),t})(Ll))))))));customElements.define("model-viewer",PL);(function(s,e){var t=function(n){this.$element=s(n),this.modalCount=0};t.BASE_ZINDEX=1050,t.prototype.show=function(n){var r=this,a=s(n),o=r.modalCount++;a.css("z-index",t.BASE_ZINDEX+o*20+10),e.setTimeout(function(){o>0&&s(".modal-backdrop").not(":first").addClass("hidden"),r.adjustBackdrop()})},t.prototype.hidden=function(n){this.modalCount--,this.modalCount&&(this.adjustBackdrop(),s("body").addClass("modal-open"))},t.prototype.adjustBackdrop=function(){var n=this.modalCount-1;s(".modal-backdrop:first").css("z-index",t.BASE_ZINDEX+n*20)};function i(n,r){return this.each(function(){var a=s(this),o=a.data("multi-modal-plugin");o||a.data("multi-modal-plugin",o=new t(this)),n&&o[n](r)})}s.fn.multiModal=i,s.fn.multiModal.Constructor=t,s(document).on("show.bs.modal",function(n){s(document).multiModal("show",n.target)}),s(document).on("hidden.bs.modal",function(n){s(document).multiModal("hidden",n.target)})})(jQuery,window);$(document).ready(function(){$(".noUi-handle").on("click",function(){$(this).width(50)});var s=document.getElementById("slider-range"),e=wNumb({decimals:0,thousand:",",prefix:""});noUiSlider.create(s,{start:[0,559],step:1,range:{min:[0],max:[559]},format:e,connect:!0}),s.noUiSlider.on("update",function(t,i){document.getElementById("slider-range-value1").innerHTML=t[0],document.getElementById("slider-range-value2").innerHTML=t[1],document.getElementsByName("min-value").value=e.from(t[0]),document.getElementsByName("max-value").value=e.from(t[1])})});/*! nouislider - 8.3.0 - 2016-02-14 17:37:19 */(function(s){typeof define=="function"&&define.amd?define([],s):typeof Od=="object"?Un.exports=s():window.noUiSlider=s()})(function(){function s(K){return K.filter(function(L){return this[L]?!1:this[L]=!0},{})}function e(K,L){return Math.round(K/L)*L}function t(K){var L=K.getBoundingClientRect(),oe=K.ownerDocument,ne=oe.documentElement,Le=m();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(Le.x=0),{top:L.top+Le.y-ne.clientTop,left:L.left+Le.x-ne.clientLeft}}function i(K){return typeof K=="number"&&!isNaN(K)&&isFinite(K)}function n(K){var L=Math.pow(10,7);return Number((Math.round(K*L)/L).toFixed(7))}function r(K,L,oe){h(K,L),setTimeout(function(){d(K,L)},oe)}function a(K){return Math.max(Math.min(K,100),0)}function o(K){return Array.isArray(K)?K:[K]}function c(K){var L=K.split(".");return L.length>1?L[1].length:0}function h(K,L){K.classList?K.classList.add(L):K.className+=" "+L}function d(K,L){K.classList?K.classList.remove(L):K.className=K.className.replace(new RegExp("(^|\\b)"+L.split(" ").join("|")+"(\\b|$)","gi")," ")}function u(K,L){return K.classList?K.classList.contains(L):new RegExp("\\b"+L+"\\b").test(K.className)}function m(){var K=window.pageXOffset!==void 0,L=(document.compatMode||"")==="CSS1Compat",oe=K?window.pageXOffset:L?document.documentElement.scrollLeft:document.body.scrollLeft,ne=K?window.pageYOffset:L?document.documentElement.scrollTop:document.body.scrollTop;return{x:oe,y:ne}}function g(K){K.stopPropagation()}function y(K){return function(L){return K+L}}var E=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},b="noUi-";function C(K,L){return 100/(L-K)}function B(K,L){return L*100/(K[1]-K[0])}function I(K,L){return B(K,K[0]<0?L+Math.abs(K[0]):L-K[0])}function k(K,L){return L*(K[1]-K[0])/100+K[0]}function Q(K,L){for(var oe=1;K>=L[oe];)oe+=1;return oe}function G(K,L,oe){if(oe>=K.slice(-1)[0])return 100;var ne=Q(oe,K),Le,fe,Re,Je;return Le=K[ne-1],fe=K[ne],Re=L[ne-1],Je=L[ne],Re+I([Le,fe],oe)/C(Re,Je)}function U(K,L,oe){if(oe>=100)return K.slice(-1)[0];var ne=Q(oe,L),Le,fe,Re,Je;return Le=K[ne-1],fe=K[ne],Re=L[ne-1],Je=L[ne],k([Le,fe],(oe-Re)*C(Re,Je))}function te(K,L,oe,ne){if(ne===100)return ne;var Le=Q(ne,K),fe,Re;return oe?(fe=K[Le-1],Re=K[Le],ne-fe>(Re-fe)/2?Re:fe):L[Le-1]?K[Le-1]+e(ne-K[Le-1],L[Le-1]):ne}function ue(K,L,oe){var ne;if(typeof L=="number"&&(L=[L]),Object.prototype.toString.call(L)!=="[object Array]")throw new Error("noUiSlider: 'range' contains invalid value.");if(K==="min"?ne=0:K==="max"?ne=100:ne=parseFloat(K),!i(ne)||!i(L[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");oe.xPct.push(ne),oe.xVal.push(L[0]),ne?oe.xSteps.push(isNaN(L[1])?!1:L[1]):isNaN(L[1])||(oe.xSteps[0]=L[1])}function pe(K,L,oe){if(!L)return!0;oe.xSteps[K]=B([oe.xVal[K],oe.xVal[K+1]],L)/C(oe.xPct[K],oe.xPct[K+1])}function ce(K,L,oe,ne){this.xPct=[],this.xVal=[],this.xSteps=[ne||!1],this.xNumSteps=[!1],this.snap=L,this.direction=oe;var Le,fe=[];for(Le in K)K.hasOwnProperty(Le)&&fe.push([K[Le],Le]);for(fe.length&&typeof fe[0][0]=="object"?fe.sort(function(Re,Je){return Re[0][0]-Je[0][0]}):fe.sort(function(Re,Je){return Re[0]-Je[0]}),Le=0;Le<fe.length;Le++)ue(fe[Le][1],fe[Le][0],this);for(this.xNumSteps=this.xSteps.slice(0),Le=0;Le<this.xNumSteps.length;Le++)pe(Le,this.xNumSteps[Le],this)}ce.prototype.getMargin=function(K){return this.xPct.length===2?B(this.xVal,K):!1},ce.prototype.toStepping=function(K){return K=G(this.xVal,this.xPct,K),this.direction&&(K=100-K),K},ce.prototype.fromStepping=function(K){return this.direction&&(K=100-K),n(U(this.xVal,this.xPct,K))},ce.prototype.getStep=function(K){return this.direction&&(K=100-K),K=te(this.xPct,this.xSteps,this.snap,K),this.direction&&(K=100-K),K},ce.prototype.getApplicableStep=function(K){var L=Q(K,this.xPct),oe=K===100?2:1;return[this.xNumSteps[L-2],this.xVal[L-oe],this.xNumSteps[L-oe]]},ce.prototype.convert=function(K){return this.getStep(this.toStepping(K))};var he={to:function(K){return K!==void 0&&K.toFixed(2)},from:Number};function Me(K,L){if(!i(L))throw new Error("noUiSlider: 'step' is not numeric.");K.singleStep=L}function De(K,L){if(typeof L!="object"||Array.isArray(L))throw new Error("noUiSlider: 'range' is not an object.");if(L.min===void 0||L.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(L.min===L.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");K.spectrum=new ce(L,K.snap,K.dir,K.singleStep)}function Qe(K,L){if(L=o(L),!Array.isArray(L)||!L.length||L.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");K.handles=L.length,K.start=L}function Ee(K,L){if(K.snap=L,typeof L!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.")}function ke(K,L){if(K.animate=L,typeof L!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.")}function ee(K,L){if(L==="lower"&&K.handles===1)K.connect=1;else if(L==="upper"&&K.handles===1)K.connect=2;else if(L===!0&&K.handles===2)K.connect=3;else if(L===!1)K.connect=0;else throw new Error("noUiSlider: 'connect' option doesn't match handle count.")}function re(K,L){switch(L){case"horizontal":K.ort=0;break;case"vertical":K.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function ye(K,L){if(!i(L))throw new Error("noUiSlider: 'margin' option must be numeric.");if(L!==0&&(K.margin=K.spectrum.getMargin(L),!K.margin))throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function me(K,L){if(!i(L))throw new Error("noUiSlider: 'limit' option must be numeric.");if(K.limit=K.spectrum.getMargin(L),!K.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function V(K,L){switch(L){case"ltr":K.dir=0;break;case"rtl":K.dir=1,K.connect=[0,2,1,3][K.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function z(K,L){if(typeof L!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var oe=L.indexOf("tap")>=0,ne=L.indexOf("drag")>=0,Le=L.indexOf("fixed")>=0,fe=L.indexOf("snap")>=0,Re=L.indexOf("hover")>=0;if(ne&&!K.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");K.events={tap:oe||fe,drag:ne,fixed:Le,snap:fe,hover:Re}}function J(K,L){var oe;if(L!==!1)if(L===!0)for(K.tooltips=[],oe=0;oe<K.handles;oe++)K.tooltips.push(!0);else{if(K.tooltips=o(L),K.tooltips.length!==K.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");K.tooltips.forEach(function(ne){if(typeof ne!="boolean"&&(typeof ne!="object"||typeof ne.to!="function"))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function ae(K,L){if(K.format=L,typeof L.to=="function"&&typeof L.from=="function")return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function Z(K,L){if(L!==void 0&&typeof L!="string")throw new Error("noUiSlider: 'cssPrefix' must be a string.");K.cssPrefix=L}function Se(K){var L={margin:0,limit:0,animate:!0,format:he},oe;oe={step:{r:!1,t:Me},start:{r:!0,t:Qe},connect:{r:!0,t:ee},direction:{r:!0,t:V},snap:{r:!1,t:Ee},animate:{r:!1,t:ke},range:{r:!0,t:De},orientation:{r:!1,t:re},margin:{r:!1,t:ye},limit:{r:!1,t:me},behaviour:{r:!0,t:z},format:{r:!1,t:ae},tooltips:{r:!1,t:J},cssPrefix:{r:!1,t:Z}};var ne={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(oe).forEach(function(Le){if(K[Le]===void 0&&ne[Le]===void 0){if(oe[Le].r)throw new Error("noUiSlider: '"+Le+"' is required.");return!0}oe[Le].t(L,K[Le]===void 0?ne[Le]:K[Le])}),L.pips=K.pips,L.style=L.ort?"top":"left",L}function Ie(K,L){var oe=K,ne=[-1,-1],Le,fe,Re=L.spectrum,Je=[],Xe={},st,Ve=["target","base","origin","handle","horizontal","vertical","background","connect","ltr","rtl","draggable","","state-drag","","state-tap","active","","stacking","tooltip","","pips","marker","value"].map(y(L.cssPrefix||b));function rt(se,we,N){var Y=se+we[0],ie=se+we[1];return N?(Y<0&&(ie+=Math.abs(Y)),ie>100&&(Y-=ie-100),[a(Y),a(ie)]):[Y,ie]}function Ze(se,we){se.preventDefault();var N=se.type.indexOf("touch")===0,Y=se.type.indexOf("mouse")===0,ie=se.type.indexOf("pointer")===0,xe,be,$e=se;return se.type.indexOf("MSPointer")===0&&(ie=!0),N&&(xe=se.changedTouches[0].pageX,be=se.changedTouches[0].pageY),we=we||m(),(Y||ie)&&(xe=se.clientX+we.x,be=se.clientY+we.y),$e.pageOffset=we,$e.points=[xe,be],$e.cursor=Y||ie,$e}function Et(se,we){var N=document.createElement("div"),Y=document.createElement("div"),ie=["-lower","-upper"];return se&&ie.reverse(),h(Y,Ve[3]),h(Y,Ve[3]+ie[we]),h(N,Ve[2]),N.appendChild(Y),N}function p(se,we,N){switch(se){case 1:h(we,Ve[7]),h(N[0],Ve[6]);break;case 3:h(N[1],Ve[6]);case 2:h(N[0],Ve[7]);case 0:h(we,Ve[6]);break}}function l(se,we,N){var Y,ie=[];for(Y=0;Y<se;Y+=1)ie.push(N.appendChild(Et(we,Y)));return ie}function f(se,we,N){h(N,Ve[0]),h(N,Ve[8+se]),h(N,Ve[4+we]);var Y=document.createElement("div");return h(Y,Ve[1]),N.appendChild(Y),Y}function v(se,we){if(!L.tooltips[we])return!1;var N=document.createElement("div");return N.className=Ve[18],se.firstChild.appendChild(N)}function x(){L.dir&&L.tooltips.reverse();var se=fe.map(v);L.dir&&(se.reverse(),L.tooltips.reverse()),Ae("update",function(we,N,Y){se[N]&&(se[N].innerHTML=L.tooltips[N]===!0?we[N]:L.tooltips[N].to(Y[N]))})}function w(se,we,N){if(se==="range"||se==="steps")return Re.xVal;if(se==="count"){var Y=100/(we-1),ie,xe=0;for(we=[];(ie=xe++*Y)<=100;)we.push(ie);se="positions"}if(se==="positions")return we.map(function(be){return Re.fromStepping(N?Re.getStep(be):be)});if(se==="values")return N?we.map(function(be){return Re.fromStepping(Re.getStep(Re.toStepping(be)))}):we}function T(se,we,N){function Y(ht,lt){return(ht+lt).toFixed(7)/1}var ie=Re.direction,xe={},be=Re.xVal[0],$e=Re.xVal[Re.xVal.length-1],Ye=!1,je=!1,et=0;return Re.direction=0,N=s(N.slice().sort(function(ht,lt){return ht-lt})),N[0]!==be&&(N.unshift(be),Ye=!0),N[N.length-1]!==$e&&(N.push($e),je=!0),N.forEach(function(ht,lt){var dt,ut,si,pi=ht,ei=N[lt+1],Rt,kt,ri,ai,gt,bt,Gn;if(we==="steps"&&(dt=Re.xNumSteps[lt]),dt||(dt=ei-pi),!(pi===!1||ei===void 0))for(ut=pi;ut<=ei;ut=Y(ut,dt)){for(Rt=Re.toStepping(ut),kt=Rt-et,gt=kt/se,bt=Math.round(gt),Gn=kt/bt,si=1;si<=bt;si+=1)ri=et+si*Gn,xe[ri.toFixed(5)]=["x",0];ai=N.indexOf(ut)>-1?1:we==="steps"?2:0,!lt&&Ye&&(ai=0),ut===ei&&je||(xe[Rt.toFixed(5)]=[ut,ai]),et=Rt}}),Re.direction=ie,xe}function P(se,we,N){var Y=["horizontal","vertical"][L.ort],ie=document.createElement("div"),xe="";h(ie,Ve[20]),h(ie,Ve[20]+"-"+Y);function be(je){return["-normal","-large","-sub"][je]}function $e(je,et,ht){return'class="'+et+" "+et+"-"+Y+" "+et+be(ht[1])+'" style="'+L.style+": "+je+'%"'}function Ye(je,et){Re.direction&&(je=100-je),et[1]=et[1]&&we?we(et[0],et[1]):et[1],xe+="<div "+$e(je,Ve[21],et)+"></div>",et[1]&&(xe+="<div "+$e(je,Ve[22],et)+">"+N.to(et[0])+"</div>")}return Object.keys(se).forEach(function(je){Ye(je,se[je])}),ie.innerHTML=xe,ie}function _(se){var we=se.mode,N=se.density||1,Y=se.filter||!1,ie=se.values||!1,xe=se.stepped||!1,be=w(we,ie,xe),$e=T(N,we,be),Ye=se.format||{to:Math.round};return oe.appendChild(P($e,Y,Ye))}function R(){var se=Le.getBoundingClientRect(),we="offset"+["Width","Height"][L.ort];return L.ort===0?se.width||Le[we]:se.height||Le[we]}function F(se,we,N){we!==void 0&&L.handles!==1&&(we=Math.abs(we-L.dir)),Object.keys(Xe).forEach(function(Y){var ie=Y.split(".")[0];se===ie&&Xe[Y].forEach(function(xe){xe.call(st,o(Ue()),we,o(S(Array.prototype.slice.call(Je))),N||!1,ne)})})}function S(se){return se.length===1?se[0]:L.dir?se.reverse():se}function D(se,we,N,Y){var ie=function(be){if(oe.hasAttribute("disabled")||u(oe,Ve[14])||(be=Ze(be,Y.pageOffset),se===E.start&&be.buttons!==void 0&&be.buttons>1)||Y.hover&&be.buttons)return!1;be.calcPoint=be.points[L.ort],N(be,Y)},xe=[];return se.split(" ").forEach(function(be){we.addEventListener(be,ie,!1),xe.push([be,ie])}),xe}function H(se,we){if(navigator.appVersion.indexOf("MSIE 9")===-1&&se.buttons===0&&we.buttonsProperty!==0)return X(se,we);var N=we.handles||fe,Y,ie=!1,xe=(se.calcPoint-we.start)*100/we.baseSize,be=N[0]===fe[0]?0:1,$e;if(Y=rt(xe,we.positions,N.length>1),ie=Te(N[0],Y[be],N.length===1),N.length>1){if(ie=Te(N[1],Y[be?0:1],!1)||ie,ie)for($e=0;$e<we.handles.length;$e++)F("slide",$e)}else ie&&F("slide",be)}function X(se,we){var N=Le.querySelector("."+Ve[15]),Y=we.handles[0]===fe[0]?0:1;N!==null&&d(N,Ve[15]),se.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var ie=document.documentElement;ie.noUiListeners.forEach(function(xe){ie.removeEventListener(xe[0],xe[1])}),d(oe,Ve[12]),F("set",Y),F("change",Y),we.handleNumber!==void 0&&F("end",we.handleNumber)}function q(se,we){se.type==="mouseout"&&se.target.nodeName==="HTML"&&se.relatedTarget===null&&X(se,we)}function W(se,we){var N=document.documentElement;if(we.handles.length===1&&(h(we.handles[0].children[0],Ve[15]),we.handles[0].hasAttribute("disabled")))return!1;se.preventDefault(),se.stopPropagation();var Y=D(E.move,N,H,{start:se.calcPoint,baseSize:R(),pageOffset:se.pageOffset,handles:we.handles,handleNumber:we.handleNumber,buttonsProperty:se.buttons,positions:[ne[0],ne[fe.length-1]]}),ie=D(E.end,N,X,{handles:we.handles,handleNumber:we.handleNumber}),xe=D("mouseout",N,q,{handles:we.handles,handleNumber:we.handleNumber});if(N.noUiListeners=Y.concat(ie,xe),se.cursor){document.body.style.cursor=getComputedStyle(se.target).cursor,fe.length>1&&h(oe,Ve[12]);var be=function(){return!1};document.body.noUiListener=be,document.body.addEventListener("selectstart",be,!1)}we.handleNumber!==void 0&&F("start",we.handleNumber)}function de(se){var we=se.calcPoint,N=0,Y,ie;if(se.stopPropagation(),fe.forEach(function(xe){N+=t(xe)[L.style]}),Y=we<N/2||fe.length===1?0:1,fe[Y].hasAttribute("disabled")&&(Y=Y?0:1),we-=t(Le)[L.style],ie=we*100/R(),L.events.snap||r(oe,Ve[14],300),fe[Y].hasAttribute("disabled"))return!1;Te(fe[Y],ie),F("slide",Y,!0),F("set",Y,!0),F("change",Y,!0),L.events.snap&&W(se,{handles:[fe[Y]]})}function ge(se){var we=se.calcPoint-t(Le)[L.style],N=Re.getStep(we*100/R()),Y=Re.fromStepping(N);Object.keys(Xe).forEach(function(ie){ie.split(".")[0]==="hover"&&Xe[ie].forEach(function(xe){xe.call(st,Y)})})}function ve(se){var we,N;if(!se.fixed)for(we=0;we<fe.length;we+=1)D(E.start,fe[we].children[0],W,{handles:[fe[we]],handleNumber:we});if(se.tap&&D(E.start,Le,de,{handles:fe}),se.hover)for(D(E.move,Le,ge,{hover:!0}),we=0;we<fe.length;we+=1)["mousemove MSPointerMove pointermove"].forEach(function(Y){fe[we].children[0].addEventListener(Y,g,!1)});se.drag&&(N=[Le.querySelector("."+Ve[7])],h(N[0],Ve[10]),se.fixed&&N.push(fe[N[0]===fe[0]?1:0].children[0]),N.forEach(function(Y){D(E.start,Y,W,{handles:fe})}))}function Te(se,we,N){var Y=se!==fe[0]?1:0,ie=ne[0]+L.margin,xe=ne[1]-L.margin,be=ne[0]+L.limit,$e=ne[1]-L.limit;return fe.length>1&&(we=Y?Math.max(we,ie):Math.min(we,xe)),N!==!1&&L.limit&&fe.length>1&&(we=Y?Math.min(we,be):Math.max(we,$e)),we=Re.getStep(we),we=a(parseFloat(we.toFixed(7))),we===ne[Y]?!1:(window.requestAnimationFrame?window.requestAnimationFrame(function(){se.style[L.style]=we+"%"}):se.style[L.style]=we+"%",se.previousSibling||(d(se,Ve[17]),we>50&&h(se,Ve[17])),ne[Y]=we,Je[Y]=Re.fromStepping(we),F("update",Y),!0)}function Fe(se,we){var N,Y,ie;for(L.limit&&(se+=1),N=0;N<se;N+=1)Y=N%2,ie=we[Y],ie!==null&&ie!==!1&&(typeof ie=="number"&&(ie=String(ie)),ie=L.format.from(ie),(ie===!1||isNaN(ie)||Te(fe[Y],Re.toStepping(ie),N===3-L.dir)===!1)&&F("update",Y))}function Be(se){var we,N=o(se),Y;for(L.dir&&L.handles>1&&N.reverse(),L.animate&&ne[0]!==-1&&r(oe,Ve[14],300),we=fe.length>1?3:1,N.length===1&&(we=1),Fe(we,N),Y=0;Y<fe.length;Y++)N[Y]!==null&&F("set",Y)}function Ue(){var se,we=[];for(se=0;se<L.handles;se+=1)we[se]=L.format.to(Je[se]);return S(we)}function Ne(){for(Ve.forEach(function(se){se&&d(oe,se)});oe.firstChild;)oe.removeChild(oe.firstChild);delete oe.noUiSlider}function qe(){var se=ne.map(function(we,N){var Y=Re.getApplicableStep(we),ie=c(String(Y[2])),xe=Je[N],be=we===100?null:Y[2],$e=Number((xe-Y[2]).toFixed(ie)),Ye=we===0?null:$e>=Y[1]?Y[2]:Y[0]||!1;return[Ye,be]});return S(se)}function Ae(se,we){Xe[se]=Xe[se]||[],Xe[se].push(we),se.split(".")[0]==="update"&&fe.forEach(function(N,Y){F("update",Y)})}function Pe(se){var we=se.split(".")[0],N=se.substring(we.length);Object.keys(Xe).forEach(function(Y){var ie=Y.split(".")[0],xe=Y.substring(ie.length);(!we||we===ie)&&(!N||N===xe)&&delete Xe[Y]})}function Ge(se){var we=Ue(),N,Y=Se({start:[0,0],margin:se.margin,limit:se.limit,step:se.step,range:se.range,animate:se.animate,snap:se.snap===void 0?L.snap:se.snap});for(["margin","limit","step","range","animate"].forEach(function(ie){se[ie]!==void 0&&(L[ie]=se[ie])}),Y.spectrum.direction=Re.direction,Re=Y.spectrum,ne=[-1,-1],Be(we),N=0;N<fe.length;N++)F("update",N)}if(oe.noUiSlider)throw new Error("Slider was already initialized.");return Le=f(L.dir,L.ort,oe),fe=l(L.handles,L.dir,Le),p(L.connect,oe,fe),L.pips&&_(L.pips),L.tooltips&&x(),st={destroy:Ne,steps:qe,on:Ae,off:Pe,get:Ue,set:Be,updateOptions:Ge,options:L,target:oe,pips:_},ve(L.events),st}function Oe(K,L){if(!K.nodeName)throw new Error("noUiSlider.create requires a single element.");var oe=Se(L),ne=Ie(K,oe);return ne.set(oe.start),K.noUiSlider=ne,ne}return{create:Oe}});(function(){var s=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];function e(m){return m.split("").reverse().join("")}function t(m,g){return m.substring(0,g.length)===g}function i(m,g){return m.slice(-1*g.length)===g}function n(m,g,y){if((m[g]||m[y])&&m[g]===m[y])throw new Error(g)}function r(m){return typeof m=="number"&&isFinite(m)}function a(m,g){var y=Math.pow(10,g);return(Math.round(m*y)/y).toFixed(g)}function o(m,g,y,E,b,C,B,I,k,Q,G,U){var te=U,ue,pe,ce,he="",Me="";return C&&(U=C(U)),r(U)?(m!==!1&&parseFloat(U.toFixed(m))===0&&(U=0),U<0&&(ue=!0,U=Math.abs(U)),m!==!1&&(U=a(U,m)),U=U.toString(),U.indexOf(".")!==-1?(pe=U.split("."),ce=pe[0],y&&(he=y+pe[1])):ce=U,g&&(ce=e(ce).match(/.{1,3}/g),ce=e(ce.join(e(g)))),ue&&I&&(Me+=I),E&&(Me+=E),ue&&k&&(Me+=k),Me+=ce,Me+=he,b&&(Me+=b),Q&&(Me=Q(Me,te)),Me):!1}function c(m,g,y,E,b,C,B,I,k,Q,G,U){var te,ue="";return G&&(U=G(U)),!U||typeof U!="string"||(I&&t(U,I)&&(U=U.replace(I,""),te=!0),E&&t(U,E)&&(U=U.replace(E,"")),k&&t(U,k)&&(U=U.replace(k,""),te=!0),b&&i(U,b)&&(U=U.slice(0,-1*b.length)),g&&(U=U.split(g).join("")),y&&(U=U.replace(y,".")),te&&(ue+="-"),ue+=U,ue=ue.replace(/[^0-9\.\-.]/g,""),ue==="")||(ue=Number(ue),B&&(ue=B(ue)),!r(ue))?!1:ue}function h(m){var g,y,E,b={};for(g=0;g<s.length;g+=1)if(y=s[g],E=m[y],E===void 0)y==="negative"&&!b.negativeBefore?b[y]="-":y==="mark"&&b.thousand!=="."?b[y]=".":b[y]=!1;else if(y==="decimals")if(E>=0&&E<8)b[y]=E;else throw new Error(y);else if(y==="encoder"||y==="decoder"||y==="edit"||y==="undo")if(typeof E=="function")b[y]=E;else throw new Error(y);else if(typeof E=="string")b[y]=E;else throw new Error(y);return n(b,"mark","thousand"),n(b,"prefix","negative"),n(b,"prefix","negativeBefore"),b}function d(m,g,y){var E,b=[];for(E=0;E<s.length;E+=1)b.push(m[s[E]]);return b.push(y),g.apply("",b)}function u(m){if(!(this instanceof u))return new u(m);typeof m=="object"&&(m=h(m),this.to=function(g){return d(m,o,g)},this.from=function(g){return d(m,c,g)})}window.wNumb=u})();(function(s){var e=function(){var t=function(){var i=[],n=[],r=s(".range-min").val()?parseFloat(s(".range-min").val()):0,a=s(".range-max").val()?parseFloat(s(".range-max").val()):300;s(".min-price").text(`${r}`),s(".max-price").text(`${a}`),s(".tf-check-color:checked").each(function(){i.push(s(this).val())}),s(".tf-check-size:checked").each(function(){n.push(s(this).val())});var o=0;s(".card-product").each(function(){var y;var c=s(this).data("color"),h=s(this).data("size"),d=parseFloat((y=s(this))==null?void 0:y.data("price")),u=i.length===0||i.some(E=>(c||"").split(" ").includes(E)),m=n.length===0||n.some(E=>(h||"").split(" ").includes(E)),g=d>=r&&d<=a;u&&m&&g?(s(this).show(),o++):s(this).hide()}),o>=12?s(".tf-pagination-btn").show():s(".tf-pagination-btn").hide(),o===0?s(".wrapper-control-shop").find("h4").length||s(".wrapper-control-shop").append('<h4 class="text-center">No Products</h4>'):s(".wrapper-control-shop").find("h4").remove(),o>0?s("#product-count").length===0?s(".meta-filter-shop").append(`<p id="product-count" class="text-2">${o} product(s) found</p>`):s("#product-count").text(`${o} product(s) found`):s("#product-count").remove(),i.length>0||n.length>0||r>0||a<300?s("#clear-filters").length===0&&(s(".meta-filter-shop").append('<button id="clear-filters" class="tf-btn style-3 btn-fill animate-hover-btn">Clear Filters</button>'),s("#clear-filters").on("click",function(){s(".tf-check-color, .tf-check-size").prop("checked",!1),s(".range-min").val(0),s(".range-max").val(300),s(".min-price").text("0"),s(".max-price").text("300"),s(".progress-price").css("left","0%"),s(".progress-price").css("right","0%"),t(),s(this).remove(),s("#product-count").remove()})):(s("#clear-filters").remove(),s("#product-count").remove())};s("input.tf-check-color, input.tf-check-size, .range-min, .range-max").on("change",t)};s(function(){e()})})(jQuery);(function(s,e){typeof Od=="object"&&typeof Un<"u"?Un.exports=e():typeof define=="function"&&define.amd?define(e):(s=typeof globalThis<"u"?globalThis:s||self).Swiper=e()})(globalThis,function(){function s(p){return p!==null&&typeof p=="object"&&"constructor"in p&&p.constructor===Object}function e(p,l){p===void 0&&(p={}),l===void 0&&(l={}),Object.keys(l).forEach(f=>{p[f]===void 0?p[f]=l[f]:s(l[f])&&s(p[f])&&Object.keys(l[f]).length>0&&e(p[f],l[f])})}const t={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function i(){const p=typeof document<"u"?document:{};return e(p,t),p}const n={document:t,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:p=>typeof setTimeout>"u"?(p(),null):setTimeout(p,0),cancelAnimationFrame(p){typeof setTimeout<"u"&&clearTimeout(p)}};function r(){const p=typeof window<"u"?window:{};return e(p,n),p}class a extends Array{constructor(l){typeof l=="number"?super(l):(super(...l||[]),function(f){const v=f.__proto__;Object.defineProperty(f,"__proto__",{get:()=>v,set(x){v.__proto__=x}})}(this))}}function o(p){p===void 0&&(p=[]);const l=[];return p.forEach(f=>{Array.isArray(f)?l.push(...o(f)):l.push(f)}),l}function c(p,l){return Array.prototype.filter.call(p,l)}function h(p,l){const f=r(),v=i();let x=[];if(!l&&p instanceof a)return p;if(!p)return new a(x);if(typeof p=="string"){const w=p.trim();if(w.indexOf("<")>=0&&w.indexOf(">")>=0){let T="div";w.indexOf("<li")===0&&(T="ul"),w.indexOf("<tr")===0&&(T="tbody"),w.indexOf("<td")!==0&&w.indexOf("<th")!==0||(T="tr"),w.indexOf("<tbody")===0&&(T="table"),w.indexOf("<option")===0&&(T="select");const P=v.createElement(T);P.innerHTML=w;for(let _=0;_<P.childNodes.length;_+=1)x.push(P.childNodes[_])}else x=function(T,P){if(typeof T!="string")return[T];const _=[],R=P.querySelectorAll(T);for(let F=0;F<R.length;F+=1)_.push(R[F]);return _}(p.trim(),l||v)}else if(p.nodeType||p===f||p===v)x.push(p);else if(Array.isArray(p)){if(p instanceof a)return p;x=p}return new a(function(w){const T=[];for(let P=0;P<w.length;P+=1)T.indexOf(w[P])===-1&&T.push(w[P]);return T}(x))}h.fn=a.prototype;const d={addClass:function(){for(var p=arguments.length,l=new Array(p),f=0;f<p;f++)l[f]=arguments[f];const v=o(l.map(x=>x.split(" ")));return this.forEach(x=>{x.classList.add(...v)}),this},removeClass:function(){for(var p=arguments.length,l=new Array(p),f=0;f<p;f++)l[f]=arguments[f];const v=o(l.map(x=>x.split(" ")));return this.forEach(x=>{x.classList.remove(...v)}),this},hasClass:function(){for(var p=arguments.length,l=new Array(p),f=0;f<p;f++)l[f]=arguments[f];const v=o(l.map(x=>x.split(" ")));return c(this,x=>v.filter(w=>x.classList.contains(w)).length>0).length>0},toggleClass:function(){for(var p=arguments.length,l=new Array(p),f=0;f<p;f++)l[f]=arguments[f];const v=o(l.map(x=>x.split(" ")));this.forEach(x=>{v.forEach(w=>{x.classList.toggle(w)})})},attr:function(p,l){if(arguments.length===1&&typeof p=="string")return this[0]?this[0].getAttribute(p):void 0;for(let f=0;f<this.length;f+=1)if(arguments.length===2)this[f].setAttribute(p,l);else for(const v in p)this[f][v]=p[v],this[f].setAttribute(v,p[v]);return this},removeAttr:function(p){for(let l=0;l<this.length;l+=1)this[l].removeAttribute(p);return this},transform:function(p){for(let l=0;l<this.length;l+=1)this[l].style.transform=p;return this},transition:function(p){for(let l=0;l<this.length;l+=1)this[l].style.transitionDuration=typeof p!="string"?`${p}ms`:p;return this},on:function(){for(var p=arguments.length,l=new Array(p),f=0;f<p;f++)l[f]=arguments[f];let[v,x,w,T]=l;function P(S){const D=S.target;if(!D)return;const H=S.target.dom7EventData||[];if(H.indexOf(S)<0&&H.unshift(S),h(D).is(x))w.apply(D,H);else{const X=h(D).parents();for(let q=0;q<X.length;q+=1)h(X[q]).is(x)&&w.apply(X[q],H)}}function _(S){const D=S&&S.target&&S.target.dom7EventData||[];D.indexOf(S)<0&&D.unshift(S),w.apply(this,D)}typeof l[1]=="function"&&([v,w,T]=l,x=void 0),T||(T=!1);const R=v.split(" ");let F;for(let S=0;S<this.length;S+=1){const D=this[S];if(x)for(F=0;F<R.length;F+=1){const H=R[F];D.dom7LiveListeners||(D.dom7LiveListeners={}),D.dom7LiveListeners[H]||(D.dom7LiveListeners[H]=[]),D.dom7LiveListeners[H].push({listener:w,proxyListener:P}),D.addEventListener(H,P,T)}else for(F=0;F<R.length;F+=1){const H=R[F];D.dom7Listeners||(D.dom7Listeners={}),D.dom7Listeners[H]||(D.dom7Listeners[H]=[]),D.dom7Listeners[H].push({listener:w,proxyListener:_}),D.addEventListener(H,_,T)}}return this},off:function(){for(var p=arguments.length,l=new Array(p),f=0;f<p;f++)l[f]=arguments[f];let[v,x,w,T]=l;typeof l[1]=="function"&&([v,w,T]=l,x=void 0),T||(T=!1);const P=v.split(" ");for(let _=0;_<P.length;_+=1){const R=P[_];for(let F=0;F<this.length;F+=1){const S=this[F];let D;if(!x&&S.dom7Listeners?D=S.dom7Listeners[R]:x&&S.dom7LiveListeners&&(D=S.dom7LiveListeners[R]),D&&D.length)for(let H=D.length-1;H>=0;H-=1){const X=D[H];w&&X.listener===w||w&&X.listener&&X.listener.dom7proxy&&X.listener.dom7proxy===w?(S.removeEventListener(R,X.proxyListener,T),D.splice(H,1)):w||(S.removeEventListener(R,X.proxyListener,T),D.splice(H,1))}}}return this},trigger:function(){const p=r();for(var l=arguments.length,f=new Array(l),v=0;v<l;v++)f[v]=arguments[v];const x=f[0].split(" "),w=f[1];for(let T=0;T<x.length;T+=1){const P=x[T];for(let _=0;_<this.length;_+=1){const R=this[_];if(p.CustomEvent){const F=new p.CustomEvent(P,{detail:w,bubbles:!0,cancelable:!0});R.dom7EventData=f.filter((S,D)=>D>0),R.dispatchEvent(F),R.dom7EventData=[],delete R.dom7EventData}}}return this},transitionEnd:function(p){const l=this;return p&&l.on("transitionend",function f(v){v.target===this&&(p.call(this,v),l.off("transitionend",f))}),this},outerWidth:function(p){if(this.length>0){if(p){const l=this.styles();return this[0].offsetWidth+parseFloat(l.getPropertyValue("margin-right"))+parseFloat(l.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(p){if(this.length>0){if(p){const l=this.styles();return this[0].offsetHeight+parseFloat(l.getPropertyValue("margin-top"))+parseFloat(l.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const p=r();return this[0]?p.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const p=r(),l=i(),f=this[0],v=f.getBoundingClientRect(),x=l.body,w=f.clientTop||x.clientTop||0,T=f.clientLeft||x.clientLeft||0,P=f===p?p.scrollY:f.scrollTop,_=f===p?p.scrollX:f.scrollLeft;return{top:v.top+P-w,left:v.left+_-T}}return null},css:function(p,l){const f=r();let v;if(arguments.length===1){if(typeof p!="string"){for(v=0;v<this.length;v+=1)for(const x in p)this[v].style[x]=p[x];return this}if(this[0])return f.getComputedStyle(this[0],null).getPropertyValue(p)}if(arguments.length===2&&typeof p=="string"){for(v=0;v<this.length;v+=1)this[v].style[p]=l;return this}return this},each:function(p){return p?(this.forEach((l,f)=>{p.apply(l,[l,f])}),this):this},html:function(p){if(p===void 0)return this[0]?this[0].innerHTML:null;for(let l=0;l<this.length;l+=1)this[l].innerHTML=p;return this},text:function(p){if(p===void 0)return this[0]?this[0].textContent.trim():null;for(let l=0;l<this.length;l+=1)this[l].textContent=p;return this},is:function(p){const l=r(),f=i(),v=this[0];let x,w;if(!v||p===void 0)return!1;if(typeof p=="string"){if(v.matches)return v.matches(p);if(v.webkitMatchesSelector)return v.webkitMatchesSelector(p);if(v.msMatchesSelector)return v.msMatchesSelector(p);for(x=h(p),w=0;w<x.length;w+=1)if(x[w]===v)return!0;return!1}if(p===f)return v===f;if(p===l)return v===l;if(p.nodeType||p instanceof a){for(x=p.nodeType?[p]:p,w=0;w<x.length;w+=1)if(x[w]===v)return!0;return!1}return!1},index:function(){let p,l=this[0];if(l){for(p=0;(l=l.previousSibling)!==null;)l.nodeType===1&&(p+=1);return p}},eq:function(p){if(p===void 0)return this;const l=this.length;if(p>l-1)return h([]);if(p<0){const f=l+p;return h(f<0?[]:[this[f]])}return h([this[p]])},append:function(){let p;const l=i();for(let f=0;f<arguments.length;f+=1){p=f<0||arguments.length<=f?void 0:arguments[f];for(let v=0;v<this.length;v+=1)if(typeof p=="string"){const x=l.createElement("div");for(x.innerHTML=p;x.firstChild;)this[v].appendChild(x.firstChild)}else if(p instanceof a)for(let x=0;x<p.length;x+=1)this[v].appendChild(p[x]);else this[v].appendChild(p)}return this},prepend:function(p){const l=i();let f,v;for(f=0;f<this.length;f+=1)if(typeof p=="string"){const x=l.createElement("div");for(x.innerHTML=p,v=x.childNodes.length-1;v>=0;v-=1)this[f].insertBefore(x.childNodes[v],this[f].childNodes[0])}else if(p instanceof a)for(v=0;v<p.length;v+=1)this[f].insertBefore(p[v],this[f].childNodes[0]);else this[f].insertBefore(p,this[f].childNodes[0]);return this},next:function(p){return this.length>0?p?this[0].nextElementSibling&&h(this[0].nextElementSibling).is(p)?h([this[0].nextElementSibling]):h([]):this[0].nextElementSibling?h([this[0].nextElementSibling]):h([]):h([])},nextAll:function(p){const l=[];let f=this[0];if(!f)return h([]);for(;f.nextElementSibling;){const v=f.nextElementSibling;p?h(v).is(p)&&l.push(v):l.push(v),f=v}return h(l)},prev:function(p){if(this.length>0){const l=this[0];return p?l.previousElementSibling&&h(l.previousElementSibling).is(p)?h([l.previousElementSibling]):h([]):l.previousElementSibling?h([l.previousElementSibling]):h([])}return h([])},prevAll:function(p){const l=[];let f=this[0];if(!f)return h([]);for(;f.previousElementSibling;){const v=f.previousElementSibling;p?h(v).is(p)&&l.push(v):l.push(v),f=v}return h(l)},parent:function(p){const l=[];for(let f=0;f<this.length;f+=1)this[f].parentNode!==null&&(p?h(this[f].parentNode).is(p)&&l.push(this[f].parentNode):l.push(this[f].parentNode));return h(l)},parents:function(p){const l=[];for(let f=0;f<this.length;f+=1){let v=this[f].parentNode;for(;v;)p?h(v).is(p)&&l.push(v):l.push(v),v=v.parentNode}return h(l)},closest:function(p){let l=this;return p===void 0?h([]):(l.is(p)||(l=l.parents(p).eq(0)),l)},find:function(p){const l=[];for(let f=0;f<this.length;f+=1){const v=this[f].querySelectorAll(p);for(let x=0;x<v.length;x+=1)l.push(v[x])}return h(l)},children:function(p){const l=[];for(let f=0;f<this.length;f+=1){const v=this[f].children;for(let x=0;x<v.length;x+=1)p&&!h(v[x]).is(p)||l.push(v[x])}return h(l)},filter:function(p){return h(c(this,p))},remove:function(){for(let p=0;p<this.length;p+=1)this[p].parentNode&&this[p].parentNode.removeChild(this[p]);return this}};function u(p,l){return l===void 0&&(l=0),setTimeout(p,l)}function m(){return Date.now()}function g(p,l){l===void 0&&(l="x");const f=r();let v,x,w;const T=function(P){const _=r();let R;return _.getComputedStyle&&(R=_.getComputedStyle(P,null)),!R&&P.currentStyle&&(R=P.currentStyle),R||(R=P.style),R}(p);return f.WebKitCSSMatrix?(x=T.transform||T.webkitTransform,x.split(",").length>6&&(x=x.split(", ").map(P=>P.replace(",",".")).join(", ")),w=new f.WebKitCSSMatrix(x==="none"?"":x)):(w=T.MozTransform||T.OTransform||T.MsTransform||T.msTransform||T.transform||T.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),v=w.toString().split(",")),l==="x"&&(x=f.WebKitCSSMatrix?w.m41:v.length===16?parseFloat(v[12]):parseFloat(v[4])),l==="y"&&(x=f.WebKitCSSMatrix?w.m42:v.length===16?parseFloat(v[13]):parseFloat(v[5])),x||0}function y(p){return typeof p=="object"&&p!==null&&p.constructor&&Object.prototype.toString.call(p).slice(8,-1)==="Object"}function E(p){return typeof window<"u"&&window.HTMLElement!==void 0?p instanceof HTMLElement:p&&(p.nodeType===1||p.nodeType===11)}function b(){const p=Object(arguments.length<=0?void 0:arguments[0]),l=["__proto__","constructor","prototype"];for(let f=1;f<arguments.length;f+=1){const v=f<0||arguments.length<=f?void 0:arguments[f];if(v!=null&&!E(v)){const x=Object.keys(Object(v)).filter(w=>l.indexOf(w)<0);for(let w=0,T=x.length;w<T;w+=1){const P=x[w],_=Object.getOwnPropertyDescriptor(v,P);_!==void 0&&_.enumerable&&(y(p[P])&&y(v[P])?v[P].__swiper__?p[P]=v[P]:b(p[P],v[P]):!y(p[P])&&y(v[P])?(p[P]={},v[P].__swiper__?p[P]=v[P]:b(p[P],v[P])):p[P]=v[P])}}}return p}function C(p,l,f){p.style.setProperty(l,f)}function B(p){let{swiper:l,targetPosition:f,side:v}=p;const x=r(),w=-l.translate;let T,P=null;const _=l.params.speed;l.wrapperEl.style.scrollSnapType="none",x.cancelAnimationFrame(l.cssModeFrameID);const R=f>w?"next":"prev",F=(D,H)=>R==="next"&&D>=H||R==="prev"&&D<=H,S=()=>{T=new Date().getTime(),P===null&&(P=T);const D=Math.max(Math.min((T-P)/_,1),0),H=.5-Math.cos(D*Math.PI)/2;let X=w+H*(f-w);if(F(X,f)&&(X=f),l.wrapperEl.scrollTo({[v]:X}),F(X,f))return l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.scrollSnapType="",setTimeout(()=>{l.wrapperEl.style.overflow="",l.wrapperEl.scrollTo({[v]:X})}),void x.cancelAnimationFrame(l.cssModeFrameID);l.cssModeFrameID=x.requestAnimationFrame(S)};S()}let I,k,Q;function G(){return I||(I=function(){const p=r(),l=i();return{smoothScroll:l.documentElement&&"scrollBehavior"in l.documentElement.style,touch:!!("ontouchstart"in p||p.DocumentTouch&&l instanceof p.DocumentTouch),passiveListener:function(){let f=!1;try{const v=Object.defineProperty({},"passive",{get(){f=!0}});p.addEventListener("testPassiveListener",null,v)}catch{}return f}(),gestures:"ongesturestart"in p}}()),I}function U(p){return p===void 0&&(p={}),k||(k=function(l){let{userAgent:f}=l===void 0?{}:l;const v=G(),x=r(),w=x.navigator.platform,T=f||x.navigator.userAgent,P={ios:!1,android:!1},_=x.screen.width,R=x.screen.height,F=T.match(/(Android);?[\s\/]+([\d.]+)?/);let S=T.match(/(iPad).*OS\s([\d_]+)/);const D=T.match(/(iPod)(.*OS\s([\d_]+))?/),H=!S&&T.match(/(iPhone\sOS|iOS)\s([\d_]+)/),X=w==="Win32";let q=w==="MacIntel";return!S&&q&&v.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${_}x${R}`)>=0&&(S=T.match(/(Version)\/([\d.]+)/),S||(S=[0,1,"13_0_0"]),q=!1),F&&!X&&(P.os="android",P.android=!0),(S||H||D)&&(P.os="ios",P.ios=!0),P}(p)),k}function te(){return Q||(Q=function(){const p=r();return{isSafari:function(){const l=p.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(p.navigator.userAgent)}}()),Q}Object.keys(d).forEach(p=>{Object.defineProperty(h.fn,p,{value:d[p],writable:!0})});var ue={on(p,l,f){const v=this;if(!v.eventsListeners||v.destroyed||typeof l!="function")return v;const x=f?"unshift":"push";return p.split(" ").forEach(w=>{v.eventsListeners[w]||(v.eventsListeners[w]=[]),v.eventsListeners[w][x](l)}),v},once(p,l,f){const v=this;if(!v.eventsListeners||v.destroyed||typeof l!="function")return v;function x(){v.off(p,x),x.__emitterProxy&&delete x.__emitterProxy;for(var w=arguments.length,T=new Array(w),P=0;P<w;P++)T[P]=arguments[P];l.apply(v,T)}return x.__emitterProxy=l,v.on(p,x,f)},onAny(p,l){const f=this;if(!f.eventsListeners||f.destroyed||typeof p!="function")return f;const v=l?"unshift":"push";return f.eventsAnyListeners.indexOf(p)<0&&f.eventsAnyListeners[v](p),f},offAny(p){const l=this;if(!l.eventsListeners||l.destroyed||!l.eventsAnyListeners)return l;const f=l.eventsAnyListeners.indexOf(p);return f>=0&&l.eventsAnyListeners.splice(f,1),l},off(p,l){const f=this;return!f.eventsListeners||f.destroyed||f.eventsListeners&&p.split(" ").forEach(v=>{l===void 0?f.eventsListeners[v]=[]:f.eventsListeners[v]&&f.eventsListeners[v].forEach((x,w)=>{(x===l||x.__emitterProxy&&x.__emitterProxy===l)&&f.eventsListeners[v].splice(w,1)})}),f},emit(){const p=this;if(!p.eventsListeners||p.destroyed||!p.eventsListeners)return p;let l,f,v;for(var x=arguments.length,w=new Array(x),T=0;T<x;T++)w[T]=arguments[T];return typeof w[0]=="string"||Array.isArray(w[0])?(l=w[0],f=w.slice(1,w.length),v=p):(l=w[0].events,f=w[0].data,v=w[0].context||p),f.unshift(v),(Array.isArray(l)?l:l.split(" ")).forEach(P=>{p.eventsAnyListeners&&p.eventsAnyListeners.length&&p.eventsAnyListeners.forEach(_=>{_.apply(v,[P,...f])}),p.eventsListeners&&p.eventsListeners[P]&&p.eventsListeners[P].forEach(_=>{_.apply(v,f)})}),p}},pe={updateSize:function(){const p=this;let l,f;const v=p.$el;l=p.params.width!==void 0&&p.params.width!==null?p.params.width:v[0].clientWidth,f=p.params.height!==void 0&&p.params.height!==null?p.params.height:v[0].clientHeight,l===0&&p.isHorizontal()||f===0&&p.isVertical()||(l=l-parseInt(v.css("padding-left")||0,10)-parseInt(v.css("padding-right")||0,10),f=f-parseInt(v.css("padding-top")||0,10)-parseInt(v.css("padding-bottom")||0,10),Number.isNaN(l)&&(l=0),Number.isNaN(f)&&(f=0),Object.assign(p,{width:l,height:f,size:p.isHorizontal()?l:f}))},updateSlides:function(){const p=this;function l(Ae){return p.isHorizontal()?Ae:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Ae]}function f(Ae,Pe){return parseFloat(Ae.getPropertyValue(l(Pe))||0)}const v=p.params,{$wrapperEl:x,size:w,rtlTranslate:T,wrongRTL:P}=p,_=p.virtual&&v.virtual.enabled,R=_?p.virtual.slides.length:p.slides.length,F=x.children(`.${p.params.slideClass}`),S=_?p.virtual.slides.length:F.length;let D=[];const H=[],X=[];let q=v.slidesOffsetBefore;typeof q=="function"&&(q=v.slidesOffsetBefore.call(p));let W=v.slidesOffsetAfter;typeof W=="function"&&(W=v.slidesOffsetAfter.call(p));const de=p.snapGrid.length,ge=p.slidesGrid.length;let ve=v.spaceBetween,Te=-q,Fe=0,Be=0;if(w===void 0)return;typeof ve=="string"&&ve.indexOf("%")>=0&&(ve=parseFloat(ve.replace("%",""))/100*w),p.virtualSize=-ve,T?F.css({marginLeft:"",marginBottom:"",marginTop:""}):F.css({marginRight:"",marginBottom:"",marginTop:""}),v.centeredSlides&&v.cssMode&&(C(p.wrapperEl,"--swiper-centered-offset-before",""),C(p.wrapperEl,"--swiper-centered-offset-after",""));const Ue=v.grid&&v.grid.rows>1&&p.grid;let Ne;Ue&&p.grid.initSlides(S);const qe=v.slidesPerView==="auto"&&v.breakpoints&&Object.keys(v.breakpoints).filter(Ae=>v.breakpoints[Ae].slidesPerView!==void 0).length>0;for(let Ae=0;Ae<S;Ae+=1){Ne=0;const Pe=F.eq(Ae);if(Ue&&p.grid.updateSlide(Ae,Pe,S,l),Pe.css("display")!=="none"){if(v.slidesPerView==="auto"){qe&&(F[Ae].style[l("width")]="");const Ge=getComputedStyle(Pe[0]),se=Pe[0].style.transform,we=Pe[0].style.webkitTransform;if(se&&(Pe[0].style.transform="none"),we&&(Pe[0].style.webkitTransform="none"),v.roundLengths)Ne=p.isHorizontal()?Pe.outerWidth(!0):Pe.outerHeight(!0);else{const N=f(Ge,"width"),Y=f(Ge,"padding-left"),ie=f(Ge,"padding-right"),xe=f(Ge,"margin-left"),be=f(Ge,"margin-right"),$e=Ge.getPropertyValue("box-sizing");if($e&&$e==="border-box")Ne=N+xe+be;else{const{clientWidth:Ye,offsetWidth:je}=Pe[0];Ne=N+Y+ie+xe+be+(je-Ye)}}se&&(Pe[0].style.transform=se),we&&(Pe[0].style.webkitTransform=we),v.roundLengths&&(Ne=Math.floor(Ne))}else Ne=(w-(v.slidesPerView-1)*ve)/v.slidesPerView,v.roundLengths&&(Ne=Math.floor(Ne)),F[Ae]&&(F[Ae].style[l("width")]=`${Ne}px`);F[Ae]&&(F[Ae].swiperSlideSize=Ne),X.push(Ne),v.centeredSlides?(Te=Te+Ne/2+Fe/2+ve,Fe===0&&Ae!==0&&(Te=Te-w/2-ve),Ae===0&&(Te=Te-w/2-ve),Math.abs(Te)<.001&&(Te=0),v.roundLengths&&(Te=Math.floor(Te)),Be%v.slidesPerGroup==0&&D.push(Te),H.push(Te)):(v.roundLengths&&(Te=Math.floor(Te)),(Be-Math.min(p.params.slidesPerGroupSkip,Be))%p.params.slidesPerGroup==0&&D.push(Te),H.push(Te),Te=Te+Ne+ve),p.virtualSize+=Ne+ve,Fe=Ne,Be+=1}}if(p.virtualSize=Math.max(p.virtualSize,w)+W,T&&P&&(v.effect==="slide"||v.effect==="coverflow")&&x.css({width:`${p.virtualSize+v.spaceBetween}px`}),v.setWrapperSize&&x.css({[l("width")]:`${p.virtualSize+v.spaceBetween}px`}),Ue&&p.grid.updateWrapperSize(Ne,D,l),!v.centeredSlides){const Ae=[];for(let Pe=0;Pe<D.length;Pe+=1){let Ge=D[Pe];v.roundLengths&&(Ge=Math.floor(Ge)),D[Pe]<=p.virtualSize-w&&Ae.push(Ge)}D=Ae,Math.floor(p.virtualSize-w)-Math.floor(D[D.length-1])>1&&D.push(p.virtualSize-w)}if(D.length===0&&(D=[0]),v.spaceBetween!==0){const Ae=p.isHorizontal()&&T?"marginLeft":l("marginRight");F.filter((Pe,Ge)=>!v.cssMode||Ge!==F.length-1).css({[Ae]:`${ve}px`})}if(v.centeredSlides&&v.centeredSlidesBounds){let Ae=0;X.forEach(Ge=>{Ae+=Ge+(v.spaceBetween?v.spaceBetween:0)}),Ae-=v.spaceBetween;const Pe=Ae-w;D=D.map(Ge=>Ge<0?-q:Ge>Pe?Pe+W:Ge)}if(v.centerInsufficientSlides){let Ae=0;if(X.forEach(Pe=>{Ae+=Pe+(v.spaceBetween?v.spaceBetween:0)}),Ae-=v.spaceBetween,Ae<w){const Pe=(w-Ae)/2;D.forEach((Ge,se)=>{D[se]=Ge-Pe}),H.forEach((Ge,se)=>{H[se]=Ge+Pe})}}if(Object.assign(p,{slides:F,snapGrid:D,slidesGrid:H,slidesSizesGrid:X}),v.centeredSlides&&v.cssMode&&!v.centeredSlidesBounds){C(p.wrapperEl,"--swiper-centered-offset-before",-D[0]+"px"),C(p.wrapperEl,"--swiper-centered-offset-after",p.size/2-X[X.length-1]/2+"px");const Ae=-p.snapGrid[0],Pe=-p.slidesGrid[0];p.snapGrid=p.snapGrid.map(Ge=>Ge+Ae),p.slidesGrid=p.slidesGrid.map(Ge=>Ge+Pe)}if(S!==R&&p.emit("slidesLengthChange"),D.length!==de&&(p.params.watchOverflow&&p.checkOverflow(),p.emit("snapGridLengthChange")),H.length!==ge&&p.emit("slidesGridLengthChange"),v.watchSlidesProgress&&p.updateSlidesOffset(),!(_||v.cssMode||v.effect!=="slide"&&v.effect!=="fade")){const Ae=`${v.containerModifierClass}backface-hidden`,Pe=p.$el.hasClass(Ae);S<=v.maxBackfaceHiddenSlides?Pe||p.$el.addClass(Ae):Pe&&p.$el.removeClass(Ae)}},updateAutoHeight:function(p){const l=this,f=[],v=l.virtual&&l.params.virtual.enabled;let x,w=0;typeof p=="number"?l.setTransition(p):p===!0&&l.setTransition(l.params.speed);const T=P=>v?l.slides.filter(_=>parseInt(_.getAttribute("data-swiper-slide-index"),10)===P)[0]:l.slides.eq(P)[0];if(l.params.slidesPerView!=="auto"&&l.params.slidesPerView>1)if(l.params.centeredSlides)(l.visibleSlides||h([])).each(P=>{f.push(P)});else for(x=0;x<Math.ceil(l.params.slidesPerView);x+=1){const P=l.activeIndex+x;if(P>l.slides.length&&!v)break;f.push(T(P))}else f.push(T(l.activeIndex));for(x=0;x<f.length;x+=1)if(f[x]!==void 0){const P=f[x].offsetHeight;w=P>w?P:w}(w||w===0)&&l.$wrapperEl.css("height",`${w}px`)},updateSlidesOffset:function(){const p=this,l=p.slides;for(let f=0;f<l.length;f+=1)l[f].swiperSlideOffset=p.isHorizontal()?l[f].offsetLeft:l[f].offsetTop},updateSlidesProgress:function(p){p===void 0&&(p=this&&this.translate||0);const l=this,f=l.params,{slides:v,rtlTranslate:x,snapGrid:w}=l;if(v.length===0)return;v[0].swiperSlideOffset===void 0&&l.updateSlidesOffset();let T=-p;x&&(T=p),v.removeClass(f.slideVisibleClass),l.visibleSlidesIndexes=[],l.visibleSlides=[];for(let P=0;P<v.length;P+=1){const _=v[P];let R=_.swiperSlideOffset;f.cssMode&&f.centeredSlides&&(R-=v[0].swiperSlideOffset);const F=(T+(f.centeredSlides?l.minTranslate():0)-R)/(_.swiperSlideSize+f.spaceBetween),S=(T-w[0]+(f.centeredSlides?l.minTranslate():0)-R)/(_.swiperSlideSize+f.spaceBetween),D=-(T-R),H=D+l.slidesSizesGrid[P];(D>=0&&D<l.size-1||H>1&&H<=l.size||D<=0&&H>=l.size)&&(l.visibleSlides.push(_),l.visibleSlidesIndexes.push(P),v.eq(P).addClass(f.slideVisibleClass)),_.progress=x?-F:F,_.originalProgress=x?-S:S}l.visibleSlides=h(l.visibleSlides)},updateProgress:function(p){const l=this;if(p===void 0){const R=l.rtlTranslate?-1:1;p=l&&l.translate&&l.translate*R||0}const f=l.params,v=l.maxTranslate()-l.minTranslate();let{progress:x,isBeginning:w,isEnd:T}=l;const P=w,_=T;v===0?(x=0,w=!0,T=!0):(x=(p-l.minTranslate())/v,w=x<=0,T=x>=1),Object.assign(l,{progress:x,isBeginning:w,isEnd:T}),(f.watchSlidesProgress||f.centeredSlides&&f.autoHeight)&&l.updateSlidesProgress(p),w&&!P&&l.emit("reachBeginning toEdge"),T&&!_&&l.emit("reachEnd toEdge"),(P&&!w||_&&!T)&&l.emit("fromEdge"),l.emit("progress",x)},updateSlidesClasses:function(){const p=this,{slides:l,params:f,$wrapperEl:v,activeIndex:x,realIndex:w}=p,T=p.virtual&&f.virtual.enabled;let P;l.removeClass(`${f.slideActiveClass} ${f.slideNextClass} ${f.slidePrevClass} ${f.slideDuplicateActiveClass} ${f.slideDuplicateNextClass} ${f.slideDuplicatePrevClass}`),P=T?p.$wrapperEl.find(`.${f.slideClass}[data-swiper-slide-index="${x}"]`):l.eq(x),P.addClass(f.slideActiveClass),f.loop&&(P.hasClass(f.slideDuplicateClass)?v.children(`.${f.slideClass}:not(.${f.slideDuplicateClass})[data-swiper-slide-index="${w}"]`).addClass(f.slideDuplicateActiveClass):v.children(`.${f.slideClass}.${f.slideDuplicateClass}[data-swiper-slide-index="${w}"]`).addClass(f.slideDuplicateActiveClass));let _=P.nextAll(`.${f.slideClass}`).eq(0).addClass(f.slideNextClass);f.loop&&_.length===0&&(_=l.eq(0),_.addClass(f.slideNextClass));let R=P.prevAll(`.${f.slideClass}`).eq(0).addClass(f.slidePrevClass);f.loop&&R.length===0&&(R=l.eq(-1),R.addClass(f.slidePrevClass)),f.loop&&(_.hasClass(f.slideDuplicateClass)?v.children(`.${f.slideClass}:not(.${f.slideDuplicateClass})[data-swiper-slide-index="${_.attr("data-swiper-slide-index")}"]`).addClass(f.slideDuplicateNextClass):v.children(`.${f.slideClass}.${f.slideDuplicateClass}[data-swiper-slide-index="${_.attr("data-swiper-slide-index")}"]`).addClass(f.slideDuplicateNextClass),R.hasClass(f.slideDuplicateClass)?v.children(`.${f.slideClass}:not(.${f.slideDuplicateClass})[data-swiper-slide-index="${R.attr("data-swiper-slide-index")}"]`).addClass(f.slideDuplicatePrevClass):v.children(`.${f.slideClass}.${f.slideDuplicateClass}[data-swiper-slide-index="${R.attr("data-swiper-slide-index")}"]`).addClass(f.slideDuplicatePrevClass)),p.emitSlidesClasses()},updateActiveIndex:function(p){const l=this,f=l.rtlTranslate?l.translate:-l.translate,{slidesGrid:v,snapGrid:x,params:w,activeIndex:T,realIndex:P,snapIndex:_}=l;let R,F=p;if(F===void 0){for(let D=0;D<v.length;D+=1)v[D+1]!==void 0?f>=v[D]&&f<v[D+1]-(v[D+1]-v[D])/2?F=D:f>=v[D]&&f<v[D+1]&&(F=D+1):f>=v[D]&&(F=D);w.normalizeSlideIndex&&(F<0||F===void 0)&&(F=0)}if(x.indexOf(f)>=0)R=x.indexOf(f);else{const D=Math.min(w.slidesPerGroupSkip,F);R=D+Math.floor((F-D)/w.slidesPerGroup)}if(R>=x.length&&(R=x.length-1),F===T)return void(R!==_&&(l.snapIndex=R,l.emit("snapIndexChange")));const S=parseInt(l.slides.eq(F).attr("data-swiper-slide-index")||F,10);Object.assign(l,{snapIndex:R,realIndex:S,previousIndex:T,activeIndex:F}),l.emit("activeIndexChange"),l.emit("snapIndexChange"),P!==S&&l.emit("realIndexChange"),(l.initialized||l.params.runCallbacksOnInit)&&l.emit("slideChange")},updateClickedSlide:function(p){const l=this,f=l.params,v=h(p).closest(`.${f.slideClass}`)[0];let x,w=!1;if(v){for(let T=0;T<l.slides.length;T+=1)if(l.slides[T]===v){w=!0,x=T;break}}if(!v||!w)return l.clickedSlide=void 0,void(l.clickedIndex=void 0);l.clickedSlide=v,l.virtual&&l.params.virtual.enabled?l.clickedIndex=parseInt(h(v).attr("data-swiper-slide-index"),10):l.clickedIndex=x,f.slideToClickedSlide&&l.clickedIndex!==void 0&&l.clickedIndex!==l.activeIndex&&l.slideToClickedSlide()}},ce={getTranslate:function(p){p===void 0&&(p=this.isHorizontal()?"x":"y");const{params:l,rtlTranslate:f,translate:v,$wrapperEl:x}=this;if(l.virtualTranslate)return f?-v:v;if(l.cssMode)return v;let w=g(x[0],p);return f&&(w=-w),w||0},setTranslate:function(p,l){const f=this,{rtlTranslate:v,params:x,$wrapperEl:w,wrapperEl:T,progress:P}=f;let _,R=0,F=0;f.isHorizontal()?R=v?-p:p:F=p,x.roundLengths&&(R=Math.floor(R),F=Math.floor(F)),x.cssMode?T[f.isHorizontal()?"scrollLeft":"scrollTop"]=f.isHorizontal()?-R:-F:x.virtualTranslate||w.transform(`translate3d(${R}px, ${F}px, 0px)`),f.previousTranslate=f.translate,f.translate=f.isHorizontal()?R:F;const S=f.maxTranslate()-f.minTranslate();_=S===0?0:(p-f.minTranslate())/S,_!==P&&f.updateProgress(p),f.emit("setTranslate",f.translate,l)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(p,l,f,v,x){p===void 0&&(p=0),l===void 0&&(l=this.params.speed),f===void 0&&(f=!0),v===void 0&&(v=!0);const w=this,{params:T,wrapperEl:P}=w;if(w.animating&&T.preventInteractionOnTransition)return!1;const _=w.minTranslate(),R=w.maxTranslate();let F;if(F=v&&p>_?_:v&&p<R?R:p,w.updateProgress(F),T.cssMode){const S=w.isHorizontal();if(l===0)P[S?"scrollLeft":"scrollTop"]=-F;else{if(!w.support.smoothScroll)return B({swiper:w,targetPosition:-F,side:S?"left":"top"}),!0;P.scrollTo({[S?"left":"top"]:-F,behavior:"smooth"})}return!0}return l===0?(w.setTransition(0),w.setTranslate(F),f&&(w.emit("beforeTransitionStart",l,x),w.emit("transitionEnd"))):(w.setTransition(l),w.setTranslate(F),f&&(w.emit("beforeTransitionStart",l,x),w.emit("transitionStart")),w.animating||(w.animating=!0,w.onTranslateToWrapperTransitionEnd||(w.onTranslateToWrapperTransitionEnd=function(S){w&&!w.destroyed&&S.target===this&&(w.$wrapperEl[0].removeEventListener("transitionend",w.onTranslateToWrapperTransitionEnd),w.$wrapperEl[0].removeEventListener("webkitTransitionEnd",w.onTranslateToWrapperTransitionEnd),w.onTranslateToWrapperTransitionEnd=null,delete w.onTranslateToWrapperTransitionEnd,f&&w.emit("transitionEnd"))}),w.$wrapperEl[0].addEventListener("transitionend",w.onTranslateToWrapperTransitionEnd),w.$wrapperEl[0].addEventListener("webkitTransitionEnd",w.onTranslateToWrapperTransitionEnd))),!0}};function he(p){let{swiper:l,runCallbacks:f,direction:v,step:x}=p;const{activeIndex:w,previousIndex:T}=l;let P=v;if(P||(P=w>T?"next":w<T?"prev":"reset"),l.emit(`transition${x}`),f&&w!==T){if(P==="reset")return void l.emit(`slideResetTransition${x}`);l.emit(`slideChangeTransition${x}`),P==="next"?l.emit(`slideNextTransition${x}`):l.emit(`slidePrevTransition${x}`)}}var Me={slideTo:function(p,l,f,v,x){if(p===void 0&&(p=0),l===void 0&&(l=this.params.speed),f===void 0&&(f=!0),typeof p!="number"&&typeof p!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof p}] given.`);if(typeof p=="string"){const ve=parseInt(p,10);if(!isFinite(ve))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${p}] given.`);p=ve}const w=this;let T=p;T<0&&(T=0);const{params:P,snapGrid:_,slidesGrid:R,previousIndex:F,activeIndex:S,rtlTranslate:D,wrapperEl:H,enabled:X}=w;if(w.animating&&P.preventInteractionOnTransition||!X&&!v&&!x)return!1;const q=Math.min(w.params.slidesPerGroupSkip,T);let W=q+Math.floor((T-q)/w.params.slidesPerGroup);W>=_.length&&(W=_.length-1);const de=-_[W];if(P.normalizeSlideIndex)for(let ve=0;ve<R.length;ve+=1){const Te=-Math.floor(100*de),Fe=Math.floor(100*R[ve]),Be=Math.floor(100*R[ve+1]);R[ve+1]!==void 0?Te>=Fe&&Te<Be-(Be-Fe)/2?T=ve:Te>=Fe&&Te<Be&&(T=ve+1):Te>=Fe&&(T=ve)}if(w.initialized&&T!==S&&(!w.allowSlideNext&&de<w.translate&&de<w.minTranslate()||!w.allowSlidePrev&&de>w.translate&&de>w.maxTranslate()&&(S||0)!==T))return!1;let ge;if(T!==(F||0)&&f&&w.emit("beforeSlideChangeStart"),w.updateProgress(de),ge=T>S?"next":T<S?"prev":"reset",D&&-de===w.translate||!D&&de===w.translate)return w.updateActiveIndex(T),P.autoHeight&&w.updateAutoHeight(),w.updateSlidesClasses(),P.effect!=="slide"&&w.setTranslate(de),ge!=="reset"&&(w.transitionStart(f,ge),w.transitionEnd(f,ge)),!1;if(P.cssMode){const ve=w.isHorizontal(),Te=D?de:-de;if(l===0){const Fe=w.virtual&&w.params.virtual.enabled;Fe&&(w.wrapperEl.style.scrollSnapType="none",w._immediateVirtual=!0),H[ve?"scrollLeft":"scrollTop"]=Te,Fe&&requestAnimationFrame(()=>{w.wrapperEl.style.scrollSnapType="",w._swiperImmediateVirtual=!1})}else{if(!w.support.smoothScroll)return B({swiper:w,targetPosition:Te,side:ve?"left":"top"}),!0;H.scrollTo({[ve?"left":"top"]:Te,behavior:"smooth"})}return!0}return w.setTransition(l),w.setTranslate(de),w.updateActiveIndex(T),w.updateSlidesClasses(),w.emit("beforeTransitionStart",l,v),w.transitionStart(f,ge),l===0?w.transitionEnd(f,ge):w.animating||(w.animating=!0,w.onSlideToWrapperTransitionEnd||(w.onSlideToWrapperTransitionEnd=function(ve){w&&!w.destroyed&&ve.target===this&&(w.$wrapperEl[0].removeEventListener("transitionend",w.onSlideToWrapperTransitionEnd),w.$wrapperEl[0].removeEventListener("webkitTransitionEnd",w.onSlideToWrapperTransitionEnd),w.onSlideToWrapperTransitionEnd=null,delete w.onSlideToWrapperTransitionEnd,w.transitionEnd(f,ge))}),w.$wrapperEl[0].addEventListener("transitionend",w.onSlideToWrapperTransitionEnd),w.$wrapperEl[0].addEventListener("webkitTransitionEnd",w.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(p,l,f,v){if(p===void 0&&(p=0),l===void 0&&(l=this.params.speed),f===void 0&&(f=!0),typeof p=="string"){const T=parseInt(p,10);if(!isFinite(T))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${p}] given.`);p=T}const x=this;let w=p;return x.params.loop&&(w+=x.loopedSlides),x.slideTo(w,l,f,v)},slideNext:function(p,l,f){p===void 0&&(p=this.params.speed),l===void 0&&(l=!0);const v=this,{animating:x,enabled:w,params:T}=v;if(!w)return v;let P=T.slidesPerGroup;T.slidesPerView==="auto"&&T.slidesPerGroup===1&&T.slidesPerGroupAuto&&(P=Math.max(v.slidesPerViewDynamic("current",!0),1));const _=v.activeIndex<T.slidesPerGroupSkip?1:P;if(T.loop){if(x&&T.loopPreventsSlide)return!1;v.loopFix(),v._clientLeft=v.$wrapperEl[0].clientLeft}return T.rewind&&v.isEnd?v.slideTo(0,p,l,f):v.slideTo(v.activeIndex+_,p,l,f)},slidePrev:function(p,l,f){p===void 0&&(p=this.params.speed),l===void 0&&(l=!0);const v=this,{params:x,animating:w,snapGrid:T,slidesGrid:P,rtlTranslate:_,enabled:R}=v;if(!R)return v;if(x.loop){if(w&&x.loopPreventsSlide)return!1;v.loopFix(),v._clientLeft=v.$wrapperEl[0].clientLeft}function F(q){return q<0?-Math.floor(Math.abs(q)):Math.floor(q)}const S=F(_?v.translate:-v.translate),D=T.map(q=>F(q));let H=T[D.indexOf(S)-1];if(H===void 0&&x.cssMode){let q;T.forEach((W,de)=>{S>=W&&(q=de)}),q!==void 0&&(H=T[q>0?q-1:q])}let X=0;if(H!==void 0&&(X=P.indexOf(H),X<0&&(X=v.activeIndex-1),x.slidesPerView==="auto"&&x.slidesPerGroup===1&&x.slidesPerGroupAuto&&(X=X-v.slidesPerViewDynamic("previous",!0)+1,X=Math.max(X,0))),x.rewind&&v.isBeginning){const q=v.params.virtual&&v.params.virtual.enabled&&v.virtual?v.virtual.slides.length-1:v.slides.length-1;return v.slideTo(q,p,l,f)}return v.slideTo(X,p,l,f)},slideReset:function(p,l,f){return p===void 0&&(p=this.params.speed),l===void 0&&(l=!0),this.slideTo(this.activeIndex,p,l,f)},slideToClosest:function(p,l,f,v){p===void 0&&(p=this.params.speed),l===void 0&&(l=!0),v===void 0&&(v=.5);const x=this;let w=x.activeIndex;const T=Math.min(x.params.slidesPerGroupSkip,w),P=T+Math.floor((w-T)/x.params.slidesPerGroup),_=x.rtlTranslate?x.translate:-x.translate;if(_>=x.snapGrid[P]){const R=x.snapGrid[P];_-R>(x.snapGrid[P+1]-R)*v&&(w+=x.params.slidesPerGroup)}else{const R=x.snapGrid[P-1];_-R<=(x.snapGrid[P]-R)*v&&(w-=x.params.slidesPerGroup)}return w=Math.max(w,0),w=Math.min(w,x.slidesGrid.length-1),x.slideTo(w,p,l,f)},slideToClickedSlide:function(){const p=this,{params:l,$wrapperEl:f}=p,v=l.slidesPerView==="auto"?p.slidesPerViewDynamic():l.slidesPerView;let x,w=p.clickedIndex;if(l.loop){if(p.animating)return;x=parseInt(h(p.clickedSlide).attr("data-swiper-slide-index"),10),l.centeredSlides?w<p.loopedSlides-v/2||w>p.slides.length-p.loopedSlides+v/2?(p.loopFix(),w=f.children(`.${l.slideClass}[data-swiper-slide-index="${x}"]:not(.${l.slideDuplicateClass})`).eq(0).index(),u(()=>{p.slideTo(w)})):p.slideTo(w):w>p.slides.length-v?(p.loopFix(),w=f.children(`.${l.slideClass}[data-swiper-slide-index="${x}"]:not(.${l.slideDuplicateClass})`).eq(0).index(),u(()=>{p.slideTo(w)})):p.slideTo(w)}else p.slideTo(w)}},De={loopCreate:function(){const p=this,l=i(),{params:f,$wrapperEl:v}=p,x=v.children().length>0?h(v.children()[0].parentNode):v;x.children(`.${f.slideClass}.${f.slideDuplicateClass}`).remove();let w=x.children(`.${f.slideClass}`);if(f.loopFillGroupWithBlank){const _=f.slidesPerGroup-w.length%f.slidesPerGroup;if(_!==f.slidesPerGroup){for(let R=0;R<_;R+=1){const F=h(l.createElement("div")).addClass(`${f.slideClass} ${f.slideBlankClass}`);x.append(F)}w=x.children(`.${f.slideClass}`)}}f.slidesPerView!=="auto"||f.loopedSlides||(f.loopedSlides=w.length),p.loopedSlides=Math.ceil(parseFloat(f.loopedSlides||f.slidesPerView,10)),p.loopedSlides+=f.loopAdditionalSlides,p.loopedSlides>w.length&&p.params.loopedSlidesLimit&&(p.loopedSlides=w.length);const T=[],P=[];w.each((_,R)=>{h(_).attr("data-swiper-slide-index",R)});for(let _=0;_<p.loopedSlides;_+=1){const R=_-Math.floor(_/w.length)*w.length;P.push(w.eq(R)[0]),T.unshift(w.eq(w.length-R-1)[0])}for(let _=0;_<P.length;_+=1)x.append(h(P[_].cloneNode(!0)).addClass(f.slideDuplicateClass));for(let _=T.length-1;_>=0;_-=1)x.prepend(h(T[_].cloneNode(!0)).addClass(f.slideDuplicateClass))},loopFix:function(){const p=this;p.emit("beforeLoopFix");const{activeIndex:l,slides:f,loopedSlides:v,allowSlidePrev:x,allowSlideNext:w,snapGrid:T,rtlTranslate:P}=p;let _;p.allowSlidePrev=!0,p.allowSlideNext=!0;const R=-T[l]-p.getTranslate();l<v?(_=f.length-3*v+l,_+=v,p.slideTo(_,0,!1,!0)&&R!==0&&p.setTranslate((P?-p.translate:p.translate)-R)):l>=f.length-v&&(_=-f.length+l+v,_+=v,p.slideTo(_,0,!1,!0)&&R!==0&&p.setTranslate((P?-p.translate:p.translate)-R)),p.allowSlidePrev=x,p.allowSlideNext=w,p.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:p,params:l,slides:f}=this;p.children(`.${l.slideClass}.${l.slideDuplicateClass},.${l.slideClass}.${l.slideBlankClass}`).remove(),f.removeAttr("data-swiper-slide-index")}};function Qe(p){const l=this,f=i(),v=r(),x=l.touchEventsData,{params:w,touches:T,enabled:P}=l;if(!P||l.animating&&w.preventInteractionOnTransition)return;!l.animating&&w.cssMode&&w.loop&&l.loopFix();let _=p;_.originalEvent&&(_=_.originalEvent);let R=h(_.target);if(w.touchEventsTarget==="wrapper"&&!R.closest(l.wrapperEl).length||(x.isTouchEvent=_.type==="touchstart",!x.isTouchEvent&&"which"in _&&_.which===3)||!x.isTouchEvent&&"button"in _&&_.button>0||x.isTouched&&x.isMoved)return;const F=!!w.noSwipingClass&&w.noSwipingClass!=="",S=p.composedPath?p.composedPath():p.path;F&&_.target&&_.target.shadowRoot&&S&&(R=h(S[0]));const D=w.noSwipingSelector?w.noSwipingSelector:`.${w.noSwipingClass}`,H=!(!_.target||!_.target.shadowRoot);if(w.noSwiping&&(H?function(ge,ve){return ve===void 0&&(ve=this),function Te(Fe){if(!Fe||Fe===i()||Fe===r())return null;Fe.assignedSlot&&(Fe=Fe.assignedSlot);const Be=Fe.closest(ge);return Be||Fe.getRootNode?Be||Te(Fe.getRootNode().host):null}(ve)}(D,R[0]):R.closest(D)[0]))return void(l.allowClick=!0);if(w.swipeHandler&&!R.closest(w.swipeHandler)[0])return;T.currentX=_.type==="touchstart"?_.targetTouches[0].pageX:_.pageX,T.currentY=_.type==="touchstart"?_.targetTouches[0].pageY:_.pageY;const X=T.currentX,q=T.currentY,W=w.edgeSwipeDetection||w.iOSEdgeSwipeDetection,de=w.edgeSwipeThreshold||w.iOSEdgeSwipeThreshold;if(W&&(X<=de||X>=v.innerWidth-de)){if(W!=="prevent")return;p.preventDefault()}if(Object.assign(x,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),T.startX=X,T.startY=q,x.touchStartTime=m(),l.allowClick=!0,l.updateSize(),l.swipeDirection=void 0,w.threshold>0&&(x.allowThresholdMove=!1),_.type!=="touchstart"){let ge=!0;R.is(x.focusableElements)&&(ge=!1,R[0].nodeName==="SELECT"&&(x.isTouched=!1)),f.activeElement&&h(f.activeElement).is(x.focusableElements)&&f.activeElement!==R[0]&&f.activeElement.blur();const ve=ge&&l.allowTouchMove&&w.touchStartPreventDefault;!w.touchStartForcePreventDefault&&!ve||R[0].isContentEditable||_.preventDefault()}l.params.freeMode&&l.params.freeMode.enabled&&l.freeMode&&l.animating&&!w.cssMode&&l.freeMode.onTouchStart(),l.emit("touchStart",_)}function Ee(p){const l=i(),f=this,v=f.touchEventsData,{params:x,touches:w,rtlTranslate:T,enabled:P}=f;if(!P)return;let _=p;if(_.originalEvent&&(_=_.originalEvent),!v.isTouched)return void(v.startMoving&&v.isScrolling&&f.emit("touchMoveOpposite",_));if(v.isTouchEvent&&_.type!=="touchmove")return;const R=_.type==="touchmove"&&_.targetTouches&&(_.targetTouches[0]||_.changedTouches[0]),F=_.type==="touchmove"?R.pageX:_.pageX,S=_.type==="touchmove"?R.pageY:_.pageY;if(_.preventedByNestedSwiper)return w.startX=F,void(w.startY=S);if(!f.allowTouchMove)return h(_.target).is(v.focusableElements)||(f.allowClick=!1),void(v.isTouched&&(Object.assign(w,{startX:F,startY:S,currentX:F,currentY:S}),v.touchStartTime=m()));if(v.isTouchEvent&&x.touchReleaseOnEdges&&!x.loop){if(f.isVertical()){if(S<w.startY&&f.translate<=f.maxTranslate()||S>w.startY&&f.translate>=f.minTranslate())return v.isTouched=!1,void(v.isMoved=!1)}else if(F<w.startX&&f.translate<=f.maxTranslate()||F>w.startX&&f.translate>=f.minTranslate())return}if(v.isTouchEvent&&l.activeElement&&_.target===l.activeElement&&h(_.target).is(v.focusableElements))return v.isMoved=!0,void(f.allowClick=!1);if(v.allowTouchCallbacks&&f.emit("touchMove",_),_.targetTouches&&_.targetTouches.length>1)return;w.currentX=F,w.currentY=S;const D=w.currentX-w.startX,H=w.currentY-w.startY;if(f.params.threshold&&Math.sqrt(D**2+H**2)<f.params.threshold)return;if(v.isScrolling===void 0){let de;f.isHorizontal()&&w.currentY===w.startY||f.isVertical()&&w.currentX===w.startX?v.isScrolling=!1:D*D+H*H>=25&&(de=180*Math.atan2(Math.abs(H),Math.abs(D))/Math.PI,v.isScrolling=f.isHorizontal()?de>x.touchAngle:90-de>x.touchAngle)}if(v.isScrolling&&f.emit("touchMoveOpposite",_),v.startMoving===void 0&&(w.currentX===w.startX&&w.currentY===w.startY||(v.startMoving=!0)),v.isScrolling)return void(v.isTouched=!1);if(!v.startMoving)return;f.allowClick=!1,!x.cssMode&&_.cancelable&&_.preventDefault(),x.touchMoveStopPropagation&&!x.nested&&_.stopPropagation(),v.isMoved||(x.loop&&!x.cssMode&&f.loopFix(),v.startTranslate=f.getTranslate(),f.setTransition(0),f.animating&&f.$wrapperEl.trigger("webkitTransitionEnd transitionend"),v.allowMomentumBounce=!1,!x.grabCursor||f.allowSlideNext!==!0&&f.allowSlidePrev!==!0||f.setGrabCursor(!0),f.emit("sliderFirstMove",_)),f.emit("sliderMove",_),v.isMoved=!0;let X=f.isHorizontal()?D:H;w.diff=X,X*=x.touchRatio,T&&(X=-X),f.swipeDirection=X>0?"prev":"next",v.currentTranslate=X+v.startTranslate;let q=!0,W=x.resistanceRatio;if(x.touchReleaseOnEdges&&(W=0),X>0&&v.currentTranslate>f.minTranslate()?(q=!1,x.resistance&&(v.currentTranslate=f.minTranslate()-1+(-f.minTranslate()+v.startTranslate+X)**W)):X<0&&v.currentTranslate<f.maxTranslate()&&(q=!1,x.resistance&&(v.currentTranslate=f.maxTranslate()+1-(f.maxTranslate()-v.startTranslate-X)**W)),q&&(_.preventedByNestedSwiper=!0),!f.allowSlideNext&&f.swipeDirection==="next"&&v.currentTranslate<v.startTranslate&&(v.currentTranslate=v.startTranslate),!f.allowSlidePrev&&f.swipeDirection==="prev"&&v.currentTranslate>v.startTranslate&&(v.currentTranslate=v.startTranslate),f.allowSlidePrev||f.allowSlideNext||(v.currentTranslate=v.startTranslate),x.threshold>0){if(!(Math.abs(X)>x.threshold||v.allowThresholdMove))return void(v.currentTranslate=v.startTranslate);if(!v.allowThresholdMove)return v.allowThresholdMove=!0,w.startX=w.currentX,w.startY=w.currentY,v.currentTranslate=v.startTranslate,void(w.diff=f.isHorizontal()?w.currentX-w.startX:w.currentY-w.startY)}x.followFinger&&!x.cssMode&&((x.freeMode&&x.freeMode.enabled&&f.freeMode||x.watchSlidesProgress)&&(f.updateActiveIndex(),f.updateSlidesClasses()),f.params.freeMode&&x.freeMode.enabled&&f.freeMode&&f.freeMode.onTouchMove(),f.updateProgress(v.currentTranslate),f.setTranslate(v.currentTranslate))}function ke(p){const l=this,f=l.touchEventsData,{params:v,touches:x,rtlTranslate:w,slidesGrid:T,enabled:P}=l;if(!P)return;let _=p;if(_.originalEvent&&(_=_.originalEvent),f.allowTouchCallbacks&&l.emit("touchEnd",_),f.allowTouchCallbacks=!1,!f.isTouched)return f.isMoved&&v.grabCursor&&l.setGrabCursor(!1),f.isMoved=!1,void(f.startMoving=!1);v.grabCursor&&f.isMoved&&f.isTouched&&(l.allowSlideNext===!0||l.allowSlidePrev===!0)&&l.setGrabCursor(!1);const R=m(),F=R-f.touchStartTime;if(l.allowClick){const ge=_.path||_.composedPath&&_.composedPath();l.updateClickedSlide(ge&&ge[0]||_.target),l.emit("tap click",_),F<300&&R-f.lastClickTime<300&&l.emit("doubleTap doubleClick",_)}if(f.lastClickTime=m(),u(()=>{l.destroyed||(l.allowClick=!0)}),!f.isTouched||!f.isMoved||!l.swipeDirection||x.diff===0||f.currentTranslate===f.startTranslate)return f.isTouched=!1,f.isMoved=!1,void(f.startMoving=!1);let S;if(f.isTouched=!1,f.isMoved=!1,f.startMoving=!1,S=v.followFinger?w?l.translate:-l.translate:-f.currentTranslate,v.cssMode)return;if(l.params.freeMode&&v.freeMode.enabled)return void l.freeMode.onTouchEnd({currentPos:S});let D=0,H=l.slidesSizesGrid[0];for(let ge=0;ge<T.length;ge+=ge<v.slidesPerGroupSkip?1:v.slidesPerGroup){const ve=ge<v.slidesPerGroupSkip-1?1:v.slidesPerGroup;T[ge+ve]!==void 0?S>=T[ge]&&S<T[ge+ve]&&(D=ge,H=T[ge+ve]-T[ge]):S>=T[ge]&&(D=ge,H=T[T.length-1]-T[T.length-2])}let X=null,q=null;v.rewind&&(l.isBeginning?q=l.params.virtual&&l.params.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1:l.isEnd&&(X=0));const W=(S-T[D])/H,de=D<v.slidesPerGroupSkip-1?1:v.slidesPerGroup;if(F>v.longSwipesMs){if(!v.longSwipes)return void l.slideTo(l.activeIndex);l.swipeDirection==="next"&&(W>=v.longSwipesRatio?l.slideTo(v.rewind&&l.isEnd?X:D+de):l.slideTo(D)),l.swipeDirection==="prev"&&(W>1-v.longSwipesRatio?l.slideTo(D+de):q!==null&&W<0&&Math.abs(W)>v.longSwipesRatio?l.slideTo(q):l.slideTo(D))}else{if(!v.shortSwipes)return void l.slideTo(l.activeIndex);l.navigation&&(_.target===l.navigation.nextEl||_.target===l.navigation.prevEl)?_.target===l.navigation.nextEl?l.slideTo(D+de):l.slideTo(D):(l.swipeDirection==="next"&&l.slideTo(X!==null?X:D+de),l.swipeDirection==="prev"&&l.slideTo(q!==null?q:D))}}function ee(){const p=this,{params:l,el:f}=p;if(f&&f.offsetWidth===0)return;l.breakpoints&&p.setBreakpoint();const{allowSlideNext:v,allowSlidePrev:x,snapGrid:w}=p;p.allowSlideNext=!0,p.allowSlidePrev=!0,p.updateSize(),p.updateSlides(),p.updateSlidesClasses(),(l.slidesPerView==="auto"||l.slidesPerView>1)&&p.isEnd&&!p.isBeginning&&!p.params.centeredSlides?p.slideTo(p.slides.length-1,0,!1,!0):p.slideTo(p.activeIndex,0,!1,!0),p.autoplay&&p.autoplay.running&&p.autoplay.paused&&p.autoplay.run(),p.allowSlidePrev=x,p.allowSlideNext=v,p.params.watchOverflow&&w!==p.snapGrid&&p.checkOverflow()}function re(p){const l=this;l.enabled&&(l.allowClick||(l.params.preventClicks&&p.preventDefault(),l.params.preventClicksPropagation&&l.animating&&(p.stopPropagation(),p.stopImmediatePropagation())))}function ye(){const p=this,{wrapperEl:l,rtlTranslate:f,enabled:v}=p;if(!v)return;let x;p.previousTranslate=p.translate,p.isHorizontal()?p.translate=-l.scrollLeft:p.translate=-l.scrollTop,p.translate===0&&(p.translate=0),p.updateActiveIndex(),p.updateSlidesClasses();const w=p.maxTranslate()-p.minTranslate();x=w===0?0:(p.translate-p.minTranslate())/w,x!==p.progress&&p.updateProgress(f?-p.translate:p.translate),p.emit("setTranslate",p.translate,!1)}let me=!1;function V(){}const z=(p,l)=>{const f=i(),{params:v,touchEvents:x,el:w,wrapperEl:T,device:P,support:_}=p,R=!!v.nested,F=l==="on"?"addEventListener":"removeEventListener",S=l;if(_.touch){const D=!(x.start!=="touchstart"||!_.passiveListener||!v.passiveListeners)&&{passive:!0,capture:!1};w[F](x.start,p.onTouchStart,D),w[F](x.move,p.onTouchMove,_.passiveListener?{passive:!1,capture:R}:R),w[F](x.end,p.onTouchEnd,D),x.cancel&&w[F](x.cancel,p.onTouchEnd,D)}else w[F](x.start,p.onTouchStart,!1),f[F](x.move,p.onTouchMove,R),f[F](x.end,p.onTouchEnd,!1);(v.preventClicks||v.preventClicksPropagation)&&w[F]("click",p.onClick,!0),v.cssMode&&T[F]("scroll",p.onScroll),v.updateOnWindowResize?p[S](P.ios||P.android?"resize orientationchange observerUpdate":"resize observerUpdate",ee,!0):p[S]("observerUpdate",ee,!0)};var J={attachEvents:function(){const p=this,l=i(),{params:f,support:v}=p;p.onTouchStart=Qe.bind(p),p.onTouchMove=Ee.bind(p),p.onTouchEnd=ke.bind(p),f.cssMode&&(p.onScroll=ye.bind(p)),p.onClick=re.bind(p),v.touch&&!me&&(l.addEventListener("touchstart",V),me=!0),z(p,"on")},detachEvents:function(){z(this,"off")}};const ae=(p,l)=>p.grid&&l.grid&&l.grid.rows>1;var Z={addClasses:function(){const p=this,{classNames:l,params:f,rtl:v,$el:x,device:w,support:T}=p,P=function(_,R){const F=[];return _.forEach(S=>{typeof S=="object"?Object.keys(S).forEach(D=>{S[D]&&F.push(R+D)}):typeof S=="string"&&F.push(R+S)}),F}(["initialized",f.direction,{"pointer-events":!T.touch},{"free-mode":p.params.freeMode&&f.freeMode.enabled},{autoheight:f.autoHeight},{rtl:v},{grid:f.grid&&f.grid.rows>1},{"grid-column":f.grid&&f.grid.rows>1&&f.grid.fill==="column"},{android:w.android},{ios:w.ios},{"css-mode":f.cssMode},{centered:f.cssMode&&f.centeredSlides},{"watch-progress":f.watchSlidesProgress}],f.containerModifierClass);l.push(...P),x.addClass([...l].join(" ")),p.emitContainerClasses()},removeClasses:function(){const{$el:p,classNames:l}=this;p.removeClass(l.join(" ")),this.emitContainerClasses()}},Se={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Ie(p,l){return function(f){f===void 0&&(f={});const v=Object.keys(f)[0],x=f[v];typeof x=="object"&&x!==null?(["navigation","pagination","scrollbar"].indexOf(v)>=0&&p[v]===!0&&(p[v]={auto:!0}),v in p&&"enabled"in x&&(p[v]===!0&&(p[v]={enabled:!0}),typeof p[v]!="object"||"enabled"in p[v]||(p[v].enabled=!0),p[v]||(p[v]={enabled:!1})),b(l,f)):b(l,f)}}const Oe={eventsEmitter:ue,update:pe,translate:ce,transition:{setTransition:function(p,l){const f=this;f.params.cssMode||f.$wrapperEl.transition(p),f.emit("setTransition",p,l)},transitionStart:function(p,l){p===void 0&&(p=!0);const f=this,{params:v}=f;v.cssMode||(v.autoHeight&&f.updateAutoHeight(),he({swiper:f,runCallbacks:p,direction:l,step:"Start"}))},transitionEnd:function(p,l){p===void 0&&(p=!0);const f=this,{params:v}=f;f.animating=!1,v.cssMode||(f.setTransition(0),he({swiper:f,runCallbacks:p,direction:l,step:"End"}))}},slide:Me,loop:De,grabCursor:{setGrabCursor:function(p){const l=this;if(l.support.touch||!l.params.simulateTouch||l.params.watchOverflow&&l.isLocked||l.params.cssMode)return;const f=l.params.touchEventsTarget==="container"?l.el:l.wrapperEl;f.style.cursor="move",f.style.cursor=p?"grabbing":"grab"},unsetGrabCursor:function(){const p=this;p.support.touch||p.params.watchOverflow&&p.isLocked||p.params.cssMode||(p[p.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}},events:J,breakpoints:{setBreakpoint:function(){const p=this,{activeIndex:l,initialized:f,loopedSlides:v=0,params:x,$el:w}=p,T=x.breakpoints;if(!T||T&&Object.keys(T).length===0)return;const P=p.getBreakpoint(T,p.params.breakpointsBase,p.el);if(!P||p.currentBreakpoint===P)return;const _=(P in T?T[P]:void 0)||p.originalParams,R=ae(p,x),F=ae(p,_),S=x.enabled;R&&!F?(w.removeClass(`${x.containerModifierClass}grid ${x.containerModifierClass}grid-column`),p.emitContainerClasses()):!R&&F&&(w.addClass(`${x.containerModifierClass}grid`),(_.grid.fill&&_.grid.fill==="column"||!_.grid.fill&&x.grid.fill==="column")&&w.addClass(`${x.containerModifierClass}grid-column`),p.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(q=>{const W=x[q]&&x[q].enabled,de=_[q]&&_[q].enabled;W&&!de&&p[q].disable(),!W&&de&&p[q].enable()});const D=_.direction&&_.direction!==x.direction,H=x.loop&&(_.slidesPerView!==x.slidesPerView||D);D&&f&&p.changeDirection(),b(p.params,_);const X=p.params.enabled;Object.assign(p,{allowTouchMove:p.params.allowTouchMove,allowSlideNext:p.params.allowSlideNext,allowSlidePrev:p.params.allowSlidePrev}),S&&!X?p.disable():!S&&X&&p.enable(),p.currentBreakpoint=P,p.emit("_beforeBreakpoint",_),H&&f&&(p.loopDestroy(),p.loopCreate(),p.updateSlides(),p.slideTo(l-v+p.loopedSlides,0,!1)),p.emit("breakpoint",_)},getBreakpoint:function(p,l,f){if(l===void 0&&(l="window"),!p||l==="container"&&!f)return;let v=!1;const x=r(),w=l==="window"?x.innerHeight:f.clientHeight,T=Object.keys(p).map(P=>{if(typeof P=="string"&&P.indexOf("@")===0){const _=parseFloat(P.substr(1));return{value:w*_,point:P}}return{value:P,point:P}});T.sort((P,_)=>parseInt(P.value,10)-parseInt(_.value,10));for(let P=0;P<T.length;P+=1){const{point:_,value:R}=T[P];l==="window"?x.matchMedia(`(min-width: ${R}px)`).matches&&(v=_):R<=f.clientWidth&&(v=_)}return v||"max"}},checkOverflow:{checkOverflow:function(){const p=this,{isLocked:l,params:f}=p,{slidesOffsetBefore:v}=f;if(v){const x=p.slides.length-1,w=p.slidesGrid[x]+p.slidesSizesGrid[x]+2*v;p.isLocked=p.size>w}else p.isLocked=p.snapGrid.length===1;f.allowSlideNext===!0&&(p.allowSlideNext=!p.isLocked),f.allowSlidePrev===!0&&(p.allowSlidePrev=!p.isLocked),l&&l!==p.isLocked&&(p.isEnd=!1),l!==p.isLocked&&p.emit(p.isLocked?"lock":"unlock")}},classes:Z,images:{loadImage:function(p,l,f,v,x,w){const T=r();let P;function _(){w&&w()}h(p).parent("picture")[0]||p.complete&&x?_():l?(P=new T.Image,P.onload=_,P.onerror=_,v&&(P.sizes=v),f&&(P.srcset=f),l&&(P.src=l)):_()},preloadImages:function(){const p=this;function l(){p!=null&&p&&!p.destroyed&&(p.imagesLoaded!==void 0&&(p.imagesLoaded+=1),p.imagesLoaded===p.imagesToLoad.length&&(p.params.updateOnImagesReady&&p.update(),p.emit("imagesReady")))}p.imagesToLoad=p.$el.find("img");for(let f=0;f<p.imagesToLoad.length;f+=1){const v=p.imagesToLoad[f];p.loadImage(v,v.currentSrc||v.getAttribute("src"),v.srcset||v.getAttribute("srcset"),v.sizes||v.getAttribute("sizes"),!0,l)}}}},K={};class L{constructor(){let l,f;for(var v=arguments.length,x=new Array(v),w=0;w<v;w++)x[w]=arguments[w];if(x.length===1&&x[0].constructor&&Object.prototype.toString.call(x[0]).slice(8,-1)==="Object"?f=x[0]:[l,f]=x,f||(f={}),f=b({},f),l&&!f.el&&(f.el=l),f.el&&h(f.el).length>1){const R=[];return h(f.el).each(F=>{const S=b({},f,{el:F});R.push(new L(S))}),R}const T=this;T.__swiper__=!0,T.support=G(),T.device=U({userAgent:f.userAgent}),T.browser=te(),T.eventsListeners={},T.eventsAnyListeners=[],T.modules=[...T.__modules__],f.modules&&Array.isArray(f.modules)&&T.modules.push(...f.modules);const P={};T.modules.forEach(R=>{R({swiper:T,extendParams:Ie(f,P),on:T.on.bind(T),once:T.once.bind(T),off:T.off.bind(T),emit:T.emit.bind(T)})});const _=b({},Se,P);return T.params=b({},_,K,f),T.originalParams=b({},T.params),T.passedParams=b({},f),T.params&&T.params.on&&Object.keys(T.params.on).forEach(R=>{T.on(R,T.params.on[R])}),T.params&&T.params.onAny&&T.onAny(T.params.onAny),T.$=h,Object.assign(T,{enabled:T.params.enabled,el:l,classNames:[],slides:h(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>T.params.direction==="horizontal",isVertical:()=>T.params.direction==="vertical",activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:T.params.allowSlideNext,allowSlidePrev:T.params.allowSlidePrev,touchEvents:function(){const R=["touchstart","touchmove","touchend","touchcancel"],F=["pointerdown","pointermove","pointerup"];return T.touchEventsTouch={start:R[0],move:R[1],end:R[2],cancel:R[3]},T.touchEventsDesktop={start:F[0],move:F[1],end:F[2]},T.support.touch||!T.params.simulateTouch?T.touchEventsTouch:T.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:T.params.focusableElements,lastClickTime:m(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:T.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),T.emit("_swiper"),T.params.init&&T.init(),T}enable(){const l=this;l.enabled||(l.enabled=!0,l.params.grabCursor&&l.setGrabCursor(),l.emit("enable"))}disable(){const l=this;l.enabled&&(l.enabled=!1,l.params.grabCursor&&l.unsetGrabCursor(),l.emit("disable"))}setProgress(l,f){const v=this;l=Math.min(Math.max(l,0),1);const x=v.minTranslate(),w=(v.maxTranslate()-x)*l+x;v.translateTo(w,f===void 0?0:f),v.updateActiveIndex(),v.updateSlidesClasses()}emitContainerClasses(){const l=this;if(!l.params._emitClasses||!l.el)return;const f=l.el.className.split(" ").filter(v=>v.indexOf("swiper")===0||v.indexOf(l.params.containerModifierClass)===0);l.emit("_containerClasses",f.join(" "))}getSlideClasses(l){const f=this;return f.destroyed?"":l.className.split(" ").filter(v=>v.indexOf("swiper-slide")===0||v.indexOf(f.params.slideClass)===0).join(" ")}emitSlidesClasses(){const l=this;if(!l.params._emitClasses||!l.el)return;const f=[];l.slides.each(v=>{const x=l.getSlideClasses(v);f.push({slideEl:v,classNames:x}),l.emit("_slideClass",v,x)}),l.emit("_slideClasses",f)}slidesPerViewDynamic(l,f){l===void 0&&(l="current"),f===void 0&&(f=!1);const{params:v,slides:x,slidesGrid:w,slidesSizesGrid:T,size:P,activeIndex:_}=this;let R=1;if(v.centeredSlides){let F,S=x[_].swiperSlideSize;for(let D=_+1;D<x.length;D+=1)x[D]&&!F&&(S+=x[D].swiperSlideSize,R+=1,S>P&&(F=!0));for(let D=_-1;D>=0;D-=1)x[D]&&!F&&(S+=x[D].swiperSlideSize,R+=1,S>P&&(F=!0))}else if(l==="current")for(let F=_+1;F<x.length;F+=1)(f?w[F]+T[F]-w[_]<P:w[F]-w[_]<P)&&(R+=1);else for(let F=_-1;F>=0;F-=1)w[_]-w[F]<P&&(R+=1);return R}update(){const l=this;if(!l||l.destroyed)return;const{snapGrid:f,params:v}=l;function x(){const T=l.rtlTranslate?-1*l.translate:l.translate,P=Math.min(Math.max(T,l.maxTranslate()),l.minTranslate());l.setTranslate(P),l.updateActiveIndex(),l.updateSlidesClasses()}let w;v.breakpoints&&l.setBreakpoint(),l.updateSize(),l.updateSlides(),l.updateProgress(),l.updateSlidesClasses(),l.params.freeMode&&l.params.freeMode.enabled?(x(),l.params.autoHeight&&l.updateAutoHeight()):(w=(l.params.slidesPerView==="auto"||l.params.slidesPerView>1)&&l.isEnd&&!l.params.centeredSlides?l.slideTo(l.slides.length-1,0,!1,!0):l.slideTo(l.activeIndex,0,!1,!0),w||x()),v.watchOverflow&&f!==l.snapGrid&&l.checkOverflow(),l.emit("update")}changeDirection(l,f){f===void 0&&(f=!0);const v=this,x=v.params.direction;return l||(l=x==="horizontal"?"vertical":"horizontal"),l===x||l!=="horizontal"&&l!=="vertical"||(v.$el.removeClass(`${v.params.containerModifierClass}${x}`).addClass(`${v.params.containerModifierClass}${l}`),v.emitContainerClasses(),v.params.direction=l,v.slides.each(w=>{l==="vertical"?w.style.width="":w.style.height=""}),v.emit("changeDirection"),f&&v.update()),v}changeLanguageDirection(l){const f=this;f.rtl&&l==="rtl"||!f.rtl&&l==="ltr"||(f.rtl=l==="rtl",f.rtlTranslate=f.params.direction==="horizontal"&&f.rtl,f.rtl?(f.$el.addClass(`${f.params.containerModifierClass}rtl`),f.el.dir="rtl"):(f.$el.removeClass(`${f.params.containerModifierClass}rtl`),f.el.dir="ltr"),f.update())}mount(l){const f=this;if(f.mounted)return!0;const v=h(l||f.params.el);if(!(l=v[0]))return!1;l.swiper=f;const x=()=>`.${(f.params.wrapperClass||"").trim().split(" ").join(".")}`;let w=(()=>{if(l&&l.shadowRoot&&l.shadowRoot.querySelector){const T=h(l.shadowRoot.querySelector(x()));return T.children=P=>v.children(P),T}return v.children?v.children(x()):h(v).children(x())})();if(w.length===0&&f.params.createElements){const T=i().createElement("div");w=h(T),T.className=f.params.wrapperClass,v.append(T),v.children(`.${f.params.slideClass}`).each(P=>{w.append(P)})}return Object.assign(f,{$el:v,el:l,$wrapperEl:w,wrapperEl:w[0],mounted:!0,rtl:l.dir.toLowerCase()==="rtl"||v.css("direction")==="rtl",rtlTranslate:f.params.direction==="horizontal"&&(l.dir.toLowerCase()==="rtl"||v.css("direction")==="rtl"),wrongRTL:w.css("display")==="-webkit-box"}),!0}init(l){const f=this;return f.initialized||f.mount(l)===!1||(f.emit("beforeInit"),f.params.breakpoints&&f.setBreakpoint(),f.addClasses(),f.params.loop&&f.loopCreate(),f.updateSize(),f.updateSlides(),f.params.watchOverflow&&f.checkOverflow(),f.params.grabCursor&&f.enabled&&f.setGrabCursor(),f.params.preloadImages&&f.preloadImages(),f.params.loop?f.slideTo(f.params.initialSlide+f.loopedSlides,0,f.params.runCallbacksOnInit,!1,!0):f.slideTo(f.params.initialSlide,0,f.params.runCallbacksOnInit,!1,!0),f.attachEvents(),f.initialized=!0,f.emit("init"),f.emit("afterInit")),f}destroy(l,f){l===void 0&&(l=!0),f===void 0&&(f=!0);const v=this,{params:x,$el:w,$wrapperEl:T,slides:P}=v;return v.params===void 0||v.destroyed||(v.emit("beforeDestroy"),v.initialized=!1,v.detachEvents(),x.loop&&v.loopDestroy(),f&&(v.removeClasses(),w.removeAttr("style"),T.removeAttr("style"),P&&P.length&&P.removeClass([x.slideVisibleClass,x.slideActiveClass,x.slideNextClass,x.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),v.emit("destroy"),Object.keys(v.eventsListeners).forEach(_=>{v.off(_)}),l!==!1&&(v.$el[0].swiper=null,function(_){const R=_;Object.keys(R).forEach(F=>{try{R[F]=null}catch{}try{delete R[F]}catch{}})}(v)),v.destroyed=!0),null}static extendDefaults(l){b(K,l)}static get extendedDefaults(){return K}static get defaults(){return Se}static installModule(l){L.prototype.__modules__||(L.prototype.__modules__=[]);const f=L.prototype.__modules__;typeof l=="function"&&f.indexOf(l)<0&&f.push(l)}static use(l){return Array.isArray(l)?(l.forEach(f=>L.installModule(f)),L):(L.installModule(l),L)}}function oe(p,l,f,v){const x=i();return p.params.createElements&&Object.keys(v).forEach(w=>{if(!f[w]&&f.auto===!0){let T=p.$el.children(`.${v[w]}`)[0];T||(T=x.createElement("div"),T.className=v[w],p.$el.append(T)),f[w]=T,l[w]=T}}),f}function ne(p){return p===void 0&&(p=""),`.${p.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Le(p){const l=this,{$wrapperEl:f,params:v}=l;if(v.loop&&l.loopDestroy(),typeof p=="object"&&"length"in p)for(let x=0;x<p.length;x+=1)p[x]&&f.append(p[x]);else f.append(p);v.loop&&l.loopCreate(),v.observer||l.update()}function fe(p){const l=this,{params:f,$wrapperEl:v,activeIndex:x}=l;f.loop&&l.loopDestroy();let w=x+1;if(typeof p=="object"&&"length"in p){for(let T=0;T<p.length;T+=1)p[T]&&v.prepend(p[T]);w=x+p.length}else v.prepend(p);f.loop&&l.loopCreate(),f.observer||l.update(),l.slideTo(w,0,!1)}function Re(p,l){const f=this,{$wrapperEl:v,params:x,activeIndex:w}=f;let T=w;x.loop&&(T-=f.loopedSlides,f.loopDestroy(),f.slides=v.children(`.${x.slideClass}`));const P=f.slides.length;if(p<=0)return void f.prependSlide(l);if(p>=P)return void f.appendSlide(l);let _=T>p?T+1:T;const R=[];for(let F=P-1;F>=p;F-=1){const S=f.slides.eq(F);S.remove(),R.unshift(S)}if(typeof l=="object"&&"length"in l){for(let F=0;F<l.length;F+=1)l[F]&&v.append(l[F]);_=T>p?T+l.length:T}else v.append(l);for(let F=0;F<R.length;F+=1)v.append(R[F]);x.loop&&f.loopCreate(),x.observer||f.update(),x.loop?f.slideTo(_+f.loopedSlides,0,!1):f.slideTo(_,0,!1)}function Je(p){const l=this,{params:f,$wrapperEl:v,activeIndex:x}=l;let w=x;f.loop&&(w-=l.loopedSlides,l.loopDestroy(),l.slides=v.children(`.${f.slideClass}`));let T,P=w;if(typeof p=="object"&&"length"in p){for(let _=0;_<p.length;_+=1)T=p[_],l.slides[T]&&l.slides.eq(T).remove(),T<P&&(P-=1);P=Math.max(P,0)}else T=p,l.slides[T]&&l.slides.eq(T).remove(),T<P&&(P-=1),P=Math.max(P,0);f.loop&&l.loopCreate(),f.observer||l.update(),f.loop?l.slideTo(P+l.loopedSlides,0,!1):l.slideTo(P,0,!1)}function Xe(){const p=this,l=[];for(let f=0;f<p.slides.length;f+=1)l.push(f);p.removeSlide(l)}function st(p){const{effect:l,swiper:f,on:v,setTranslate:x,setTransition:w,overwriteParams:T,perspective:P,recreateShadows:_,getEffectParams:R}=p;let F;v("beforeInit",()=>{if(f.params.effect!==l)return;f.classNames.push(`${f.params.containerModifierClass}${l}`),P&&P()&&f.classNames.push(`${f.params.containerModifierClass}3d`);const S=T?T():{};Object.assign(f.params,S),Object.assign(f.originalParams,S)}),v("setTranslate",()=>{f.params.effect===l&&x()}),v("setTransition",(S,D)=>{f.params.effect===l&&w(D)}),v("transitionEnd",()=>{if(f.params.effect===l&&_){if(!R||!R().slideShadows)return;f.slides.each(S=>{f.$(S).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()}),_()}}),v("virtualUpdate",()=>{f.params.effect===l&&(f.slides.length||(F=!0),requestAnimationFrame(()=>{F&&f.slides&&f.slides.length&&(x(),F=!1)}))})}function Ve(p,l){return p.transformEl?l.find(p.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):l}function rt(p){let{swiper:l,duration:f,transformEl:v,allSlides:x}=p;const{slides:w,activeIndex:T,$wrapperEl:P}=l;if(l.params.virtualTranslate&&f!==0){let _,R=!1;_=x?v?w.find(v):w:v?w.eq(T).find(v):w.eq(T),_.transitionEnd(()=>{if(R||!l||l.destroyed)return;R=!0,l.animating=!1;const F=["webkitTransitionEnd","transitionend"];for(let S=0;S<F.length;S+=1)P.trigger(F[S])})}}function Ze(p,l,f){const v="swiper-slide-shadow"+(f?`-${f}`:""),x=p.transformEl?l.find(p.transformEl):l;let w=x.children(`.${v}`);return w.length||(w=h(`<div class="swiper-slide-shadow${f?`-${f}`:""}"></div>`),x.append(w)),w}Object.keys(Oe).forEach(p=>{Object.keys(Oe[p]).forEach(l=>{L.prototype[l]=Oe[p][l]})}),L.use([function(p){let{swiper:l,on:f,emit:v}=p;const x=r();let w=null,T=null;const P=()=>{l&&!l.destroyed&&l.initialized&&(v("beforeResize"),v("resize"))},_=()=>{l&&!l.destroyed&&l.initialized&&v("orientationchange")};f("init",()=>{l.params.resizeObserver&&x.ResizeObserver!==void 0?l&&!l.destroyed&&l.initialized&&(w=new ResizeObserver(R=>{T=x.requestAnimationFrame(()=>{const{width:F,height:S}=l;let D=F,H=S;R.forEach(X=>{let{contentBoxSize:q,contentRect:W,target:de}=X;de&&de!==l.el||(D=W?W.width:(q[0]||q).inlineSize,H=W?W.height:(q[0]||q).blockSize)}),D===F&&H===S||P()})}),w.observe(l.el)):(x.addEventListener("resize",P),x.addEventListener("orientationchange",_))}),f("destroy",()=>{T&&x.cancelAnimationFrame(T),w&&w.unobserve&&l.el&&(w.unobserve(l.el),w=null),x.removeEventListener("resize",P),x.removeEventListener("orientationchange",_)})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;const w=[],T=r(),P=function(_,R){R===void 0&&(R={});const F=new(T.MutationObserver||T.WebkitMutationObserver)(S=>{if(S.length===1)return void x("observerUpdate",S[0]);const D=function(){x("observerUpdate",S[0])};T.requestAnimationFrame?T.requestAnimationFrame(D):T.setTimeout(D,0)});F.observe(_,{attributes:R.attributes===void 0||R.attributes,childList:R.childList===void 0||R.childList,characterData:R.characterData===void 0||R.characterData}),w.push(F)};f({observer:!1,observeParents:!1,observeSlideChildren:!1}),v("init",()=>{if(l.params.observer){if(l.params.observeParents){const _=l.$el.parents();for(let R=0;R<_.length;R+=1)P(_[R])}P(l.$el[0],{childList:l.params.observeSlideChildren}),P(l.$wrapperEl[0],{attributes:!1})}}),v("destroy",()=>{w.forEach(_=>{_.disconnect()}),w.splice(0,w.length)})}]);const Et=[function(p){let l,{swiper:f,extendParams:v,on:x,emit:w}=p;function T(_,R){const F=f.params.virtual;if(F.cache&&f.virtual.cache[R])return f.virtual.cache[R];const S=F.renderSlide?h(F.renderSlide.call(f,_,R)):h(`<div class="${f.params.slideClass}" data-swiper-slide-index="${R}">${_}</div>`);return S.attr("data-swiper-slide-index")||S.attr("data-swiper-slide-index",R),F.cache&&(f.virtual.cache[R]=S),S}function P(_){const{slidesPerView:R,slidesPerGroup:F,centeredSlides:S}=f.params,{addSlidesBefore:D,addSlidesAfter:H}=f.params.virtual,{from:X,to:q,slides:W,slidesGrid:de,offset:ge}=f.virtual;f.params.cssMode||f.updateActiveIndex();const ve=f.activeIndex||0;let Te,Fe,Be;Te=f.rtlTranslate?"right":f.isHorizontal()?"left":"top",S?(Fe=Math.floor(R/2)+F+H,Be=Math.floor(R/2)+F+D):(Fe=R+(F-1)+H,Be=F+D);const Ue=Math.max((ve||0)-Be,0),Ne=Math.min((ve||0)+Fe,W.length-1),qe=(f.slidesGrid[Ue]||0)-(f.slidesGrid[0]||0);function Ae(){f.updateSlides(),f.updateProgress(),f.updateSlidesClasses(),f.lazy&&f.params.lazy.enabled&&f.lazy.load(),w("virtualUpdate")}if(Object.assign(f.virtual,{from:Ue,to:Ne,offset:qe,slidesGrid:f.slidesGrid}),X===Ue&&q===Ne&&!_)return f.slidesGrid!==de&&qe!==ge&&f.slides.css(Te,`${qe}px`),f.updateProgress(),void w("virtualUpdate");if(f.params.virtual.renderExternal)return f.params.virtual.renderExternal.call(f,{offset:qe,from:Ue,to:Ne,slides:function(){const se=[];for(let we=Ue;we<=Ne;we+=1)se.push(W[we]);return se}()}),void(f.params.virtual.renderExternalUpdate?Ae():w("virtualUpdate"));const Pe=[],Ge=[];if(_)f.$wrapperEl.find(`.${f.params.slideClass}`).remove();else for(let se=X;se<=q;se+=1)(se<Ue||se>Ne)&&f.$wrapperEl.find(`.${f.params.slideClass}[data-swiper-slide-index="${se}"]`).remove();for(let se=0;se<W.length;se+=1)se>=Ue&&se<=Ne&&(q===void 0||_?Ge.push(se):(se>q&&Ge.push(se),se<X&&Pe.push(se)));Ge.forEach(se=>{f.$wrapperEl.append(T(W[se],se))}),Pe.sort((se,we)=>we-se).forEach(se=>{f.$wrapperEl.prepend(T(W[se],se))}),f.$wrapperEl.children(".swiper-slide").css(Te,`${qe}px`),Ae()}v({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),f.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},x("beforeInit",()=>{f.params.virtual.enabled&&(f.virtual.slides=f.params.virtual.slides,f.classNames.push(`${f.params.containerModifierClass}virtual`),f.params.watchSlidesProgress=!0,f.originalParams.watchSlidesProgress=!0,f.params.initialSlide||P())}),x("setTranslate",()=>{f.params.virtual.enabled&&(f.params.cssMode&&!f._immediateVirtual?(clearTimeout(l),l=setTimeout(()=>{P()},100)):P())}),x("init update resize",()=>{f.params.virtual.enabled&&f.params.cssMode&&C(f.wrapperEl,"--swiper-virtual-size",`${f.virtualSize}px`)}),Object.assign(f.virtual,{appendSlide:function(_){if(typeof _=="object"&&"length"in _)for(let R=0;R<_.length;R+=1)_[R]&&f.virtual.slides.push(_[R]);else f.virtual.slides.push(_);P(!0)},prependSlide:function(_){const R=f.activeIndex;let F=R+1,S=1;if(Array.isArray(_)){for(let D=0;D<_.length;D+=1)_[D]&&f.virtual.slides.unshift(_[D]);F=R+_.length,S=_.length}else f.virtual.slides.unshift(_);if(f.params.virtual.cache){const D=f.virtual.cache,H={};Object.keys(D).forEach(X=>{const q=D[X],W=q.attr("data-swiper-slide-index");W&&q.attr("data-swiper-slide-index",parseInt(W,10)+S),H[parseInt(X,10)+S]=q}),f.virtual.cache=H}P(!0),f.slideTo(F,0)},removeSlide:function(_){if(_==null)return;let R=f.activeIndex;if(Array.isArray(_))for(let F=_.length-1;F>=0;F-=1)f.virtual.slides.splice(_[F],1),f.params.virtual.cache&&delete f.virtual.cache[_[F]],_[F]<R&&(R-=1),R=Math.max(R,0);else f.virtual.slides.splice(_,1),f.params.virtual.cache&&delete f.virtual.cache[_],_<R&&(R-=1),R=Math.max(R,0);P(!0),f.slideTo(R,0)},removeAllSlides:function(){f.virtual.slides=[],f.params.virtual.cache&&(f.virtual.cache={}),P(!0),f.slideTo(0,0)},update:P})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;const w=i(),T=r();function P(F){if(!l.enabled)return;const{rtlTranslate:S}=l;let D=F;D.originalEvent&&(D=D.originalEvent);const H=D.keyCode||D.charCode,X=l.params.keyboard.pageUpDown,q=X&&H===33,W=X&&H===34,de=H===37,ge=H===39,ve=H===38,Te=H===40;if(!l.allowSlideNext&&(l.isHorizontal()&&ge||l.isVertical()&&Te||W)||!l.allowSlidePrev&&(l.isHorizontal()&&de||l.isVertical()&&ve||q))return!1;if(!(D.shiftKey||D.altKey||D.ctrlKey||D.metaKey||w.activeElement&&w.activeElement.nodeName&&(w.activeElement.nodeName.toLowerCase()==="input"||w.activeElement.nodeName.toLowerCase()==="textarea"))){if(l.params.keyboard.onlyInViewport&&(q||W||de||ge||ve||Te)){let Fe=!1;if(l.$el.parents(`.${l.params.slideClass}`).length>0&&l.$el.parents(`.${l.params.slideActiveClass}`).length===0)return;const Be=l.$el,Ue=Be[0].clientWidth,Ne=Be[0].clientHeight,qe=T.innerWidth,Ae=T.innerHeight,Pe=l.$el.offset();S&&(Pe.left-=l.$el[0].scrollLeft);const Ge=[[Pe.left,Pe.top],[Pe.left+Ue,Pe.top],[Pe.left,Pe.top+Ne],[Pe.left+Ue,Pe.top+Ne]];for(let se=0;se<Ge.length;se+=1){const we=Ge[se];if(we[0]>=0&&we[0]<=qe&&we[1]>=0&&we[1]<=Ae){if(we[0]===0&&we[1]===0)continue;Fe=!0}}if(!Fe)return}l.isHorizontal()?((q||W||de||ge)&&(D.preventDefault?D.preventDefault():D.returnValue=!1),((W||ge)&&!S||(q||de)&&S)&&l.slideNext(),((q||de)&&!S||(W||ge)&&S)&&l.slidePrev()):((q||W||ve||Te)&&(D.preventDefault?D.preventDefault():D.returnValue=!1),(W||Te)&&l.slideNext(),(q||ve)&&l.slidePrev()),x("keyPress",H)}}function _(){l.keyboard.enabled||(h(w).on("keydown",P),l.keyboard.enabled=!0)}function R(){l.keyboard.enabled&&(h(w).off("keydown",P),l.keyboard.enabled=!1)}l.keyboard={enabled:!1},f({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),v("init",()=>{l.params.keyboard.enabled&&_()}),v("destroy",()=>{l.keyboard.enabled&&R()}),Object.assign(l.keyboard,{enable:_,disable:R})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;const w=r();let T;f({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),l.mousewheel={enabled:!1};let P,_=m();const R=[];function F(){l.enabled&&(l.mouseEntered=!0)}function S(){l.enabled&&(l.mouseEntered=!1)}function D(de){return!(l.params.mousewheel.thresholdDelta&&de.delta<l.params.mousewheel.thresholdDelta)&&!(l.params.mousewheel.thresholdTime&&m()-_<l.params.mousewheel.thresholdTime)&&(de.delta>=6&&m()-_<60||(de.direction<0?l.isEnd&&!l.params.loop||l.animating||(l.slideNext(),x("scroll",de.raw)):l.isBeginning&&!l.params.loop||l.animating||(l.slidePrev(),x("scroll",de.raw)),_=new w.Date().getTime(),!1))}function H(de){let ge=de,ve=!0;if(!l.enabled)return;const Te=l.params.mousewheel;l.params.cssMode&&ge.preventDefault();let Fe=l.$el;if(l.params.mousewheel.eventsTarget!=="container"&&(Fe=h(l.params.mousewheel.eventsTarget)),!l.mouseEntered&&!Fe[0].contains(ge.target)&&!Te.releaseOnEdges)return!0;ge.originalEvent&&(ge=ge.originalEvent);let Be=0;const Ue=l.rtlTranslate?-1:1,Ne=function(Ae){let Pe=0,Ge=0,se=0,we=0;return"detail"in Ae&&(Ge=Ae.detail),"wheelDelta"in Ae&&(Ge=-Ae.wheelDelta/120),"wheelDeltaY"in Ae&&(Ge=-Ae.wheelDeltaY/120),"wheelDeltaX"in Ae&&(Pe=-Ae.wheelDeltaX/120),"axis"in Ae&&Ae.axis===Ae.HORIZONTAL_AXIS&&(Pe=Ge,Ge=0),se=10*Pe,we=10*Ge,"deltaY"in Ae&&(we=Ae.deltaY),"deltaX"in Ae&&(se=Ae.deltaX),Ae.shiftKey&&!se&&(se=we,we=0),(se||we)&&Ae.deltaMode&&(Ae.deltaMode===1?(se*=40,we*=40):(se*=800,we*=800)),se&&!Pe&&(Pe=se<1?-1:1),we&&!Ge&&(Ge=we<1?-1:1),{spinX:Pe,spinY:Ge,pixelX:se,pixelY:we}}(ge);if(Te.forceToAxis)if(l.isHorizontal()){if(!(Math.abs(Ne.pixelX)>Math.abs(Ne.pixelY)))return!0;Be=-Ne.pixelX*Ue}else{if(!(Math.abs(Ne.pixelY)>Math.abs(Ne.pixelX)))return!0;Be=-Ne.pixelY}else Be=Math.abs(Ne.pixelX)>Math.abs(Ne.pixelY)?-Ne.pixelX*Ue:-Ne.pixelY;if(Be===0)return!0;Te.invert&&(Be=-Be);let qe=l.getTranslate()+Be*Te.sensitivity;if(qe>=l.minTranslate()&&(qe=l.minTranslate()),qe<=l.maxTranslate()&&(qe=l.maxTranslate()),ve=!!l.params.loop||!(qe===l.minTranslate()||qe===l.maxTranslate()),ve&&l.params.nested&&ge.stopPropagation(),l.params.freeMode&&l.params.freeMode.enabled){const Ae={time:m(),delta:Math.abs(Be),direction:Math.sign(Be)},Pe=P&&Ae.time<P.time+500&&Ae.delta<=P.delta&&Ae.direction===P.direction;if(!Pe){P=void 0,l.params.loop&&l.loopFix();let Ge=l.getTranslate()+Be*Te.sensitivity;const se=l.isBeginning,we=l.isEnd;if(Ge>=l.minTranslate()&&(Ge=l.minTranslate()),Ge<=l.maxTranslate()&&(Ge=l.maxTranslate()),l.setTransition(0),l.setTranslate(Ge),l.updateProgress(),l.updateActiveIndex(),l.updateSlidesClasses(),(!se&&l.isBeginning||!we&&l.isEnd)&&l.updateSlidesClasses(),l.params.freeMode.sticky){clearTimeout(T),T=void 0,R.length>=15&&R.shift();const N=R.length?R[R.length-1]:void 0,Y=R[0];if(R.push(Ae),N&&(Ae.delta>N.delta||Ae.direction!==N.direction))R.splice(0);else if(R.length>=15&&Ae.time-Y.time<500&&Y.delta-Ae.delta>=1&&Ae.delta<=6){const ie=Be>0?.8:.2;P=Ae,R.splice(0),T=u(()=>{l.slideToClosest(l.params.speed,!0,void 0,ie)},0)}T||(T=u(()=>{P=Ae,R.splice(0),l.slideToClosest(l.params.speed,!0,void 0,.5)},500))}if(Pe||x("scroll",ge),l.params.autoplay&&l.params.autoplayDisableOnInteraction&&l.autoplay.stop(),Ge===l.minTranslate()||Ge===l.maxTranslate())return!0}}else{const Ae={time:m(),delta:Math.abs(Be),direction:Math.sign(Be),raw:de};R.length>=2&&R.shift();const Pe=R.length?R[R.length-1]:void 0;if(R.push(Ae),Pe?(Ae.direction!==Pe.direction||Ae.delta>Pe.delta||Ae.time>Pe.time+150)&&D(Ae):D(Ae),function(Ge){const se=l.params.mousewheel;if(Ge.direction<0){if(l.isEnd&&!l.params.loop&&se.releaseOnEdges)return!0}else if(l.isBeginning&&!l.params.loop&&se.releaseOnEdges)return!0;return!1}(Ae))return!0}return ge.preventDefault?ge.preventDefault():ge.returnValue=!1,!1}function X(de){let ge=l.$el;l.params.mousewheel.eventsTarget!=="container"&&(ge=h(l.params.mousewheel.eventsTarget)),ge[de]("mouseenter",F),ge[de]("mouseleave",S),ge[de]("wheel",H)}function q(){return l.params.cssMode?(l.wrapperEl.removeEventListener("wheel",H),!0):!l.mousewheel.enabled&&(X("on"),l.mousewheel.enabled=!0,!0)}function W(){return l.params.cssMode?(l.wrapperEl.addEventListener(event,H),!0):!!l.mousewheel.enabled&&(X("off"),l.mousewheel.enabled=!1,!0)}v("init",()=>{!l.params.mousewheel.enabled&&l.params.cssMode&&W(),l.params.mousewheel.enabled&&q()}),v("destroy",()=>{l.params.cssMode&&q(),l.mousewheel.enabled&&W()}),Object.assign(l.mousewheel,{enable:q,disable:W})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;function w(H){let X;return H&&(X=h(H),l.params.uniqueNavElements&&typeof H=="string"&&X.length>1&&l.$el.find(H).length===1&&(X=l.$el.find(H))),X}function T(H,X){const q=l.params.navigation;H&&H.length>0&&(H[X?"addClass":"removeClass"](q.disabledClass),H[0]&&H[0].tagName==="BUTTON"&&(H[0].disabled=X),l.params.watchOverflow&&l.enabled&&H[l.isLocked?"addClass":"removeClass"](q.lockClass))}function P(){if(l.params.loop)return;const{$nextEl:H,$prevEl:X}=l.navigation;T(X,l.isBeginning&&!l.params.rewind),T(H,l.isEnd&&!l.params.rewind)}function _(H){H.preventDefault(),(!l.isBeginning||l.params.loop||l.params.rewind)&&(l.slidePrev(),x("navigationPrev"))}function R(H){H.preventDefault(),(!l.isEnd||l.params.loop||l.params.rewind)&&(l.slideNext(),x("navigationNext"))}function F(){const H=l.params.navigation;if(l.params.navigation=oe(l,l.originalParams.navigation,l.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!H.nextEl&&!H.prevEl)return;const X=w(H.nextEl),q=w(H.prevEl);X&&X.length>0&&X.on("click",R),q&&q.length>0&&q.on("click",_),Object.assign(l.navigation,{$nextEl:X,nextEl:X&&X[0],$prevEl:q,prevEl:q&&q[0]}),l.enabled||(X&&X.addClass(H.lockClass),q&&q.addClass(H.lockClass))}function S(){const{$nextEl:H,$prevEl:X}=l.navigation;H&&H.length&&(H.off("click",R),H.removeClass(l.params.navigation.disabledClass)),X&&X.length&&(X.off("click",_),X.removeClass(l.params.navigation.disabledClass))}f({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),l.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},v("init",()=>{l.params.navigation.enabled===!1?D():(F(),P())}),v("toEdge fromEdge lock unlock",()=>{P()}),v("destroy",()=>{S()}),v("enable disable",()=>{const{$nextEl:H,$prevEl:X}=l.navigation;H&&H[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass),X&&X[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass)}),v("click",(H,X)=>{const{$nextEl:q,$prevEl:W}=l.navigation,de=X.target;if(l.params.navigation.hideOnClick&&!h(de).is(W)&&!h(de).is(q)){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===de||l.pagination.el.contains(de)))return;let ge;q?ge=q.hasClass(l.params.navigation.hiddenClass):W&&(ge=W.hasClass(l.params.navigation.hiddenClass)),x(ge===!0?"navigationShow":"navigationHide"),q&&q.toggleClass(l.params.navigation.hiddenClass),W&&W.toggleClass(l.params.navigation.hiddenClass)}});const D=()=>{l.$el.addClass(l.params.navigation.navigationDisabledClass),S()};Object.assign(l.navigation,{enable:()=>{l.$el.removeClass(l.params.navigation.navigationDisabledClass),F(),P()},disable:D,update:P,init:F,destroy:S})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;const w="swiper-pagination";let T;f({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:q=>q,formatFractionTotal:q=>q,bulletClass:`${w}-bullet`,bulletActiveClass:`${w}-bullet-active`,modifierClass:`${w}-`,currentClass:`${w}-current`,totalClass:`${w}-total`,hiddenClass:`${w}-hidden`,progressbarFillClass:`${w}-progressbar-fill`,progressbarOppositeClass:`${w}-progressbar-opposite`,clickableClass:`${w}-clickable`,lockClass:`${w}-lock`,horizontalClass:`${w}-horizontal`,verticalClass:`${w}-vertical`,paginationDisabledClass:`${w}-disabled`}}),l.pagination={el:null,$el:null,bullets:[]};let P=0;function _(){return!l.params.pagination.el||!l.pagination.el||!l.pagination.$el||l.pagination.$el.length===0}function R(q,W){const{bulletActiveClass:de}=l.params.pagination;q[W]().addClass(`${de}-${W}`)[W]().addClass(`${de}-${W}-${W}`)}function F(){const q=l.rtl,W=l.params.pagination;if(_())return;const de=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,ge=l.pagination.$el;let ve;const Te=l.params.loop?Math.ceil((de-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;if(l.params.loop?(ve=Math.ceil((l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup),ve>de-1-2*l.loopedSlides&&(ve-=de-2*l.loopedSlides),ve>Te-1&&(ve-=Te),ve<0&&l.params.paginationType!=="bullets"&&(ve=Te+ve)):ve=l.snapIndex!==void 0?l.snapIndex:l.activeIndex||0,W.type==="bullets"&&l.pagination.bullets&&l.pagination.bullets.length>0){const Fe=l.pagination.bullets;let Be,Ue,Ne;if(W.dynamicBullets&&(T=Fe.eq(0)[l.isHorizontal()?"outerWidth":"outerHeight"](!0),ge.css(l.isHorizontal()?"width":"height",T*(W.dynamicMainBullets+4)+"px"),W.dynamicMainBullets>1&&l.previousIndex!==void 0&&(P+=ve-(l.previousIndex-l.loopedSlides||0),P>W.dynamicMainBullets-1?P=W.dynamicMainBullets-1:P<0&&(P=0)),Be=Math.max(ve-P,0),Ue=Be+(Math.min(Fe.length,W.dynamicMainBullets)-1),Ne=(Ue+Be)/2),Fe.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(qe=>`${W.bulletActiveClass}${qe}`).join(" ")),ge.length>1)Fe.each(qe=>{const Ae=h(qe),Pe=Ae.index();Pe===ve&&Ae.addClass(W.bulletActiveClass),W.dynamicBullets&&(Pe>=Be&&Pe<=Ue&&Ae.addClass(`${W.bulletActiveClass}-main`),Pe===Be&&R(Ae,"prev"),Pe===Ue&&R(Ae,"next"))});else{const qe=Fe.eq(ve),Ae=qe.index();if(qe.addClass(W.bulletActiveClass),W.dynamicBullets){const Pe=Fe.eq(Be),Ge=Fe.eq(Ue);for(let se=Be;se<=Ue;se+=1)Fe.eq(se).addClass(`${W.bulletActiveClass}-main`);if(l.params.loop)if(Ae>=Fe.length){for(let se=W.dynamicMainBullets;se>=0;se-=1)Fe.eq(Fe.length-se).addClass(`${W.bulletActiveClass}-main`);Fe.eq(Fe.length-W.dynamicMainBullets-1).addClass(`${W.bulletActiveClass}-prev`)}else R(Pe,"prev"),R(Ge,"next");else R(Pe,"prev"),R(Ge,"next")}}if(W.dynamicBullets){const qe=Math.min(Fe.length,W.dynamicMainBullets+4),Ae=(T*qe-T)/2-Ne*T,Pe=q?"right":"left";Fe.css(l.isHorizontal()?Pe:"top",`${Ae}px`)}}if(W.type==="fraction"&&(ge.find(ne(W.currentClass)).text(W.formatFractionCurrent(ve+1)),ge.find(ne(W.totalClass)).text(W.formatFractionTotal(Te))),W.type==="progressbar"){let Fe;Fe=W.progressbarOpposite?l.isHorizontal()?"vertical":"horizontal":l.isHorizontal()?"horizontal":"vertical";const Be=(ve+1)/Te;let Ue=1,Ne=1;Fe==="horizontal"?Ue=Be:Ne=Be,ge.find(ne(W.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${Ue}) scaleY(${Ne})`).transition(l.params.speed)}W.type==="custom"&&W.renderCustom?(ge.html(W.renderCustom(l,ve+1,Te)),x("paginationRender",ge[0])):x("paginationUpdate",ge[0]),l.params.watchOverflow&&l.enabled&&ge[l.isLocked?"addClass":"removeClass"](W.lockClass)}function S(){const q=l.params.pagination;if(_())return;const W=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,de=l.pagination.$el;let ge="";if(q.type==="bullets"){let ve=l.params.loop?Math.ceil((W-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;l.params.freeMode&&l.params.freeMode.enabled&&!l.params.loop&&ve>W&&(ve=W);for(let Te=0;Te<ve;Te+=1)q.renderBullet?ge+=q.renderBullet.call(l,Te,q.bulletClass):ge+=`<${q.bulletElement} class="${q.bulletClass}"></${q.bulletElement}>`;de.html(ge),l.pagination.bullets=de.find(ne(q.bulletClass))}q.type==="fraction"&&(ge=q.renderFraction?q.renderFraction.call(l,q.currentClass,q.totalClass):`<span class="${q.currentClass}"></span> / <span class="${q.totalClass}"></span>`,de.html(ge)),q.type==="progressbar"&&(ge=q.renderProgressbar?q.renderProgressbar.call(l,q.progressbarFillClass):`<span class="${q.progressbarFillClass}"></span>`,de.html(ge)),q.type!=="custom"&&x("paginationRender",l.pagination.$el[0])}function D(){l.params.pagination=oe(l,l.originalParams.pagination,l.params.pagination,{el:"swiper-pagination"});const q=l.params.pagination;if(!q.el)return;let W=h(q.el);W.length!==0&&(l.params.uniqueNavElements&&typeof q.el=="string"&&W.length>1&&(W=l.$el.find(q.el),W.length>1&&(W=W.filter(de=>h(de).parents(".swiper")[0]===l.el))),q.type==="bullets"&&q.clickable&&W.addClass(q.clickableClass),W.addClass(q.modifierClass+q.type),W.addClass(l.isHorizontal()?q.horizontalClass:q.verticalClass),q.type==="bullets"&&q.dynamicBullets&&(W.addClass(`${q.modifierClass}${q.type}-dynamic`),P=0,q.dynamicMainBullets<1&&(q.dynamicMainBullets=1)),q.type==="progressbar"&&q.progressbarOpposite&&W.addClass(q.progressbarOppositeClass),q.clickable&&W.on("click",ne(q.bulletClass),function(de){de.preventDefault();let ge=h(this).index()*l.params.slidesPerGroup;l.params.loop&&(ge+=l.loopedSlides),l.slideTo(ge)}),Object.assign(l.pagination,{$el:W,el:W[0]}),l.enabled||W.addClass(q.lockClass))}function H(){const q=l.params.pagination;if(_())return;const W=l.pagination.$el;W.removeClass(q.hiddenClass),W.removeClass(q.modifierClass+q.type),W.removeClass(l.isHorizontal()?q.horizontalClass:q.verticalClass),l.pagination.bullets&&l.pagination.bullets.removeClass&&l.pagination.bullets.removeClass(q.bulletActiveClass),q.clickable&&W.off("click",ne(q.bulletClass))}v("init",()=>{l.params.pagination.enabled===!1?X():(D(),S(),F())}),v("activeIndexChange",()=>{(l.params.loop||l.snapIndex===void 0)&&F()}),v("snapIndexChange",()=>{l.params.loop||F()}),v("slidesLengthChange",()=>{l.params.loop&&(S(),F())}),v("snapGridLengthChange",()=>{l.params.loop||(S(),F())}),v("destroy",()=>{H()}),v("enable disable",()=>{const{$el:q}=l.pagination;q&&q[l.enabled?"removeClass":"addClass"](l.params.pagination.lockClass)}),v("lock unlock",()=>{F()}),v("click",(q,W)=>{const de=W.target,{$el:ge}=l.pagination;if(l.params.pagination.el&&l.params.pagination.hideOnClick&&ge&&ge.length>0&&!h(de).hasClass(l.params.pagination.bulletClass)){if(l.navigation&&(l.navigation.nextEl&&de===l.navigation.nextEl||l.navigation.prevEl&&de===l.navigation.prevEl))return;const ve=ge.hasClass(l.params.pagination.hiddenClass);x(ve===!0?"paginationShow":"paginationHide"),ge.toggleClass(l.params.pagination.hiddenClass)}});const X=()=>{l.$el.addClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.addClass(l.params.pagination.paginationDisabledClass),H()};Object.assign(l.pagination,{enable:()=>{l.$el.removeClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.removeClass(l.params.pagination.paginationDisabledClass),D(),S(),F()},disable:X,render:S,update:F,init:D,destroy:H})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;const w=i();let T,P,_,R,F=!1,S=null,D=null;function H(){if(!l.params.scrollbar.el||!l.scrollbar.el)return;const{scrollbar:Ne,rtlTranslate:qe,progress:Ae}=l,{$dragEl:Pe,$el:Ge}=Ne,se=l.params.scrollbar;let we=P,N=(_-P)*Ae;qe?(N=-N,N>0?(we=P-N,N=0):-N+P>_&&(we=_+N)):N<0?(we=P+N,N=0):N+P>_&&(we=_-N),l.isHorizontal()?(Pe.transform(`translate3d(${N}px, 0, 0)`),Pe[0].style.width=`${we}px`):(Pe.transform(`translate3d(0px, ${N}px, 0)`),Pe[0].style.height=`${we}px`),se.hide&&(clearTimeout(S),Ge[0].style.opacity=1,S=setTimeout(()=>{Ge[0].style.opacity=0,Ge.transition(400)},1e3))}function X(){if(!l.params.scrollbar.el||!l.scrollbar.el)return;const{scrollbar:Ne}=l,{$dragEl:qe,$el:Ae}=Ne;qe[0].style.width="",qe[0].style.height="",_=l.isHorizontal()?Ae[0].offsetWidth:Ae[0].offsetHeight,R=l.size/(l.virtualSize+l.params.slidesOffsetBefore-(l.params.centeredSlides?l.snapGrid[0]:0)),P=l.params.scrollbar.dragSize==="auto"?_*R:parseInt(l.params.scrollbar.dragSize,10),l.isHorizontal()?qe[0].style.width=`${P}px`:qe[0].style.height=`${P}px`,Ae[0].style.display=R>=1?"none":"",l.params.scrollbar.hide&&(Ae[0].style.opacity=0),l.params.watchOverflow&&l.enabled&&Ne.$el[l.isLocked?"addClass":"removeClass"](l.params.scrollbar.lockClass)}function q(Ne){return l.isHorizontal()?Ne.type==="touchstart"||Ne.type==="touchmove"?Ne.targetTouches[0].clientX:Ne.clientX:Ne.type==="touchstart"||Ne.type==="touchmove"?Ne.targetTouches[0].clientY:Ne.clientY}function W(Ne){const{scrollbar:qe,rtlTranslate:Ae}=l,{$el:Pe}=qe;let Ge;Ge=(q(Ne)-Pe.offset()[l.isHorizontal()?"left":"top"]-(T!==null?T:P/2))/(_-P),Ge=Math.max(Math.min(Ge,1),0),Ae&&(Ge=1-Ge);const se=l.minTranslate()+(l.maxTranslate()-l.minTranslate())*Ge;l.updateProgress(se),l.setTranslate(se),l.updateActiveIndex(),l.updateSlidesClasses()}function de(Ne){const qe=l.params.scrollbar,{scrollbar:Ae,$wrapperEl:Pe}=l,{$el:Ge,$dragEl:se}=Ae;F=!0,T=Ne.target===se[0]||Ne.target===se?q(Ne)-Ne.target.getBoundingClientRect()[l.isHorizontal()?"left":"top"]:null,Ne.preventDefault(),Ne.stopPropagation(),Pe.transition(100),se.transition(100),W(Ne),clearTimeout(D),Ge.transition(0),qe.hide&&Ge.css("opacity",1),l.params.cssMode&&l.$wrapperEl.css("scroll-snap-type","none"),x("scrollbarDragStart",Ne)}function ge(Ne){const{scrollbar:qe,$wrapperEl:Ae}=l,{$el:Pe,$dragEl:Ge}=qe;F&&(Ne.preventDefault?Ne.preventDefault():Ne.returnValue=!1,W(Ne),Ae.transition(0),Pe.transition(0),Ge.transition(0),x("scrollbarDragMove",Ne))}function ve(Ne){const qe=l.params.scrollbar,{scrollbar:Ae,$wrapperEl:Pe}=l,{$el:Ge}=Ae;F&&(F=!1,l.params.cssMode&&(l.$wrapperEl.css("scroll-snap-type",""),Pe.transition("")),qe.hide&&(clearTimeout(D),D=u(()=>{Ge.css("opacity",0),Ge.transition(400)},1e3)),x("scrollbarDragEnd",Ne),qe.snapOnRelease&&l.slideToClosest())}function Te(Ne){const{scrollbar:qe,touchEventsTouch:Ae,touchEventsDesktop:Pe,params:Ge,support:se}=l,we=qe.$el;if(!we)return;const N=we[0],Y=!(!se.passiveListener||!Ge.passiveListeners)&&{passive:!1,capture:!1},ie=!(!se.passiveListener||!Ge.passiveListeners)&&{passive:!0,capture:!1};if(!N)return;const xe=Ne==="on"?"addEventListener":"removeEventListener";se.touch?(N[xe](Ae.start,de,Y),N[xe](Ae.move,ge,Y),N[xe](Ae.end,ve,ie)):(N[xe](Pe.start,de,Y),w[xe](Pe.move,ge,Y),w[xe](Pe.end,ve,ie))}function Fe(){const{scrollbar:Ne,$el:qe}=l;l.params.scrollbar=oe(l,l.originalParams.scrollbar,l.params.scrollbar,{el:"swiper-scrollbar"});const Ae=l.params.scrollbar;if(!Ae.el)return;let Pe=h(Ae.el);l.params.uniqueNavElements&&typeof Ae.el=="string"&&Pe.length>1&&qe.find(Ae.el).length===1&&(Pe=qe.find(Ae.el)),Pe.addClass(l.isHorizontal()?Ae.horizontalClass:Ae.verticalClass);let Ge=Pe.find(`.${l.params.scrollbar.dragClass}`);Ge.length===0&&(Ge=h(`<div class="${l.params.scrollbar.dragClass}"></div>`),Pe.append(Ge)),Object.assign(Ne,{$el:Pe,el:Pe[0],$dragEl:Ge,dragEl:Ge[0]}),Ae.draggable&&l.params.scrollbar.el&&l.scrollbar.el&&Te("on"),Pe&&Pe[l.enabled?"removeClass":"addClass"](l.params.scrollbar.lockClass)}function Be(){const Ne=l.params.scrollbar,qe=l.scrollbar.$el;qe&&qe.removeClass(l.isHorizontal()?Ne.horizontalClass:Ne.verticalClass),l.params.scrollbar.el&&l.scrollbar.el&&Te("off")}f({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),l.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},v("init",()=>{l.params.scrollbar.enabled===!1?Ue():(Fe(),X(),H())}),v("update resize observerUpdate lock unlock",()=>{X()}),v("setTranslate",()=>{H()}),v("setTransition",(Ne,qe)=>{(function(Ae){l.params.scrollbar.el&&l.scrollbar.el&&l.scrollbar.$dragEl.transition(Ae)})(qe)}),v("enable disable",()=>{const{$el:Ne}=l.scrollbar;Ne&&Ne[l.enabled?"removeClass":"addClass"](l.params.scrollbar.lockClass)}),v("destroy",()=>{Be()});const Ue=()=>{l.$el.addClass(l.params.scrollbar.scrollbarDisabledClass),l.scrollbar.$el&&l.scrollbar.$el.addClass(l.params.scrollbar.scrollbarDisabledClass),Be()};Object.assign(l.scrollbar,{enable:()=>{l.$el.removeClass(l.params.scrollbar.scrollbarDisabledClass),l.scrollbar.$el&&l.scrollbar.$el.removeClass(l.params.scrollbar.scrollbarDisabledClass),Fe(),X(),H()},disable:Ue,updateSize:X,setTranslate:H,init:Fe,destroy:Be})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({parallax:{enabled:!1}});const x=(T,P)=>{const{rtl:_}=l,R=h(T),F=_?-1:1,S=R.attr("data-swiper-parallax")||"0";let D=R.attr("data-swiper-parallax-x"),H=R.attr("data-swiper-parallax-y");const X=R.attr("data-swiper-parallax-scale"),q=R.attr("data-swiper-parallax-opacity");if(D||H?(D=D||"0",H=H||"0"):l.isHorizontal()?(D=S,H="0"):(H=S,D="0"),D=D.indexOf("%")>=0?parseInt(D,10)*P*F+"%":D*P*F+"px",H=H.indexOf("%")>=0?parseInt(H,10)*P+"%":H*P+"px",q!=null){const W=q-(q-1)*(1-Math.abs(P));R[0].style.opacity=W}if(X==null)R.transform(`translate3d(${D}, ${H}, 0px)`);else{const W=X-(X-1)*(1-Math.abs(P));R.transform(`translate3d(${D}, ${H}, 0px) scale(${W})`)}},w=()=>{const{$el:T,slides:P,progress:_,snapGrid:R}=l;T.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(F=>{x(F,_)}),P.each((F,S)=>{let D=F.progress;l.params.slidesPerGroup>1&&l.params.slidesPerView!=="auto"&&(D+=Math.ceil(S/2)-_*(R.length-1)),D=Math.min(Math.max(D,-1),1),h(F).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(H=>{x(H,D)})})};v("beforeInit",()=>{l.params.parallax.enabled&&(l.params.watchSlidesProgress=!0,l.originalParams.watchSlidesProgress=!0)}),v("init",()=>{l.params.parallax.enabled&&w()}),v("setTranslate",()=>{l.params.parallax.enabled&&w()}),v("setTransition",(T,P)=>{l.params.parallax.enabled&&function(_){_===void 0&&(_=l.params.speed);const{$el:R}=l;R.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(F=>{const S=h(F);let D=parseInt(S.attr("data-swiper-parallax-duration"),10)||_;_===0&&(D=0),S.transition(D)})}(P)})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;const w=r();f({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),l.zoom={enabled:!1};let T,P,_,R=1,F=!1;const S={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},D={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},H={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let X=1;function q(N){if(N.targetTouches.length<2)return 1;const Y=N.targetTouches[0].pageX,ie=N.targetTouches[0].pageY,xe=N.targetTouches[1].pageX,be=N.targetTouches[1].pageY;return Math.sqrt((xe-Y)**2+(be-ie)**2)}function W(N){const Y=l.support,ie=l.params.zoom;if(P=!1,_=!1,!Y.gestures){if(N.type!=="touchstart"||N.type==="touchstart"&&N.targetTouches.length<2)return;P=!0,S.scaleStart=q(N)}S.$slideEl&&S.$slideEl.length||(S.$slideEl=h(N.target).closest(`.${l.params.slideClass}`),S.$slideEl.length===0&&(S.$slideEl=l.slides.eq(l.activeIndex)),S.$imageEl=S.$slideEl.find(`.${ie.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),S.$imageWrapEl=S.$imageEl.parent(`.${ie.containerClass}`),S.maxRatio=S.$imageWrapEl.attr("data-swiper-zoom")||ie.maxRatio,S.$imageWrapEl.length!==0)?(S.$imageEl&&S.$imageEl.transition(0),F=!0):S.$imageEl=void 0}function de(N){const Y=l.support,ie=l.params.zoom,xe=l.zoom;if(!Y.gestures){if(N.type!=="touchmove"||N.type==="touchmove"&&N.targetTouches.length<2)return;_=!0,S.scaleMove=q(N)}S.$imageEl&&S.$imageEl.length!==0?(Y.gestures?xe.scale=N.scale*R:xe.scale=S.scaleMove/S.scaleStart*R,xe.scale>S.maxRatio&&(xe.scale=S.maxRatio-1+(xe.scale-S.maxRatio+1)**.5),xe.scale<ie.minRatio&&(xe.scale=ie.minRatio+1-(ie.minRatio-xe.scale+1)**.5),S.$imageEl.transform(`translate3d(0,0,0) scale(${xe.scale})`)):N.type==="gesturechange"&&W(N)}function ge(N){const Y=l.device,ie=l.support,xe=l.params.zoom,be=l.zoom;if(!ie.gestures){if(!P||!_||N.type!=="touchend"||N.type==="touchend"&&N.changedTouches.length<2&&!Y.android)return;P=!1,_=!1}S.$imageEl&&S.$imageEl.length!==0&&(be.scale=Math.max(Math.min(be.scale,S.maxRatio),xe.minRatio),S.$imageEl.transition(l.params.speed).transform(`translate3d(0,0,0) scale(${be.scale})`),R=be.scale,F=!1,be.scale===1&&(S.$slideEl=void 0))}function ve(N){const Y=l.zoom;if(!S.$imageEl||S.$imageEl.length===0||(l.allowClick=!1,!D.isTouched||!S.$slideEl))return;D.isMoved||(D.width=S.$imageEl[0].offsetWidth,D.height=S.$imageEl[0].offsetHeight,D.startX=g(S.$imageWrapEl[0],"x")||0,D.startY=g(S.$imageWrapEl[0],"y")||0,S.slideWidth=S.$slideEl[0].offsetWidth,S.slideHeight=S.$slideEl[0].offsetHeight,S.$imageWrapEl.transition(0));const ie=D.width*Y.scale,xe=D.height*Y.scale;if(!(ie<S.slideWidth&&xe<S.slideHeight)){if(D.minX=Math.min(S.slideWidth/2-ie/2,0),D.maxX=-D.minX,D.minY=Math.min(S.slideHeight/2-xe/2,0),D.maxY=-D.minY,D.touchesCurrent.x=N.type==="touchmove"?N.targetTouches[0].pageX:N.pageX,D.touchesCurrent.y=N.type==="touchmove"?N.targetTouches[0].pageY:N.pageY,!D.isMoved&&!F&&(l.isHorizontal()&&(Math.floor(D.minX)===Math.floor(D.startX)&&D.touchesCurrent.x<D.touchesStart.x||Math.floor(D.maxX)===Math.floor(D.startX)&&D.touchesCurrent.x>D.touchesStart.x)||!l.isHorizontal()&&(Math.floor(D.minY)===Math.floor(D.startY)&&D.touchesCurrent.y<D.touchesStart.y||Math.floor(D.maxY)===Math.floor(D.startY)&&D.touchesCurrent.y>D.touchesStart.y)))return void(D.isTouched=!1);N.cancelable&&N.preventDefault(),N.stopPropagation(),D.isMoved=!0,D.currentX=D.touchesCurrent.x-D.touchesStart.x+D.startX,D.currentY=D.touchesCurrent.y-D.touchesStart.y+D.startY,D.currentX<D.minX&&(D.currentX=D.minX+1-(D.minX-D.currentX+1)**.8),D.currentX>D.maxX&&(D.currentX=D.maxX-1+(D.currentX-D.maxX+1)**.8),D.currentY<D.minY&&(D.currentY=D.minY+1-(D.minY-D.currentY+1)**.8),D.currentY>D.maxY&&(D.currentY=D.maxY-1+(D.currentY-D.maxY+1)**.8),H.prevPositionX||(H.prevPositionX=D.touchesCurrent.x),H.prevPositionY||(H.prevPositionY=D.touchesCurrent.y),H.prevTime||(H.prevTime=Date.now()),H.x=(D.touchesCurrent.x-H.prevPositionX)/(Date.now()-H.prevTime)/2,H.y=(D.touchesCurrent.y-H.prevPositionY)/(Date.now()-H.prevTime)/2,Math.abs(D.touchesCurrent.x-H.prevPositionX)<2&&(H.x=0),Math.abs(D.touchesCurrent.y-H.prevPositionY)<2&&(H.y=0),H.prevPositionX=D.touchesCurrent.x,H.prevPositionY=D.touchesCurrent.y,H.prevTime=Date.now(),S.$imageWrapEl.transform(`translate3d(${D.currentX}px, ${D.currentY}px,0)`)}}function Te(){const N=l.zoom;S.$slideEl&&l.previousIndex!==l.activeIndex&&(S.$imageEl&&S.$imageEl.transform("translate3d(0,0,0) scale(1)"),S.$imageWrapEl&&S.$imageWrapEl.transform("translate3d(0,0,0)"),N.scale=1,R=1,S.$slideEl=void 0,S.$imageEl=void 0,S.$imageWrapEl=void 0)}function Fe(N){const Y=l.zoom,ie=l.params.zoom;if(S.$slideEl||(N&&N.target&&(S.$slideEl=h(N.target).closest(`.${l.params.slideClass}`)),S.$slideEl||(l.params.virtual&&l.params.virtual.enabled&&l.virtual?S.$slideEl=l.$wrapperEl.children(`.${l.params.slideActiveClass}`):S.$slideEl=l.slides.eq(l.activeIndex)),S.$imageEl=S.$slideEl.find(`.${ie.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),S.$imageWrapEl=S.$imageEl.parent(`.${ie.containerClass}`)),!S.$imageEl||S.$imageEl.length===0||!S.$imageWrapEl||S.$imageWrapEl.length===0)return;let xe,be,$e,Ye,je,et,ht,lt,dt,ut,si,pi,ei,Rt,kt,ri,ai,gt;l.params.cssMode&&(l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.touchAction="none"),S.$slideEl.addClass(`${ie.zoomedSlideClass}`),D.touchesStart.x===void 0&&N?(xe=N.type==="touchend"?N.changedTouches[0].pageX:N.pageX,be=N.type==="touchend"?N.changedTouches[0].pageY:N.pageY):(xe=D.touchesStart.x,be=D.touchesStart.y),Y.scale=S.$imageWrapEl.attr("data-swiper-zoom")||ie.maxRatio,R=S.$imageWrapEl.attr("data-swiper-zoom")||ie.maxRatio,N?(ai=S.$slideEl[0].offsetWidth,gt=S.$slideEl[0].offsetHeight,$e=S.$slideEl.offset().left+w.scrollX,Ye=S.$slideEl.offset().top+w.scrollY,je=$e+ai/2-xe,et=Ye+gt/2-be,dt=S.$imageEl[0].offsetWidth,ut=S.$imageEl[0].offsetHeight,si=dt*Y.scale,pi=ut*Y.scale,ei=Math.min(ai/2-si/2,0),Rt=Math.min(gt/2-pi/2,0),kt=-ei,ri=-Rt,ht=je*Y.scale,lt=et*Y.scale,ht<ei&&(ht=ei),ht>kt&&(ht=kt),lt<Rt&&(lt=Rt),lt>ri&&(lt=ri)):(ht=0,lt=0),S.$imageWrapEl.transition(300).transform(`translate3d(${ht}px, ${lt}px,0)`),S.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${Y.scale})`)}function Be(){const N=l.zoom,Y=l.params.zoom;S.$slideEl||(l.params.virtual&&l.params.virtual.enabled&&l.virtual?S.$slideEl=l.$wrapperEl.children(`.${l.params.slideActiveClass}`):S.$slideEl=l.slides.eq(l.activeIndex),S.$imageEl=S.$slideEl.find(`.${Y.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),S.$imageWrapEl=S.$imageEl.parent(`.${Y.containerClass}`)),S.$imageEl&&S.$imageEl.length!==0&&S.$imageWrapEl&&S.$imageWrapEl.length!==0&&(l.params.cssMode&&(l.wrapperEl.style.overflow="",l.wrapperEl.style.touchAction=""),N.scale=1,R=1,S.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),S.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),S.$slideEl.removeClass(`${Y.zoomedSlideClass}`),S.$slideEl=void 0)}function Ue(N){const Y=l.zoom;Y.scale&&Y.scale!==1?Be():Fe(N)}function Ne(){const N=l.support;return{passiveListener:!(l.touchEvents.start!=="touchstart"||!N.passiveListener||!l.params.passiveListeners)&&{passive:!0,capture:!1},activeListenerWithCapture:!N.passiveListener||{passive:!1,capture:!0}}}function qe(){return`.${l.params.slideClass}`}function Ae(N){const{passiveListener:Y}=Ne(),ie=qe();l.$wrapperEl[N]("gesturestart",ie,W,Y),l.$wrapperEl[N]("gesturechange",ie,de,Y),l.$wrapperEl[N]("gestureend",ie,ge,Y)}function Pe(){T||(T=!0,Ae("on"))}function Ge(){T&&(T=!1,Ae("off"))}function se(){const N=l.zoom;if(N.enabled)return;N.enabled=!0;const Y=l.support,{passiveListener:ie,activeListenerWithCapture:xe}=Ne(),be=qe();Y.gestures?(l.$wrapperEl.on(l.touchEvents.start,Pe,ie),l.$wrapperEl.on(l.touchEvents.end,Ge,ie)):l.touchEvents.start==="touchstart"&&(l.$wrapperEl.on(l.touchEvents.start,be,W,ie),l.$wrapperEl.on(l.touchEvents.move,be,de,xe),l.$wrapperEl.on(l.touchEvents.end,be,ge,ie),l.touchEvents.cancel&&l.$wrapperEl.on(l.touchEvents.cancel,be,ge,ie)),l.$wrapperEl.on(l.touchEvents.move,`.${l.params.zoom.containerClass}`,ve,xe)}function we(){const N=l.zoom;if(!N.enabled)return;const Y=l.support;N.enabled=!1;const{passiveListener:ie,activeListenerWithCapture:xe}=Ne(),be=qe();Y.gestures?(l.$wrapperEl.off(l.touchEvents.start,Pe,ie),l.$wrapperEl.off(l.touchEvents.end,Ge,ie)):l.touchEvents.start==="touchstart"&&(l.$wrapperEl.off(l.touchEvents.start,be,W,ie),l.$wrapperEl.off(l.touchEvents.move,be,de,xe),l.$wrapperEl.off(l.touchEvents.end,be,ge,ie),l.touchEvents.cancel&&l.$wrapperEl.off(l.touchEvents.cancel,be,ge,ie)),l.$wrapperEl.off(l.touchEvents.move,`.${l.params.zoom.containerClass}`,ve,xe)}Object.defineProperty(l.zoom,"scale",{get:()=>X,set(N){if(X!==N){const Y=S.$imageEl?S.$imageEl[0]:void 0,ie=S.$slideEl?S.$slideEl[0]:void 0;x("zoomChange",N,Y,ie)}X=N}}),v("init",()=>{l.params.zoom.enabled&&se()}),v("destroy",()=>{we()}),v("touchStart",(N,Y)=>{l.zoom.enabled&&function(ie){const xe=l.device;S.$imageEl&&S.$imageEl.length!==0&&(D.isTouched||(xe.android&&ie.cancelable&&ie.preventDefault(),D.isTouched=!0,D.touchesStart.x=ie.type==="touchstart"?ie.targetTouches[0].pageX:ie.pageX,D.touchesStart.y=ie.type==="touchstart"?ie.targetTouches[0].pageY:ie.pageY))}(Y)}),v("touchEnd",(N,Y)=>{l.zoom.enabled&&function(){const ie=l.zoom;if(!S.$imageEl||S.$imageEl.length===0)return;if(!D.isTouched||!D.isMoved)return D.isTouched=!1,void(D.isMoved=!1);D.isTouched=!1,D.isMoved=!1;let xe=300,be=300;const $e=H.x*xe,Ye=D.currentX+$e,je=H.y*be,et=D.currentY+je;H.x!==0&&(xe=Math.abs((Ye-D.currentX)/H.x)),H.y!==0&&(be=Math.abs((et-D.currentY)/H.y));const ht=Math.max(xe,be);D.currentX=Ye,D.currentY=et;const lt=D.width*ie.scale,dt=D.height*ie.scale;D.minX=Math.min(S.slideWidth/2-lt/2,0),D.maxX=-D.minX,D.minY=Math.min(S.slideHeight/2-dt/2,0),D.maxY=-D.minY,D.currentX=Math.max(Math.min(D.currentX,D.maxX),D.minX),D.currentY=Math.max(Math.min(D.currentY,D.maxY),D.minY),S.$imageWrapEl.transition(ht).transform(`translate3d(${D.currentX}px, ${D.currentY}px,0)`)}()}),v("doubleTap",(N,Y)=>{!l.animating&&l.params.zoom.enabled&&l.zoom.enabled&&l.params.zoom.toggle&&Ue(Y)}),v("transitionEnd",()=>{l.zoom.enabled&&l.params.zoom.enabled&&Te()}),v("slideChange",()=>{l.zoom.enabled&&l.params.zoom.enabled&&l.params.cssMode&&Te()}),Object.assign(l.zoom,{enable:se,disable:we,in:Fe,out:Be,toggle:Ue})},function(p){let{swiper:l,extendParams:f,on:v,emit:x}=p;f({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),l.lazy={};let w=!1,T=!1;function P(F,S){S===void 0&&(S=!0);const D=l.params.lazy;if(F===void 0||l.slides.length===0)return;const H=l.virtual&&l.params.virtual.enabled?l.$wrapperEl.children(`.${l.params.slideClass}[data-swiper-slide-index="${F}"]`):l.slides.eq(F),X=H.find(`.${D.elementClass}:not(.${D.loadedClass}):not(.${D.loadingClass})`);!H.hasClass(D.elementClass)||H.hasClass(D.loadedClass)||H.hasClass(D.loadingClass)||X.push(H[0]),X.length!==0&&X.each(q=>{const W=h(q);W.addClass(D.loadingClass);const de=W.attr("data-background"),ge=W.attr("data-src"),ve=W.attr("data-srcset"),Te=W.attr("data-sizes"),Fe=W.parent("picture");l.loadImage(W[0],ge||de,ve,Te,!1,()=>{if(l!=null&&l&&(!l||l.params)&&!l.destroyed){if(de?(W.css("background-image",`url("${de}")`),W.removeAttr("data-background")):(ve&&(W.attr("srcset",ve),W.removeAttr("data-srcset")),Te&&(W.attr("sizes",Te),W.removeAttr("data-sizes")),Fe.length&&Fe.children("source").each(Be=>{const Ue=h(Be);Ue.attr("data-srcset")&&(Ue.attr("srcset",Ue.attr("data-srcset")),Ue.removeAttr("data-srcset"))}),ge&&(W.attr("src",ge),W.removeAttr("data-src"))),W.addClass(D.loadedClass).removeClass(D.loadingClass),H.find(`.${D.preloaderClass}`).remove(),l.params.loop&&S){const Be=H.attr("data-swiper-slide-index");H.hasClass(l.params.slideDuplicateClass)?P(l.$wrapperEl.children(`[data-swiper-slide-index="${Be}"]:not(.${l.params.slideDuplicateClass})`).index(),!1):P(l.$wrapperEl.children(`.${l.params.slideDuplicateClass}[data-swiper-slide-index="${Be}"]`).index(),!1)}x("lazyImageReady",H[0],W[0]),l.params.autoHeight&&l.updateAutoHeight()}}),x("lazyImageLoad",H[0],W[0])})}function _(){const{$wrapperEl:F,params:S,slides:D,activeIndex:H}=l,X=l.virtual&&S.virtual.enabled,q=S.lazy;let W=S.slidesPerView;function de(ve){if(X){if(F.children(`.${S.slideClass}[data-swiper-slide-index="${ve}"]`).length)return!0}else if(D[ve])return!0;return!1}function ge(ve){return X?h(ve).attr("data-swiper-slide-index"):h(ve).index()}if(W==="auto"&&(W=0),T||(T=!0),l.params.watchSlidesProgress)F.children(`.${S.slideVisibleClass}`).each(ve=>{P(X?h(ve).attr("data-swiper-slide-index"):h(ve).index())});else if(W>1)for(let ve=H;ve<H+W;ve+=1)de(ve)&&P(ve);else P(H);if(q.loadPrevNext)if(W>1||q.loadPrevNextAmount&&q.loadPrevNextAmount>1){const ve=q.loadPrevNextAmount,Te=Math.ceil(W),Fe=Math.min(H+Te+Math.max(ve,Te),D.length),Be=Math.max(H-Math.max(Te,ve),0);for(let Ue=H+Te;Ue<Fe;Ue+=1)de(Ue)&&P(Ue);for(let Ue=Be;Ue<H;Ue+=1)de(Ue)&&P(Ue)}else{const ve=F.children(`.${S.slideNextClass}`);ve.length>0&&P(ge(ve));const Te=F.children(`.${S.slidePrevClass}`);Te.length>0&&P(ge(Te))}}function R(){const F=r();if(!l||l.destroyed)return;const S=l.params.lazy.scrollingElement?h(l.params.lazy.scrollingElement):h(F),D=S[0]===F,H=D?F.innerWidth:S[0].offsetWidth,X=D?F.innerHeight:S[0].offsetHeight,q=l.$el.offset(),{rtlTranslate:W}=l;let de=!1;W&&(q.left-=l.$el[0].scrollLeft);const ge=[[q.left,q.top],[q.left+l.width,q.top],[q.left,q.top+l.height],[q.left+l.width,q.top+l.height]];for(let Te=0;Te<ge.length;Te+=1){const Fe=ge[Te];if(Fe[0]>=0&&Fe[0]<=H&&Fe[1]>=0&&Fe[1]<=X){if(Fe[0]===0&&Fe[1]===0)continue;de=!0}}const ve=!(l.touchEvents.start!=="touchstart"||!l.support.passiveListener||!l.params.passiveListeners)&&{passive:!0,capture:!1};de?(_(),S.off("scroll",R,ve)):w||(w=!0,S.on("scroll",R,ve))}v("beforeInit",()=>{l.params.lazy.enabled&&l.params.preloadImages&&(l.params.preloadImages=!1)}),v("init",()=>{l.params.lazy.enabled&&(l.params.lazy.checkInView?R():_())}),v("scroll",()=>{l.params.freeMode&&l.params.freeMode.enabled&&!l.params.freeMode.sticky&&_()}),v("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{l.params.lazy.enabled&&(l.params.lazy.checkInView?R():_())}),v("transitionStart",()=>{l.params.lazy.enabled&&(l.params.lazy.loadOnTransitionStart||!l.params.lazy.loadOnTransitionStart&&!T)&&(l.params.lazy.checkInView?R():_())}),v("transitionEnd",()=>{l.params.lazy.enabled&&!l.params.lazy.loadOnTransitionStart&&(l.params.lazy.checkInView?R():_())}),v("slideChange",()=>{const{lazy:F,cssMode:S,watchSlidesProgress:D,touchReleaseOnEdges:H,resistanceRatio:X}=l.params;F.enabled&&(S||D&&(H||X===0))&&_()}),v("destroy",()=>{l.$el&&l.$el.find(`.${l.params.lazy.loadingClass}`).removeClass(l.params.lazy.loadingClass)}),Object.assign(l.lazy,{load:_,loadInSlide:P})},function(p){let{swiper:l,extendParams:f,on:v}=p;function x(T,P){const _=function(){let S,D,H;return(X,q)=>{for(D=-1,S=X.length;S-D>1;)H=S+D>>1,X[H]<=q?D=H:S=H;return S}}();let R,F;return this.x=T,this.y=P,this.lastIndex=T.length-1,this.interpolate=function(S){return S?(F=_(this.x,S),R=F-1,(S-this.x[R])*(this.y[F]-this.y[R])/(this.x[F]-this.x[R])+this.y[R]):0},this}function w(){l.controller.control&&l.controller.spline&&(l.controller.spline=void 0,delete l.controller.spline)}f({controller:{control:void 0,inverse:!1,by:"slide"}}),l.controller={control:void 0},v("beforeInit",()=>{l.controller.control=l.params.controller.control}),v("update",()=>{w()}),v("resize",()=>{w()}),v("observerUpdate",()=>{w()}),v("setTranslate",(T,P,_)=>{l.controller.control&&l.controller.setTranslate(P,_)}),v("setTransition",(T,P,_)=>{l.controller.control&&l.controller.setTransition(P,_)}),Object.assign(l.controller,{setTranslate:function(T,P){const _=l.controller.control;let R,F;const S=l.constructor;function D(H){const X=l.rtlTranslate?-l.translate:l.translate;l.params.controller.by==="slide"&&(function(q){l.controller.spline||(l.controller.spline=l.params.loop?new x(l.slidesGrid,q.slidesGrid):new x(l.snapGrid,q.snapGrid))}(H),F=-l.controller.spline.interpolate(-X)),F&&l.params.controller.by!=="container"||(R=(H.maxTranslate()-H.minTranslate())/(l.maxTranslate()-l.minTranslate()),F=(X-l.minTranslate())*R+H.minTranslate()),l.params.controller.inverse&&(F=H.maxTranslate()-F),H.updateProgress(F),H.setTranslate(F,l),H.updateActiveIndex(),H.updateSlidesClasses()}if(Array.isArray(_))for(let H=0;H<_.length;H+=1)_[H]!==P&&_[H]instanceof S&&D(_[H]);else _ instanceof S&&P!==_&&D(_)},setTransition:function(T,P){const _=l.constructor,R=l.controller.control;let F;function S(D){D.setTransition(T,l),T!==0&&(D.transitionStart(),D.params.autoHeight&&u(()=>{D.updateAutoHeight()}),D.$wrapperEl.transitionEnd(()=>{R&&(D.params.loop&&l.params.controller.by==="slide"&&D.loopFix(),D.transitionEnd())}))}if(Array.isArray(R))for(F=0;F<R.length;F+=1)R[F]!==P&&R[F]instanceof _&&S(R[F]);else R instanceof _&&P!==R&&S(R)}})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),l.a11y={clicked:!1};let x=null;function w(Be){const Ue=x;Ue.length!==0&&(Ue.html(""),Ue.html(Be))}function T(Be){Be.attr("tabIndex","0")}function P(Be){Be.attr("tabIndex","-1")}function _(Be,Ue){Be.attr("role",Ue)}function R(Be,Ue){Be.attr("aria-roledescription",Ue)}function F(Be,Ue){Be.attr("aria-label",Ue)}function S(Be){Be.attr("aria-disabled",!0)}function D(Be){Be.attr("aria-disabled",!1)}function H(Be){if(Be.keyCode!==13&&Be.keyCode!==32)return;const Ue=l.params.a11y,Ne=h(Be.target);l.navigation&&l.navigation.$nextEl&&Ne.is(l.navigation.$nextEl)&&(l.isEnd&&!l.params.loop||l.slideNext(),l.isEnd?w(Ue.lastSlideMessage):w(Ue.nextSlideMessage)),l.navigation&&l.navigation.$prevEl&&Ne.is(l.navigation.$prevEl)&&(l.isBeginning&&!l.params.loop||l.slidePrev(),l.isBeginning?w(Ue.firstSlideMessage):w(Ue.prevSlideMessage)),l.pagination&&Ne.is(ne(l.params.pagination.bulletClass))&&Ne[0].click()}function X(){return l.pagination&&l.pagination.bullets&&l.pagination.bullets.length}function q(){return X()&&l.params.pagination.clickable}const W=(Be,Ue,Ne)=>{T(Be),Be[0].tagName!=="BUTTON"&&(_(Be,"button"),Be.on("keydown",H)),F(Be,Ne),function(qe,Ae){qe.attr("aria-controls",Ae)}(Be,Ue)},de=()=>{l.a11y.clicked=!0},ge=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{l.destroyed||(l.a11y.clicked=!1)})})},ve=Be=>{if(l.a11y.clicked)return;const Ue=Be.target.closest(`.${l.params.slideClass}`);if(!Ue||!l.slides.includes(Ue))return;const Ne=l.slides.indexOf(Ue)===l.activeIndex,qe=l.params.watchSlidesProgress&&l.visibleSlides&&l.visibleSlides.includes(Ue);Ne||qe||Be.sourceCapabilities&&Be.sourceCapabilities.firesTouchEvents||(l.isHorizontal()?l.el.scrollLeft=0:l.el.scrollTop=0,l.slideTo(l.slides.indexOf(Ue),0))},Te=()=>{const Be=l.params.a11y;Be.itemRoleDescriptionMessage&&R(h(l.slides),Be.itemRoleDescriptionMessage),Be.slideRole&&_(h(l.slides),Be.slideRole);const Ue=l.params.loop?l.slides.filter(Ne=>!Ne.classList.contains(l.params.slideDuplicateClass)).length:l.slides.length;Be.slideLabelMessage&&l.slides.each((Ne,qe)=>{const Ae=h(Ne),Pe=l.params.loop?parseInt(Ae.attr("data-swiper-slide-index"),10):qe;F(Ae,Be.slideLabelMessage.replace(/\{\{index\}\}/,Pe+1).replace(/\{\{slidesLength\}\}/,Ue))})},Fe=()=>{const Be=l.params.a11y;l.$el.append(x);const Ue=l.$el;Be.containerRoleDescriptionMessage&&R(Ue,Be.containerRoleDescriptionMessage),Be.containerMessage&&F(Ue,Be.containerMessage);const Ne=l.$wrapperEl,qe=Be.id||Ne.attr("id")||`swiper-wrapper-${Ae=16,Ae===void 0&&(Ae=16),"x".repeat(Ae).replace(/x/g,()=>Math.round(16*Math.random()).toString(16))}`;var Ae;const Pe=l.params.autoplay&&l.params.autoplay.enabled?"off":"polite";var Ge;let se,we;Ge=qe,Ne.attr("id",Ge),function(N,Y){N.attr("aria-live",Y)}(Ne,Pe),Te(),l.navigation&&l.navigation.$nextEl&&(se=l.navigation.$nextEl),l.navigation&&l.navigation.$prevEl&&(we=l.navigation.$prevEl),se&&se.length&&W(se,qe,Be.nextSlideMessage),we&&we.length&&W(we,qe,Be.prevSlideMessage),q()&&l.pagination.$el.on("keydown",ne(l.params.pagination.bulletClass),H),l.$el.on("focus",ve,!0),l.$el.on("pointerdown",de,!0),l.$el.on("pointerup",ge,!0)};v("beforeInit",()=>{x=h(`<span class="${l.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),v("afterInit",()=>{l.params.a11y.enabled&&Fe()}),v("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{l.params.a11y.enabled&&Te()}),v("fromEdge toEdge afterInit lock unlock",()=>{l.params.a11y.enabled&&function(){if(l.params.loop||l.params.rewind||!l.navigation)return;const{$nextEl:Be,$prevEl:Ue}=l.navigation;Ue&&Ue.length>0&&(l.isBeginning?(S(Ue),P(Ue)):(D(Ue),T(Ue))),Be&&Be.length>0&&(l.isEnd?(S(Be),P(Be)):(D(Be),T(Be)))}()}),v("paginationUpdate",()=>{l.params.a11y.enabled&&function(){const Be=l.params.a11y;X()&&l.pagination.bullets.each(Ue=>{const Ne=h(Ue);l.params.pagination.clickable&&(T(Ne),l.params.pagination.renderBullet||(_(Ne,"button"),F(Ne,Be.paginationBulletMessage.replace(/\{\{index\}\}/,Ne.index()+1)))),Ne.is(`.${l.params.pagination.bulletActiveClass}`)?Ne.attr("aria-current","true"):Ne.removeAttr("aria-current")})}()}),v("destroy",()=>{l.params.a11y.enabled&&function(){let Be,Ue;x&&x.length>0&&x.remove(),l.navigation&&l.navigation.$nextEl&&(Be=l.navigation.$nextEl),l.navigation&&l.navigation.$prevEl&&(Ue=l.navigation.$prevEl),Be&&Be.off("keydown",H),Ue&&Ue.off("keydown",H),q()&&l.pagination.$el.off("keydown",ne(l.params.pagination.bulletClass),H),l.$el.off("focus",ve,!0),l.$el.off("pointerdown",de,!0),l.$el.off("pointerup",ge,!0)}()})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let x=!1,w={};const T=S=>S.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),P=S=>{const D=r();let H;H=S?new URL(S):D.location;const X=H.pathname.slice(1).split("/").filter(W=>W!==""),q=X.length;return{key:X[q-2],value:X[q-1]}},_=(S,D)=>{const H=r();if(!x||!l.params.history.enabled)return;let X;X=l.params.url?new URL(l.params.url):H.location;const q=l.slides.eq(D);let W=T(q.attr("data-history"));if(l.params.history.root.length>0){let ge=l.params.history.root;ge[ge.length-1]==="/"&&(ge=ge.slice(0,ge.length-1)),W=`${ge}/${S}/${W}`}else X.pathname.includes(S)||(W=`${S}/${W}`);l.params.history.keepQuery&&(W+=X.search);const de=H.history.state;de&&de.value===W||(l.params.history.replaceState?H.history.replaceState({value:W},null,W):H.history.pushState({value:W},null,W))},R=(S,D,H)=>{if(D)for(let X=0,q=l.slides.length;X<q;X+=1){const W=l.slides.eq(X);if(T(W.attr("data-history"))===D&&!W.hasClass(l.params.slideDuplicateClass)){const de=W.index();l.slideTo(de,S,H)}}else l.slideTo(0,S,H)},F=()=>{w=P(l.params.url),R(l.params.speed,w.value,!1)};v("init",()=>{l.params.history.enabled&&(()=>{const S=r();if(l.params.history){if(!S.history||!S.history.pushState)return l.params.history.enabled=!1,void(l.params.hashNavigation.enabled=!0);x=!0,w=P(l.params.url),(w.key||w.value)&&(R(0,w.value,l.params.runCallbacksOnInit),l.params.history.replaceState||S.addEventListener("popstate",F))}})()}),v("destroy",()=>{l.params.history.enabled&&(()=>{const S=r();l.params.history.replaceState||S.removeEventListener("popstate",F)})()}),v("transitionEnd _freeModeNoMomentumRelease",()=>{x&&_(l.params.history.key,l.activeIndex)}),v("slideChange",()=>{x&&l.params.cssMode&&_(l.params.history.key,l.activeIndex)})},function(p){let{swiper:l,extendParams:f,emit:v,on:x}=p,w=!1;const T=i(),P=r();f({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}});const _=()=>{v("hashChange");const F=T.location.hash.replace("#","");if(F!==l.slides.eq(l.activeIndex).attr("data-hash")){const S=l.$wrapperEl.children(`.${l.params.slideClass}[data-hash="${F}"]`).index();if(S===void 0)return;l.slideTo(S)}},R=()=>{if(w&&l.params.hashNavigation.enabled)if(l.params.hashNavigation.replaceState&&P.history&&P.history.replaceState)P.history.replaceState(null,null,`#${l.slides.eq(l.activeIndex).attr("data-hash")}`||""),v("hashSet");else{const F=l.slides.eq(l.activeIndex),S=F.attr("data-hash")||F.attr("data-history");T.location.hash=S||"",v("hashSet")}};x("init",()=>{l.params.hashNavigation.enabled&&(()=>{if(!l.params.hashNavigation.enabled||l.params.history&&l.params.history.enabled)return;w=!0;const F=T.location.hash.replace("#","");if(F)for(let D=0,H=l.slides.length;D<H;D+=1){const X=l.slides.eq(D);if((X.attr("data-hash")||X.attr("data-history"))===F&&!X.hasClass(l.params.slideDuplicateClass)){const q=X.index();l.slideTo(q,0,l.params.runCallbacksOnInit,!0)}}l.params.hashNavigation.watchState&&h(P).on("hashchange",_)})()}),x("destroy",()=>{l.params.hashNavigation.enabled&&l.params.hashNavigation.watchState&&h(P).off("hashchange",_)}),x("transitionEnd _freeModeNoMomentumRelease",()=>{w&&R()}),x("slideChange",()=>{w&&l.params.cssMode&&R()})},function(p){let l,{swiper:f,extendParams:v,on:x,emit:w}=p;function T(){if(!f.size)return f.autoplay.running=!1,void(f.autoplay.paused=!1);const X=f.slides.eq(f.activeIndex);let q=f.params.autoplay.delay;X.attr("data-swiper-autoplay")&&(q=X.attr("data-swiper-autoplay")||f.params.autoplay.delay),clearTimeout(l),l=u(()=>{let W;f.params.autoplay.reverseDirection?f.params.loop?(f.loopFix(),W=f.slidePrev(f.params.speed,!0,!0),w("autoplay")):f.isBeginning?f.params.autoplay.stopOnLastSlide?_():(W=f.slideTo(f.slides.length-1,f.params.speed,!0,!0),w("autoplay")):(W=f.slidePrev(f.params.speed,!0,!0),w("autoplay")):f.params.loop?(f.loopFix(),W=f.slideNext(f.params.speed,!0,!0),w("autoplay")):f.isEnd?f.params.autoplay.stopOnLastSlide?_():(W=f.slideTo(0,f.params.speed,!0,!0),w("autoplay")):(W=f.slideNext(f.params.speed,!0,!0),w("autoplay")),(f.params.cssMode&&f.autoplay.running||W===!1)&&T()},q)}function P(){return l===void 0&&!f.autoplay.running&&(f.autoplay.running=!0,w("autoplayStart"),T(),!0)}function _(){return!!f.autoplay.running&&l!==void 0&&(l&&(clearTimeout(l),l=void 0),f.autoplay.running=!1,w("autoplayStop"),!0)}function R(X){f.autoplay.running&&(f.autoplay.paused||(l&&clearTimeout(l),f.autoplay.paused=!0,X!==0&&f.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach(q=>{f.$wrapperEl[0].addEventListener(q,S)}):(f.autoplay.paused=!1,T())))}function F(){const X=i();X.visibilityState==="hidden"&&f.autoplay.running&&R(),X.visibilityState==="visible"&&f.autoplay.paused&&(T(),f.autoplay.paused=!1)}function S(X){f&&!f.destroyed&&f.$wrapperEl&&X.target===f.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(q=>{f.$wrapperEl[0].removeEventListener(q,S)}),f.autoplay.paused=!1,f.autoplay.running?T():_())}function D(){f.params.autoplay.disableOnInteraction?_():(w("autoplayPause"),R()),["transitionend","webkitTransitionEnd"].forEach(X=>{f.$wrapperEl[0].removeEventListener(X,S)})}function H(){f.params.autoplay.disableOnInteraction||(f.autoplay.paused=!1,w("autoplayResume"),T())}f.autoplay={running:!1,paused:!1},v({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),x("init",()=>{f.params.autoplay.enabled&&(P(),i().addEventListener("visibilitychange",F),f.params.autoplay.pauseOnMouseEnter&&(f.$el.on("mouseenter",D),f.$el.on("mouseleave",H)))}),x("beforeTransitionStart",(X,q,W)=>{f.autoplay.running&&(W||!f.params.autoplay.disableOnInteraction?f.autoplay.pause(q):_())}),x("sliderFirstMove",()=>{f.autoplay.running&&(f.params.autoplay.disableOnInteraction?_():R())}),x("touchEnd",()=>{f.params.cssMode&&f.autoplay.paused&&!f.params.autoplay.disableOnInteraction&&T()}),x("destroy",()=>{f.$el.off("mouseenter",D),f.$el.off("mouseleave",H),f.autoplay.running&&_(),i().removeEventListener("visibilitychange",F)}),Object.assign(f.autoplay,{pause:R,run:T,start:P,stop:_})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let x=!1,w=!1;function T(){const R=l.thumbs.swiper;if(!R||R.destroyed)return;const F=R.clickedIndex,S=R.clickedSlide;if(S&&h(S).hasClass(l.params.thumbs.slideThumbActiveClass)||F==null)return;let D;if(D=R.params.loop?parseInt(h(R.clickedSlide).attr("data-swiper-slide-index"),10):F,l.params.loop){let H=l.activeIndex;l.slides.eq(H).hasClass(l.params.slideDuplicateClass)&&(l.loopFix(),l._clientLeft=l.$wrapperEl[0].clientLeft,H=l.activeIndex);const X=l.slides.eq(H).prevAll(`[data-swiper-slide-index="${D}"]`).eq(0).index(),q=l.slides.eq(H).nextAll(`[data-swiper-slide-index="${D}"]`).eq(0).index();D=X===void 0?q:q===void 0?X:q-H<H-X?q:X}l.slideTo(D)}function P(){const{thumbs:R}=l.params;if(x)return!1;x=!0;const F=l.constructor;if(R.swiper instanceof F)l.thumbs.swiper=R.swiper,Object.assign(l.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(l.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1});else if(y(R.swiper)){const S=Object.assign({},R.swiper);Object.assign(S,{watchSlidesProgress:!0,slideToClickedSlide:!1}),l.thumbs.swiper=new F(S),w=!0}return l.thumbs.swiper.$el.addClass(l.params.thumbs.thumbsContainerClass),l.thumbs.swiper.on("tap",T),!0}function _(R){const F=l.thumbs.swiper;if(!F||F.destroyed)return;const S=F.params.slidesPerView==="auto"?F.slidesPerViewDynamic():F.params.slidesPerView;let D=1;const H=l.params.thumbs.slideThumbActiveClass;if(l.params.slidesPerView>1&&!l.params.centeredSlides&&(D=l.params.slidesPerView),l.params.thumbs.multipleActiveThumbs||(D=1),D=Math.floor(D),F.slides.removeClass(H),F.params.loop||F.params.virtual&&F.params.virtual.enabled)for(let W=0;W<D;W+=1)F.$wrapperEl.children(`[data-swiper-slide-index="${l.realIndex+W}"]`).addClass(H);else for(let W=0;W<D;W+=1)F.slides.eq(l.realIndex+W).addClass(H);const X=l.params.thumbs.autoScrollOffset,q=X&&!F.params.loop;if(l.realIndex!==F.realIndex||q){let W,de,ge=F.activeIndex;if(F.params.loop){F.slides.eq(ge).hasClass(F.params.slideDuplicateClass)&&(F.loopFix(),F._clientLeft=F.$wrapperEl[0].clientLeft,ge=F.activeIndex);const ve=F.slides.eq(ge).prevAll(`[data-swiper-slide-index="${l.realIndex}"]`).eq(0).index(),Te=F.slides.eq(ge).nextAll(`[data-swiper-slide-index="${l.realIndex}"]`).eq(0).index();W=ve===void 0?Te:Te===void 0?ve:Te-ge==ge-ve?F.params.slidesPerGroup>1?Te:ge:Te-ge<ge-ve?Te:ve,de=l.activeIndex>l.previousIndex?"next":"prev"}else W=l.realIndex,de=W>l.previousIndex?"next":"prev";q&&(W+=de==="next"?X:-1*X),F.visibleSlidesIndexes&&F.visibleSlidesIndexes.indexOf(W)<0&&(F.params.centeredSlides?W=W>ge?W-Math.floor(S/2)+1:W+Math.floor(S/2)-1:W>ge&&F.params.slidesPerGroup,F.slideTo(W,R?0:void 0))}}l.thumbs={swiper:null},v("beforeInit",()=>{const{thumbs:R}=l.params;R&&R.swiper&&(P(),_(!0))}),v("slideChange update resize observerUpdate",()=>{_()}),v("setTransition",(R,F)=>{const S=l.thumbs.swiper;S&&!S.destroyed&&S.setTransition(F)}),v("beforeDestroy",()=>{const R=l.thumbs.swiper;R&&!R.destroyed&&w&&R.destroy()}),Object.assign(l.thumbs,{init:P,update:_})},function(p){let{swiper:l,extendParams:f,emit:v,once:x}=p;f({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(l,{freeMode:{onTouchStart:function(){const w=l.getTranslate();l.setTranslate(w),l.setTransition(0),l.touchEventsData.velocities.length=0,l.freeMode.onTouchEnd({currentPos:l.rtl?l.translate:-l.translate})},onTouchMove:function(){const{touchEventsData:w,touches:T}=l;w.velocities.length===0&&w.velocities.push({position:T[l.isHorizontal()?"startX":"startY"],time:w.touchStartTime}),w.velocities.push({position:T[l.isHorizontal()?"currentX":"currentY"],time:m()})},onTouchEnd:function(w){let{currentPos:T}=w;const{params:P,$wrapperEl:_,rtlTranslate:R,snapGrid:F,touchEventsData:S}=l,D=m()-S.touchStartTime;if(T<-l.minTranslate())l.slideTo(l.activeIndex);else if(T>-l.maxTranslate())l.slides.length<F.length?l.slideTo(F.length-1):l.slideTo(l.slides.length-1);else{if(P.freeMode.momentum){if(S.velocities.length>1){const Te=S.velocities.pop(),Fe=S.velocities.pop(),Be=Te.position-Fe.position,Ue=Te.time-Fe.time;l.velocity=Be/Ue,l.velocity/=2,Math.abs(l.velocity)<P.freeMode.minimumVelocity&&(l.velocity=0),(Ue>150||m()-Te.time>300)&&(l.velocity=0)}else l.velocity=0;l.velocity*=P.freeMode.momentumVelocityRatio,S.velocities.length=0;let H=1e3*P.freeMode.momentumRatio;const X=l.velocity*H;let q=l.translate+X;R&&(q=-q);let W,de=!1;const ge=20*Math.abs(l.velocity)*P.freeMode.momentumBounceRatio;let ve;if(q<l.maxTranslate())P.freeMode.momentumBounce?(q+l.maxTranslate()<-ge&&(q=l.maxTranslate()-ge),W=l.maxTranslate(),de=!0,S.allowMomentumBounce=!0):q=l.maxTranslate(),P.loop&&P.centeredSlides&&(ve=!0);else if(q>l.minTranslate())P.freeMode.momentumBounce?(q-l.minTranslate()>ge&&(q=l.minTranslate()+ge),W=l.minTranslate(),de=!0,S.allowMomentumBounce=!0):q=l.minTranslate(),P.loop&&P.centeredSlides&&(ve=!0);else if(P.freeMode.sticky){let Te;for(let Fe=0;Fe<F.length;Fe+=1)if(F[Fe]>-q){Te=Fe;break}q=Math.abs(F[Te]-q)<Math.abs(F[Te-1]-q)||l.swipeDirection==="next"?F[Te]:F[Te-1],q=-q}if(ve&&x("transitionEnd",()=>{l.loopFix()}),l.velocity!==0){if(H=Math.abs(R?(-q-l.translate)/l.velocity:(q-l.translate)/l.velocity),P.freeMode.sticky){const Te=Math.abs((R?-q:q)-l.translate),Fe=l.slidesSizesGrid[l.activeIndex];H=Te<Fe?P.speed:Te<2*Fe?1.5*P.speed:2.5*P.speed}}else if(P.freeMode.sticky)return void l.slideToClosest();P.freeMode.momentumBounce&&de?(l.updateProgress(W),l.setTransition(H),l.setTranslate(q),l.transitionStart(!0,l.swipeDirection),l.animating=!0,_.transitionEnd(()=>{l&&!l.destroyed&&S.allowMomentumBounce&&(v("momentumBounce"),l.setTransition(P.speed),setTimeout(()=>{l.setTranslate(W),_.transitionEnd(()=>{l&&!l.destroyed&&l.transitionEnd()})},0))})):l.velocity?(v("_freeModeNoMomentumRelease"),l.updateProgress(q),l.setTransition(H),l.setTranslate(q),l.transitionStart(!0,l.swipeDirection),l.animating||(l.animating=!0,_.transitionEnd(()=>{l&&!l.destroyed&&l.transitionEnd()}))):l.updateProgress(q),l.updateActiveIndex(),l.updateSlidesClasses()}else{if(P.freeMode.sticky)return void l.slideToClosest();P.freeMode&&v("_freeModeNoMomentumRelease")}(!P.freeMode.momentum||D>=P.longSwipesMs)&&(l.updateProgress(),l.updateActiveIndex(),l.updateSlidesClasses())}}}})},function(p){let l,f,v,{swiper:x,extendParams:w}=p;w({grid:{rows:1,fill:"column"}}),x.grid={initSlides:T=>{const{slidesPerView:P}=x.params,{rows:_,fill:R}=x.params.grid;f=l/_,v=Math.floor(T/_),l=Math.floor(T/_)===T/_?T:Math.ceil(T/_)*_,P!=="auto"&&R==="row"&&(l=Math.max(l,P*_))},updateSlide:(T,P,_,R)=>{const{slidesPerGroup:F,spaceBetween:S}=x.params,{rows:D,fill:H}=x.params.grid;let X,q,W;if(H==="row"&&F>1){const de=Math.floor(T/(F*D)),ge=T-D*F*de,ve=de===0?F:Math.min(Math.ceil((_-de*D*F)/D),F);W=Math.floor(ge/ve),q=ge-W*ve+de*F,X=q+W*l/D,P.css({"-webkit-order":X,order:X})}else H==="column"?(q=Math.floor(T/D),W=T-q*D,(q>v||q===v&&W===D-1)&&(W+=1,W>=D&&(W=0,q+=1))):(W=Math.floor(T/f),q=T-W*f);P.css(R("margin-top"),W!==0?S&&`${S}px`:"")},updateWrapperSize:(T,P,_)=>{const{spaceBetween:R,centeredSlides:F,roundLengths:S}=x.params,{rows:D}=x.params.grid;if(x.virtualSize=(T+R)*l,x.virtualSize=Math.ceil(x.virtualSize/D)-R,x.$wrapperEl.css({[_("width")]:`${x.virtualSize+R}px`}),F){P.splice(0,P.length);const H=[];for(let X=0;X<P.length;X+=1){let q=P[X];S&&(q=Math.floor(q)),P[X]<x.virtualSize+P[0]&&H.push(q)}P.push(...H)}}}},function(p){let{swiper:l}=p;Object.assign(l,{appendSlide:Le.bind(l),prependSlide:fe.bind(l),addSlide:Re.bind(l),removeSlide:Je.bind(l),removeAllSlides:Xe.bind(l)})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({fadeEffect:{crossFade:!1,transformEl:null}}),st({effect:"fade",swiper:l,on:v,setTranslate:()=>{const{slides:x}=l,w=l.params.fadeEffect;for(let T=0;T<x.length;T+=1){const P=l.slides.eq(T);let _=-P[0].swiperSlideOffset;l.params.virtualTranslate||(_-=l.translate);let R=0;l.isHorizontal()||(R=_,_=0);const F=l.params.fadeEffect.crossFade?Math.max(1-Math.abs(P[0].progress),0):1+Math.min(Math.max(P[0].progress,-1),0);Ve(w,P).css({opacity:F}).transform(`translate3d(${_}px, ${R}px, 0px)`)}},setTransition:x=>{const{transformEl:w}=l.params.fadeEffect;(w?l.slides.find(w):l.slides).transition(x),rt({swiper:l,duration:x,transformEl:w,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!l.params.cssMode})})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const x=(w,T,P)=>{let _=P?w.find(".swiper-slide-shadow-left"):w.find(".swiper-slide-shadow-top"),R=P?w.find(".swiper-slide-shadow-right"):w.find(".swiper-slide-shadow-bottom");_.length===0&&(_=h(`<div class="swiper-slide-shadow-${P?"left":"top"}"></div>`),w.append(_)),R.length===0&&(R=h(`<div class="swiper-slide-shadow-${P?"right":"bottom"}"></div>`),w.append(R)),_.length&&(_[0].style.opacity=Math.max(-T,0)),R.length&&(R[0].style.opacity=Math.max(T,0))};st({effect:"cube",swiper:l,on:v,setTranslate:()=>{const{$el:w,$wrapperEl:T,slides:P,width:_,height:R,rtlTranslate:F,size:S,browser:D}=l,H=l.params.cubeEffect,X=l.isHorizontal(),q=l.virtual&&l.params.virtual.enabled;let W,de=0;H.shadow&&(X?(W=T.find(".swiper-cube-shadow"),W.length===0&&(W=h('<div class="swiper-cube-shadow"></div>'),T.append(W)),W.css({height:`${_}px`})):(W=w.find(".swiper-cube-shadow"),W.length===0&&(W=h('<div class="swiper-cube-shadow"></div>'),w.append(W))));for(let ve=0;ve<P.length;ve+=1){const Te=P.eq(ve);let Fe=ve;q&&(Fe=parseInt(Te.attr("data-swiper-slide-index"),10));let Be=90*Fe,Ue=Math.floor(Be/360);F&&(Be=-Be,Ue=Math.floor(-Be/360));const Ne=Math.max(Math.min(Te[0].progress,1),-1);let qe=0,Ae=0,Pe=0;Fe%4==0?(qe=4*-Ue*S,Pe=0):(Fe-1)%4==0?(qe=0,Pe=4*-Ue*S):(Fe-2)%4==0?(qe=S+4*Ue*S,Pe=S):(Fe-3)%4==0&&(qe=-S,Pe=3*S+4*S*Ue),F&&(qe=-qe),X||(Ae=qe,qe=0);const Ge=`rotateX(${X?0:-Be}deg) rotateY(${X?Be:0}deg) translate3d(${qe}px, ${Ae}px, ${Pe}px)`;Ne<=1&&Ne>-1&&(de=90*Fe+90*Ne,F&&(de=90*-Fe-90*Ne)),Te.transform(Ge),H.slideShadows&&x(Te,Ne,X)}if(T.css({"-webkit-transform-origin":`50% 50% -${S/2}px`,"transform-origin":`50% 50% -${S/2}px`}),H.shadow)if(X)W.transform(`translate3d(0px, ${_/2+H.shadowOffset}px, ${-_/2}px) rotateX(90deg) rotateZ(0deg) scale(${H.shadowScale})`);else{const ve=Math.abs(de)-90*Math.floor(Math.abs(de)/90),Te=1.5-(Math.sin(2*ve*Math.PI/360)/2+Math.cos(2*ve*Math.PI/360)/2),Fe=H.shadowScale,Be=H.shadowScale/Te,Ue=H.shadowOffset;W.transform(`scale3d(${Fe}, 1, ${Be}) translate3d(0px, ${R/2+Ue}px, ${-R/2/Be}px) rotateX(-90deg)`)}const ge=D.isSafari||D.isWebView?-S/2:0;T.transform(`translate3d(0px,0,${ge}px) rotateX(${l.isHorizontal()?0:de}deg) rotateY(${l.isHorizontal()?-de:0}deg)`),T[0].style.setProperty("--swiper-cube-translate-z",`${ge}px`)},setTransition:w=>{const{$el:T,slides:P}=l;P.transition(w).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(w),l.params.cubeEffect.shadow&&!l.isHorizontal()&&T.find(".swiper-cube-shadow").transition(w)},recreateShadows:()=>{const w=l.isHorizontal();l.slides.each(T=>{const P=Math.max(Math.min(T.progress,1),-1);x(h(T),P,w)})},getEffectParams:()=>l.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({flipEffect:{slideShadows:!0,limitRotation:!0,transformEl:null}});const x=(w,T,P)=>{let _=l.isHorizontal()?w.find(".swiper-slide-shadow-left"):w.find(".swiper-slide-shadow-top"),R=l.isHorizontal()?w.find(".swiper-slide-shadow-right"):w.find(".swiper-slide-shadow-bottom");_.length===0&&(_=Ze(P,w,l.isHorizontal()?"left":"top")),R.length===0&&(R=Ze(P,w,l.isHorizontal()?"right":"bottom")),_.length&&(_[0].style.opacity=Math.max(-T,0)),R.length&&(R[0].style.opacity=Math.max(T,0))};st({effect:"flip",swiper:l,on:v,setTranslate:()=>{const{slides:w,rtlTranslate:T}=l,P=l.params.flipEffect;for(let _=0;_<w.length;_+=1){const R=w.eq(_);let F=R[0].progress;l.params.flipEffect.limitRotation&&(F=Math.max(Math.min(R[0].progress,1),-1));const S=R[0].swiperSlideOffset;let D=-180*F,H=0,X=l.params.cssMode?-S-l.translate:-S,q=0;l.isHorizontal()?T&&(D=-D):(q=X,X=0,H=-D,D=0),R[0].style.zIndex=-Math.abs(Math.round(F))+w.length,P.slideShadows&&x(R,F,P);const W=`translate3d(${X}px, ${q}px, 0px) rotateX(${H}deg) rotateY(${D}deg)`;Ve(P,R).transform(W)}},setTransition:w=>{const{transformEl:T}=l.params.flipEffect;(T?l.slides.find(T):l.slides).transition(w).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(w),rt({swiper:l,duration:w,transformEl:T})},recreateShadows:()=>{const w=l.params.flipEffect;l.slides.each(T=>{const P=h(T);let _=P[0].progress;l.params.flipEffect.limitRotation&&(_=Math.max(Math.min(T.progress,1),-1)),x(P,_,w)})},getEffectParams:()=>l.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!l.params.cssMode})})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0,transformEl:null}}),st({effect:"coverflow",swiper:l,on:v,setTranslate:()=>{const{width:x,height:w,slides:T,slidesSizesGrid:P}=l,_=l.params.coverflowEffect,R=l.isHorizontal(),F=l.translate,S=R?x/2-F:w/2-F,D=R?_.rotate:-_.rotate,H=_.depth;for(let X=0,q=T.length;X<q;X+=1){const W=T.eq(X),de=P[X],ge=(S-W[0].swiperSlideOffset-de/2)/de,ve=typeof _.modifier=="function"?_.modifier(ge):ge*_.modifier;let Te=R?D*ve:0,Fe=R?0:D*ve,Be=-H*Math.abs(ve),Ue=_.stretch;typeof Ue=="string"&&Ue.indexOf("%")!==-1&&(Ue=parseFloat(_.stretch)/100*de);let Ne=R?0:Ue*ve,qe=R?Ue*ve:0,Ae=1-(1-_.scale)*Math.abs(ve);Math.abs(qe)<.001&&(qe=0),Math.abs(Ne)<.001&&(Ne=0),Math.abs(Be)<.001&&(Be=0),Math.abs(Te)<.001&&(Te=0),Math.abs(Fe)<.001&&(Fe=0),Math.abs(Ae)<.001&&(Ae=0);const Pe=`translate3d(${qe}px,${Ne}px,${Be}px)  rotateX(${Fe}deg) rotateY(${Te}deg) scale(${Ae})`;if(Ve(_,W).transform(Pe),W[0].style.zIndex=1-Math.abs(Math.round(ve)),_.slideShadows){let Ge=R?W.find(".swiper-slide-shadow-left"):W.find(".swiper-slide-shadow-top"),se=R?W.find(".swiper-slide-shadow-right"):W.find(".swiper-slide-shadow-bottom");Ge.length===0&&(Ge=Ze(_,W,R?"left":"top")),se.length===0&&(se=Ze(_,W,R?"right":"bottom")),Ge.length&&(Ge[0].style.opacity=ve>0?ve:0),se.length&&(se[0].style.opacity=-ve>0?-ve:0)}}},setTransition:x=>{const{transformEl:w}=l.params.coverflowEffect;(w?l.slides.find(w):l.slides).transition(x).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(x)},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({creativeEffect:{transformEl:null,limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const x=w=>typeof w=="string"?w:`${w}px`;st({effect:"creative",swiper:l,on:v,setTranslate:()=>{const{slides:w,$wrapperEl:T,slidesSizesGrid:P}=l,_=l.params.creativeEffect,{progressMultiplier:R}=_,F=l.params.centeredSlides;if(F){const S=P[0]/2-l.params.slidesOffsetBefore||0;T.transform(`translateX(calc(50% - ${S}px))`)}for(let S=0;S<w.length;S+=1){const D=w.eq(S),H=D[0].progress,X=Math.min(Math.max(D[0].progress,-_.limitProgress),_.limitProgress);let q=X;F||(q=Math.min(Math.max(D[0].originalProgress,-_.limitProgress),_.limitProgress));const W=D[0].swiperSlideOffset,de=[l.params.cssMode?-W-l.translate:-W,0,0],ge=[0,0,0];let ve=!1;l.isHorizontal()||(de[1]=de[0],de[0]=0);let Te={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};X<0?(Te=_.next,ve=!0):X>0&&(Te=_.prev,ve=!0),de.forEach((Pe,Ge)=>{de[Ge]=`calc(${Pe}px + (${x(Te.translate[Ge])} * ${Math.abs(X*R)}))`}),ge.forEach((Pe,Ge)=>{ge[Ge]=Te.rotate[Ge]*Math.abs(X*R)}),D[0].style.zIndex=-Math.abs(Math.round(H))+w.length;const Fe=de.join(", "),Be=`rotateX(${ge[0]}deg) rotateY(${ge[1]}deg) rotateZ(${ge[2]}deg)`,Ue=q<0?`scale(${1+(1-Te.scale)*q*R})`:`scale(${1-(1-Te.scale)*q*R})`,Ne=q<0?1+(1-Te.opacity)*q*R:1-(1-Te.opacity)*q*R,qe=`translate3d(${Fe}) ${Be} ${Ue}`;if(ve&&Te.shadow||!ve){let Pe=D.children(".swiper-slide-shadow");if(Pe.length===0&&Te.shadow&&(Pe=Ze(_,D)),Pe.length){const Ge=_.shadowPerProgress?X*(1/_.limitProgress):X;Pe[0].style.opacity=Math.min(Math.max(Math.abs(Ge),0),1)}}const Ae=Ve(_,D);Ae.transform(qe).css({opacity:Ne}),Te.origin&&Ae.css("transform-origin",Te.origin)}},setTransition:w=>{const{transformEl:T}=l.params.creativeEffect;(T?l.slides.find(T):l.slides).transition(w).find(".swiper-slide-shadow").transition(w),rt({swiper:l,duration:w,transformEl:T,allSlides:!0})},perspective:()=>l.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!l.params.cssMode})})},function(p){let{swiper:l,extendParams:f,on:v}=p;f({cardsEffect:{slideShadows:!0,transformEl:null,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),st({effect:"cards",swiper:l,on:v,setTranslate:()=>{const{slides:x,activeIndex:w}=l,T=l.params.cardsEffect,{startTranslate:P,isTouched:_}=l.touchEventsData,R=l.translate;for(let F=0;F<x.length;F+=1){const S=x.eq(F),D=S[0].progress,H=Math.min(Math.max(D,-4),4);let X=S[0].swiperSlideOffset;l.params.centeredSlides&&!l.params.cssMode&&l.$wrapperEl.transform(`translateX(${l.minTranslate()}px)`),l.params.centeredSlides&&l.params.cssMode&&(X-=x[0].swiperSlideOffset);let q=l.params.cssMode?-X-l.translate:-X,W=0;const de=-100*Math.abs(H);let ge=1,ve=-T.perSlideRotate*H,Te=T.perSlideOffset-.75*Math.abs(H);const Fe=l.virtual&&l.params.virtual.enabled?l.virtual.from+F:F,Be=(Fe===w||Fe===w-1)&&H>0&&H<1&&(_||l.params.cssMode)&&R<P,Ue=(Fe===w||Fe===w+1)&&H<0&&H>-1&&(_||l.params.cssMode)&&R>P;if(Be||Ue){const Ae=(1-Math.abs((Math.abs(H)-.5)/.5))**.5;ve+=-28*H*Ae,ge+=-.5*Ae,Te+=96*Ae,W=-25*Ae*Math.abs(H)+"%"}if(q=H<0?`calc(${q}px + (${Te*Math.abs(H)}%))`:H>0?`calc(${q}px + (-${Te*Math.abs(H)}%))`:`${q}px`,!l.isHorizontal()){const Ae=W;W=q,q=Ae}const Ne=H<0?""+(1+(1-ge)*H):""+(1-(1-ge)*H),qe=`
        translate3d(${q}, ${W}, ${de}px)
        rotateZ(${T.rotate?ve:0}deg)
        scale(${Ne})
      `;if(T.slideShadows){let Ae=S.find(".swiper-slide-shadow");Ae.length===0&&(Ae=Ze(T,S)),Ae.length&&(Ae[0].style.opacity=Math.min(Math.max((Math.abs(H)-.5)/.5,0),1))}S[0].style.zIndex=-Math.abs(Math.round(D))+x.length,Ve(T,S).transform(qe)}},setTransition:x=>{const{transformEl:w}=l.params.cardsEffect;(w?l.slides.find(w):l.slides).transition(x).find(".swiper-slide-shadow").transition(x),rt({swiper:l,duration:x,transformEl:w})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!l.params.cssMode})})}];return L.use(Et),L});/*! WOW - v1.1.2 - 2015-08-19
* Copyright (c) 2015 Matthieu Aussaguel; Licensed MIT */(function(){var s,e,t,i,n,r=function(o,c){return function(){return o.apply(c,arguments)}},a=[].indexOf||function(o){for(var c=0,h=this.length;h>c;c++)if(c in this&&this[c]===o)return c;return-1};e=function(){function o(){}return o.prototype.extend=function(c,h){var d,u;for(d in h)u=h[d],c[d]==null&&(c[d]=u);return c},o.prototype.isMobile=function(c){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(c)},o.prototype.createEvent=function(c,h,d,u){var m;return h==null&&(h=!1),d==null&&(d=!1),u==null&&(u=null),document.createEvent!=null?(m=document.createEvent("CustomEvent"),m.initCustomEvent(c,h,d,u)):document.createEventObject!=null?(m=document.createEventObject(),m.eventType=c):m.eventName=c,m},o.prototype.emitEvent=function(c,h){return c.dispatchEvent!=null?c.dispatchEvent(h):h in(c!=null)?c[h]():"on"+h in(c!=null)?c["on"+h]():void 0},o.prototype.addEvent=function(c,h,d){return c.addEventListener!=null?c.addEventListener(h,d,!1):c.attachEvent!=null?c.attachEvent("on"+h,d):c[h]=d},o.prototype.removeEvent=function(c,h,d){return c.removeEventListener!=null?c.removeEventListener(h,d,!1):c.detachEvent!=null?c.detachEvent("on"+h,d):delete c[h]},o.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},o}(),t=this.WeakMap||this.MozWeakMap||(t=function(){function o(){this.keys=[],this.values=[]}return o.prototype.get=function(c){var h,d,u,m,g;for(g=this.keys,h=u=0,m=g.length;m>u;h=++u)if(d=g[h],d===c)return this.values[h]},o.prototype.set=function(c,h){var d,u,m,g,y;for(y=this.keys,d=m=0,g=y.length;g>m;d=++m)if(u=y[d],u===c)return void(this.values[d]=h);return this.keys.push(c),this.values.push(h)},o}()),s=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(s=function(){function o(){typeof console<"u"&&console!==null&&console.warn("MutationObserver is not supported by your browser."),typeof console<"u"&&console!==null&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return o.notSupported=!0,o.prototype.observe=function(){},o}()),i=this.getComputedStyle||function(o){return this.getPropertyValue=function(c){var h;return c==="float"&&(c="styleFloat"),n.test(c)&&c.replace(n,function(d,u){return u.toUpperCase()}),((h=o.currentStyle)!=null?h[c]:void 0)||null},this},n=/(\-([a-z]){1})/g,this.WOW=function(){function o(c){c==null&&(c={}),this.scrollCallback=r(this.scrollCallback,this),this.scrollHandler=r(this.scrollHandler,this),this.resetAnimation=r(this.resetAnimation,this),this.start=r(this.start,this),this.scrolled=!0,this.config=this.util().extend(c,this.defaults),c.scrollContainer!=null&&(this.config.scrollContainer=document.querySelector(c.scrollContainer)),this.animationNameCache=new t,this.wowEvent=this.util().createEvent(this.config.boxClass)}return o.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},o.prototype.init=function(){var c;return this.element=window.document.documentElement,(c=document.readyState)==="interactive"||c==="complete"?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},o.prototype.start=function(){var c,h,d,u;if(this.stopped=!1,this.boxes=(function(){var m,g,y,E;for(y=this.element.querySelectorAll("."+this.config.boxClass),E=[],m=0,g=y.length;g>m;m++)c=y[m],E.push(c);return E}).call(this),this.all=(function(){var m,g,y,E;for(y=this.boxes,E=[],m=0,g=y.length;g>m;m++)c=y[m],E.push(c);return E}).call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(u=this.boxes,h=0,d=u.length;d>h;h++)c=u[h],this.applyStyle(c,!0);return this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new s(function(m){return function(g){var y,E,b,C,B;for(B=[],y=0,E=g.length;E>y;y++)C=g[y],B.push((function(){var I,k,Q,G;for(Q=C.addedNodes||[],G=[],I=0,k=Q.length;k>I;I++)b=Q[I],G.push(this.doSync(b));return G}).call(m));return B}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},o.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),this.interval!=null?clearInterval(this.interval):void 0},o.prototype.sync=function(){return s.notSupported?this.doSync(this.element):void 0},o.prototype.doSync=function(c){var h,d,u,m,g;if(c==null&&(c=this.element),c.nodeType===1){for(c=c.parentNode||c,m=c.querySelectorAll("."+this.config.boxClass),g=[],d=0,u=m.length;u>d;d++)h=m[d],a.call(this.all,h)<0?(this.boxes.push(h),this.all.push(h),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(h,!0),g.push(this.scrolled=!0)):g.push(void 0);return g}},o.prototype.show=function(c){return this.applyStyle(c),c.className=c.className+" "+this.config.animateClass,this.config.callback!=null&&this.config.callback(c),this.util().emitEvent(c,this.wowEvent),this.util().addEvent(c,"animationend",this.resetAnimation),this.util().addEvent(c,"oanimationend",this.resetAnimation),this.util().addEvent(c,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(c,"MSAnimationEnd",this.resetAnimation),c},o.prototype.applyStyle=function(c,h){var d,u,m;return u=c.getAttribute("data-wow-duration"),d=c.getAttribute("data-wow-delay"),m=c.getAttribute("data-wow-iteration"),this.animate(function(g){return function(){return g.customStyle(c,h,u,d,m)}}(this))},o.prototype.animate=function(){return"requestAnimationFrame"in window?function(c){return window.requestAnimationFrame(c)}:function(c){return c()}}(),o.prototype.resetStyle=function(){var c,h,d,u,m;for(u=this.boxes,m=[],h=0,d=u.length;d>h;h++)c=u[h],m.push(c.style.visibility="visible");return m},o.prototype.resetAnimation=function(c){var h;return c.type.toLowerCase().indexOf("animationend")>=0?(h=c.target||c.srcElement,h.className=h.className.replace(this.config.animateClass,"").trim()):void 0},o.prototype.customStyle=function(c,h,d,u,m){return h&&this.cacheAnimationName(c),c.style.visibility=h?"hidden":"visible",d&&this.vendorSet(c.style,{animationDuration:d}),u&&this.vendorSet(c.style,{animationDelay:u}),m&&this.vendorSet(c.style,{animationIterationCount:m}),this.vendorSet(c.style,{animationName:h?"none":this.cachedAnimationName(c)}),c},o.prototype.vendors=["moz","webkit"],o.prototype.vendorSet=function(c,h){var d,u,m,g;u=[];for(d in h)m=h[d],c[""+d]=m,u.push((function(){var y,E,b,C;for(b=this.vendors,C=[],y=0,E=b.length;E>y;y++)g=b[y],C.push(c[""+g+d.charAt(0).toUpperCase()+d.substr(1)]=m);return C}).call(this));return u},o.prototype.vendorCSS=function(c,h){var d,u,m,g,y,E;for(y=i(c),g=y.getPropertyCSSValue(h),m=this.vendors,d=0,u=m.length;u>d;d++)E=m[d],g=g||y.getPropertyCSSValue("-"+E+"-"+h);return g},o.prototype.animationName=function(c){var h;try{h=this.vendorCSS(c,"animation-name").cssText}catch{h=i(c).getPropertyValue("animation-name")}return h==="none"?"":h},o.prototype.cacheAnimationName=function(c){return this.animationNameCache.set(c,this.animationName(c))},o.prototype.cachedAnimationName=function(c){return this.animationNameCache.get(c)},o.prototype.scrollHandler=function(){return this.scrolled=!0},o.prototype.scrollCallback=function(){var c;return!this.scrolled||(this.scrolled=!1,this.boxes=(function(){var h,d,u,m;for(u=this.boxes,m=[],h=0,d=u.length;d>h;h++)c=u[h],c&&(this.isVisible(c)?this.show(c):m.push(c));return m}).call(this),this.boxes.length||this.config.live)?void 0:this.stop()},o.prototype.offsetTop=function(c){for(var h;c.offsetTop===void 0;)c=c.parentNode;for(h=c.offsetTop;c=c.offsetParent;)h+=c.offsetTop;return h},o.prototype.isVisible=function(c){var h,d,u,m,g;return d=c.getAttribute("data-wow-offset")||this.config.offset,g=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,m=g+Math.min(this.element.clientHeight,this.util().innerHeight())-d,u=this.offsetTop(c),h=u+c.clientHeight,m>=u&&h>=g},o.prototype.util=function(){return this._util!=null?this._util:this._util=new e},o.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},o}()}).call(globalThis);/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function Dl(s,e,t){const i=document.createElement(e);return s&&(i.className=s),t&&t.appendChild(i),i}function uf(s,e,t){s.style.width=typeof e=="number"?`${e}px`:e,s.style.height=typeof t=="number"?`${t}px`:t}const NL="idle",Bw="loading",xm="loaded",no="error";function Cl(s,e,t=document){let i=[];if(s instanceof Element)i=[s];else if(s instanceof NodeList||Array.isArray(s))i=Array.from(s);else{const n=typeof s=="string"?s:e;n&&(i=Array.from(t.querySelectorAll(n)))}return i}function Rw(){return!(!navigator.vendor||!navigator.vendor.match(/apple/i))}let FL=class{constructor(e,t){this.type=e,this.defaultPrevented=!1,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}},kL=class{constructor(e,t){if(this.element=Dl("pswp__img pswp__img--placeholder",e?"img":"div",t),e){const i=this.element;i.decoding="async",i.alt="",i.src=e,i.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,t){this.element&&(this.element.tagName==="IMG"?(uf(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=function(i,n,r){let a=`translate3d(${i}px,${n||0}px,0)`;return r!==void 0&&(a+=` scale3d(${r},${r},1)`),a}(0,0,e/250)):uf(this.element,e,t))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}},OL=class{constructor(e,t,i){this.instance=t,this.data=e,this.index=i,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=NL,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{const i=this.instance.applyFilters("placeholderSrc",!(!this.data.msrc||!this.slide.isFirstSlide)&&this.data.msrc,this);this.placeholder=new kL(i,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=Dl("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=Dl("pswp__content","div"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var t,i;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const n=this.element;this.updateSrcsetSizes(),this.data.srcset&&(n.srcset=this.data.srcset),n.src=(t=this.data.src)!==null&&t!==void 0?t:"",n.alt=(i=this.data.alt)!==null&&i!==void 0?i:"",this.state=Bw,n.complete?this.onLoaded():(n.onload=()=>{this.onLoaded()},n.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=xm,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),this.state!==xm&&this.state!==no||this.removePlaceholder())}onError(){this.state=no,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===Bw,this)}isError(){return this.state===no}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(uf(this.element,e,t),this.isImageContent()&&!this.isError()))){const i=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==no,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented||(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,t;let i=Dl("pswp__error-msg","div");i.innerText=(e=(t=this.instance.options)===null||t===void 0?void 0:t.errorMsg)!==null&&e!==void 0?e:"",i=this.instance.applyFilters("contentErrorElement",i,this),this.element=Dl("pswp__content pswp__error-msg-container","div"),this.element.appendChild(i),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===no)return void this.displayError();if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Rw())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){!this.instance.dispatch("contentActivate",{content:this}).defaultPrevented&&this.slide&&(this.isImageContent()&&this.isDecoding&&!Rw()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,this.instance.dispatch("contentRemove",{content:this}).defaultPrevented||(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),this.state!==xm&&this.state!==no||this.removePlaceholder()))}};function Bh(s,e,t,i,n){let r=0;if(e.paddingFn)r=e.paddingFn(t,i,n)[s];else if(e.padding)r=e.padding[s];else{const a="padding"+s[0].toUpperCase()+s.slice(1);e[a]&&(r=e[a])}return Number(r)||0}let UL=class{constructor(e,t,i,n){this.pswp=n,this.options=e,this.itemData=t,this.index=i,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,t,i){const n={x:e,y:t};this.elementSize=n,this.panAreaSize=i;const r=i.x/n.x,a=i.y/n.y;this.fit=Math.min(1,r<a?r:a),this.fill=Math.min(1,r>a?r:a),this.vFill=Math.min(1,a),this.initial=this.t(),this.secondary=this.i(),this.max=Math.max(this.initial,this.secondary,this.o()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}l(e){const t=e+"ZoomLevel",i=this.options[t];if(i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}i(){let e=this.l("secondary");return e||(e=Math.min(1,3*this.fit),this.elementSize&&e*this.elementSize.x>4e3&&(e=4e3/this.elementSize.x),e)}t(){return this.l("initial")||this.fit}o(){return this.l("max")||Math.max(1,4*this.fit)}};function Lw(s,e,t){const i=e.createContentFromData(s,t);let n;const{options:r}=e;if(r){let a;n=new UL(r,s,-1),a=e.pswp?e.pswp.viewportSize:function(c,h){if(c.getViewportSizeFn){const d=c.getViewportSizeFn(c,h);if(d)return d}return{x:document.documentElement.clientWidth,y:window.innerHeight}}(r,e);const o=function(c,h,d,u){return{x:h.x-Bh("left",c,h,d,u)-Bh("right",c,h,d,u),y:h.y-Bh("top",c,h,d,u)-Bh("bottom",c,h,d,u)}}(r,a,s,t);n.update(i.width,i.height,o)}return i.lazyLoad(),n&&i.setDisplayedSize(Math.ceil(i.width*n.initial),Math.ceil(i.height*n.initial)),i}let so=class extends class extends class{constructor(){this.u={},this.p={},this.pswp=void 0,this.options=void 0}addFilter(e,t,i=100){var n,r,a;this.p[e]||(this.p[e]=[]),(n=this.p[e])===null||n===void 0||n.push({fn:t,priority:i}),(r=this.p[e])===null||r===void 0||r.sort((o,c)=>o.priority-c.priority),(a=this.pswp)===null||a===void 0||a.addFilter(e,t,i)}removeFilter(e,t){this.p[e]&&(this.p[e]=this.p[e].filter(i=>i.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){var i;return(i=this.p[e])===null||i===void 0||i.forEach(n=>{t[0]=n.fn.apply(this,t)}),t[0]}on(e,t){var i,n;this.u[e]||(this.u[e]=[]),(i=this.u[e])===null||i===void 0||i.push(t),(n=this.pswp)===null||n===void 0||n.on(e,t)}off(e,t){var i;this.u[e]&&(this.u[e]=this.u[e].filter(n=>t!==n)),(i=this.pswp)===null||i===void 0||i.off(e,t)}dispatch(e,t){var i;if(this.pswp)return this.pswp.dispatch(e,t);const n=new FL(e,t);return(i=this.u[e])===null||i===void 0||i.forEach(r=>{r.call(this,n)}),n}}{getNumItems(){var e;let t=0;const i=(e=this.options)===null||e===void 0?void 0:e.dataSource;i&&"length"in i?t=i.length:i&&"gallery"in i&&(i.items||(i.items=this.v(i.gallery)),i.items&&(t=i.items.length));const n=this.dispatch("numItems",{dataSource:i,numItems:t});return this.applyFilters("numItems",n.numItems,i)}createContentFromData(e,t){return new OL(e,this,t)}getItemData(e){var t;const i=(t=this.options)===null||t===void 0?void 0:t.dataSource;let n={};Array.isArray(i)?n=i[e]:i&&"gallery"in i&&(i.items||(i.items=this.v(i.gallery)),n=i.items[e]);let r=n;r instanceof Element&&(r=this.m(r));const a=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",a.itemData,e)}v(e){var t,i;return(t=this.options)!==null&&t!==void 0&&t.children||(i=this.options)!==null&&i!==void 0&&i.childSelector?Cl(this.options.children,this.options.childSelector,e)||[]:[e]}m(e){const t={element:e},i=e.tagName==="A"?e:e.querySelector("a");if(i){t.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(t.srcset=i.dataset.pswpSrcset),t.width=i.dataset.pswpWidth?parseInt(i.dataset.pswpWidth,10):0,t.height=i.dataset.pswpHeight?parseInt(i.dataset.pswpHeight,10):0,t.w=t.width,t.h=t.height,i.dataset.pswpType&&(t.type=i.dataset.pswpType);const r=e.querySelector("img");var n;r&&(t.msrc=r.currentSrc||r.src,t.alt=(n=r.getAttribute("alt"))!==null&&n!==void 0?n:""),(i.dataset.pswpCropped||i.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,i)}lazyLoadData(e,t){return Lw(e,this,t)}}{constructor(e){super(),this.options=e||{},this.g=0,this.shouldOpen=!1,this._=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){Cl(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(function(r){return"button"in r&&r.button===1||r.ctrlKey||r.metaKey||r.altKey||r.shiftKey}(e)||window.pswp)return;let t={x:e.clientX,y:e.clientY};t.x||t.y||(t=null);let i=this.getClickedIndex(e);i=this.applyFilters("clickedIndex",i,e,this);const n={gallery:e.currentTarget};i>=0&&(e.preventDefault(),this.loadAndOpen(i,n,t))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const t=e.target,i=Cl(this.options.children,this.options.childSelector,e.currentTarget).findIndex(n=>n===t||n.contains(t));return i!==-1?i:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,t,i){if(window.pswp||!this.options)return!1;if(!t&&this.options.gallery&&this.options.children){const n=Cl(this.options.gallery);n[0]&&(t={gallery:n[0]})}return this.options.index=e,this.options.initialPointerPos=i,this.shouldOpen=!0,this.preload(e,t),!0}preload(e,t){const{options:i}=this;t&&(i.dataSource=t);const n=[],r=typeof i.pswpModule;if(typeof(a=i.pswpModule)=="function"&&a.prototype&&a.prototype.goTo)n.push(Promise.resolve(i.pswpModule));else{if(r==="string")throw new Error("pswpModule as string is no longer supported");if(r!=="function")throw new Error("pswpModule is not valid");n.push(i.pswpModule())}var a;typeof i.openPromise=="function"&&n.push(i.openPromise()),i.preloadFirstSlide!==!1&&e>=0&&(this._=function(c,h){const d=h.getItemData(c);if(!h.dispatch("lazyLoadSlide",{index:c,itemData:d}).defaultPrevented)return Lw(d,h,c)}(e,this));const o=++this.g;Promise.all(n).then(c=>{if(this.shouldOpen){const h=c[0];this.I(h,o)}})}I(e,t){if(t!==this.g&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const i=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=i,window.pswp=i,Object.keys(this.u).forEach(n=>{var r;(r=this.u[n])===null||r===void 0||r.forEach(a=>{i.on(n,a)})}),Object.keys(this.p).forEach(n=>{var r;(r=this.p[n])===null||r===void 0||r.forEach(a=>{i.addFilter(n,a.fn,a.priority)})}),this._&&(i.contentLoader.addToCache(this._),this._=void 0),i.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),i.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this.u={},Cl(this.options.gallery,this.options.gallerySelector).forEach(t=>{t.removeEventListener("click",this.onThumbnailsClick,!1)})}};/*!
  * PhotoSwipe 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function bn(s,e,t){const i=document.createElement(e);return s&&(i.className=s),t&&t.appendChild(i),i}function Si(s,e){return s.x=e.x,s.y=e.y,e.id!==void 0&&(s.id=e.id),s}function sx(s){s.x=Math.round(s.x),s.y=Math.round(s.y)}function pf(s,e){const t=Math.abs(s.x-e.x),i=Math.abs(s.y-e.y);return Math.sqrt(t*t+i*i)}function Ul(s,e){return s.x===e.x&&s.y===e.y}function lc(s,e,t){return Math.min(Math.max(s,e),t)}function Xl(s,e,t){let i=`translate3d(${s}px,${e||0}px,0)`;return t!==void 0&&(i+=` scale3d(${t},${t},1)`),i}function na(s,e,t,i){s.style.transform=Xl(e,t,i)}function Dw(s,e,t,i){s.style.transition=e?`${e} ${t}ms ${i||"cubic-bezier(.4,0,.22,1)"}`:"none"}function mf(s,e,t){s.style.width=typeof e=="number"?`${e}px`:e,s.style.height=typeof t=="number"?`${t}px`:t}const QL="idle",Pw="loading",_m="loaded",ro="error";function Nw(){return!(!navigator.vendor||!navigator.vendor.match(/apple/i))}let rx=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{rx=!0}}))}catch{}class zL{constructor(){this.t=[]}add(e,t,i,n){this.i(e,t,i,n)}remove(e,t,i,n){this.i(e,t,i,n,!0)}removeAll(){this.t.forEach(e=>{this.i(e.target,e.type,e.listener,e.passive,!0,!0)}),this.t=[]}i(e,t,i,n,r,a){if(!e)return;const o=r?"removeEventListener":"addEventListener";t.split(" ").forEach(c=>{if(c){a||(r?this.t=this.t.filter(d=>d.type!==c||d.listener!==i||d.target!==e):this.t.push({target:e,type:c,listener:i,passive:n}));const h=!!rx&&{passive:n||!1};e[o](c,i,h)}})}}function ax(s,e){if(s.getViewportSizeFn){const t=s.getViewportSizeFn(s,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Pl(s,e,t,i,n){let r=0;if(e.paddingFn)r=e.paddingFn(t,i,n)[s];else if(e.padding)r=e.padding[s];else{const a="padding"+s[0].toUpperCase()+s.slice(1);e[a]&&(r=e[a])}return Number(r)||0}function ox(s,e,t,i){return{x:e.x-Pl("left",s,e,t,i)-Pl("right",s,e,t,i),y:e.y-Pl("top",s,e,t,i)-Pl("bottom",s,e,t,i)}}class HL{constructor(e){this.slide=e,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}}update(e){this.currZoomLevel=e,this.slide.width?(this.o("x"),this.o("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}o(e){const{pswp:t}=this.slide,i=this.slide[e==="x"?"width":"height"]*this.currZoomLevel,n=Pl(e==="x"?"left":"top",t.options,t.viewportSize,this.slide.data,this.slide.index),r=this.slide.panAreaSize[e];this.center[e]=Math.round((r-i)/2)+n,this.max[e]=i>r?Math.round(r-i)+n:this.center[e],this.min[e]=i>r?n:this.center[e]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(e,t){return lc(t,this.max[e],this.min[e])}}class lx{constructor(e,t,i,n){this.pswp=n,this.options=e,this.itemData=t,this.index=i,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,t,i){const n={x:e,y:t};this.elementSize=n,this.panAreaSize=i;const r=i.x/n.x,a=i.y/n.y;this.fit=Math.min(1,r<a?r:a),this.fill=Math.min(1,r>a?r:a),this.vFill=Math.min(1,a),this.initial=this.l(),this.secondary=this.u(),this.max=Math.max(this.initial,this.secondary,this.p()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}m(e){const t=e+"ZoomLevel",i=this.options[t];if(i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}u(){let e=this.m("secondary");return e||(e=Math.min(1,3*this.fit),this.elementSize&&e*this.elementSize.x>4e3&&(e=4e3/this.elementSize.x),e)}l(){return this.m("initial")||this.fit}p(){return this.m("max")||Math.max(1,4*this.fit)}}class GL{constructor(e,t,i){this.data=e,this.index=t,this.pswp=i,this.isActive=t===i.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!i.opener.isOpen,this.zoomLevels=new lx(i.options,e,t,i),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:t}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=bn("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new HL(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(e){e&&!this.isActive?this.activate():!e&&this.isActive&&this.deactivate()}append(e){this.holderElement=e,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){const{pswp:e}=this;!this.heavyAppended&&e.opener.isOpen&&!e.mainScroll.isShifted()&&(this.isActive,1)&&(this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this})))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel!==this.zoomLevels.initial&&this.isActive?(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y)):(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize())}updateContentSize(e){const t=this.currentResolution||this.zoomLevels.initial;if(!t)return;const i=Math.round(this.width*t)||this.pswp.viewportSize.x,n=Math.round(this.height*t)||this.pswp.viewportSize.y;(this.sizeChanged(i,n)||e)&&this.content.setDisplayedSize(i,n)}sizeChanged(e,t){return(e!==this.prevDisplayedWidth||t!==this.prevDisplayedHeight)&&(this.prevDisplayedWidth=e,this.prevDisplayedHeight=t,!0)}getPlaceholderElement(){var e;return(e=this.content.placeholder)===null||e===void 0?void 0:e.element}zoomTo(e,t,i,n){const{pswp:r}=this;if(!this.isZoomable()||r.mainScroll.isShifted())return;r.dispatch("beforeZoomTo",{destZoomLevel:e,centerPoint:t,transitionDuration:i}),r.animations.stopAllPan();const a=this.currZoomLevel;n||(e=lc(e,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(e),this.pan.x=this.calculateZoomToPanOffset("x",t,a),this.pan.y=this.calculateZoomToPanOffset("y",t,a),sx(this.pan);const o=()=>{this.v(e),this.applyCurrentZoomPan()};i?r.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:o,duration:i,easing:r.options.easing}):o()}toggleZoom(e){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,e,this.pswp.options.zoomAnimationDuration)}setZoomLevel(e){this.currZoomLevel=e,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(e,t,i){if(this.bounds.max[e]-this.bounds.min[e]===0)return this.bounds.center[e];t||(t=this.pswp.getViewportCenterPoint()),i||(i=this.zoomLevels.initial);const n=this.currZoomLevel/i;return this.bounds.correctPan(e,(this.pan[e]-t[e])*n+t[e])}panTo(e,t){this.pan.x=this.bounds.correctPan("x",e),this.pan.y=this.bounds.correctPan("y",t),this.applyCurrentZoomPan()}isPannable(){return!!this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return!!this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this.g(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),Si(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}g(e,t,i){i/=this.currentResolution||this.zoomLevels.initial,na(this.container,e,t,i)}calculateSize(){const{pswp:e}=this;Si(this.panAreaSize,ox(e.options,e.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),e.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){const e=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return Xl(this.pan.x,this.pan.y,e)}v(e){e!==this.currentResolution&&(this.currentResolution=e,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}}class VL{constructor(e){this.gestures=e,this.pswp=e.pswp,this.startPan={x:0,y:0}}start(){this.pswp.currSlide&&Si(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){const{p1:e,prevP1:t,dragAxis:i}=this.gestures,{currSlide:n}=this.pswp;if(i==="y"&&this.pswp.options.closeOnVerticalDrag&&n&&n.currZoomLevel<=n.zoomLevels.fit&&!this.gestures.isMultitouch){const r=n.pan.y+(e.y-t.y);if(!this.pswp.dispatch("verticalDrag",{panY:r}).defaultPrevented){this._("y",r,.6);const a=1-Math.abs(this.S(n.pan.y));this.pswp.applyBgOpacity(a),n.applyCurrentZoomPan()}}else this.M("x")||(this.M("y"),n&&(sx(n.pan),n.applyCurrentZoomPan()))}end(){const{velocity:e}=this.gestures,{mainScroll:t,currSlide:i}=this.pswp;let n=0;if(this.pswp.animations.stopAll(),t.isShifted()){const r=(t.x-t.getCurrSlideX())/this.pswp.viewportSize.x;e.x<-.5&&r<0||e.x<.1&&r<-.5?(n=1,e.x=Math.min(e.x,0)):(e.x>.5&&r>0||e.x>-.1&&r>.5)&&(n=-1,e.x=Math.max(e.x,0)),t.moveIndexBy(n,!0,e.x)}i&&i.currZoomLevel>i.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this.P("x"),this.P("y"))}P(e){const{velocity:t}=this.gestures,{currSlide:i}=this.pswp;if(!i)return;const{pan:n,bounds:r}=i,a=n[e],o=this.pswp.bgOpacity<1&&e==="y",c=a+function(g,y){return g*y/(1-y)}(t[e],.995);if(o){const g=this.S(a),y=this.S(c);if(g<0&&y<-.4||g>0&&y>.4)return void this.pswp.close()}const h=r.correctPan(e,c);if(a===h)return;const d=h===c?1:.82,u=this.pswp.bgOpacity,m=h-a;this.pswp.animations.startSpring({name:"panGesture"+e,isPan:!0,start:a,end:h,velocity:t[e],dampingRatio:d,onUpdate:g=>{if(o&&this.pswp.bgOpacity<1){const y=1-(h-g)/m;this.pswp.applyBgOpacity(lc(u+(1-u)*y,0,1))}n[e]=Math.floor(g),i.applyCurrentZoomPan()}})}M(e){const{p1:t,dragAxis:i,prevP1:n,isMultitouch:r}=this.gestures,{currSlide:a,mainScroll:o}=this.pswp,c=t[e]-n[e],h=o.x+c;if(!c||!a)return!1;if(e==="x"&&!a.isPannable()&&!r)return o.moveTo(h,!0),!0;const{bounds:d}=a,u=a.pan[e]+c;if(this.pswp.options.allowPanToNext&&i==="x"&&e==="x"&&!r){const m=o.getCurrSlideX(),g=o.x-m,y=c>0,E=!y;if(u>d.min[e]&&y){if(d.min[e]<=this.startPan[e])return o.moveTo(h,!0),!0;this._(e,u)}else if(u<d.max[e]&&E){if(this.startPan[e]<=d.max[e])return o.moveTo(h,!0),!0;this._(e,u)}else if(g!==0){if(g>0)return o.moveTo(Math.max(h,m),!0),!0;if(g<0)return o.moveTo(Math.min(h,m),!0),!0}else this._(e,u)}else e==="y"&&(o.isShifted()||d.min.y===d.max.y)||this._(e,u);return!1}S(e){var t,i;return(e-((t=(i=this.pswp.currSlide)===null||i===void 0?void 0:i.bounds.center.y)!==null&&t!==void 0?t:0))/(this.pswp.viewportSize.y/3)}_(e,t,i){const{currSlide:n}=this.pswp;if(!n)return;const{pan:r,bounds:a}=n;if(a.correctPan(e,t)!==t||i){const o=Math.round(t-r[e]);r[e]+=o*(i||.35)}else r[e]=t}}function Fw(s,e,t){return s.x=(e.x+t.x)/2,s.y=(e.y+t.y)/2,s}class $L{constructor(e){this.gestures=e,this.C={x:0,y:0},this.T={x:0,y:0},this.A={x:0,y:0},this.D=!1,this.I=1}start(){const{currSlide:e}=this.gestures.pswp;e&&(this.I=e.currZoomLevel,Si(this.C,e.pan)),this.gestures.pswp.animations.stopAllPan(),this.D=!1}change(){const{p1:e,startP1:t,p2:i,startP2:n,pswp:r}=this.gestures,{currSlide:a}=r;if(!a)return;const o=a.zoomLevels.min,c=a.zoomLevels.max;if(!a.isZoomable()||r.mainScroll.isShifted())return;Fw(this.T,t,n),Fw(this.A,e,i);let h=1/pf(t,n)*pf(e,i)*this.I;if(h>a.zoomLevels.initial+a.zoomLevels.initial/15&&(this.D=!0),h<o)if(r.options.pinchToClose&&!this.D&&this.I<=a.zoomLevels.initial){const d=1-(o-h)/(o/1.2);r.dispatch("pinchClose",{bgOpacity:d}).defaultPrevented||r.applyBgOpacity(d)}else h=o-.15*(o-h);else h>c&&(h=c+.05*(h-c));a.pan.x=this.L("x",h),a.pan.y=this.L("y",h),a.setZoomLevel(h),a.applyCurrentZoomPan()}end(){const{pswp:e}=this.gestures,{currSlide:t}=e;(!t||t.currZoomLevel<t.zoomLevels.initial)&&!this.D&&e.options.pinchToClose?e.close():this.correctZoomPan()}L(e,t){const i=t/this.I;return this.A[e]-(this.T[e]-this.C[e])*i}correctZoomPan(e){const{pswp:t}=this.gestures,{currSlide:i}=t;if(i==null||!i.isZoomable())return;this.A.x===0&&(e=!0);const n=i.currZoomLevel;let r,a=!0;n<i.zoomLevels.initial?r=i.zoomLevels.initial:n>i.zoomLevels.max?r=i.zoomLevels.max:(a=!1,r=n);const o=t.bgOpacity,c=t.bgOpacity<1,h=Si({x:0,y:0},i.pan);let d=Si({x:0,y:0},h);e&&(this.A.x=0,this.A.y=0,this.T.x=0,this.T.y=0,this.I=n,Si(this.C,h)),a&&(d={x:this.L("x",r),y:this.L("y",r)}),i.setZoomLevel(r),d={x:i.bounds.correctPan("x",d.x),y:i.bounds.correctPan("y",d.y)},i.setZoomLevel(n);const u=!Ul(d,h);if(!u&&!a&&!c)return i.v(r),void i.applyCurrentZoomPan();t.animations.stopAllPan(),t.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:m=>{if(m/=1e3,u||a){if(u&&(i.pan.x=h.x+(d.x-h.x)*m,i.pan.y=h.y+(d.y-h.y)*m),a){const g=n+(r-n)*m;i.setZoomLevel(g)}i.applyCurrentZoomPan()}c&&t.bgOpacity<1&&t.applyBgOpacity(lc(o+(1-o)*m,0,1))},onComplete:()=>{i.v(r),i.applyCurrentZoomPan()}})}}function kw(s){return!!s.target.closest(".pswp__container")}class WL{constructor(e){this.gestures=e}click(e,t){const i=t.target.classList,n=i.contains("pswp__img"),r=i.contains("pswp__item")||i.contains("pswp__zoom-wrap");n?this.k("imageClick",e,t):r&&this.k("bgClick",e,t)}tap(e,t){kw(t)&&this.k("tap",e,t)}doubleTap(e,t){kw(t)&&this.k("doubleTap",e,t)}k(e,t,i){var n;const{pswp:r}=this.gestures,{currSlide:a}=r,o=e+"Action",c=r.options[o];if(!r.dispatch(o,{point:t,originalEvent:i}).defaultPrevented)if(typeof c!="function")switch(c){case"close":case"next":r[c]();break;case"zoom":a==null||a.toggleZoom(t);break;case"zoom-or-close":a!=null&&a.isZoomable()&&a.zoomLevels.secondary!==a.zoomLevels.initial?a.toggleZoom(t):r.options.clickToCloseNonZoomable&&r.close();break;case"toggle-controls":(n=this.gestures.pswp.element)===null||n===void 0||n.classList.toggle("pswp--ui-visible")}else c.call(r,t,i)}}class qL{constructor(e){this.pswp=e,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this.Z={x:0,y:0},this.B={x:0,y:0},this.F=0,this.O=[],this.R="ontouchstart"in window,this.N=!!window.PointerEvent,this.supportsTouch=this.R||this.N&&navigator.maxTouchPoints>1,this.F=0,this.U=0,this.V=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this.G=null,this.supportsTouch||(e.options.allowPanToNext=!1),this.drag=new VL(this),this.zoomLevels=new $L(this),this.tapHandler=new WL(this),e.on("bindEvents",()=>{e.events.add(e.scrollWrap,"click",this.$.bind(this)),this.N?this.q("pointer","down","up","cancel"):this.R?(this.q("touch","start","end","cancel"),e.scrollWrap&&(e.scrollWrap.ontouchmove=()=>{},e.scrollWrap.ontouchend=()=>{})):this.q("mouse","down","up")})}q(e,t,i,n){const{pswp:r}=this,{events:a}=r,o=n?e+n:"";a.add(r.scrollWrap,e+t,this.onPointerDown.bind(this)),a.add(window,e+"move",this.onPointerMove.bind(this)),a.add(window,e+i,this.onPointerUp.bind(this)),o&&a.add(r.scrollWrap,o,this.onPointerUp.bind(this))}onPointerDown(e){const t=e.type==="mousedown"||e.pointerType==="mouse";if(t&&e.button>0)return;const{pswp:i}=this;i.opener.isOpen?i.dispatch("pointerDown",{originalEvent:e}).defaultPrevented||(t&&(i.mouseDetected(),this.H(e,"down")),i.animations.stopAll(),this.K(e,"down"),this.F===1&&(this.dragAxis=null,Si(this.startP1,this.p1)),this.F>1?(this.W(),this.isMultitouch=!0):this.isMultitouch=!1):e.preventDefault()}onPointerMove(e){this.H(e,"move"),this.F&&(this.K(e,"move"),this.pswp.dispatch("pointerMove",{originalEvent:e}).defaultPrevented||(this.F!==1||this.isDragging?this.F>1&&!this.isZooming&&(this.j(),this.isZooming=!0,this.X(),this.zoomLevels.start(),this.Y(),this.J()):(this.dragAxis||this.tt(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this.W(),this.X(),this.U=Date.now(),this.V=!1,Si(this.B,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this.Y(),this.J()))))}j(){this.isDragging&&(this.isDragging=!1,this.V||this.it(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(e){this.F&&(this.K(e,"up"),this.pswp.dispatch("pointerUp",{originalEvent:e}).defaultPrevented||(this.F===0&&(this.Y(),this.isDragging?this.j():this.isZooming||this.isMultitouch||this.st(e)),this.F<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this.F===1&&(this.dragAxis=null,this.X()))))}J(){(this.isDragging||this.isZooming)&&(this.it(),this.isDragging?Ul(this.p1,this.prevP1)||this.drag.change():Ul(this.p1,this.prevP1)&&Ul(this.p2,this.prevP2)||this.zoomLevels.change(),this.ht(),this.raf=requestAnimationFrame(this.J.bind(this)))}it(e){const t=Date.now(),i=t-this.U;i<50&&!e||(this.velocity.x=this.et("x",i),this.velocity.y=this.et("y",i),this.U=t,Si(this.B,this.p1),this.V=!0)}st(e){const{mainScroll:t}=this.pswp;if(t.isShifted())return void t.moveIndexBy(0,!0);if(e.type.indexOf("cancel")>0)return;if(e.type==="mouseup"||e.pointerType==="mouse")return void this.tapHandler.click(this.startP1,e);const i=this.pswp.options.doubleTapAction?300:0;this.G?(this.W(),pf(this.Z,this.startP1)<25&&this.tapHandler.doubleTap(this.startP1,e)):(Si(this.Z,this.startP1),this.G=setTimeout(()=>{this.tapHandler.tap(this.startP1,e),this.W()},i))}W(){this.G&&(clearTimeout(this.G),this.G=null)}et(e,t){const i=this.p1[e]-this.B[e];return Math.abs(i)>1&&t>5?i/t:0}Y(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}H(e,t){this.pswp.applyFilters("preventPointerEvent",!0,e,t)&&e.preventDefault()}K(e,t){if(this.N){const i=e,n=this.O.findIndex(r=>r.id===i.pointerId);t==="up"&&n>-1?this.O.splice(n,1):t==="down"&&n===-1?this.O.push(this.nt(i,{x:0,y:0})):n>-1&&this.nt(i,this.O[n]),this.F=this.O.length,this.F>0&&Si(this.p1,this.O[0]),this.F>1&&Si(this.p2,this.O[1])}else{const i=e;this.F=0,i.type.indexOf("touch")>-1?i.touches&&i.touches.length>0&&(this.nt(i.touches[0],this.p1),this.F++,i.touches.length>1&&(this.nt(i.touches[1],this.p2),this.F++)):(this.nt(e,this.p1),t==="up"?this.F=0:this.F++)}}ht(){Si(this.prevP1,this.p1),Si(this.prevP2,this.p2)}X(){Si(this.startP1,this.p1),Si(this.startP2,this.p2),this.ht()}tt(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{const e=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(e!==0){const t=e>0?"x":"y";Math.abs(this.p1[t]-this.startP1[t])>=10&&(this.dragAxis=t)}}}nt(e,t){return t.x=e.pageX-this.pswp.offset.x,t.y=e.pageY-this.pswp.offset.y,"pointerId"in e?t.id=e.pointerId:e.identifier!==void 0&&(t.id=e.identifier),t}$(e){this.pswp.mainScroll.isShifted()&&(e.preventDefault(),e.stopPropagation())}}class jL{constructor(e){this.pswp=e,this.x=0,this.slideWidth=0,this.ot=0,this.rt=0,this.lt=-1,this.itemHolders=[]}resize(e){const{pswp:t}=this,i=Math.round(t.viewportSize.x+t.viewportSize.x*t.options.spacing),n=i!==this.slideWidth;n&&(this.slideWidth=i,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((r,a)=>{n&&na(r.el,(a+this.lt)*this.slideWidth),e&&r.slide&&r.slide.resize()})}resetPosition(){this.ot=0,this.rt=0,this.slideWidth=0,this.lt=-1}appendHolders(){this.itemHolders=[];for(let e=0;e<3;e++){const t=bn("pswp__item","div",this.pswp.container);t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-hidden","true"),t.style.display=e===1?"block":"none",this.itemHolders.push({el:t})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(e,t,i){const{pswp:n}=this;let r=n.potentialIndex+e;const a=n.getNumItems();if(n.canLoop()){r=n.getLoopedIndex(r);const c=(e+a)%a;e=c<=a/2?c:c-a}else r<0?r=0:r>=a&&(r=a-1),e=r-n.potentialIndex;n.potentialIndex=r,this.ot-=e,n.animations.stopMainScroll();const o=this.getCurrSlideX();if(t){n.animations.startSpring({isMainScroll:!0,start:this.x,end:o,velocity:i||0,naturalFrequency:30,dampingRatio:1,onUpdate:h=>{this.moveTo(h)},onComplete:()=>{this.updateCurrItem(),n.appendHeavy()}});let c=n.potentialIndex-n.currIndex;if(n.canLoop()){const h=(c+a)%a;c=h<=a/2?h:h-a}Math.abs(c)>1&&this.updateCurrItem()}else this.moveTo(o),this.updateCurrItem();return!!e}getCurrSlideX(){return this.slideWidth*this.ot}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){var e;const{pswp:t}=this,i=this.rt-this.ot;if(!i)return;this.rt=this.ot,t.currIndex=t.potentialIndex;let n,r=Math.abs(i);r>=3&&(this.lt+=i+(i>0?-3:3),r=3,this.itemHolders.forEach(a=>{var o;(o=a.slide)===null||o===void 0||o.destroy(),a.slide=void 0}));for(let a=0;a<r;a++)i>0?(n=this.itemHolders.shift(),n&&(this.itemHolders[2]=n,this.lt++,na(n.el,(this.lt+2)*this.slideWidth),t.setContent(n,t.currIndex-r+a+2))):(n=this.itemHolders.pop(),n&&(this.itemHolders.unshift(n),this.lt--,na(n.el,this.lt*this.slideWidth),t.setContent(n,t.currIndex+r-a-2)));Math.abs(this.lt)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),t.animations.stopAllPan(),this.itemHolders.forEach((a,o)=>{a.slide&&a.slide.setIsActive(o===1)}),t.currSlide=(e=this.itemHolders[1])===null||e===void 0?void 0:e.slide,t.contentLoader.updateLazy(i),t.currSlide&&t.currSlide.applyCurrentZoomPan(),t.dispatch("change")}moveTo(e,t){if(!this.pswp.canLoop()&&t){let i=(this.slideWidth*this.ot-e)/this.slideWidth;i+=this.pswp.currIndex;const n=Math.round(e-this.x);(i<0&&n>0||i>=this.pswp.getNumItems()-1&&n<0)&&(e=this.x+.35*n)}this.x=e,this.pswp.container&&na(this.pswp.container,e),this.pswp.dispatch("moveMainScroll",{x:e,dragging:t!=null&&t})}}const XL={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},zr=(s,e)=>e?s:XL[s];class YL{constructor(e){this.pswp=e,this.ct=!1,e.on("bindEvents",()=>{e.options.trapFocus&&(e.options.initialPointerPos||this.dt(),e.events.add(document,"focusin",this.ut.bind(this))),e.events.add(document,"keydown",this.vt.bind(this))});const t=document.activeElement;e.on("destroy",()=>{e.options.returnFocus&&t&&this.ct&&t.focus()})}dt(){!this.ct&&this.pswp.element&&(this.pswp.element.focus(),this.ct=!0)}vt(e){const{pswp:t}=this;if(t.dispatch("keydown",{originalEvent:e}).defaultPrevented||function(o){return"button"in o&&o.button===1||o.ctrlKey||o.metaKey||o.altKey||o.shiftKey}(e))return;let i,n,r=!1;const a="key"in e;switch(a?e.key:e.keyCode){case zr("Escape",a):t.options.escKey&&(i="close");break;case zr("z",a):i="toggleZoom";break;case zr("ArrowLeft",a):n="x";break;case zr("ArrowUp",a):n="y";break;case zr("ArrowRight",a):n="x",r=!0;break;case zr("ArrowDown",a):r=!0,n="y";break;case zr("Tab",a):this.dt()}if(n){e.preventDefault();const{currSlide:o}=t;t.options.arrowKeys&&n==="x"&&t.getNumItems()>1?i=r?"next":"prev":o&&o.currZoomLevel>o.zoomLevels.fit&&(o.pan[n]+=r?-80:80,o.panTo(o.pan.x,o.pan.y))}i&&(e.preventDefault(),t[i]())}ut(e){const{template:t}=this.pswp;t&&document!==e.target&&t!==e.target&&!t.contains(e.target)&&t.focus()}}const KL="cubic-bezier(.4,0,.22,1)";class JL{constructor(e){var t;this.props=e;const{target:i,onComplete:n,transform:r,onFinish:a=()=>{},duration:o=333,easing:c=KL}=e;this.onFinish=a;const h=r?"transform":"opacity",d=(t=e[h])!==null&&t!==void 0?t:"";this.ft=i,this.wt=n,this.gt=!1,this.yt=this.yt.bind(this),this._t=setTimeout(()=>{Dw(i,h,o,c),this._t=setTimeout(()=>{i.addEventListener("transitionend",this.yt,!1),i.addEventListener("transitioncancel",this.yt,!1),this._t=setTimeout(()=>{this.xt()},o+500),i.style[h]=d},30)},0)}yt(e){e.target===this.ft&&this.xt()}xt(){this.gt||(this.gt=!0,this.onFinish(),this.wt&&this.wt())}destroy(){this._t&&clearTimeout(this._t),Dw(this.ft),this.ft.removeEventListener("transitionend",this.yt,!1),this.ft.removeEventListener("transitioncancel",this.yt,!1),this.gt||this.xt()}}class ZL{constructor(e,t,i){this.velocity=1e3*e,this.bt=t||.75,this.St=i||12,this.zt=this.St,this.bt<1&&(this.zt*=Math.sqrt(1-this.bt*this.bt))}easeFrame(e,t){let i,n=0;t/=1e3;const r=Math.E**(-this.bt*this.St*t);if(this.bt===1)i=this.velocity+this.St*e,n=(e+i*t)*r,this.velocity=n*-this.St+i*r;else if(this.bt<1){i=1/this.zt*(this.bt*this.St*e+this.velocity);const a=Math.cos(this.zt*t),o=Math.sin(this.zt*t);n=r*(e*a+i*o),this.velocity=n*-this.St*this.bt+r*(-this.zt*e*o+this.zt*i*a)}return n}}class eD{constructor(e){this.props=e,this.Mt=0;const{start:t,end:i,velocity:n,onUpdate:r,onComplete:a,onFinish:o=()=>{},dampingRatio:c,naturalFrequency:h}=e;this.onFinish=o;const d=new ZL(n,c,h);let u=Date.now(),m=t-i;const g=()=>{this.Mt&&(m=d.easeFrame(m,Date.now()-u),Math.abs(m)<1&&Math.abs(d.velocity)<50?(r(i),a&&a(),this.onFinish()):(u=Date.now(),r(m+i),this.Mt=requestAnimationFrame(g)))};this.Mt=requestAnimationFrame(g)}destroy(){this.Mt>=0&&cancelAnimationFrame(this.Mt),this.Mt=0}}class tD{constructor(){this.activeAnimations=[]}startSpring(e){this.Pt(e,!0)}startTransition(e){this.Pt(e)}Pt(e,t){const i=t?new eD(e):new JL(e);return this.activeAnimations.push(i),i.onFinish=()=>this.stop(i),i}stop(e){e.destroy();const t=this.activeAnimations.indexOf(e);t>-1&&this.activeAnimations.splice(t,1)}stopAll(){this.activeAnimations.forEach(e=>{e.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(e=>!e.props.isPan||(e.destroy(),!1))}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(e=>!e.props.isMainScroll||(e.destroy(),!1))}isPanRunning(){return this.activeAnimations.some(e=>e.props.isPan)}}class iD{constructor(e){this.pswp=e,e.events.add(e.element,"wheel",this.Ct.bind(this))}Ct(e){e.preventDefault();const{currSlide:t}=this.pswp;let{deltaX:i,deltaY:n}=e;if(t&&!this.pswp.dispatch("wheel",{originalEvent:e}).defaultPrevented)if(e.ctrlKey||this.pswp.options.wheelToZoom){if(t.isZoomable()){let r=-n;e.deltaMode===1?r*=.05:r*=e.deltaMode?1:.002,r=2**r;const a=t.currZoomLevel*r;t.zoomTo(a,{x:e.clientX,y:e.clientY})}}else t.isPannable()&&(e.deltaMode===1&&(i*=18,n*=18),t.panTo(t.pan.x-i,t.pan.y-n))}}class nD{constructor(e,t){var i;const n=t.name||t.className;let r=t.html;if(e.options[n]===!1)return;typeof e.options[n+"SVG"]=="string"&&(r=e.options[n+"SVG"]),e.dispatch("uiElementCreate",{data:t});let a="";t.isButton?(a+="pswp__button ",a+=t.className||`pswp__button--${t.name}`):a+=t.className||`pswp__${t.name}`;let o=t.isButton?t.tagName||"button":t.tagName||"div";o=o.toLowerCase();const c=bn(a,o);if(t.isButton){o==="button"&&(c.type="button");let{title:u}=t;const{ariaLabel:m}=t;typeof e.options[n+"Title"]=="string"&&(u=e.options[n+"Title"]),u&&(c.title=u);const g=m||u;g&&c.setAttribute("aria-label",g)}c.innerHTML=function(u){if(typeof u=="string")return u;if(!u||!u.isCustomSVG)return"";const m=u;let g='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return g=g.split("%d").join(m.size||32),m.outlineID&&(g+='<use class="pswp__icn-shadow" xlink:href="#'+m.outlineID+'"/>'),g+=m.inner,g+="</svg>",g}(r),t.onInit&&t.onInit(c,e),t.onClick&&(c.onclick=u=>{typeof t.onClick=="string"?e[t.onClick]():typeof t.onClick=="function"&&t.onClick(u,c,e)});const h=t.appendTo||"bar";let d=e.element;h==="bar"?(e.topBar||(e.topBar=bn("pswp__top-bar pswp__hide-on-close","div",e.scrollWrap)),d=e.topBar):(c.classList.add("pswp__hide-on-close"),h==="wrapper"&&(d=e.scrollWrap)),(i=d)===null||i===void 0||i.appendChild(e.applyFilters("uiElement",c,t))}}function cx(s,e,t){s.classList.add("pswp__button--arrow"),s.setAttribute("aria-controls","pswp__items"),e.on("change",()=>{e.options.loop||(s.disabled=t?!(e.currIndex<e.getNumItems()-1):!(e.currIndex>0))})}const sD={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:cx},rD={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(s,e)=>{cx(s,e,!0)}},aD={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},oD={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},lD={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(s,e)=>{let t,i=null;const n=a=>{var o,c;t!==a&&(t=a,o="active",c=a,s.classList.toggle("pswp__preloader--"+o,c))},r=()=>{var a;if((a=e.currSlide)===null||a===void 0||!a.content.isLoading())return n(!1),void(i&&(clearTimeout(i),i=null));i||(i=setTimeout(()=>{var o;n(!!(!((o=e.currSlide)===null||o===void 0)&&o.content.isLoading())),i=null},e.options.preloaderDelay))};e.on("change",r),e.on("loadComplete",a=>{e.currSlide===a.slide&&r()}),e.ui&&(e.ui.updatePreloaderVisibility=r)}},cD={name:"counter",order:5,onInit:(s,e)=>{e.on("change",()=>{s.innerText=e.currIndex+1+e.options.indexIndicatorSep+e.getNumItems()})}};function Ow(s,e){s.classList.toggle("pswp--zoomed-in",e)}class hD{constructor(e){this.pswp=e,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this.Tt=void 0}init(){const{pswp:e}=this;this.isRegistered=!1,this.uiElementsData=[aD,sD,rD,oD,lD,cD],e.dispatch("uiRegister"),this.uiElementsData.sort((t,i)=>(t.order||0)-(i.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(t=>{this.registerElement(t)}),e.on("change",()=>{var t;(t=e.element)===null||t===void 0||t.classList.toggle("pswp--one-slide",e.getNumItems()===1)}),e.on("zoomPanUpdate",()=>this.At())}registerElement(e){this.isRegistered?this.items.push(new nD(this.pswp,e)):this.uiElementsData.push(e)}At(){const{template:e,currSlide:t,options:i}=this.pswp;if(this.pswp.opener.isClosing||!e||!t)return;let{currZoomLevel:n}=t;if(this.pswp.opener.isOpen||(n=t.zoomLevels.initial),n===this.Tt)return;this.Tt=n;const r=t.zoomLevels.initial-t.zoomLevels.secondary;if(Math.abs(r)<.01||!t.isZoomable())return Ow(e,!1),void e.classList.remove("pswp--zoom-allowed");e.classList.add("pswp--zoom-allowed"),Ow(e,(n===t.zoomLevels.initial?t.zoomLevels.secondary:t.zoomLevels.initial)<=n),i.imageClickAction!=="zoom"&&i.imageClickAction!=="zoom-or-close"||e.classList.add("pswp--click-to-zoom")}}class dD{constructor(e,t){this.type=e,this.defaultPrevented=!1,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}}class uD{constructor(e,t){if(this.element=bn("pswp__img pswp__img--placeholder",e?"img":"div",t),e){const i=this.element;i.decoding="async",i.alt="",i.src=e,i.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,t){this.element&&(this.element.tagName==="IMG"?(mf(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Xl(0,0,e/250)):mf(this.element,e,t))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class pD{constructor(e,t,i){this.instance=t,this.data=e,this.index=i,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=QL,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{const i=this.instance.applyFilters("placeholderSrc",!(!this.data.msrc||!this.slide.isFirstSlide)&&this.data.msrc,this);this.placeholder=new uD(i,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=bn("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=bn("pswp__content","div"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var t,i;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const n=this.element;this.updateSrcsetSizes(),this.data.srcset&&(n.srcset=this.data.srcset),n.src=(t=this.data.src)!==null&&t!==void 0?t:"",n.alt=(i=this.data.alt)!==null&&i!==void 0?i:"",this.state=Pw,n.complete?this.onLoaded():(n.onload=()=>{this.onLoaded()},n.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=_m,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),this.state!==_m&&this.state!==ro||this.removePlaceholder())}onError(){this.state=ro,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===Pw,this)}isError(){return this.state===ro}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(mf(this.element,e,t),this.isImageContent()&&!this.isError()))){const i=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==ro,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented||(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,t;let i=bn("pswp__error-msg","div");i.innerText=(e=(t=this.instance.options)===null||t===void 0?void 0:t.errorMsg)!==null&&e!==void 0?e:"",i=this.instance.applyFilters("contentErrorElement",i,this),this.element=bn("pswp__content pswp__error-msg-container","div"),this.element.appendChild(i),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===ro)return void this.displayError();if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Nw())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){!this.instance.dispatch("contentActivate",{content:this}).defaultPrevented&&this.slide&&(this.isImageContent()&&this.isDecoding&&!Nw()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,this.instance.dispatch("contentRemove",{content:this}).defaultPrevented||(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),this.state!==_m&&this.state!==ro||this.removePlaceholder()))}}function hx(s,e,t){const i=e.createContentFromData(s,t);let n;const{options:r}=e;if(r){let a;n=new lx(r,s,-1),a=e.pswp?e.pswp.viewportSize:ax(r,e);const o=ox(r,a,s,t);n.update(i.width,i.height,o)}return i.lazyLoad(),n&&i.setDisplayedSize(Math.ceil(i.width*n.initial),Math.ceil(i.height*n.initial)),i}class mD{constructor(e){this.pswp=e,this.limit=Math.max(e.options.preload[0]+e.options.preload[1]+1,5),this.Dt=[]}updateLazy(e){const{pswp:t}=this;if(t.dispatch("lazyLoad").defaultPrevented)return;const{preload:i}=t.options,n=e===void 0||e>=0;let r;for(r=0;r<=i[1];r++)this.loadSlideByIndex(t.currIndex+(n?r:-r));for(r=1;r<=i[0];r++)this.loadSlideByIndex(t.currIndex+(n?-r:r))}loadSlideByIndex(e){const t=this.pswp.getLoopedIndex(e);let i=this.getContentByIndex(t);i||(i=function(n,r){const a=r.getItemData(n);if(!r.dispatch("lazyLoadSlide",{index:n,itemData:a}).defaultPrevented)return hx(a,r,n)}(t,this.pswp),i&&this.addToCache(i))}getContentBySlide(e){let t=this.getContentByIndex(e.index);return t||(t=this.pswp.createContentFromData(e.data,e.index),this.addToCache(t)),t.setSlide(e),t}addToCache(e){if(this.removeByIndex(e.index),this.Dt.push(e),this.Dt.length>this.limit){const t=this.Dt.findIndex(i=>!i.isAttached&&!i.hasSlide);t!==-1&&this.Dt.splice(t,1)[0].destroy()}}removeByIndex(e){const t=this.Dt.findIndex(i=>i.index===e);t!==-1&&this.Dt.splice(t,1)}getContentByIndex(e){return this.Dt.find(t=>t.index===e)}destroy(){this.Dt.forEach(e=>e.destroy()),this.Dt=[]}}class fD{constructor(e){this.pswp=e,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this.It=void 0,this.Et=!1,this.Lt=!1,this.kt=!1,this.Zt=!1,this.Bt=void 0,this.Ft=void 0,this.Ot=void 0,this.Rt=void 0,this.Nt=void 0,this.Ut=this.Ut.bind(this),e.on("firstZoomPan",this.Ut)}open(){this.Ut(),this.Pt()}close(){if(this.isClosed||this.isClosing||this.isOpening)return;const e=this.pswp.currSlide;this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this.It=this.pswp.options.hideAnimationDuration,e&&e.currZoomLevel*e.width>=this.pswp.options.maxWidthToAnimate&&(this.It=0),this.Vt(),setTimeout(()=>{this.Pt()},this.Lt?30:0)}Ut(){if(this.pswp.off("firstZoomPan",this.Ut),!this.isOpening){const e=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this.It=this.pswp.options.showAnimationDuration,e&&e.zoomLevels.initial*e.width>=this.pswp.options.maxWidthToAnimate&&(this.It=0),this.Vt()}}Vt(){const{pswp:e}=this,t=this.pswp.currSlide,{options:i}=e;var n,r;if(i.showHideAnimationType==="fade"?(i.showHideOpacity=!0,this.Nt=void 0):i.showHideAnimationType==="none"?(i.showHideOpacity=!1,this.It=0,this.Nt=void 0):this.isOpening&&e.Gt?this.Nt=e.Gt:this.Nt=this.pswp.getThumbBounds(),this.Bt=t==null?void 0:t.getPlaceholderElement(),e.animations.stopAll(),this.Et=!!(this.It&&this.It>50),this.$t=!!this.Nt&&(t==null?void 0:t.content.usePlaceholder())&&(!this.isClosing||!e.mainScroll.isShifted()),this.$t?this.kt=(n=i.showHideOpacity)!==null&&n!==void 0&&n:(this.kt=!0,this.isOpening&&t&&(t.zoomAndPanToInitial(),t.applyCurrentZoomPan())),this.Zt=!this.kt&&this.pswp.options.bgOpacity>.003,this.Ft=this.kt?e.element:e.bg,!this.Et)return this.It=0,this.$t=!1,this.Zt=!1,this.kt=!0,void(this.isOpening&&(e.element&&(e.element.style.opacity=String(.003)),e.applyBgOpacity(1)));this.$t&&this.Nt&&this.Nt.innerRect?(this.Lt=!0,this.Ot=this.pswp.container,this.Rt=(r=this.pswp.currSlide)===null||r===void 0?void 0:r.holderElement,e.container&&(e.container.style.overflow="hidden",e.container.style.width=e.viewportSize.x+"px")):this.Lt=!1,this.isOpening?(this.kt?(e.element&&(e.element.style.opacity=String(.003)),e.applyBgOpacity(1)):(this.Zt&&e.bg&&(e.bg.style.opacity=String(.003)),e.element&&(e.element.style.opacity="1")),this.$t&&(this.qt(),this.Bt&&(this.Bt.style.willChange="transform",this.Bt.style.opacity=String(.003)))):this.isClosing&&(e.mainScroll.itemHolders[0]&&(e.mainScroll.itemHolders[0].el.style.display="none"),e.mainScroll.itemHolders[2]&&(e.mainScroll.itemHolders[2].el.style.display="none"),this.Lt&&e.mainScroll.x!==0&&(e.mainScroll.resetPosition(),e.mainScroll.resize()))}Pt(){this.isOpening&&this.Et&&this.Bt&&this.Bt.tagName==="IMG"?new Promise(e=>{let t=!1,i=!0;var n;(n=this.Bt,"decode"in n?n.decode().catch(()=>{}):n.complete?Promise.resolve(n):new Promise((r,a)=>{n.onload=()=>r(n),n.onerror=a})).finally(()=>{t=!0,i||e(!0)}),setTimeout(()=>{i=!1,t&&e(!0)},50),setTimeout(e,250)}).finally(()=>this.Ht()):this.Ht()}Ht(){var e,t;(e=this.pswp.element)===null||e===void 0||e.style.setProperty("--pswp-transition-duration",this.It+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),(t=this.pswp.element)===null||t===void 0||t.classList.toggle("pswp--ui-visible",this.isOpening),this.isOpening?(this.Bt&&(this.Bt.style.opacity="1"),this.Kt()):this.isClosing&&this.Wt(),this.Et||this.jt()}jt(){const{pswp:e}=this;if(this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,e.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),e.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed)e.destroy();else if(this.isOpen){var t;this.$t&&e.container&&(e.container.style.overflow="visible",e.container.style.width="100%"),(t=e.currSlide)===null||t===void 0||t.applyCurrentZoomPan()}}Kt(){const{pswp:e}=this;this.$t&&(this.Lt&&this.Ot&&this.Rt&&(this.Xt(this.Ot,"transform","translate3d(0,0,0)"),this.Xt(this.Rt,"transform","none")),e.currSlide&&(e.currSlide.zoomAndPanToInitial(),this.Xt(e.currSlide.container,"transform",e.currSlide.getCurrentTransform()))),this.Zt&&e.bg&&this.Xt(e.bg,"opacity",String(e.options.bgOpacity)),this.kt&&e.element&&this.Xt(e.element,"opacity","1")}Wt(){const{pswp:e}=this;this.$t&&this.qt(!0),this.Zt&&e.bgOpacity>.01&&e.bg&&this.Xt(e.bg,"opacity","0"),this.kt&&e.element&&this.Xt(e.element,"opacity","0")}qt(e){if(!this.Nt)return;const{pswp:t}=this,{innerRect:i}=this.Nt,{currSlide:n,viewportSize:r}=t;if(this.Lt&&i&&this.Ot&&this.Rt){const a=-r.x+(this.Nt.x-i.x)+i.w,o=-r.y+(this.Nt.y-i.y)+i.h,c=r.x-i.w,h=r.y-i.h;e?(this.Xt(this.Ot,"transform",Xl(a,o)),this.Xt(this.Rt,"transform",Xl(c,h))):(na(this.Ot,a,o),na(this.Rt,c,h))}n&&(Si(n.pan,i||this.Nt),n.currZoomLevel=this.Nt.w/n.width,e?this.Xt(n.container,"transform",n.getCurrentTransform()):n.applyCurrentZoomPan())}Xt(e,t,i){if(!this.It)return void(e.style[t]=i);const{animations:n}=this.pswp,r={duration:this.It,easing:this.pswp.options.easing,onComplete:()=>{n.activeAnimations.length||this.jt()},target:e};r[t]=i,n.startTransition(r)}}const gD={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,trapFocus:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"};class ao extends class extends class{constructor(){this.Yt={},this.Jt={},this.pswp=void 0,this.options=void 0}addFilter(e,t,i=100){var n,r,a;this.Jt[e]||(this.Jt[e]=[]),(n=this.Jt[e])===null||n===void 0||n.push({fn:t,priority:i}),(r=this.Jt[e])===null||r===void 0||r.sort((o,c)=>o.priority-c.priority),(a=this.pswp)===null||a===void 0||a.addFilter(e,t,i)}removeFilter(e,t){this.Jt[e]&&(this.Jt[e]=this.Jt[e].filter(i=>i.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){var i;return(i=this.Jt[e])===null||i===void 0||i.forEach(n=>{t[0]=n.fn.apply(this,t)}),t[0]}on(e,t){var i,n;this.Yt[e]||(this.Yt[e]=[]),(i=this.Yt[e])===null||i===void 0||i.push(t),(n=this.pswp)===null||n===void 0||n.on(e,t)}off(e,t){var i;this.Yt[e]&&(this.Yt[e]=this.Yt[e].filter(n=>t!==n)),(i=this.pswp)===null||i===void 0||i.off(e,t)}dispatch(e,t){var i;if(this.pswp)return this.pswp.dispatch(e,t);const n=new dD(e,t);return(i=this.Yt[e])===null||i===void 0||i.forEach(r=>{r.call(this,n)}),n}}{getNumItems(){var e;let t=0;const i=(e=this.options)===null||e===void 0?void 0:e.dataSource;i&&"length"in i?t=i.length:i&&"gallery"in i&&(i.items||(i.items=this.Qt(i.gallery)),i.items&&(t=i.items.length));const n=this.dispatch("numItems",{dataSource:i,numItems:t});return this.applyFilters("numItems",n.numItems,i)}createContentFromData(e,t){return new pD(e,this,t)}getItemData(e){var t;const i=(t=this.options)===null||t===void 0?void 0:t.dataSource;let n={};Array.isArray(i)?n=i[e]:i&&"gallery"in i&&(i.items||(i.items=this.Qt(i.gallery)),n=i.items[e]);let r=n;r instanceof Element&&(r=this.ti(r));const a=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",a.itemData,e)}Qt(e){var t,i;return(t=this.options)!==null&&t!==void 0&&t.children||(i=this.options)!==null&&i!==void 0&&i.childSelector?function(n,r,a=document){let o=[];if(n instanceof Element)o=[n];else if(n instanceof NodeList||Array.isArray(n))o=Array.from(n);else{const c=typeof n=="string"?n:r;c&&(o=Array.from(a.querySelectorAll(c)))}return o}(this.options.children,this.options.childSelector,e)||[]:[e]}ti(e){const t={element:e},i=e.tagName==="A"?e:e.querySelector("a");if(i){t.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(t.srcset=i.dataset.pswpSrcset),t.width=i.dataset.pswpWidth?parseInt(i.dataset.pswpWidth,10):0,t.height=i.dataset.pswpHeight?parseInt(i.dataset.pswpHeight,10):0,t.w=t.width,t.h=t.height,i.dataset.pswpType&&(t.type=i.dataset.pswpType);const r=e.querySelector("img");var n;r&&(t.msrc=r.currentSrc||r.src,t.alt=(n=r.getAttribute("alt"))!==null&&n!==void 0?n:""),(i.dataset.pswpCropped||i.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,i)}lazyLoadData(e,t){return hx(e,this,t)}}{constructor(e){super(),this.options=this.ii(e||{}),this.offset={x:0,y:0},this.si={x:0,y:0},this.viewportSize={x:0,y:0},this.bgOpacity=1,this.currIndex=0,this.potentialIndex=0,this.isOpen=!1,this.isDestroying=!1,this.hasMouse=!1,this.hi={},this.Gt=void 0,this.topBar=void 0,this.element=void 0,this.template=void 0,this.container=void 0,this.scrollWrap=void 0,this.currSlide=void 0,this.events=new zL,this.animations=new tD,this.mainScroll=new jL(this),this.gestures=new qL(this),this.opener=new fD(this),this.keyboard=new YL(this),this.contentLoader=new mD(this)}init(){if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this.ei();let e="pswp--open";return this.gestures.supportsTouch&&(e+=" pswp--touch"),this.options.mainClass&&(e+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+e),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new iD(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this.hi=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this.hi,slide:void 0}),this.Gt=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{const{itemHolders:t}=this.mainScroll;t[0]&&(t[0].el.style.display="block",this.setContent(t[0],this.currIndex-1)),t[2]&&(t[2].el.style.display="block",this.setContent(t[2],this.currIndex+1)),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this.ni.bind(this)),this.events.add(window,"scroll",this.oi.bind(this)),this.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(e){const t=this.getNumItems();return this.options.loop&&(e>t-1&&(e-=t),e<0&&(e+=t)),lc(e,0,t-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(e=>{var t;(t=e.slide)===null||t===void 0||t.appendHeavy()})}goTo(e){this.mainScroll.moveIndexBy(this.getLoopedIndex(e)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...e){var t;(t=this.currSlide)===null||t===void 0||t.zoomTo(...e)}toggleZoom(){var e;(e=this.currSlide)===null||e===void 0||e.toggleZoom()}close(){this.opener.isOpen&&!this.isDestroying&&(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){var e;if(!this.isDestroying)return this.options.showHideAnimationType="none",void this.close();this.dispatch("destroy"),this.Yt={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),(e=this.element)===null||e===void 0||e.remove(),this.mainScroll.itemHolders.forEach(t=>{var i;(i=t.slide)===null||i===void 0||i.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(e){this.contentLoader.removeByIndex(e),this.mainScroll.itemHolders.forEach((t,i)=>{var n,r;let a=((n=(r=this.currSlide)===null||r===void 0?void 0:r.index)!==null&&n!==void 0?n:0)-1+i;var o;this.canLoop()&&(a=this.getLoopedIndex(a)),a===e&&(this.setContent(t,e,!0),i===1&&(this.currSlide=t.slide,(o=t.slide)===null||o===void 0||o.setIsActive(!0)))}),this.dispatch("change")}setContent(e,t,i){if(this.canLoop()&&(t=this.getLoopedIndex(t)),e.slide){if(e.slide.index===t&&!i)return;e.slide.destroy(),e.slide=void 0}if(!this.canLoop()&&(t<0||t>=this.getNumItems()))return;const n=this.getItemData(t);e.slide=new GL(n,t,this),t===this.currIndex&&(this.currSlide=e.slide),e.slide.append(e.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(e){if(this.isDestroying)return;const t=ax(this.options,this);!e&&Ul(t,this.si)||(Si(this.si,t),this.dispatch("beforeResize"),Si(this.viewportSize,this.si),this.oi(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(e){this.bgOpacity=Math.max(e,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}mouseDetected(){var e;this.hasMouse||(this.hasMouse=!0,(e=this.element)===null||e===void 0||e.classList.add("pswp--has_mouse"))}ni(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}oi(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(e,t){this.offset.x=e,this.offset.y=t,this.dispatch("updateScrollOffset")}ei(){this.element=bn("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=bn("pswp__bg","div",this.element),this.scrollWrap=bn("pswp__scroll-wrap","section",this.element),this.container=bn("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new hD(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return function(e,t,i){const n=i.dispatch("thumbBounds",{index:e,itemData:t,instance:i});if(n.thumbBounds)return n.thumbBounds;const{element:r}=t;let a,o;if(r&&i.options.thumbSelector!==!1){const c=i.options.thumbSelector||"img";o=r.matches(c)?r:r.querySelector(c)}return o=i.applyFilters("thumbEl",o,t,e),o&&(a=t.thumbCropped?function(c,h,d){const u=c.getBoundingClientRect(),m=u.width/h,g=u.height/d,y=m>g?m:g,E=(u.width-h*y)/2,b=(u.height-d*y)/2,C={x:u.left+E,y:u.top+b,w:h*y};return C.innerRect={w:u.width,h:u.height,x:E,y:b},C}(o,t.width||t.w||0,t.height||t.h||0):function(c){const h=c.getBoundingClientRect();return{x:h.left,y:h.top,w:h.width}}(o)),i.applyFilters("thumbBounds",a,t,e)}(this.currIndex,this.currSlide?this.currSlide.data:this.hi,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}ii(e){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(e.showHideAnimationType="none",e.zoomAnimationDuration=0),{...gD,...e}}}if($(".thumbs-slider").length>0){let s=function(t){$(".color-btn").removeClass("active");var i=$(".tf-product-media-main .swiper-slide").eq(t),n=i.data("color");n&&($(".color-btn[data-color='"+n+"']").addClass("active"),$(".value-currentColor").text(n),$(".select-currentColor").text(n))},e=function(t){var i=$(".tf-product-media-main .swiper-slide").filter(function(){return $(this).data("color")===t});if(i.length>0){var n=i.first().index();vn.slideTo(n,1e3,!1),ws.slideTo(n,1e3,!1)}};var CD=s,ID=e,qs=$(".tf-product-media-thumbs").data("direction"),ws=new Swiper(".tf-product-media-thumbs",{spaceBetween:10,slidesPerView:"auto",freeMode:!0,direction:"vertical",watchSlidesProgress:!0,observer:!0,observeParents:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:qs}},450:{direction:"vertical"}}),vn=new Swiper(".tf-product-media-main",{spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".thumbs-next",prevEl:".thumbs-prev"},thumbs:{swiper:ws}});vn.on("slideChange",function(){s(this.activeIndex)}),$(".color-btn").on("click",function(){var t=$(this).data("color");$(".color-btn").removeClass("active"),$(this).addClass("active"),e(t)}),s(vn.activeIndex)}if($(".thumbs-slider1").length>0)var qs=$(".tf-product-media-thumbs").data("direction"),ws=new Swiper(".tf-product-media-thumbs",{spaceBetween:10,slidesPerView:"auto",freeMode:!0,direction:"vertical",watchSlidesProgress:!0,observer:!0,observeParents:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:qs}},450:{direction:"vertical"}}),vn=new Swiper(".tf-product-media-main1",{spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".thumbs-next",prevEl:".thumbs-prev"},thumbs:{swiper:ws}});if($(".thumbs-slider2").length>0)var qs=$(".tf-product-media-thumbs").data("direction"),ws=new Swiper(".tf-product-media-thumbs",{spaceBetween:10,slidesPerView:"auto",freeMode:!0,direction:"vertical",watchSlidesProgress:!0,observer:!0,observeParents:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:qs}},450:{direction:"vertical"}}),vn=new Swiper(".tf-product-media-main2",{spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".thumbs-next",prevEl:".thumbs-prev"},thumbs:{swiper:ws}});if($(".thumbs-slider3").length>0)var qs=$(".tf-product-media-thumbs").data("direction"),ws=new Swiper(".tf-product-media-thumbs",{spaceBetween:10,slidesPerView:"auto",freeMode:!0,direction:"vertical",watchSlidesProgress:!0,observer:!0,observeParents:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:qs}},450:{direction:"vertical"}}),vn=new Swiper(".tf-product-media-main3",{spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".thumbs-next",prevEl:".thumbs-prev"},thumbs:{swiper:ws}});if($(".thumbs-slider4").length>0)var qs=$(".tf-product-media-thumbs").data("direction"),ws=new Swiper(".tf-product-media-thumbs",{spaceBetween:10,slidesPerView:"auto",freeMode:!0,direction:"vertical",watchSlidesProgress:!0,observer:!0,observeParents:!0,breakpoints:{0:{direction:"horizontal",slidesPerView:5},1150:{direction:"vertical",direction:qs}},450:{direction:"vertical"}}),vn=new Swiper(".tf-product-media-main4",{spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".thumbs-next",prevEl:".thumbs-prev"},thumbs:{swiper:ws}});(function(s){var e=function(){s(".tf-image-zoom").on("mouseover",function(){s(this).closest(".section-image-zoom").addClass("zoom-active")}),s(".tf-image-zoom").on("mouseleave",function(){s(this).closest(".section-image-zoom").removeClass("zoom-active")})},t=function(){if(matchMedia("only screen and (min-width: 768px)").matches){var m=document.querySelectorAll(".tf-image-zoom"),g=document.querySelector(".tf-zoom-main");s(m).each(function(y,E){new Drift(E,{zoomFactor:2,paneContainer:g,inlinePane:!1,handleTouch:!1,hoverBoundingBox:!0,containInline:!0})})}},i=function(){var m=document.querySelectorAll(".tf-image-zoom-magnifier");s(m).each(function(g,y){new Drift(y,{zoomFactor:2,inlinePane:!0,containInline:!1})})},n=function(){var m=document.querySelectorAll(".tf-image-zoom-inner"),g=document.querySelector(".tf-product-zoom-inner");s(m).each(function(y,E){new Drift(E,{paneContainer:g,zoomFactor:2,inlinePane:!1,containInline:!1})})},r=function(){const m=new so({gallery:"#gallery-swiper-started",children:"a",pswpModule:ao,bgOpacity:1,secondaryZoomLevel:2,maxZoomLevel:3});m.init(),m.on("change",()=>{const{pswp:g}=m;vn.slideTo(g.currIndex,0,!1)}),m.on("afterInit",()=>{vn.params.autoplay.enabled&&vn.autoplay.stop()}),m.on("closingAnimationStart",()=>{const{pswp:g}=m;vn.slideTo(g.currIndex,0,!1),vn.params.autoplay.enabled&&vn.autoplay.start()})},a=function(){new so({gallery:"#gallery-swiper-started1",children:"a",pswpModule:ao,bgOpacity:1,secondaryZoomLevel:2,maxZoomLevel:3}).init()},o=function(){new so({gallery:"#gallery-swiper-started2",children:"a",pswpModule:ao,bgOpacity:1,secondaryZoomLevel:2,maxZoomLevel:3}).init()},c=function(){new so({gallery:"#gallery-swiper-started3",children:"a",pswpModule:ao,bgOpacity:1,secondaryZoomLevel:2,maxZoomLevel:3}).init()},h=function(){new so({gallery:"#gallery-swiper-started4",children:"a",pswpModule:ao,bgOpacity:1,secondaryZoomLevel:2,maxZoomLevel:3}).init()},d=function(){new so({gallery:"#gallery-started",children:"a",pswpModule:ao,bgOpacity:1,secondaryZoomLevel:2,maxZoomLevel:3}).init()},u=function(){s(".tf-model-viewer").length&&(s(".tf-model-viewer-ui-button").on("click",function(m){s(this).closest(".tf-model-viewer").find("model-viewer").removeClass("disabled"),s(this).closest(".tf-model-viewer").toggleClass("active")}),s(".tf-model-viewer-ui").on("dblclick",function(m){s(this).closest(".tf-model-viewer").find("model-viewer").addClass("disabled"),s(this).closest(".tf-model-viewer").toggleClass("active")}))};s(function(){e(),t(),i(),n(),r(),a(),o(),c(),h(),d(),u()})})(jQuery)});export default AD();
